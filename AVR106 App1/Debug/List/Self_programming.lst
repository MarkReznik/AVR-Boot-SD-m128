
AVRASM ver. 2.1.30  F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm Tue Oct 15 08:34:36 2024

F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1100): warning: Register r4 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1101): warning: Register r5 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1102): warning: Register r7 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1103): warning: Register r8 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1104): warning: Register r9 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1105): warning: Register r10 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1106): warning: Register r11 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1107): warning: Register r12 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1108): warning: Register r13 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1109): warning: Register r6 already defined by the .DEF directive
                 
                 
                 ;CodeVisionAVR C Compiler V3.12 Advanced
                 ;(C) Copyright 1998-2014 Pavel Haiduc, HP InfoTech s.r.l.
                 ;http://www.hpinfotech.com
                 
                 ;Build configuration    : Debug
                 ;Chip type              : ATmega128
                 ;Program type           : Application
                 ;Clock frequency        : 10.000000 MHz
                 ;Memory model           : Medium
                 ;Optimize for           : Size
                 ;(s)printf features     : int, width
                 ;(s)scanf features      : int, width
                 ;External RAM size      : 0
                 ;Data Stack size        : 2080 byte(s)
                 ;Heap size              : 0 byte(s)
                 ;Promote 'char' to 'int': Yes
                 ;'char' is unsigned     : Yes
                 ;8 bit enums            : Yes
                 ;Global 'const' stored in FLASH: Yes
                 ;Enhanced function parameter passing: Yes
                 ;Enhanced core instructions: On
                 ;Automatic register allocation for global variables: On
                 ;Smart register allocation: On
                 
                 	#define _MODEL_MEDIUM_
                 
                 	#pragma AVRPART ADMIN PART_NAME ATmega128
                 	#pragma AVRPART MEMORY PROG_FLASH 131072
                 	#pragma AVRPART MEMORY EEPROM 4096
                 	#pragma AVRPART MEMORY INT_SRAM SIZE 4096
                 	#pragma AVRPART MEMORY INT_SRAM START_ADDR 0x100
                 
                 	#define CALL_SUPPORTED 1
                 
                 	.LISTMAC
                 	.EQU UDRE=0x5
                 	.EQU RXC=0x7
                 	.EQU USR=0xB
                 	.EQU UDR=0xC
                 	.EQU SPSR=0xE
                 	.EQU SPDR=0xF
                 	.EQU EERE=0x0
                 	.EQU EEWE=0x1
                 	.EQU EEMWE=0x2
                 	.EQU EECR=0x1C
                 	.EQU EEDR=0x1D
                 	.EQU EEARL=0x1E
                 	.EQU EEARH=0x1F
                 	.EQU WDTCR=0x21
                 	.EQU MCUCR=0x35
                 	.EQU RAMPZ=0x3B
                 	.EQU SPL=0x3D
                 	.EQU SPH=0x3E
                 	.EQU SREG=0x3F
                 	.EQU XMCRA=0x6D
                 	.EQU XMCRB=0x6C
                 
                 	.DEF R0X0=R0
                 	.DEF R0X1=R1
                 	.DEF R0X2=R2
                 	.DEF R0X3=R3
                 	.DEF R0X4=R4
                 	.DEF R0X5=R5
                 	.DEF R0X6=R6
                 	.DEF R0X7=R7
                 	.DEF R0X8=R8
                 	.DEF R0X9=R9
                 	.DEF R0XA=R10
                 	.DEF R0XB=R11
                 	.DEF R0XC=R12
                 	.DEF R0XD=R13
                 	.DEF R0XE=R14
                 	.DEF R0XF=R15
                 	.DEF R0X10=R16
                 	.DEF R0X11=R17
                 	.DEF R0X12=R18
                 	.DEF R0X13=R19
                 	.DEF R0X14=R20
                 	.DEF R0X15=R21
                 	.DEF R0X16=R22
                 	.DEF R0X17=R23
                 	.DEF R0X18=R24
                 	.DEF R0X19=R25
                 	.DEF R0X1A=R26
                 	.DEF R0X1B=R27
                 	.DEF R0X1C=R28
                 	.DEF R0X1D=R29
                 	.DEF R0X1E=R30
                 	.DEF R0X1F=R31
                 
                 	.EQU __SRAM_START=0x0100
                 	.EQU __SRAM_END=0x10FF
                 	.EQU __DSTACK_SIZE=0x0820
                 	.EQU __HEAP_SIZE=0x0000
                 	.EQU __CLEAR_SRAM_SIZE=__SRAM_END-__SRAM_START+1
                 
                 	.MACRO __CPD1N
                 	CPI  R30,LOW(@0)
                 	LDI  R26,HIGH(@0)
                 	CPC  R31,R26
                 	LDI  R26,BYTE3(@0)
                 	CPC  R22,R26
                 	LDI  R26,BYTE4(@0)
                 	CPC  R23,R26
                 	.ENDM
                 
                 	.MACRO __CPD2N
                 	CPI  R26,LOW(@0)
                 	LDI  R30,HIGH(@0)
                 	CPC  R27,R30
                 	LDI  R30,BYTE3(@0)
                 	CPC  R24,R30
                 	LDI  R30,BYTE4(@0)
                 	CPC  R25,R30
                 	.ENDM
                 
                 	.MACRO __CPWRR
                 	CP   R@0,R@2
                 	CPC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __CPWRN
                 	CPI  R@0,LOW(@2)
                 	LDI  R30,HIGH(@2)
                 	CPC  R@1,R30
                 	.ENDM
                 
                 	.MACRO __ADDB1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDB2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	SBCI R31,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	SBCI R27,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	SBCI R22,BYTE3(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1N
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	SBCI R22,BYTE3(-@0)
                 	SBCI R23,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __ADDD2N
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	SBCI R24,BYTE3(-@0)
                 	SBCI R25,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __SUBD1N
                 	SUBI R30,LOW(@0)
                 	SBCI R31,HIGH(@0)
                 	SBCI R22,BYTE3(@0)
                 	SBCI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __SUBD2N
                 	SUBI R26,LOW(@0)
                 	SBCI R27,HIGH(@0)
                 	SBCI R24,BYTE3(@0)
                 	SBCI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDBMNN
                 	LDS  R30,@0+(@1)
                 	ANDI R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __ANDWMNN
                 	LDS  R30,@0+(@1)
                 	ANDI R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	LDS  R30,@0+(@1)+1
                 	ANDI R30,HIGH(@2)
                 	STS  @0+(@1)+1,R30
                 	.ENDM
                 
                 	.MACRO __ANDD1N
                 	ANDI R30,LOW(@0)
                 	ANDI R31,HIGH(@0)
                 	ANDI R22,BYTE3(@0)
                 	ANDI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDD2N
                 	ANDI R26,LOW(@0)
                 	ANDI R27,HIGH(@0)
                 	ANDI R24,BYTE3(@0)
                 	ANDI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORBMNN
                 	LDS  R30,@0+(@1)
                 	ORI  R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __ORWMNN
                 	LDS  R30,@0+(@1)
                 	ORI  R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	LDS  R30,@0+(@1)+1
                 	ORI  R30,HIGH(@2)
                 	STS  @0+(@1)+1,R30
                 	.ENDM
                 
                 	.MACRO __ORD1N
                 	ORI  R30,LOW(@0)
                 	ORI  R31,HIGH(@0)
                 	ORI  R22,BYTE3(@0)
                 	ORI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORD2N
                 	ORI  R26,LOW(@0)
                 	ORI  R27,HIGH(@0)
                 	ORI  R24,BYTE3(@0)
                 	ORI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __DELAY_USB
                 	LDI  R24,LOW(@0)
                 __DELAY_USB_LOOP:
                 	DEC  R24
                 	BRNE __DELAY_USB_LOOP
                 	.ENDM
                 
                 	.MACRO __DELAY_USW
                 	LDI  R24,LOW(@0)
                 	LDI  R25,HIGH(@0)
                 __DELAY_USW_LOOP:
                 	SBIW R24,1
                 	BRNE __DELAY_USW_LOOP
                 	.ENDM
                 
                 	.MACRO __GETD1S
                 	LDD  R30,Y+@0
                 	LDD  R31,Y+@0+1
                 	LDD  R22,Y+@0+2
                 	LDD  R23,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __GETD2S
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	LDD  R24,Y+@0+2
                 	LDD  R25,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __PUTD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R31
                 	STD  Y+@0+2,R22
                 	STD  Y+@0+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTD2S
                 	STD  Y+@0,R26
                 	STD  Y+@0+1,R27
                 	STD  Y+@0+2,R24
                 	STD  Y+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __PUTDZ2
                 	STD  Z+@0,R26
                 	STD  Z+@0+1,R27
                 	STD  Z+@0+2,R24
                 	STD  Z+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __CLRD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R30
                 	STD  Y+@0+2,R30
                 	STD  Y+@0+3,R30
                 	.ENDM
                 
                 	.MACRO __POINTB1MN
                 	LDI  R30,LOW(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW1MN
                 	LDI  R30,LOW(@0+(@1))
                 	LDI  R31,HIGH(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD1M
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __POINTW1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	LDI  R22,BYTE3(2*@0+(@1))
                 	LDI  R23,BYTE4(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTB2MN
                 	LDI  R26,LOW(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW2MN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW2FN
                 	LDI  R26,LOW(2*@0+(@1))
                 	LDI  R27,HIGH(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD2FN
                 	LDI  R26,LOW(2*@0+(@1))
                 	LDI  R27,HIGH(2*@0+(@1))
                 	LDI  R24,BYTE3(2*@0+(@1))
                 	LDI  R25,BYTE4(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTBRM
                 	LDI  R@0,LOW(@1)
                 	.ENDM
                 
                 	.MACRO __POINTWRM
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __POINTBRMN
                 	LDI  R@0,LOW(@1+(@2))
                 	.ENDM
                 
                 	.MACRO __POINTWRMN
                 	LDI  R@0,LOW(@2+(@3))
                 	LDI  R@1,HIGH(@2+(@3))
                 	.ENDM
                 
                 	.MACRO __POINTWRFN
                 	LDI  R@0,LOW(@2*2+(@3))
                 	LDI  R@1,HIGH(@2*2+(@3))
                 	.ENDM
                 
                 	.MACRO __GETD1N
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETD2N
                 	LDI  R26,LOW(@0)
                 	LDI  R27,HIGH(@0)
                 	LDI  R24,BYTE3(@0)
                 	LDI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETB1MN
                 	LDS  R30,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETB1HMN
                 	LDS  R31,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETW1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	.ENDM
                 
                 	.MACRO __GETD1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	LDS  R22,@0+(@1)+2
                 	LDS  R23,@0+(@1)+3
                 	.ENDM
                 
                 	.MACRO __GETBRMN
                 	LDS  R@0,@1+(@2)
                 	.ENDM
                 
                 	.MACRO __GETWRMN
                 	LDS  R@0,@2+(@3)
                 	LDS  R@1,@2+(@3)+1
                 	.ENDM
                 
                 	.MACRO __GETWRZ
                 	LDD  R@0,Z+@2
                 	LDD  R@1,Z+@2+1
                 	.ENDM
                 
                 	.MACRO __GETD2Z
                 	LDD  R26,Z+@0
                 	LDD  R27,Z+@0+1
                 	LDD  R24,Z+@0+2
                 	LDD  R25,Z+@0+3
                 	.ENDM
                 
                 	.MACRO __GETB2MN
                 	LDS  R26,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETW2MN
                 	LDS  R26,@0+(@1)
                 	LDS  R27,@0+(@1)+1
                 	.ENDM
                 
                 	.MACRO __GETD2MN
                 	LDS  R26,@0+(@1)
                 	LDS  R27,@0+(@1)+1
                 	LDS  R24,@0+(@1)+2
                 	LDS  R25,@0+(@1)+3
                 	.ENDM
                 
                 	.MACRO __PUTB1MN
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __PUTW1MN
                 	STS  @0+(@1),R30
                 	STS  @0+(@1)+1,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1MN
                 	STS  @0+(@1),R30
                 	STS  @0+(@1)+1,R31
                 	STS  @0+(@1)+2,R22
                 	STS  @0+(@1)+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTB1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMWRB
                 	.ENDM
                 
                 	.MACRO __PUTW1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMWRW
                 	.ENDM
                 
                 	.MACRO __PUTD1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMWRD
                 	.ENDM
                 
                 	.MACRO __PUTBR0MN
                 	STS  @0+(@1),R0
                 	.ENDM
                 
                 	.MACRO __PUTBMRN
                 	STS  @0+(@1),R@2
                 	.ENDM
                 
                 	.MACRO __PUTWMRN
                 	STS  @0+(@1),R@2
                 	STS  @0+(@1)+1,R@3
                 	.ENDM
                 
                 	.MACRO __PUTBZR
                 	STD  Z+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWZR
                 	STD  Z+@2,R@0
                 	STD  Z+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __GETW1R
                 	MOV  R30,R@0
                 	MOV  R31,R@1
                 	.ENDM
                 
                 	.MACRO __GETW2R
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	.ENDM
                 
                 	.MACRO __GETWRN
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __PUTW1R
                 	MOV  R@0,R30
                 	MOV  R@1,R31
                 	.ENDM
                 
                 	.MACRO __PUTW2R
                 	MOV  R@0,R26
                 	MOV  R@1,R27
                 	.ENDM
                 
                 	.MACRO __ADDWRN
                 	SUBI R@0,LOW(-@2)
                 	SBCI R@1,HIGH(-@2)
                 	.ENDM
                 
                 	.MACRO __ADDWRR
                 	ADD  R@0,R@2
                 	ADC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __SUBWRN
                 	SUBI R@0,LOW(@2)
                 	SBCI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __SUBWRR
                 	SUB  R@0,R@2
                 	SBC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ANDWRN
                 	ANDI R@0,LOW(@2)
                 	ANDI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ANDWRR
                 	AND  R@0,R@2
                 	AND  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ORWRN
                 	ORI  R@0,LOW(@2)
                 	ORI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ORWRR
                 	OR   R@0,R@2
                 	OR   R@1,R@3
                 	.ENDM
                 
                 	.MACRO __EORWRR
                 	EOR  R@0,R@2
                 	EOR  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __GETWRS
                 	LDD  R@0,Y+@2
                 	LDD  R@1,Y+@2+1
                 	.ENDM
                 
                 	.MACRO __PUTBSR
                 	STD  Y+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWSR
                 	STD  Y+@2,R@0
                 	STD  Y+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __MOVEWRR
                 	MOV  R@0,R@2
                 	MOV  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __INWR
                 	IN   R@0,@2
                 	IN   R@1,@2+1
                 	.ENDM
                 
                 	.MACRO __OUTWR
                 	OUT  @2+1,R@1
                 	OUT  @2,R@0
                 	.ENDM
                 
                 	.MACRO __GETBRPF
                 	OUT  RAMPZ,R22
                 	ELPM R@0,Z
                 	.ENDM
                 
                 	.MACRO __GETBRPF_INC
                 	OUT  RAMPZ,R22
                 	ELPM R@0,Z+
                 	.ENDM
                 
                 	.MACRO __CALL1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	CALL __GETW1PF
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL2EN
                 	PUSH R26
                 	PUSH R27
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMRDW
                 	POP  R27
                 	POP  R26
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL2EX
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	CALL __EEPROMRDD
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __GETW1STACK
                 	IN   R30,SPL
                 	IN   R31,SPH
                 	ADIW R30,@0+1
                 	LD   R0,Z+
                 	LD   R31,Z
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __GETD1STACK
                 	IN   R30,SPL
                 	IN   R31,SPH
                 	ADIW R30,@0+1
                 	LD   R0,Z+
                 	LD   R1,Z+
                 	LD   R22,Z
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __NBST
                 	BST  R@0,@1
                 	IN   R30,SREG
                 	LDI  R31,0x40
                 	EOR  R30,R31
                 	OUT  SREG,R30
                 	.ENDM
                 
                 
                 	.MACRO __PUTB1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	CALL __PUTDP1
                 	.ENDM
                 
                 
                 	.MACRO __GETB1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R30,Z
                 	.ENDM
                 
                 	.MACRO __GETB1HSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	.ENDM
                 
                 	.MACRO __GETW1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R31,Z
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __GETD1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R1,Z+
                 	LD   R22,Z+
                 	LD   R23,Z
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __GETB2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R26,X
                 	.ENDM
                 
                 	.MACRO __GETW2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	.ENDM
                 
                 	.MACRO __GETD2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R1,X+
                 	LD   R24,X+
                 	LD   R25,X
                 	MOVW R26,R0
                 	.ENDM
                 
                 	.MACRO __GETBRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	LD   R@0,Z
                 	.ENDM
                 
                 	.MACRO __GETWRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	LD   R@0,Z+
                 	LD   R@1,Z
                 	.ENDM
                 
                 	.MACRO __GETBRSX2
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	LD   R@0,X
                 	.ENDM
                 
                 	.MACRO __GETWRSX2
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	LD   R@0,X+
                 	LD   R@1,X
                 	.ENDM
                 
                 	.MACRO __LSLW8SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	CLR  R30
                 	.ENDM
                 
                 	.MACRO __PUTB1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __CLRW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __CLRD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R30
                 	ST   X+,R30
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTB2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z,R26
                 	.ENDM
                 
                 	.MACRO __PUTW2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z,R27
                 	.ENDM
                 
                 	.MACRO __PUTD2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z+,R27
                 	ST   Z+,R24
                 	ST   Z,R25
                 	.ENDM
                 
                 	.MACRO __PUTBSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	ST   Z,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	ST   Z+,R@0
                 	ST   Z,R@1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __MULBRR
                 	MULS R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRRU
                 	MUL  R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRR0
                 	MULS R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBRRU0
                 	MUL  R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBNWRU
                 	LDI  R26,@2
                 	MUL  R26,R@0
                 	MOVW R30,R0
                 	MUL  R26,R@1
                 	ADD  R31,R0
                 	.ENDM
                 
                 ;NAME DEFINITIONS FOR GLOBAL VARIABLES ALLOCATED TO REGISTERS
                 	.DEF _retry=R4
                 	.DEF _retry_msb=R5
                 	.DEF _res=R7
                 	.DEF _nbytes=R8
                 	.DEF _nbytes_msb=R9
                 	.DEF ___AddrToZ24WordToR1R0ByteToSPMCR_SPM_F=R10
                 	.DEF ___AddrToZ24WordToR1R0ByteToSPMCR_SPM_F_msb=R11
                 	.DEF ___AddrToZ24ByteToSPMCR_SPM_W=R12
                 	.DEF ___AddrToZ24ByteToSPMCR_SPM_W_msb=R13
                 	.DEF __lcd_x=R6
                 
                 	.CSEG
                 	.ORG 0x00
                 
                 ;START OF CODE MARKER
                 __START_OF_CODE:
                 
                 ;INTERRUPT VECTORS
000000 940c 01de 	JMP  __RESET
000002 940c 0000 	JMP  0x00
000004 940c 0000 	JMP  0x00
000006 940c 0000 	JMP  0x00
000008 940c 0000 	JMP  0x00
00000a 940c 0000 	JMP  0x00
00000c 940c 0000 	JMP  0x00
00000e 940c 0000 	JMP  0x00
000010 940c 0000 	JMP  0x00
000012 940c 0000 	JMP  0x00
000014 940c 0000 	JMP  0x00
000016 940c 0000 	JMP  0x00
000018 940c 0000 	JMP  0x00
00001a 940c 0000 	JMP  0x00
00001c 940c 0000 	JMP  0x00
00001e 940c 0000 	JMP  0x00
000020 940c 0000 	JMP  0x00
000022 940c 0000 	JMP  0x00
000024 940c 0000 	JMP  0x00
000026 940c 0000 	JMP  0x00
000028 940c 0000 	JMP  0x00
00002a 940c 0000 	JMP  0x00
00002c 940c 0000 	JMP  0x00
00002e 940c 0000 	JMP  0x00
000030 940c 0000 	JMP  0x00
000032 940c 0000 	JMP  0x00
000034 940c 0000 	JMP  0x00
000036 940c 0000 	JMP  0x00
000038 940c 0000 	JMP  0x00
00003a 940c 0000 	JMP  0x00
00003c 940c 0000 	JMP  0x00
00003e 940c 0000 	JMP  0x00
000040 940c 0000 	JMP  0x00
000042 940c 0000 	JMP  0x00
000044 940c 0000 	JMP  0x00
                 
                 _error_msg:
000046 017c
000047 0000
000048 017d
000049 0000      	.DB  LOW(_0x0*2),HIGH(_0x0*2),BYTE3(_0x0*2),BYTE4(_0x0*2),LOW(_0x0*2+1),HIGH(_0x0*2+1),BYTE3(_0x0*2+1),BYTE4(_0x0*2+1)
00004a 0189
00004b 0000
00004c 0189
00004d 0000      	.DB  LOW(_0x0*2+13),HIGH(_0x0*2+13),BYTE3(_0x0*2+13),BYTE4(_0x0*2+13),LOW(_0x0*2+13),HIGH(_0x0*2+13),BYTE3(_0x0*2+13),BYTE4(_0x0*2+13)
00004e 0194
00004f 0000
000050 01a1
000051 0000      	.DB  LOW(_0x0*2+24),HIGH(_0x0*2+24),BYTE3(_0x0*2+24),BYTE4(_0x0*2+24),LOW(_0x0*2+37),HIGH(_0x0*2+37),BYTE3(_0x0*2+37),BYTE4(_0x0*2+37)
000052 01ac
000053 0000
000054 01b7
000055 0000      	.DB  LOW(_0x0*2+48),HIGH(_0x0*2+48),BYTE3(_0x0*2+48),BYTE4(_0x0*2+48),LOW(_0x0*2+59),HIGH(_0x0*2+59),BYTE3(_0x0*2+59),BYTE4(_0x0*2+59)
000056 01c7
000057 0000
000058 01d1
000059 0000      	.DB  LOW(_0x0*2+75),HIGH(_0x0*2+75),BYTE3(_0x0*2+75),BYTE4(_0x0*2+75),LOW(_0x0*2+85),HIGH(_0x0*2+85),BYTE3(_0x0*2+85),BYTE4(_0x0*2+85)
00005a 01da
00005b 0000
00005c 01ec
00005d 0000      	.DB  LOW(_0x0*2+94),HIGH(_0x0*2+94),BYTE3(_0x0*2+94),BYTE4(_0x0*2+94),LOW(_0x0*2+112),HIGH(_0x0*2+112),BYTE3(_0x0*2+112),BYTE4(_0x0*2+112)
00005e 01ff
00005f 0000
000060 0210
000061 0000      	.DB  LOW(_0x0*2+131),HIGH(_0x0*2+131),BYTE3(_0x0*2+131),BYTE4(_0x0*2+131),LOW(_0x0*2+148),HIGH(_0x0*2+148),BYTE3(_0x0*2+148),BYTE4(_0x0*2+148)
000062 021f
000063 0000
000064 0230
000065 0000      	.DB  LOW(_0x0*2+163),HIGH(_0x0*2+163),BYTE3(_0x0*2+163),BYTE4(_0x0*2+163),LOW(_0x0*2+180),HIGH(_0x0*2+180),BYTE3(_0x0*2+180),BYTE4(_0x0*2+180)
000066 0240
000067 0000      	.DB  LOW(_0x0*2+196),HIGH(_0x0*2+196),BYTE3(_0x0*2+196),BYTE4(_0x0*2+196)
                 _cvt_G003:
000068 9a80
000069 4190
00006a 418e
00006b 808f      	.DB  0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80
00006c 4545
00006d 4945
00006e 4949
00006f 8f8e      	.DB  0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F
000070 9290
000071 4f92
000072 4f99
000073 5555      	.DB  0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55
000074 9959
000075 9b9a
000076 9d9c
000077 9f9e      	.DB  0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F
000078 4941
000079 554f
00007a a5a5
00007b a7a6      	.DB  0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7
00007c a9a8
00007d abaa
00007e 21ac
00007f afae      	.DB  0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF
000080 b1b0
000081 b3b2
000082 b5b4
000083 b7b6      	.DB  0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7
000084 b9b8
000085 bbba
000086 bdbc
000087 bfbe      	.DB  0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF
000088 c1c0
000089 c3c2
00008a c5c4
00008b c7c6      	.DB  0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7
00008c c9c8
00008d cbca
00008e cdcc
00008f cfce      	.DB  0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF
000090 d1d0
000091 d3d2
000092 d5d4
000093 d7d6      	.DB  0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7
000094 d9d8
000095 dbda
000096 dddc
000097 dfde      	.DB  0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF
000098 e1e0
000099 e3e2
00009a e5e4
00009b e7e6      	.DB  0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7
00009c e9e8
00009d ebea
00009e edec
00009f efee      	.DB  0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF
0000a0 f1f0
0000a1 f3f2
0000a2 f5f4
0000a3 f7f6      	.DB  0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7
0000a4 f9f8
0000a5 fbfa
0000a6 fdfc
0000a7 fffe      	.DB  0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF
                 _tbl10_G100:
0000a8 2710
0000a9 03e8
0000aa 0064
0000ab 000a      	.DB  0x10,0x27,0xE8,0x3,0x64,0x0,0xA,0x0
0000ac 0001      	.DB  0x1,0x0
                 _tbl16_G100:
0000ad 1000
0000ae 0100
0000af 0010
0000b0 0001      	.DB  0x0,0x10,0x0,0x1,0x10,0x0,0x1,0x0
                 
                 ;GLOBAL REGISTER VARIABLES INITIALIZATION
                 __REG_VARS:
0000b1 f9db
0000b2 f9eb      	.DB  0xDB,0xF9,0xEB,0xF9
                 
                 _0x3:
0000b3 6e55
0000b4 7469
0000b5 5420
0000b6 7365      	.DB  0x55,0x6E,0x69,0x74,0x20,0x54,0x65,0x73
0000b7 2074
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1193): warning: .cseg .db misalignment - padding zero byte
0000b8 0031      	.DB  0x74,0x20,0x31
                 _0x22:
0000b9 3535
0000ba 4141
0000bb 3636
0000bc 4242      	.DB  0x35,0x35,0x41,0x41,0x36,0x36,0x42,0x42
0000bd 4343      	.DB  0x43,0x43
                 _0x0:
0000be 4600
0000bf 5f52
0000c0 4944
0000c1 4b53      	.DB  0x0,0x46,0x52,0x5F,0x44,0x49,0x53,0x4B
0000c2 455f
0000c3 5252
0000c4 4600
0000c5 5f52      	.DB  0x5F,0x45,0x52,0x52,0x0,0x46,0x52,0x5F
0000c6 4e49
0000c7 5f54
0000c8 5245
0000c9 0052      	.DB  0x49,0x4E,0x54,0x5F,0x45,0x52,0x52,0x0
0000ca 5246
0000cb 4e5f
0000cc 544f
0000cd 525f      	.DB  0x46,0x52,0x5F,0x4E,0x4F,0x54,0x5F,0x52
0000ce 4145
0000cf 5944
0000d0 4600
0000d1 5f52      	.DB  0x45,0x41,0x44,0x59,0x0,0x46,0x52,0x5F
0000d2 4f4e
0000d3 465f
0000d4 4c49
0000d5 0045      	.DB  0x4E,0x4F,0x5F,0x46,0x49,0x4C,0x45,0x0
0000d6 5246
0000d7 4e5f
0000d8 5f4f
0000d9 4150      	.DB  0x46,0x52,0x5F,0x4E,0x4F,0x5F,0x50,0x41
0000da 4854
0000db 4600
0000dc 5f52
0000dd 4e49      	.DB  0x54,0x48,0x0,0x46,0x52,0x5F,0x49,0x4E
0000de 4156
0000df 494c
0000e0 5f44
0000e1 414e      	.DB  0x56,0x41,0x4C,0x49,0x44,0x5F,0x4E,0x41
0000e2 454d
0000e3 4600
0000e4 5f52
0000e5 4544      	.DB  0x4D,0x45,0x0,0x46,0x52,0x5F,0x44,0x45
0000e6 494e
0000e7 4445
0000e8 4600
0000e9 5f52      	.DB  0x4E,0x49,0x45,0x44,0x0,0x46,0x52,0x5F
0000ea 5845
0000eb 5349
0000ec 0054
0000ed 5246      	.DB  0x45,0x58,0x49,0x53,0x54,0x0,0x46,0x52
0000ee 495f
0000ef 564e
0000f0 4c41
0000f1 4449      	.DB  0x5F,0x49,0x4E,0x56,0x41,0x4C,0x49,0x44
0000f2 4f5f
0000f3 4a42
0000f4 4345
0000f5 0054      	.DB  0x5F,0x4F,0x42,0x4A,0x45,0x43,0x54,0x0
0000f6 5246
0000f7 575f
0000f8 4952
0000f9 4554      	.DB  0x46,0x52,0x5F,0x57,0x52,0x49,0x54,0x45
0000fa 505f
0000fb 4f52
0000fc 4554
0000fd 5443      	.DB  0x5F,0x50,0x52,0x4F,0x54,0x45,0x43,0x54
0000fe 4445
0000ff 4600
000100 5f52
000101 4e49      	.DB  0x45,0x44,0x0,0x46,0x52,0x5F,0x49,0x4E
000102 4156
000103 494c
000104 5f44
000105 5244      	.DB  0x56,0x41,0x4C,0x49,0x44,0x5F,0x44,0x52
000106 5649
000107 0045
000108 5246
000109 4e5f      	.DB  0x49,0x56,0x45,0x0,0x46,0x52,0x5F,0x4E
00010a 544f
00010b 455f
00010c 414e
00010d 4c42      	.DB  0x4F,0x54,0x5F,0x45,0x4E,0x41,0x42,0x4C
00010e 4445
00010f 4600
000110 5f52
000111 4f4e      	.DB  0x45,0x44,0x0,0x46,0x52,0x5F,0x4E,0x4F
000112 465f
000113 4c49
000114 5345
000115 5359      	.DB  0x5F,0x46,0x49,0x4C,0x45,0x53,0x59,0x53
000116 4554
000117 004d
000118 5246
000119 4d5f      	.DB  0x54,0x45,0x4D,0x0,0x46,0x52,0x5F,0x4D
00011a 464b
00011b 5f53
00011c 4241
00011d 524f      	.DB  0x4B,0x46,0x53,0x5F,0x41,0x42,0x4F,0x52
00011e 4554
00011f 0044
000120 5246
000121 545f      	.DB  0x54,0x45,0x44,0x0,0x46,0x52,0x5F,0x54
000122 4d49
000123 4f45
000124 5455
000125 4500      	.DB  0x49,0x4D,0x45,0x4F,0x55,0x54,0x0,0x45
000126 5252
000127 524f
000128 203a
000129 7025      	.DB  0x52,0x52,0x4F,0x52,0x3A,0x20,0x25,0x70
00012a 0a0d
00012b 5300
00012c 2044
00012d 4b4f      	.DB  0xD,0xA,0x0,0x53,0x44,0x20,0x4F,0x4B
00012e 203a
00012f 5300
000130 2044
000131 5245      	.DB  0x3A,0x20,0x0,0x53,0x44,0x20,0x45,0x52
000132 4f52
000133 3a52
000134 0020
000135 002c      	.DB  0x52,0x4F,0x52,0x3A,0x20,0x0,0x2C,0x0
000136 302f
000137 752f
000138 696e
000139 7474      	.DB  0x2F,0x30,0x2F,0x75,0x6E,0x69,0x74,0x74
00013a 7365
00013b 2e74
00013c 7874
00013d 0074      	.DB  0x65,0x73,0x74,0x2E,0x74,0x78,0x74,0x0
00013e 302f
00013f 552f
000140 4450
000141 5441      	.DB  0x2F,0x30,0x2F,0x55,0x50,0x44,0x41,0x54
000142 3345
000143 442e
000144 5441
000145 4c00      	.DB  0x45,0x33,0x2E,0x44,0x41,0x54,0x0,0x4C
000146 676f
000147 6369
000148 6c61
000149 6420      	.DB  0x6F,0x67,0x69,0x63,0x61,0x6C,0x20,0x64
00014a 6972
00014b 6576
00014c 3020
00014d 203a      	.DB  0x72,0x69,0x76,0x65,0x20,0x30,0x3A,0x20
00014e 6f6d
00014f 6e75
000150 6574
000151 2064      	.DB  0x6D,0x6F,0x75,0x6E,0x74,0x65,0x64,0x20
000152 4b4f
000153 0a0d
000154 2f00
000155 0030      	.DB  0x4F,0x4B,0xD,0xA,0x0,0x2F,0x30,0x0
000156 5055
000157 4144
000158 4554
000159 4400      	.DB  0x55,0x50,0x44,0x41,0x54,0x45,0x0,0x44
00015a 4e4f
00015b 3045
00015c 3030
00015d 6400      	.DB  0x4F,0x4E,0x45,0x30,0x30,0x30,0x0,0x64
00015e 7461
00015f 2e61
000160 7874
000161 0074      	.DB  0x61,0x74,0x61,0x2E,0x74,0x78,0x74,0x0
000162 6946
000163 656c
000164 2520
000165 2073      	.DB  0x46,0x69,0x6C,0x65,0x20,0x25,0x73,0x20
000166 7263
000167 6165
000168 6574
000169 2064      	.DB  0x63,0x72,0x65,0x61,0x74,0x65,0x64,0x20
00016a 4b4f
00016b 0a0d
00016c 2500
00016d 2075      	.DB  0x4F,0x4B,0xD,0xA,0x0,0x25,0x75,0x20
00016e 7962
00016f 6574
000170 2073
000171 7277      	.DB  0x62,0x79,0x74,0x65,0x73,0x20,0x77,0x72
000172 7469
000173 6574
000174 206e
000175 666f      	.DB  0x69,0x74,0x74,0x65,0x6E,0x20,0x6F,0x66
000176 2520
000177 0d75
000178 000a
000179 6946      	.DB  0x20,0x25,0x75,0xD,0xA,0x0,0x46,0x69
00017a 656c
00017b 2520
00017c 2073
00017d 706f      	.DB  0x6C,0x65,0x20,0x25,0x73,0x20,0x6F,0x70
00017e 6e65
00017f 6465
000180 4f20
000181 0d4b      	.DB  0x65,0x6E,0x65,0x64,0x20,0x4F,0x4B,0xD
000182 000a
000183 7525
000184 6220
000185 7479      	.DB  0xA,0x0,0x25,0x75,0x20,0x62,0x79,0x74
000186 7365
000187 7220
000188 6165
000189 0d64      	.DB  0x65,0x73,0x20,0x72,0x65,0x61,0x64,0xD
00018a 000a
00018b 6552
00018c 6461
00018d 7420      	.DB  0xA,0x0,0x52,0x65,0x61,0x64,0x20,0x74
00018e 7865
00018f 3a74
000190 2220
000191 7325      	.DB  0x65,0x78,0x74,0x3A,0x20,0x22,0x25,0x73
000192 0d22
000193 000a
000194 6670
000195 2066      	.DB  0x22,0xD,0xA,0x0,0x70,0x66,0x66,0x20
000196 6554
000197 7473
000198 2e33
000199 5400      	.DB  0x54,0x65,0x73,0x74,0x33,0x2E,0x0,0x54
00019a 7365
00019b 3374
00019c 6420
00019d 6e6f      	.DB  0x65,0x73,0x74,0x33,0x20,0x64,0x6F,0x6E
00019e 2e65
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1254): warning: .cseg .db misalignment - padding zero byte
00019f 0000      	.DB  0x65,0x2E,0x0
                 _0x20003:
0001a0 fa0b      	.DB  0xB,0xFA
                 _0x20004:
0001a1 fa2b      	.DB  0x2B,0xFA
                 _0x2020060:
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1260): warning: .cseg .db misalignment - padding zero byte
0001a2 0001      	.DB  0x1
                 _0x2020000:
0001a3 4e2d
0001a4 4e41
0001a5 4900
0001a6 464e      	.DB  0x2D,0x4E,0x41,0x4E,0x0,0x49,0x4E,0x46
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1263): warning: .cseg .db misalignment - padding zero byte
0001a7 0000      	.DB  0x0
                 _0x2060003:
0001a8 c080      	.DB  0x80,0xC0
                 
                 __GLOBAL_INI_TBL:
0001a9 0004      	.DW  0x04
0001aa 000a      	.DW  0x0A
0001ab 0162 0000 	.DD  __REG_VARS*2
                 
0001ad 000b      	.DW  0x0B
0001ae 09d6      	.DW  _text
0001af 0166 0000 	.DD  _0x3*2
                 
0001b1 0010      	.DW  0x10
0001b2 0920      	.DW  _0x15
0001b3 026c 0000 	.DD  _0x0*2+240
                 
0001b5 0010      	.DW  0x10
0001b6 0930      	.DW  _0x16
0001b7 026c 0000 	.DD  _0x0*2+240
                 
0001b9 000f      	.DW  0x0F
0001ba 0940      	.DW  _0x23
0001bb 027c 0000 	.DD  _0x0*2+256
                 
0001bd 0003      	.DW  0x03
0001be 094f      	.DW  _0x23+15
0001bf 02a9 0000 	.DD  _0x0*2+301
                 
0001c1 0007      	.DW  0x07
0001c2 0952      	.DW  _0x23+18
0001c3 02ac 0000 	.DD  _0x0*2+304
                 
0001c5 0008      	.DW  0x08
0001c6 0959      	.DW  _0x23+25
0001c7 02b3 0000 	.DD  _0x0*2+311
                 
0001c9 0009      	.DW  0x09
0001ca 0961      	.DW  _0x23+33
0001cb 02bb 0000 	.DD  _0x0*2+319
                 
0001cd 0002      	.DW  0x02
0001ce 0ae3      	.DW  ___AddrToZ24ByteToSPMCR_SPM_E
0001cf 0340 0000 	.DD  _0x20003*2
                 
0001d1 0002      	.DW  0x02
0001d2 0ae5      	.DW  ___AddrToZ24ByteToSPMCR_SPM_EW
0001d3 0342 0000 	.DD  _0x20004*2
                 
0001d5 0001      	.DW  0x01
0001d6 0aec      	.DW  __seed_G101
0001d7 0344 0000 	.DD  _0x2020060*2
                 
0001d9 0002      	.DW  0x02
0001da 0af0      	.DW  __base_y_G103
0001db 0350 0000 	.DD  _0x2060003*2
                 
                 _0xFFFFFFFF:
0001dd 0000      	.DW  0
                 
                 #define __GLOBAL_INI_TBL_PRESENT 1
                 
                 __RESET:
0001de 94f8      	CLI
0001df 27ee      	CLR  R30
0001e0 bbec      	OUT  EECR,R30
                 
                 ;INTERRUPT VECTORS ARE PLACED
                 ;AT THE START OF FLASH
0001e1 e0f1      	LDI  R31,1
0001e2 bff5      	OUT  MCUCR,R31
0001e3 bfe5      	OUT  MCUCR,R30
0001e4 93e0 006c 	STS  XMCRB,R30
                 
                 ;CLEAR R2-R14
0001e6 e08d      	LDI  R24,(14-2)+1
0001e7 e0a2      	LDI  R26,2
0001e8 27bb      	CLR  R27
                 __CLEAR_REG:
0001e9 93ed      	ST   X+,R30
0001ea 958a      	DEC  R24
0001eb f7e9      	BRNE __CLEAR_REG
                 
                 ;CLEAR SRAM
0001ec e080      	LDI  R24,LOW(__CLEAR_SRAM_SIZE)
0001ed e190      	LDI  R25,HIGH(__CLEAR_SRAM_SIZE)
0001ee e0a0      	LDI  R26,LOW(__SRAM_START)
0001ef e0b1      	LDI  R27,HIGH(__SRAM_START)
                 __CLEAR_SRAM:
0001f0 93ed      	ST   X+,R30
0001f1 9701      	SBIW R24,1
0001f2 f7e9      	BRNE __CLEAR_SRAM
                 
                 ;GLOBAL VARIABLES INITIALIZATION
0001f3 e5e2      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
0001f4 e0f3      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
0001f5 e0d0      	LDI  R29,BYTE3(__GLOBAL_INI_TBL*2)
                 __GLOBAL_INI_NEXT:
0001f6 bfdb      	OUT  RAMPZ,R29
0001f7 9187      	ELPM R24,Z+
0001f8 9197      	ELPM R25,Z+
0001f9 9700      	SBIW R24,0
0001fa f081      	BREQ __GLOBAL_INI_END
0001fb 91a7      	ELPM R26,Z+
0001fc 91b7      	ELPM R27,Z+
0001fd 9007      	ELPM R0,Z+
0001fe 9017      	ELPM R1,Z+
0001ff 91c7      	ELPM R28,Z+
000200 91d7      	ELPM R29,Z+
000201 01bf      	MOVW R22,R30
000202 b7db      	IN   R29,RAMPZ
000203 01f0      	MOVW R30,R0
000204 bfcb      	OUT  RAMPZ,R28
                 __GLOBAL_INI_LOOP:
000205 9007      	ELPM R0,Z+
000206 920d      	ST   X+,R0
000207 9701      	SBIW R24,1
000208 f7e1      	BRNE __GLOBAL_INI_LOOP
000209 01fb      	MOVW R30,R22
00020a cfeb      	RJMP __GLOBAL_INI_NEXT
                 __GLOBAL_INI_END:
                 
                 ;HARDWARE STACK POINTER INITIALIZATION
00020b efef      	LDI  R30,LOW(__SRAM_END-__HEAP_SIZE)
00020c bfed      	OUT  SPL,R30
00020d e1e0      	LDI  R30,HIGH(__SRAM_END-__HEAP_SIZE)
00020e bfee      	OUT  SPH,R30
                 
                 ;DATA STACK POINTER INITIALIZATION
00020f e2c0      	LDI  R28,LOW(__SRAM_START+__DSTACK_SIZE)
000210 e0d9      	LDI  R29,HIGH(__SRAM_START+__DSTACK_SIZE)
                 
000211 940c 0335 	JMP  _main
                 
                 	.ESEG
                 	.ORG 0
                 
                 	.DSEG
                 	.ORG 0x920
                 
                 	.CSEG
                 ;// This file has been prepared for Doxygen automatic documentation generation.
                 ;/*! \file ********************************************************************
                 ;*
                 ;* Atmel Corporation
                 ;*
                 ;* - File              : Self_programming_main.c
                 ;* - Compiler          : IAR EWAVR 2.28a / 3.10c and newer
                 ;*
                 ;* - Support mail      : avr@atmel.com
                 ;*
                 ;* - Supported devices : This example is written for ATmega128.
                 ;*
                 ;* - AppNote           : AVR106 - C functions for reading and writing
                 ;*                       to flash memory.
                 ;*
                 ;* - Description       : The file contains an example program using the Flash R/W
                 ;*                       functions provided with the files Self_programming.h /
                 ;*                       Self_programming.c . The program should be compiled using
                 ;*                       a linker file (*.xcl) that is configured to place the
                 ;*                       entire program code into the Boot section of the Flash memory.
                 ;*                       Please refer to the application note document for more
                 ;*                       information.
                 ;*
                 ;* $Revision: 2.0 $
                 ;* $Date: Wednesday, January 18, 2006 15:18:52 UTC $
                 ;*
                 ;*****************************************************************************/
                 ;#include <io.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#define __SLEEP_DEFINED__
                 	.EQU __se_bit=0x20
                 	.EQU __sm_mask=0x1C
                 	.EQU __sm_powerdown=0x10
                 	.EQU __sm_powersave=0x18
                 	.EQU __sm_standby=0x14
                 	.EQU __sm_ext_standby=0x1C
                 	.EQU __sm_adc_noise_red=0x08
                 	.SET power_ctrl_reg=mcucr
                 	#endif
                 ;#include <delay.h>
                 ;#include "Self_programming.h"
                 ;/* FAT on MMC/SD/SD HC card support */
                 ;//Petit fat api
                 ;#include <pff_rn.h>
                 ;#include "diskio.h"		/* Declarations of low level disk I/O functions */
                 ;/* printf */
                 ;#include <stdio.h>
                 ;#include <stdlib.h>
                 ;/* string functions */
                 ;#include <string.h>
                 ;#include <alcd.h>
                 ;
                 ;/*Globals*/
                 ;int retry;
                 ;/* FAT function result */
                 ;FRESULT res;
                 ;/* number of bytes written/read to the file */
                 ;unsigned int nbytes;
                 ;/* will hold the information for logical drive 0: */
                 ;FATFS fat;
                 ;/* will hold the file information */
                 ;//FIL file;
                 ;/* will hold file attributes, time stamp information */
                 ;FILINFO finfo;
                 ;/* root directory path */
                 ;char path[64];//="/0/unittest.txt";
                 ;/* text to be written to the file */
                 ;char text[]="Unit Test 1";
                 
                 	.DSEG
                 ;/* file read buffer */
                 ;char buffer[256];
                 ;
                 ;/* error message list */
                 ;flash char * flash error_msg[]=
                 ;{
                 ;"", /* not used */
                 ;"FR_DISK_ERR",
                 ;"FR_INT_ERR",
                 ;"FR_INT_ERR",
                 ;"FR_NOT_READY",
                 ;"FR_NO_FILE",
                 ;"FR_NO_PATH",
                 ;"FR_INVALID_NAME",
                 ;"FR_DENIED",
                 ;"FR_EXIST",
                 ;"FR_INVALID_OBJECT",
                 ;"FR_WRITE_PROTECTED",
                 ;"FR_INVALID_DRIVE",
                 ;"FR_NOT_ENABLED",
                 ;"FR_NO_FILESYSTEM",
                 ;"FR_MKFS_ABORTED",
                 ;"FR_TIMEOUT"
                 ;};
                 ;/* display error message and stop */
                 ;void error(FRESULT res, unsigned char num)
                 ; 0000 0054 {
                 
                 	.CSEG
                 _error:
                 ; .FSTART _error
                 ; 0000 0055     char strnum[5];
                 ; 0000 0056     if(num>100){
000213 93aa      	ST   -Y,R26
000214 9725      	SBIW R28,5
                 ;	res -> Y+6
                 ;	num -> Y+5
                 ;	strnum -> Y+0
000215 81ad      	LDD  R26,Y+5
000216 36a5      	CPI  R26,LOW(0x65)
000217 f010      	BRLO _0x4
                 ; 0000 0057        num=100;
000218 e6e4      	LDI  R30,LOW(100)
000219 83ed      	STD  Y+5,R30
                 ; 0000 0058     }
                 ; 0000 0059     itoa(num,strnum);
                 _0x4:
00021a 81ed      	LDD  R30,Y+5
00021b 940e 13e4 	CALL SUBOPT_0x0
                 ; 0000 005A     do{
                 _0x6:
                 ; 0000 005B     if ((res>=0) && (res<=FR_NO_FILESYSTEM)){//FR_NO_FILESYSTEM  FR_TIMEOUT
00021d 81ae      	LDD  R26,Y+6
00021e 30a0      	CPI  R26,0
00021f f010      	BRLO _0x9
000220 30a8      	CPI  R26,LOW(0x8)
000221 f008      	BRLO _0xA
                 _0x9:
000222 c03f      	RJMP _0x8
                 _0xA:
                 ; 0000 005C        lcd_gotoxy(0,0);
000223 e0e0      	LDI  R30,LOW(0)
000224 93ea      	ST   -Y,R30
000225 e0a0      	LDI  R26,LOW(0)
000226 940e 135c 	CALL _lcd_gotoxy
                 ; 0000 005D        printf("ERROR: %p\r\n",error_msg[res]);
                +
000228 e4eb     +LDI R30 , LOW ( 2 * _0x0 + ( 207 ) )
000229 e0f2     +LDI R31 , HIGH ( 2 * _0x0 + ( 207 ) )
00022a e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 207 ) )
00022b e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 207 ) )
                 	__POINTD1FN _0x0,207
00022c 940e 180d 	CALL __PUTPARD1
00022e 85ea      	LDD  R30,Y+10
00022f 940e 13eb 	CALL SUBOPT_0x1
000231 940e 17f6 	CALL __GETD1PF
000233 940e 13f8 	CALL SUBOPT_0x2
                 ; 0000 005E        if(res==0){
000235 81ee      	LDD  R30,Y+6
000236 30e0      	CPI  R30,0
000237 f429      	BRNE _0xB
                 ; 0000 005F         lcd_putsf("SD OK: ");
                +
000238 e5a7     +LDI R26 , LOW ( 2 * _0x0 + ( 219 ) )
000239 e0b2     +LDI R27 , HIGH ( 2 * _0x0 + ( 219 ) )
00023a e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 219 ) )
00023b e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 219 ) )
                 	__POINTD2FN _0x0,219
00023c c004      	RJMP _0x5B
                 ; 0000 0060        }
                 ; 0000 0061        else{
                 _0xB:
                 ; 0000 0062         lcd_putsf("SD ERROR: ");
                +
00023d e5af     +LDI R26 , LOW ( 2 * _0x0 + ( 227 ) )
00023e e0b2     +LDI R27 , HIGH ( 2 * _0x0 + ( 227 ) )
00023f e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 227 ) )
000240 e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 227 ) )
                 	__POINTD2FN _0x0,227
                 _0x5B:
000241 940e 13a3 	CALL _lcd_putsf
                 ; 0000 0063        }
                 ; 0000 0064        delay_ms(100);
000243 e6a4      	LDI  R26,LOW(100)
000244 e0b0      	LDI  R27,0
000245 940e 1715 	CALL _delay_ms
                 ; 0000 0065        lcd_puts(strnum);
000247 01de      	MOVW R26,R28
000248 940e 1392 	CALL _lcd_puts
                 ; 0000 0066        lcd_putsf(",");
                +
00024a e6aa     +LDI R26 , LOW ( 2 * _0x0 + ( 238 ) )
00024b e0b2     +LDI R27 , HIGH ( 2 * _0x0 + ( 238 ) )
00024c e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 238 ) )
00024d e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 238 ) )
                 	__POINTD2FN _0x0,238
00024e 940e 13a3 	CALL _lcd_putsf
                 ; 0000 0067        itoa(res,strnum);
000250 81ee      	LDD  R30,Y+6
000251 940e 13e4 	CALL SUBOPT_0x0
                 ; 0000 0068        lcd_puts(strnum);
000253 01de      	MOVW R26,R28
000254 940e 1392 	CALL _lcd_puts
                 ; 0000 0069        lcd_gotoxy(0,1);
000256 e0e0      	LDI  R30,LOW(0)
000257 93ea      	ST   -Y,R30
000258 e0a1      	LDI  R26,LOW(1)
000259 940e 135c 	CALL _lcd_gotoxy
                 ; 0000 006A        lcd_putsf(error_msg[res]);
00025b 81ee      	LDD  R30,Y+6
00025c 940e 13eb 	CALL SUBOPT_0x1
00025e 940e 17fd 	CALL __GETD2PF
000260 940e 13a3 	CALL _lcd_putsf
                 ; 0000 006B     }
                 ; 0000 006C     /* stop here */
                 ; 0000 006D     //do
                 ; 0000 006E         //{
                 ; 0000 006F           PORTC.0=0;
                 _0x8:
000262 98a8      	CBI  0x15,0
                 ; 0000 0070           PORTC.1=0;
000263 98a9      	CBI  0x15,1
                 ; 0000 0071           delay_ms(150);
000264 e9a6      	LDI  R26,LOW(150)
000265 e0b0      	LDI  R27,0
000266 940e 1715 	CALL _delay_ms
                 ; 0000 0072           PORTC.1=1;
000268 9aa9      	SBI  0x15,1
                 ; 0000 0073           PORTC.0=1;
000269 9aa8      	SBI  0x15,0
                 ; 0000 0074           delay_ms(150);
00026a e9a6      	LDI  R26,LOW(150)
00026b e0b0      	LDI  R27,0
00026c 940e 1715 	CALL _delay_ms
                 ; 0000 0075           PORTC=0xFC;
00026e efec      	LDI  R30,LOW(252)
00026f bbe5      	OUT  0x15,R30
                 ; 0000 0076         }
                 ; 0000 0077       while(1);
000270 cfac      	RJMP _0x6
                 ; 0000 0078 }
                 ; .FEND
                 ;unsigned char rn(char *newname, char *oldname){
                 ; 0000 0079 unsigned char rn(char *newname, char *oldname){
                 ; 0000 007A     strcpy(path,"/0/unittest.txt");
                 ;	*newname -> Y+2
                 ;	*oldname -> Y+0
                 ; 0000 007B 
                 ; 0000 007C }
                 
                 	.DSEG
                 _0x15:
000920           	.BYTE 0x10
                 ;unsigned char RenameTest(){
                 ; 0000 007D unsigned char RenameTest(){
                 
                 	.CSEG
                 ; 0000 007E    int retry;
                 ; 0000 007F    strcpy(path,"/0/unittest.txt");
                 ;	retry -> R16,R17
                 ; 0000 0080 
                 ; 0000 0081 }
                 
                 	.DSEG
                 _0x16:
000930           	.BYTE 0x10
                 ;
                 ;FRESULT rename (const char* dirname, const char* oldname, char* newname)
                 ; 0000 0084 {
                 
                 	.CSEG
                 ; 0000 0085     FRESULT res;
                 ; 0000 0086     FILINFO fno;
                 ; 0000 0087     DIR dir;
                 ; 0000 0088     int i;
                 ; 0000 0089     BYTE rwbuf[512];
                 ; 0000 008A 
                 ; 0000 008B     res = pf_opendir(&dir, path);
                 ;	*dirname -> Y+558
                 ;	*oldname -> Y+556
                 ;	*newname -> Y+554
                 ;	res -> R17
                 ;	fno -> Y+532
                 ;	dir -> Y+516
                 ;	i -> R18,R19
                 ;	rwbuf -> Y+4
                 ; 0000 008C     if (res == FR_OK) {
                 ; 0000 008D         i = strlen(path);
                 ; 0000 008E         for (;;) {
                 ; 0000 008F             res = pf_readdir(&dir, &fno);
                 ; 0000 0090             if (res != FR_OK || fno.fname[0] == 0) break;
                 ; 0000 0091             if(fno.fname[0] == 'U'){
                 ; 0000 0092                res = disk_readp(rwbuf,dir.sect,0,512);
                 ; 0000 0093                if (res != FR_OK) break;
                 ; 0000 0094                rwbuf[((dir.index-1)*32)+6]='5';
                 ; 0000 0095                res = disk_writep(0,dir.sect);
                 ; 0000 0096                if (res != FR_OK) break;
                 ; 0000 0097                res = disk_writep(rwbuf,512);
                 ; 0000 0098                if (res != FR_OK) break;
                 ; 0000 0099                res = disk_writep(0,0);
                 ; 0000 009A                break;
                 ; 0000 009B             }
                 ; 0000 009C             /*
                 ; 0000 009D             if (fno.fattrib & AM_DIR) {
                 ; 0000 009E                 sprintf(&path[i], "/%s", fno.fname);
                 ; 0000 009F                 res = scan_files(path);
                 ; 0000 00A0                 if (res != FR_OK) break;
                 ; 0000 00A1                 path[i] = 0;
                 ; 0000 00A2             } else {
                 ; 0000 00A3                 printf("%s/%s\n", path, fno.fname);
                 ; 0000 00A4             }
                 ; 0000 00A5             */
                 ; 0000 00A6         }
                 ; 0000 00A7     }
                 ; 0000 00A8 
                 ; 0000 00A9     return res;
                 ; 0000 00AA }
                 ;
                 ;unsigned char UnitTest1(){
                 ; 0000 00AC unsigned char UnitTest1(){
                 _UnitTest1:
                 ; .FSTART _UnitTest1
                 ; 0000 00AD 
                 ; 0000 00AE     BYTE testbuf[10]={'5','5','A','A','6','6','B','B','C','C'};
                 ; 0000 00AF     strcpy(path,"/0/UPDATE3.DAT");
000271 972a      	SBIW R28,10
000272 e08a      	LDI  R24,10
000273 e0a0      	LDI  R26,LOW(0)
000274 e0b0      	LDI  R27,HIGH(0)
000275 e7e2      	LDI  R30,LOW(_0x22*2)
000276 e0f1      	LDI  R31,HIGH(_0x22*2)
000277 e060      	LDI  R22,BYTE3(_0x22*2)
000278 940e 1877 	CALL __INITLOCB
                 ;	testbuf -> Y+0
00027a e9e6      	LDI  R30,LOW(_path)
00027b e0f9      	LDI  R31,HIGH(_path)
00027c 93fa      	ST   -Y,R31
00027d 93ea      	ST   -Y,R30
                +
00027e e4a0     +LDI R26 , LOW ( _0x23 + ( 0 ) )
00027f e0b9     +LDI R27 , HIGH ( _0x23 + ( 0 ) )
                 	__POINTW2MN _0x23,0
000280 940e 1313 	CALL _strcpy
                 ; 0000 00B0     /* mount logical drive 0: */
                 ; 0000 00B1     //if ((res=f_mount(0,&fat))==FR_OK)
                 ; 0000 00B2 
                 ; 0000 00B3     for(retry=0;retry<5;retry++){
000282 2444      	CLR  R4
000283 2455      	CLR  R5
                 _0x25:
000284 e0e5      	LDI  R30,LOW(5)
000285 e0f0      	LDI  R31,HIGH(5)
000286 164e      	CP   R4,R30
000287 065f      	CPC  R5,R31
000288 f46c      	BRGE _0x26
                 ; 0000 00B4         res=pf_mount(&fat);
000289 e6aa      	LDI  R26,LOW(_fat)
00028a e0b9      	LDI  R27,HIGH(_fat)
00028b 940e 0b7c 	CALL _pf_mount
00028d 2e7e      	MOV  R7,R30
                 ; 0000 00B5         if (res==FR_OK){
00028e 2077      	TST  R7
00028f f031      	BREQ _0x26
                 ; 0000 00B6             break;
                 ; 0000 00B7         }
                 ; 0000 00B8         else{
                 ; 0000 00B9           delay_ms(500);
000290 940e 13ff 	CALL SUBOPT_0x3
                 ; 0000 00BA         }
                 ; 0000 00BB     }
000292 01f2      	MOVW R30,R4
000293 9631      	ADIW R30,1
000294 012f      	MOVW R4,R30
000295 cfee      	RJMP _0x25
                 _0x26:
                 ; 0000 00BC 
                 ; 0000 00BD     //res=pf_remount(&fat);
                 ; 0000 00BE     if (res==FR_OK)
000296 2077      	TST  R7
000297 f459      	BRNE _0x29
                 ; 0000 00BF        printf("Logical drive 0: mounted OK\r\n");
                +
000298 e8eb     +LDI R30 , LOW ( 2 * _0x0 + ( 271 ) )
000299 e0f2     +LDI R31 , HIGH ( 2 * _0x0 + ( 271 ) )
00029a e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 271 ) )
00029b e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 271 ) )
                 	__POINTD1FN _0x0,271
00029c 940e 180d 	CALL __PUTPARD1
00029e e080      	LDI  R24,0
00029f 940e 12c0 	CALL _printf
0002a1 9624      	ADIW R28,4
                 ; 0000 00C0     else
0002a2 c003      	RJMP _0x2A
                 _0x29:
                 ; 0000 00C1        /* an error occured, display it and stop */
                 ; 0000 00C2        error(res,1);
0002a3 927a      	ST   -Y,R7
0002a4 e0a1      	LDI  R26,LOW(1)
0002a5 df6d      	RCALL _error
                 ; 0000 00C3     //scan_files("/0");
                 ; 0000 00C4 
                 ; 0000 00C5     res=pf_rename("/0","UPDATE","DONE000");
                 _0x2A:
                +
0002a6 e4ef     +LDI R30 , LOW ( _0x23 + ( 15 ) )
0002a7 e0f9     +LDI R31 , HIGH ( _0x23 + ( 15 ) )
                 	__POINTW1MN _0x23,15
0002a8 93fa      	ST   -Y,R31
0002a9 93ea      	ST   -Y,R30
                +
0002aa e5e2     +LDI R30 , LOW ( _0x23 + ( 18 ) )
0002ab e0f9     +LDI R31 , HIGH ( _0x23 + ( 18 ) )
                 	__POINTW1MN _0x23,18
0002ac 93fa      	ST   -Y,R31
0002ad 93ea      	ST   -Y,R30
                +
0002ae e5a9     +LDI R26 , LOW ( _0x23 + ( 25 ) )
0002af e0b9     +LDI R27 , HIGH ( _0x23 + ( 25 ) )
                 	__POINTW2MN _0x23,25
0002b0 940e 10ac 	CALL _pf_rename
0002b2 2e7e      	MOV  R7,R30
                 ; 0000 00C6     //res=pf_rename("/0","DONE","UPDATE");
                 ; 0000 00C7     if(res)
0002b3 2077      	TST  R7
0002b4 f019      	BREQ _0x2B
                 ; 0000 00C8         error(res,22);
0002b5 927a      	ST   -Y,R7
0002b6 e1a6      	LDI  R26,LOW(22)
0002b7 df5b      	RCALL _error
                 ; 0000 00C9 
                 ; 0000 00CA 
                 ; 0000 00CB 
                 ; 0000 00CC 
                 ; 0000 00CD 
                 ; 0000 00CE     /*this line will remove READ_ONLY attribute*/
                 ; 0000 00CF     //f_chmod(path, AM_ARC, AM_ARC|AM_RDO);
                 ; 0000 00D0     /* create a new file in the root of drive 0:
                 ; 0000 00D1        and set write access mode */
                 ; 0000 00D2     //if ((res=f_open(&file,path,FA_CREATE_ALWAYS | FA_WRITE))==FR_OK)
                 ; 0000 00D3     if ((res=pf_open("data.txt"))==FR_OK)
                 _0x2B:
                +
0002b8 e6a1     +LDI R26 , LOW ( _0x23 + ( 33 ) )
0002b9 e0b9     +LDI R27 , HIGH ( _0x23 + ( 33 ) )
                 	__POINTW2MN _0x23,33
0002ba 940e 0c9f 	CALL _pf_open
0002bc 2e7e      	MOV  R7,R30
0002bd 30e0      	CPI  R30,0
0002be f439      	BRNE _0x2C
                 ; 0000 00D4        printf("File %s created OK\r\n",path);
                +
0002bf ece4     +LDI R30 , LOW ( 2 * _0x0 + ( 328 ) )
0002c0 e0f2     +LDI R31 , HIGH ( 2 * _0x0 + ( 328 ) )
0002c1 e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 328 ) )
0002c2 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 328 ) )
                 	__POINTD1FN _0x0,328
0002c3 940e 1403 	CALL SUBOPT_0x4
                 ; 0000 00D5     else{
0002c5 c006      	RJMP _0x2D
                 _0x2C:
                 ; 0000 00D6        /* an error occured, display it and stop */
                 ; 0000 00D7        if(res!=3)
0002c6 e0e3      	LDI  R30,LOW(3)
0002c7 15e7      	CP   R30,R7
0002c8 f019      	BREQ _0x2E
                 ; 0000 00D8             error(res,2);
0002c9 927a      	ST   -Y,R7
0002ca e0a2      	LDI  R26,LOW(2)
0002cb df47      	RCALL _error
                 ; 0000 00D9     }
                 _0x2E:
                 _0x2D:
                 ; 0000 00DA 
                 ; 0000 00DB     /* write some text to the file,
                 ; 0000 00DC        without the NULL string terminator sizeof(data)-1 */
                 ; 0000 00DD     //if ((res=f_write(&file,text,sizeof(text)-1,&nbytes))==FR_OK)
                 ; 0000 00DE     if ((res=pf_write512(testbuf,520,sizeof(testbuf),&nbytes))==FR_OK)
0002cc 01fe      	MOVW R30,R28
0002cd 93fa      	ST   -Y,R31
0002ce 93ea      	ST   -Y,R30
0002cf e0e8      	LDI  R30,LOW(520)
0002d0 e0f2      	LDI  R31,HIGH(520)
0002d1 93fa      	ST   -Y,R31
0002d2 93ea      	ST   -Y,R30
0002d3 e0ea      	LDI  R30,LOW(10)
0002d4 e0f0      	LDI  R31,HIGH(10)
0002d5 940e 140a 	CALL SUBOPT_0x5
0002d7 940e 0ee5 	CALL _pf_write512
0002d9 2e7e      	MOV  R7,R30
0002da 30e0      	CPI  R30,0
0002db f419      	BRNE _0x2F
                 ; 0000 00DF        printf("%u bytes written of %u\r\n",nbytes,sizeof(text)-1);
0002dc 940e 140f 	CALL SUBOPT_0x6
                 ; 0000 00E0     else
0002de c003      	RJMP _0x30
                 _0x2F:
                 ; 0000 00E1        ///* an error occured, display it and stop */
                 ; 0000 00E2        error(res,93);
0002df 927a      	ST   -Y,R7
0002e0 e5ad      	LDI  R26,LOW(93)
0002e1 df31      	RCALL _error
                 ; 0000 00E3     if ((res=pf_write(text,sizeof(text)-1,&nbytes))==FR_OK)
                 _0x30:
0002e2 ede6      	LDI  R30,LOW(_text)
0002e3 e0f9      	LDI  R31,HIGH(_text)
0002e4 93fa      	ST   -Y,R31
0002e5 93ea      	ST   -Y,R30
0002e6 e0eb      	LDI  R30,LOW(11)
0002e7 e0f0      	LDI  R31,HIGH(11)
0002e8 940e 140a 	CALL SUBOPT_0x5
0002ea 940e 0dd3 	CALL _pf_write
0002ec 2e7e      	MOV  R7,R30
0002ed 30e0      	CPI  R30,0
0002ee f419      	BRNE _0x31
                 ; 0000 00E4        printf("%u bytes written of %u\r\n",nbytes,sizeof(text)-1);
0002ef 940e 140f 	CALL SUBOPT_0x6
                 ; 0000 00E5     else
0002f1 c003      	RJMP _0x32
                 _0x31:
                 ; 0000 00E6        ///* an error occured, display it and stop */
                 ; 0000 00E7        error(res,3);
0002f2 927a      	ST   -Y,R7
0002f3 e0a3      	LDI  R26,LOW(3)
0002f4 df1e      	RCALL _error
                 ; 0000 00E8 
                 ; 0000 00E9         /* close the file */
                 ; 0000 00EA     /*
                 ; 0000 00EB     if ((res=f_close(&file))==FR_OK)
                 ; 0000 00EC        printf("File %s closed OK\r\n",path);
                 ; 0000 00ED     else
                 ; 0000 00EE        // an error occured, display it and stop
                 ; 0000 00EF        error(res,4);
                 ; 0000 00F0     */
                 ; 0000 00F1 
                 ; 0000 00F2     /* open the file in read mode */
                 ; 0000 00F3 
                 ; 0000 00F4     //if ((res=f_open(&file,path,FA_READ|FA_WRITE))==FR_OK)
                 ; 0000 00F5     if ((res=pf_open(path))==FR_OK)
                 _0x32:
0002f5 e9a6      	LDI  R26,LOW(_path)
0002f6 e0b9      	LDI  R27,HIGH(_path)
0002f7 940e 0c9f 	CALL _pf_open
0002f9 2e7e      	MOV  R7,R30
0002fa 30e0      	CPI  R30,0
0002fb f439      	BRNE _0x33
                 ; 0000 00F6        printf("File %s opened OK\r\n",path);
                +
0002fc efe2     +LDI R30 , LOW ( 2 * _0x0 + ( 374 ) )
0002fd e0f2     +LDI R31 , HIGH ( 2 * _0x0 + ( 374 ) )
0002fe e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 374 ) )
0002ff e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 374 ) )
                 	__POINTD1FN _0x0,374
000300 940e 1403 	CALL SUBOPT_0x4
                 ; 0000 00F7     else
000302 c003      	RJMP _0x34
                 _0x33:
                 ; 0000 00F8        ///* an error occured, display it and stop */
                 ; 0000 00F9        error(res,7);
000303 927a      	ST   -Y,R7
000304 e0a7      	LDI  R26,LOW(7)
000305 df0d      	RCALL _error
                 ; 0000 00FA 
                 ; 0000 00FB 
                 ; 0000 00FC 
                 ; 0000 00FD     /* read and display the file's content.
                 ; 0000 00FE        make sure to leave space for a NULL terminator
                 ; 0000 00FF        in the buffer, so maximum sizeof(buffer)-1 bytes can be read */
                 ; 0000 0100     //if ((res=f_read(&file,buffer,sizeof(buffer)-1,&nbytes))==FR_OK)
                 ; 0000 0101     if ((res=pf_read(buffer,sizeof(buffer)-1,&nbytes))==FR_OK)
                 _0x34:
000306 eee2      	LDI  R30,LOW(_buffer)
000307 e0f9      	LDI  R31,HIGH(_buffer)
000308 93fa      	ST   -Y,R31
000309 93ea      	ST   -Y,R30
00030a efef      	LDI  R30,LOW(255)
00030b e0f0      	LDI  R31,HIGH(255)
00030c 940e 140a 	CALL SUBOPT_0x5
00030e 940e 0ce4 	CALL _pf_read
000310 2e7e      	MOV  R7,R30
000311 30e0      	CPI  R30,0
000312 f4e9      	BRNE _0x35
                 ; 0000 0102        {
                 ; 0000 0103        printf("%u bytes read\r\n",nbytes);
                +
000313 e0e6     +LDI R30 , LOW ( 2 * _0x0 + ( 394 ) )
000314 e0f3     +LDI R31 , HIGH ( 2 * _0x0 + ( 394 ) )
000315 e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 394 ) )
000316 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 394 ) )
                 	__POINTD1FN _0x0,394
000317 940e 180d 	CALL __PUTPARD1
000319 01f4      	MOVW R30,R8
00031a 2766      	CLR  R22
00031b 2777      	CLR  R23
00031c 940e 13f8 	CALL SUBOPT_0x2
                 ; 0000 0104        /* NULL terminate the char string in the buffer */
                 ; 0000 0105        buffer[nbytes+1]=NULL;
00031e 01f4      	MOVW R30,R8
                +
00031f 51ed     +SUBI R30 , LOW ( - _buffer - ( 1 ) )
000320 4ff6     +SBCI R31 , HIGH ( - _buffer - ( 1 ) )
                 	__ADDW1MN _buffer,1
000321 e0a0      	LDI  R26,LOW(0)
000322 83a0      	STD  Z+0,R26
                 ; 0000 0106        /* display the buffer contents */
                 ; 0000 0107        printf("Read text: \"%s\"\r\n",buffer);
                +
000323 e1e6     +LDI R30 , LOW ( 2 * _0x0 + ( 410 ) )
000324 e0f3     +LDI R31 , HIGH ( 2 * _0x0 + ( 410 ) )
000325 e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 410 ) )
000326 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 410 ) )
                 	__POINTD1FN _0x0,410
000327 940e 180d 	CALL __PUTPARD1
000329 eee2      	LDI  R30,LOW(_buffer)
00032a e0f9      	LDI  R31,HIGH(_buffer)
00032b 2766      	CLR  R22
00032c 2777      	CLR  R23
00032d 940e 13f8 	CALL SUBOPT_0x2
                 ; 0000 0108        }
                 ; 0000 0109     else
00032f c003      	RJMP _0x36
                 _0x35:
                 ; 0000 010A        /* an error occured, display it and stop */
                 ; 0000 010B        error(res,6);
000330 927a      	ST   -Y,R7
000331 e0a6      	LDI  R26,LOW(6)
000332 dee0      	RCALL _error
                 ; 0000 010C 
                 ; 0000 010D 
                 ; 0000 010E     /* close the file */
                 ; 0000 010F     /*
                 ; 0000 0110     if ((res=f_close(&file))==FR_OK)
                 ; 0000 0111        printf("File %s closed OK\r\n",path);
                 ; 0000 0112     else
                 ; 0000 0113        // an error occured, display it and stop
                 ; 0000 0114        error(res,6);
                 ; 0000 0115     */
                 ; 0000 0116 
                 ; 0000 0117     /* display file's attribute, size and time stamp */
                 ; 0000 0118     //display_status(path);
                 ; 0000 0119 
                 ; 0000 011A 
                 ; 0000 011B     /* change file's attributes, set the file to be Read-Only */
                 ; 0000 011C     /*
                 ; 0000 011D     if ((res=f_chmod(path,AM_RDO,AM_RDO))==FR_OK)
                 ; 0000 011E        printf("Read-Only attribute set OK\r\n",path);
                 ; 0000 011F     else
                 ; 0000 0120        // an error occured, display it and stop
                 ; 0000 0121        error(res,7);
                 ; 0000 0122     */
                 ; 0000 0123   return 1;
                 _0x36:
000333 e0e1      	LDI  R30,LOW(1)
000334 c0d1      	RJMP _0x20C0019
                 ; 0000 0124 }
                 ; .FEND
                 
                 	.DSEG
                 _0x23:
000940           	.BYTE 0x2A
                 ;void main( void ){
                 ; 0000 0125 void main( void ){
                 
                 	.CSEG
                 _main:
                 ; .FSTART _main
                 ; 0000 0126   unsigned char testBuffer1[PAGESIZE];      // Declares variables for testing
                 ; 0000 0127   //unsigned char testBuffer2[PAGESIZE];      // Note. Each array uses PAGESIZE bytes of
                 ; 0000 0128                                             // code stack
                 ; 0000 0129   static unsigned char testChar; // A warning will come saying that this var is set but never used. Ignore it.
                 ; 0000 012A   int index;
                 ; 0000 012B 
                 ; 0000 012C   /* globally enable interrupts */
                 ; 0000 012D     #asm("sei")
000335 50d1      	SUBI R29,1
                 ;	testBuffer1 -> Y+0
                 ;	index -> R16,R17
000336 9478      	sei
                 ; 0000 012E 
                 ; 0000 012F   DDRC=0xFF;
000337 efef      	LDI  R30,LOW(255)
000338 bbe4      	OUT  0x14,R30
                 ; 0000 0130   PORTC=0xFF;
000339 bbe5      	OUT  0x15,R30
                 ; 0000 0131   /* initialize the LCD for 2 lines & 16 columns */
                 ; 0000 0132     lcd_init(16);
00033a e1a0      	LDI  R26,LOW(16)
00033b 940e 13b5 	CALL _lcd_init
                 ; 0000 0133   /* switch to writing in Display RAM */
                 ; 0000 0134     //lcd_gotoxy(0,0);
                 ; 0000 0135     lcd_clear();
00033d 940e 136b 	CALL _lcd_clear
                 ; 0000 0136     //lcd_putsf("User char 0:");
                 ; 0000 0137 
                 ; 0000 0138   //disk_timerproc();
                 ; 0000 0139   lcd_clear();
00033f 940e 136b 	CALL _lcd_clear
                 ; 0000 013A   lcd_putsf("pff Test3.");
                +
000341 e2a8     +LDI R26 , LOW ( 2 * _0x0 + ( 428 ) )
000342 e0b3     +LDI R27 , HIGH ( 2 * _0x0 + ( 428 ) )
000343 e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 428 ) )
000344 e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 428 ) )
                 	__POINTD2FN _0x0,428
000345 940e 13a3 	CALL _lcd_putsf
                 ; 0000 013B   delay_ms(200);
000347 eca8      	LDI  R26,LOW(200)
000348 e0b0      	LDI  R27,0
000349 940e 1715 	CALL _delay_ms
                 ; 0000 013C   UnitTest1();
00034b df25      	RCALL _UnitTest1
                 ; 0000 013D 
                 ; 0000 013E   //RenameTest();
                 ; 0000 013F   //UpdateTest();
                 ; 0000 0140   //WriteDataTest();
                 ; 0000 0141   //ReadDataTest();
                 ; 0000 0142 
                 ; 0000 0143   /* switch to writing in Display RAM */
                 ; 0000 0144     lcd_gotoxy(0,0);
00034c e0e0      	LDI  R30,LOW(0)
00034d 93ea      	ST   -Y,R30
00034e e0a0      	LDI  R26,LOW(0)
00034f 940e 135c 	CALL _lcd_gotoxy
                 ; 0000 0145     lcd_putsf("Test3 done.");
                +
000351 e3a3     +LDI R26 , LOW ( 2 * _0x0 + ( 439 ) )
000352 e0b3     +LDI R27 , HIGH ( 2 * _0x0 + ( 439 ) )
000353 e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 439 ) )
000354 e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 439 ) )
                 	__POINTD2FN _0x0,439
000355 940e 13a3 	CALL _lcd_putsf
                 ; 0000 0146   do
                 _0x38:
                 ; 0000 0147     {
                 ; 0000 0148       PORTC.0=0;
000357 98a8      	CBI  0x15,0
                 ; 0000 0149       PORTC.1=0;
000358 98a9      	CBI  0x15,1
                 ; 0000 014A       delay_ms(500);
000359 940e 13ff 	CALL SUBOPT_0x3
                 ; 0000 014B       PORTC.1=1;
00035b 9aa9      	SBI  0x15,1
                 ; 0000 014C       PORTC.0=1;
00035c 9aa8      	SBI  0x15,0
                 ; 0000 014D       delay_ms(500);
00035d 940e 13ff 	CALL SUBOPT_0x3
                 ; 0000 014E       PORTC=0xFC;
00035f efec      	LDI  R30,LOW(252)
000360 bbe5      	OUT  0x15,R30
                 ; 0000 014F     }
                 ; 0000 0150   while(1);
000361 cff5      	RJMP _0x38
                 ; 0000 0151   for(index=0; index<PAGESIZE; index++){
                 _0x43:
                +
000362 3000     +CPI R16 , LOW ( 256 )
000363 e0e1     +LDI R30 , HIGH ( 256 )
000364 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
000365 f444      	BRGE _0x44
                 ; 0000 0152     testBuffer1[index]=index;//(unsigned char)0xFF; // Fills testBuffer1 with values FF
000366 01f8      	MOVW R30,R16
000367 01de      	MOVW R26,R28
000368 0fea      	ADD  R30,R26
000369 1ffb      	ADC  R31,R27
00036a 8300      	ST   Z,R16
                 ; 0000 0153   }
                +
00036b 5f0f     +SUBI R16 , LOW ( - 1 )
00036c 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
00036d cff4      	RJMP _0x43
                 _0x44:
                 ; 0000 0154   if(WriteFlashBytes(0x2, testBuffer1,PAGESIZE)){     // Writes testbuffer1 to Flash page 2
00036e 940e 1425 	CALL SUBOPT_0x7
000370 01fe      	MOVW R30,R28
000371 9634      	ADIW R30,4
000372 93fa      	ST   -Y,R31
000373 93ea      	ST   -Y,R30
000374 e0a0      	LDI  R26,LOW(256)
000375 e0b1      	LDI  R27,HIGH(256)
000376 d0ba      	RCALL _WriteFlashBytes
000377 30e0      	CPI  R30,0
000378 f009      	BREQ _0x45
                 ; 0000 0155     PORTC.2=0;
000379 98aa      	CBI  0x15,2
                 ; 0000 0156   }                                            // Same as byte 4 on page 2
                 ; 0000 0157   //MCUCR &= ~(1<<IVSEL);
                 ; 0000 0158   ReadFlashBytes(0x2,&testChar,1);        // Reads back value from address 0x204
                 _0x45:
00037a 940e 1425 	CALL SUBOPT_0x7
00037c 940e 142c 	CALL SUBOPT_0x8
                 ; 0000 0159   if(testChar==0x00)
00037e 91e0 0ae2 	LDS  R30,_testChar_S0000005000
000380 30e0      	CPI  R30,0
000381 f529      	BRNE _0x48
                 ; 0000 015A   {
                 ; 0000 015B       ReadFlashBytes(0x3,&testChar,1);        // Reads back value from address 0x204
                +
000382 e0e3     +LDI R30 , LOW ( 0x3 )
000383 e0f0     +LDI R31 , HIGH ( 0x3 )
000384 e060     +LDI R22 , BYTE3 ( 0x3 )
000385 e070     +LDI R23 , BYTE4 ( 0x3 )
                 	__GETD1N 0x3
000386 940e 1434 	CALL SUBOPT_0x9
                 ; 0000 015C       if(testChar==0x01)
000388 91a0 0ae2 	LDS  R26,_testChar_S0000005000
00038a 30a1      	CPI  R26,LOW(0x1)
00038b f431      	BRNE _0x49
                 ; 0000 015D         ReadFlashBytes(0x100,&testChar,1);        // Reads back value from address 0x204
                +
00038c e0e0     +LDI R30 , LOW ( 0x100 )
00038d e0f1     +LDI R31 , HIGH ( 0x100 )
00038e e060     +LDI R22 , BYTE3 ( 0x100 )
00038f e070     +LDI R23 , BYTE4 ( 0x100 )
                 	__GETD1N 0x100
000390 940e 1434 	CALL SUBOPT_0x9
                 ; 0000 015E         if(testChar==0xFE)
                 _0x49:
000392 91a0 0ae2 	LDS  R26,_testChar_S0000005000
000394 3fae      	CPI  R26,LOW(0xFE)
000395 f431      	BRNE _0x4A
                 ; 0000 015F             ReadFlashBytes(0x101,&testChar,1);        // Reads back value from address 0x204
                +
000396 e0e1     +LDI R30 , LOW ( 0x101 )
000397 e0f1     +LDI R31 , HIGH ( 0x101 )
000398 e060     +LDI R22 , BYTE3 ( 0x101 )
000399 e070     +LDI R23 , BYTE4 ( 0x101 )
                 	__GETD1N 0x101
00039a 940e 1434 	CALL SUBOPT_0x9
                 ; 0000 0160             if(testChar==0xFF)
                 _0x4A:
00039c 91a0 0ae2 	LDS  R26,_testChar_S0000005000
00039e 3faf      	CPI  R26,LOW(0xFF)
00039f f439      	BRNE _0x4B
                 ; 0000 0161               while(1)
                 _0x4C:
                 ; 0000 0162               {
                 ; 0000 0163                   PORTC.0=0;
0003a0 98a8      	CBI  0x15,0
                 ; 0000 0164                   delay_ms(500);
0003a1 940e 13ff 	CALL SUBOPT_0x3
                 ; 0000 0165                   PORTC.0=1;
0003a3 9aa8      	SBI  0x15,0
                 ; 0000 0166                   delay_ms(500);
0003a4 940e 13ff 	CALL SUBOPT_0x3
                 ; 0000 0167               }
0003a6 cff9      	RJMP _0x4C
                 ; 0000 0168   }
                 _0x4B:
                 ; 0000 0169 
                 ; 0000 016A   while(1)
                 _0x48:
                 _0x53:
                 ; 0000 016B   {
                 ; 0000 016C       PORTC.1=0;
0003a7 98a9      	CBI  0x15,1
                 ; 0000 016D       delay_ms(500);
0003a8 940e 13ff 	CALL SUBOPT_0x3
                 ; 0000 016E       PORTC.1=1;
0003aa 9aa9      	SBI  0x15,1
                 ; 0000 016F       delay_ms(500);
0003ab 940e 13ff 	CALL SUBOPT_0x3
                 ; 0000 0170   }
0003ad cff9      	RJMP _0x53
                 ; 0000 0171   //}
                 ; 0000 0172 }
                 _0x5A:
0003ae cfff      	RJMP _0x5A
                 ; .FEND
                 ;// This file has been prepared for Doxygen automatic documentation generation.
                 ;/*! \file ********************************************************************
                 ;*
                 ;* Atmel Corporation
                 ;*
                 ;* - File              : Self_programming.c
                 ;* - Compiler          : IAR EWAVR 2.28a / 3.10c and newer
                 ;*
                 ;* - Support mail      : avr@atmel.com
                 ;*
                 ;* - Supported devices : All devices with bootloaders support.
                 ;*
                 ;* - AppNote           : AVR106 - C functions for reading and writing
                 ;*                       to flash memory.
                 ;*
                 ;* - Description       : The file contains functions for easy reading and writing
                 ;*                       of Flash memory on parts having the "Self-programming"
                 ;*                       feature. The user functions are as follows:
                 ;*
                 ;*                       ReadFlashByte()
                 ;*                       ReadFlashPage()
                 ;*                       WriteFlashByte()
                 ;*                       WriteFlashPage()
                 ;*                       RecoverFlash()
                 ;*
                 ;*                       The remaining functions contained in this file are used
                 ;*                       by the functions listet above.
                 ;*
                 ;* $Revision: 2.0 $
                 ;* $Date: Wednesday, January 18, 2006 15:18:52 UTC $
                 ;*
                 ;****************************************************************************/
                 ;#include <io.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 ;//#include <inavr.h>
                 ;#include "Self_programming.h"
                 ;//#include "flash.h"
                 ;
                 ;void (*__AddrToZ24WordToR1R0ByteToSPMCR_SPM_F)(void flash * addr, unsigned int data)= (void(*)(void flash *, unsigned in ...
                 ;void (*__AddrToZ24ByteToSPMCR_SPM_W)(void flash * addr)= (void(*)(void flash *)) 0x0F9EB;
                 ;void (*__AddrToZ24ByteToSPMCR_SPM_E)(void flash * addr)= (void(*)(void flash *)) 0x0FA0B;
                 
                 	.DSEG
                 ;void (*__AddrToZ24ByteToSPMCR_SPM_EW)(void flash * addr)= (void(*)(void flash *)) 0x0FA2B;
                 ;
                 ;/*!
                 ;* Declare global struct variable in EEPROM if Flash recovery enabled.
                 ;* FlashBackup pageNumber holds Flash pageaddress (/PAGESIZE) the data in Flash
                 ;* recovery buffer should be written to if data need to be recovered.
                 ;* FlashBackup.status tells if data need to be recovered.
                 ;**/
                 ;#ifdef __FLASH_RECOVER
                 ;__eeprom struct {
                 ;  unsigned int  pageNumber;
                 ;  unsigned char status;
                 ;}FlashBackup = {0};
                 ;#endif
                 ;
                 ;__eeprom struct {
                 ;  unsigned long  flashStartAdr;
                 ;  unsigned int length;
                 ;  unsigned char status;//0=already moved to flash, 1=not moved to flash yet
                 ;  unsigned char data[PAGESIZE];
                 ;}_EepromBackup @10;
                 ;
                 ;/*!
                 ;* The function Returns one byte located on Flash address given by ucFlashStartAdr.
                 ;**/
                 ;unsigned char ReadFlashByte(MyAddressType flashStartAdr){
                 ; 0001 0042 unsigned char ReadFlashByte(MyAddressType flashStartAdr){
                 
                 	.CSEG
                 _ReadFlashByte:
                 ; .FSTART _ReadFlashByte
                 ; 0001 0043 //#pragma diag_suppress=Pe1053 // Suppress warning for conversion from long-type address to flash ptr.
                 ; 0001 0044   flashStartAdr;//+=ADR_LIMIT_LOW;
0003af 940e 1812 	CALL __PUTPARD2
                 ;	flashStartAdr -> Y+0
0003b1 940e 1437 	CALL SUBOPT_0xA
                 ; 0001 0045   return (unsigned char)*((MyFlashCharPointer)flashStartAdr);
0003b3 940e 1437 	CALL SUBOPT_0xA
                +
0003b5 bf6b     +OUT RAMPZ , R22
0003b6 91e6     +ELPM R30 , Z
                 	__GETBRPF 30
0003b7 c1e9      	RJMP _0x20C0016
                 ; 0001 0046 //#pragma diag_default=Pe1053 // Back to default.
                 ; 0001 0047 } // Returns data from Flash
                 ; .FEND
                 ;
                 ;/*!
                 ;* The function reads one Flash page from address flashStartAdr and stores data
                 ;* in array dataPage[]. The number of bytes stored is depending upon the
                 ;* Flash page size. The function returns FALSE if input address is not a Flash
                 ;* page address, else TRUE.
                 ;**/
                 ;unsigned char ReadFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage){
                 ; 0001 004F unsigned char ReadFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage){
                 _ReadFlashPage:
                 ; .FSTART _ReadFlashPage
                 ; 0001 0050   unsigned int index;
                 ; 0001 0051   flashStartAdr;//+=ADR_LIMIT_LOW;
0003b8 940e 143a 	CALL SUBOPT_0xB
                 ;	flashStartAdr -> Y+4
                 ;	*dataPage -> Y+2
                 ;	index -> R16,R17
0003ba 940e 143f 	CALL SUBOPT_0xC
                 ; 0001 0052   if(!(flashStartAdr & (PAGESIZE-1))){      // If input address is a page address
0003bc 940e 143f 	CALL SUBOPT_0xC
0003be 30e0      	CPI  R30,0
0003bf f4c9      	BRNE _0x20005
                 ; 0001 0053     for(index = 0; index < PAGESIZE; index++){
                +
0003c0 e000     +LDI R16 , LOW ( 0 )
0003c1 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x20007:
                +
0003c2 3000     +CPI R16 , LOW ( 256 )
0003c3 e0e1     +LDI R30 , HIGH ( 256 )
0003c4 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
0003c5 f478      	BRSH _0x20008
                 ; 0001 0054       dataPage[index] = ReadFlashByte(flashStartAdr + index);
0003c6 01f8      	MOVW R30,R16
0003c7 81aa      	LDD  R26,Y+2
0003c8 81bb      	LDD  R27,Y+2+1
0003c9 0fea      	ADD  R30,R26
0003ca 1ffb      	ADC  R31,R27
0003cb 93ff      	PUSH R31
0003cc 93ef      	PUSH R30
0003cd 940e 1444 	CALL SUBOPT_0xD
0003cf 91af      	POP  R26
0003d0 91bf      	POP  R27
0003d1 93ec      	ST   X,R30
                 ; 0001 0055     }
                +
0003d2 5f0f     +SUBI R16 , LOW ( - 1 )
0003d3 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
0003d4 cfed      	RJMP _0x20007
                 _0x20008:
                 ; 0001 0056     return TRUE;                            // Return TRUE if valid page address
0003d5 e0e1      	LDI  R30,LOW(1)
0003d6 8119      	LDD  R17,Y+1
0003d7 8108      	LDD  R16,Y+0
0003d8 c1aa      	RJMP _0x20C0017
                 ; 0001 0057   }
                 ; 0001 0058   else{
                 _0x20005:
                 ; 0001 0059     return FALSE;                           // Return FALSE if not valid page address
0003d9 e0e0      	LDI  R30,LOW(0)
0003da 8119      	LDD  R17,Y+1
0003db 8108      	LDD  R16,Y+0
0003dc c1a6      	RJMP _0x20C0017
                 ; 0001 005A   }
                 ; 0001 005B }
                 ; .FEND
                 ;unsigned char ReadFlashBytes(MyAddressType flashStartAdr, unsigned char *dataPage, unsigned int length){
                 ; 0001 005C unsigned char ReadFlashBytes(MyAddressType flashStartAdr, unsigned char *dataPage, unsigned int length){
                 _ReadFlashBytes:
                 ; .FSTART _ReadFlashBytes
                 ; 0001 005D   	unsigned int index;
                 ; 0001 005E   	flashStartAdr+=ADR_LIMIT_LOW;
0003dd 940e 143a 	CALL SUBOPT_0xB
                 ;	flashStartAdr -> Y+6
                 ;	*dataPage -> Y+4
                 ;	length -> Y+2
                 ;	index -> R16,R17
0003df 940e 144f 	CALL SUBOPT_0xE
                +
0003e1 50e0     +SUBI R30 , LOW ( - 57344 )
0003e2 42f0     +SBCI R31 , HIGH ( - 57344 )
0003e3 4f6f     +SBCI R22 , BYTE3 ( - 57344 )
0003e4 4f7f     +SBCI R23 , BYTE4 ( - 57344 )
                 	__ADDD1N 57344
0003e5 940e 1454 	CALL SUBOPT_0xF
                 ; 0001 005F     for(index = 0; index < length; index++){
                +
0003e7 e000     +LDI R16 , LOW ( 0 )
0003e8 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x2000B:
0003e9 81ea      	LDD  R30,Y+2
0003ea 81fb      	LDD  R31,Y+2+1
0003eb 170e      	CP   R16,R30
0003ec 071f      	CPC  R17,R31
0003ed f4a8      	BRSH _0x2000C
                 ; 0001 0060       dataPage[index] = ReadFlashByte(flashStartAdr + index);
0003ee 01f8      	MOVW R30,R16
0003ef 81ac      	LDD  R26,Y+4
0003f0 81bd      	LDD  R27,Y+4+1
0003f1 0fea      	ADD  R30,R26
0003f2 1ffb      	ADC  R31,R27
0003f3 93ff      	PUSH R31
0003f4 93ef      	PUSH R30
0003f5 01f8      	MOVW R30,R16
0003f6 940e 1459 	CALL SUBOPT_0x10
0003f8 2766      	CLR  R22
0003f9 2777      	CLR  R23
0003fa 940e 1728 	CALL __ADDD21
0003fc dfb2      	RCALL _ReadFlashByte
0003fd 91af      	POP  R26
0003fe 91bf      	POP  R27
0003ff 93ec      	ST   X,R30
                 ; 0001 0061     }
                +
000400 5f0f     +SUBI R16 , LOW ( - 1 )
000401 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000402 cfe6      	RJMP _0x2000B
                 _0x2000C:
                 ; 0001 0062     return TRUE;                            // Return TRUE if valid page address
000403 e0e1      	LDI  R30,LOW(1)
000404 8119      	LDD  R17,Y+1
000405 8108      	LDD  R16,Y+0
                 _0x20C0019:
000406 962a      	ADIW R28,10
000407 9508      	RET
                 ; 0001 0063 }
                 ; .FEND
                 ;unsigned char VerifyFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage){
                 ; 0001 0064 unsigned char VerifyFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage){
                 _VerifyFlashPage:
                 ; .FSTART _VerifyFlashPage
                 ; 0001 0065   unsigned int index;
                 ; 0001 0066   if(!(flashStartAdr & (PAGESIZE-1))){      // If input address is a page address
000408 940e 143a 	CALL SUBOPT_0xB
                 ;	flashStartAdr -> Y+4
                 ;	*dataPage -> Y+2
                 ;	index -> R16,R17
00040a 940e 143f 	CALL SUBOPT_0xC
00040c 30e0      	CPI  R30,0
00040d f4f1      	BRNE _0x2000D
                 ; 0001 0067     for(index = 0; index < PAGESIZE; index++){
                +
00040e e000     +LDI R16 , LOW ( 0 )
00040f e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x2000F:
                +
000410 3000     +CPI R16 , LOW ( 256 )
000411 e0e1     +LDI R30 , HIGH ( 256 )
000412 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
000413 f4a0      	BRSH _0x20010
                 ; 0001 0068       if(dataPage[index] != ReadFlashByte(flashStartAdr + index))
000414 01f8      	MOVW R30,R16
000415 81aa      	LDD  R26,Y+2
000416 81bb      	LDD  R27,Y+2+1
000417 0fae      	ADD  R26,R30
000418 1fbf      	ADC  R27,R31
000419 91ec      	LD   R30,X
00041a 93ef      	PUSH R30
00041b 940e 1444 	CALL SUBOPT_0xD
00041d 91af      	POP  R26
00041e 17ea      	CP   R30,R26
00041f f029      	BREQ _0x20011
                 ; 0001 0069       {
                 ; 0001 006A         PORTC.6=0;
000420 98ae      	CBI  0x15,6
                 ; 0001 006B         return FALSE;
000421 e0e0      	LDI  R30,LOW(0)
000422 8119      	LDD  R17,Y+1
000423 8108      	LDD  R16,Y+0
000424 c15e      	RJMP _0x20C0017
                 ; 0001 006C       }
                 ; 0001 006D     }
                 _0x20011:
                +
000425 5f0f     +SUBI R16 , LOW ( - 1 )
000426 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000427 cfe8      	RJMP _0x2000F
                 _0x20010:
                 ; 0001 006E     return TRUE;                            // Return TRUE if valid page address
000428 e0e1      	LDI  R30,LOW(1)
000429 8119      	LDD  R17,Y+1
00042a 8108      	LDD  R16,Y+0
00042b c157      	RJMP _0x20C0017
                 ; 0001 006F   }
                 ; 0001 0070   else{
                 _0x2000D:
                 ; 0001 0071     PORTC.7=0;
00042c 98af      	CBI  0x15,7
                 ; 0001 0072     return FALSE;                           // Return FALSE if not valid page address
00042d e0e0      	LDI  R30,LOW(0)
00042e 8119      	LDD  R17,Y+1
00042f 8108      	LDD  R16,Y+0
000430 c152      	RJMP _0x20C0017
                 ; 0001 0073   }
                 ; 0001 0074 }
                 ; .FEND
                 ;unsigned char WriteFlashBytes(MyAddressType flashAdr, unsigned char *data, unsigned int length)
                 ; 0001 0076 {
                 _WriteFlashBytes:
                 ; .FSTART _WriteFlashBytes
                 ; 0001 0077     unsigned char tempBuffer[PAGESIZE];
                 ; 0001 0078     MyAddressType flashAdrStart,flashAdrNext;
                 ; 0001 0079     unsigned int lengthStart,lengthIndex;                //length=0x20
                 ; 0001 007A     while(length)
000431 93ba      	ST   -Y,R27
000432 93aa      	ST   -Y,R26
000433 9728      	SBIW R28,8
000434 50d1      	SUBI R29,1
000435 940e 186b 	CALL __SAVELOCR4
                 ;	flashAdr -> Y+272
                 ;	*data -> Y+270
                 ;	length -> Y+268
                 ;	tempBuffer -> Y+12
                 ;	flashAdrStart -> Y+8
                 ;	flashAdrNext -> Y+4
                 ;	lengthStart -> R16,R17
                 ;	lengthIndex -> R18,R19
                 _0x20017:
000437 940e 145e 	CALL SUBOPT_0x11
000439 9730      	SBIW R30,0
00043a f409      	BRNE PC+2
00043b c091      	RJMP _0x20019
                 ; 0001 007B     {
                 ; 0001 007C         flashAdrStart= flashAdr-(flashAdr%PAGESIZE);//0x1F0-(0x1F0%0x100)=0x0100                        //
00043c 940e 1465 	CALL SUBOPT_0x12
00043e 940e 1472 	CALL SUBOPT_0x13
000440 940e 1732 	CALL __SUBD21
                +
000442 87a8     +STD Y + 8 , R26
000443 87b9     +STD Y + 8 + 1 , R27
000444 878a     +STD Y + 8 + 2 , R24
000445 879b     +STD Y + 8 + 3 , R25
                 	__PUTD2S 8
                 ; 0001 007D         flashAdrNext = flashAdrStart+PAGESIZE;          //0x0100+0x100=0x200
000446 940e 147b 	CALL SUBOPT_0x14
                +
000448 50e0     +SUBI R30 , LOW ( - 256 )
000449 4fff     +SBCI R31 , HIGH ( - 256 )
00044a 4f6f     +SBCI R22 , BYTE3 ( - 256 )
00044b 4f7f     +SBCI R23 , BYTE4 ( - 256 )
                 	__ADDD1N 256
00044c 940e 1480 	CALL SUBOPT_0x15
                 ; 0001 007E         if((flashAdrNext - flashAdr) >= length)    //enough space case
00044e 940e 1472 	CALL SUBOPT_0x13
000450 940e 143f 	CALL SUBOPT_0xC
000452 940e 172d 	CALL __SUBD12
000454 01df      	MOVW R26,R30
000455 01cb      	MOVW R24,R22
000456 940e 145e 	CALL SUBOPT_0x11
000458 2766      	CLR  R22
000459 2777      	CLR  R23
00045a 940e 1864 	CALL __CPD21
00045c f060      	BRLO _0x2001A
                 ; 0001 007F         {
                 ; 0001 0080            lengthStart=length;
                +
00045d 01fe     +MOVW R30 , R28
00045e 5fe4     +SUBI R30 , LOW ( - 268 )
00045f 4ffe     +SBCI R31 , HIGH ( - 268 )
000460 9101     +LD R16 , Z +
000461 8110     +LD R17 , Z
                 	__GETWRSX 16,17,268
                 ; 0001 0081            length=0;
000462 e0e0      	LDI  R30,LOW(0)
                +
000463 01de     +MOVW R26 , R28
000464 5fa4     +SUBI R26 , LOW ( - 268 )
000465 4fbe     +SBCI R27 , HIGH ( - 268 )
000466 93ed     +ST X + , R30
000467 93ec     +ST X , R30
                 	__CLRW1SX 268
                 ; 0001 0082         }
                 ; 0001 0083         else                                   //(0x200-0x1F0)<0x20
000468 c014      	RJMP _0x2001B
                 _0x2001A:
                 ; 0001 0084         {
                 ; 0001 0085            lengthStart=(flashAdrNext - flashAdr);        //len1=0x200-0x1F0=0x10
                +
000469 01de     +MOVW R26 , R28
00046a 5fa0     +SUBI R26 , LOW ( - 272 )
00046b 4fbe     +SBCI R27 , HIGH ( - 272 )
00046c 900d     +LD R0 , X +
00046d 91bc     +LD R27 , X
00046e 2da0     +MOV R26 , R0
                 	__GETW2SX 272
00046f 81ec      	LDD  R30,Y+4
000470 81fd      	LDD  R31,Y+4+1
000471 1bea      	SUB  R30,R26
000472 0bfb      	SBC  R31,R27
000473 018f      	MOVW R16,R30
                 ; 0001 0086            length-=lengthStart;                         //len2=0x20-0x10=0x10
000474 940e 145e 	CALL SUBOPT_0x11
000476 1be0      	SUB  R30,R16
000477 0bf1      	SBC  R31,R17
                +
000478 01de     +MOVW R26 , R28
000479 5fa4     +SUBI R26 , LOW ( - 268 )
00047a 4fbe     +SBCI R27 , HIGH ( - 268 )
00047b 93ed     +ST X + , R30
00047c 93fc     +ST X , R31
                 	__PUTW1SX 268
                 ; 0001 0087         }
                 _0x2001B:
                 ; 0001 0088         if(ReadFlashPage(flashAdrStart,tempBuffer)==FALSE) //read flash page to tempBuffer
00047d 940e 147b 	CALL SUBOPT_0x14
00047f 940e 180d 	CALL __PUTPARD1
000481 01de      	MOVW R26,R28
000482 9650      	ADIW R26,16
000483 df34      	RCALL _ReadFlashPage
000484 30e0      	CPI  R30,0
000485 f419      	BRNE _0x2001C
                 ; 0001 0089         {
                 ; 0001 008A             PORTC.3=0;
000486 98ab      	CBI  0x15,3
                 ; 0001 008B             return FALSE;
000487 e0e0      	LDI  R30,LOW(0)
000488 c045      	RJMP _0x20C0018
                 ; 0001 008C         }
                 ; 0001 008D         for(lengthIndex=(flashAdr%PAGESIZE);lengthIndex<((flashAdr%PAGESIZE)+lengthStart);lengthIndex++)
                 _0x2001C:
                +
000489 01fe     +MOVW R30 , R28
00048a 5fe0     +SUBI R30 , LOW ( - 272 )
00048b 4ffe     +SBCI R31 , HIGH ( - 272 )
00048c 9001     +LD R0 , Z +
00048d 81f0     +LD R31 , Z
00048e 2de0     +MOV R30 , R0
                 	__GETW1SX 272
00048f 70f0      	ANDI R31,HIGH(0xFF)
000490 019f      	MOVW R18,R30
                 _0x20020:
000491 940e 1465 	CALL SUBOPT_0x12
000493 01df      	MOVW R26,R30
000494 01cb      	MOVW R24,R22
000495 01f8      	MOVW R30,R16
000496 940e 1485 	CALL SUBOPT_0x16
000498 01d9      	MOVW R26,R18
000499 2788      	CLR  R24
00049a 2799      	CLR  R25
00049b 940e 1864 	CALL __CPD21
00049d f4a8      	BRSH _0x20021
                 ; 0001 008E         {
                 ; 0001 008F             tempBuffer[lengthIndex]=*data++;
00049e 01f9      	MOVW R30,R18
00049f 01de      	MOVW R26,R28
0004a0 961c      	ADIW R26,12
0004a1 0fea      	ADD  R30,R26
0004a2 1ffb      	ADC  R31,R27
0004a3 010f      	MOVW R0,R30
0004a4 01de      	MOVW R26,R28
0004a5 5fa2      	SUBI R26,LOW(-(270))
0004a6 4fbe      	SBCI R27,HIGH(-(270))
0004a7 91ed      	LD   R30,X+
0004a8 91fd      	LD   R31,X+
0004a9 9631      	ADIW R30,1
0004aa 93fe      	ST   -X,R31
0004ab 93ee      	ST   -X,R30
0004ac 9731      	SBIW R30,1
0004ad 81e0      	LD   R30,Z
0004ae 01d0      	MOVW R26,R0
0004af 93ec      	ST   X,R30
                 ; 0001 0090         }
                +
0004b0 5f2f     +SUBI R18 , LOW ( - 1 )
0004b1 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
0004b2 cfde      	RJMP _0x20020
                 _0x20021:
                 ; 0001 0091         flashAdr=flashAdrNext;
0004b3 940e 143f 	CALL SUBOPT_0xC
                +
0004b5 01de     +MOVW R26 , R28
0004b6 5fa0     +SUBI R26 , LOW ( - 272 )
0004b7 4fbe     +SBCI R27 , HIGH ( - 272 )
0004b8 93ed     +ST X + , R30
0004b9 93fd     +ST X + , R31
0004ba 936d     +ST X + , R22
0004bb 937c     +ST X , R23
                 	__PUTD1SX 272
                 ; 0001 0092         if(WriteFlashPage(flashAdrStart+ADR_LIMIT_LOW,tempBuffer)==FALSE) //write tempBuffer to flash page
0004bc 940e 147b 	CALL SUBOPT_0x14
                +
0004be 50e0     +SUBI R30 , LOW ( - 57344 )
0004bf 42f0     +SBCI R31 , HIGH ( - 57344 )
0004c0 4f6f     +SBCI R22 , BYTE3 ( - 57344 )
0004c1 4f7f     +SBCI R23 , BYTE4 ( - 57344 )
                 	__ADDD1N 57344
0004c2 940e 180d 	CALL __PUTPARD1
0004c4 01de      	MOVW R26,R28
0004c5 9650      	ADIW R26,16
0004c6 d00c      	RCALL _WriteFlashPage
0004c7 30e0      	CPI  R30,0
0004c8 f419      	BRNE _0x20022
                 ; 0001 0093         {
                 ; 0001 0094             PORTC.4=0;
0004c9 98ac      	CBI  0x15,4
                 ; 0001 0095             return FALSE;
0004ca e0e0      	LDI  R30,LOW(0)
0004cb c002      	RJMP _0x20C0018
                 ; 0001 0096         }
                 ; 0001 0097     }
                 _0x20022:
0004cc cf6a      	RJMP _0x20017
                 _0x20019:
                 ; 0001 0098     return TRUE;
0004cd e0e1      	LDI  R30,LOW(1)
                 _0x20C0018:
0004ce 940e 1872 	CALL __LOADLOCR4
0004d0 9664      	ADIW R28,20
0004d1 5fdf      	SUBI R29,-1
0004d2 9508      	RET
                 ; 0001 0099 }
                 ; .FEND
                 ;
                 ;/*!
                 ;* The function writes byte data to Flash address flashAddr. Returns FALSE if
                 ;* input address is not valid Flash byte address for writing, else TRUE.
                 ;**/
                 ;unsigned char WriteFlashByte(MyAddressType flashAddr, unsigned char data){
                 ; 0001 009F unsigned char WriteFlashByte(MyAddressType flashAddr, unsigned char data){
                 ; 0001 00A0   MyAddressType  pageAdr;
                 ; 0001 00A1   unsigned char eepromInterruptSettings,saveSREG;
                 ; 0001 00A2   flashAddr+=ADR_LIMIT_LOW;
                 ;	flashAddr -> Y+7
                 ;	data -> Y+6
                 ;	pageAdr -> Y+2
                 ;	eepromInterruptSettings -> R17
                 ;	saveSREG -> R16
                 ; 0001 00A3   if( AddressCheck( flashAddr & ~(PAGESIZE-1) )){
                 ; 0001 00A4 
                 ; 0001 00A5     if(ReadFlashByte(flashAddr)==data)
                 ; 0001 00A6     {
                 ; 0001 00A7         PORTC.4=0;
                 ; 0001 00A8         return TRUE;
                 ; 0001 00A9     }
                 ; 0001 00AA     eepromInterruptSettings= EECR & (1<<EERIE); // Stores EEPROM interrupt mask
                 ; 0001 00AB     EECR &= ~(1<<EERIE);                    // Disable EEPROM interrupt
                 ; 0001 00AC     while(EECR & (1<<EEWE));                // Wait if ongoing EEPROM write
                 ; 0001 00AD     saveSREG=SREG;
                 ; 0001 00AE     #asm("cli")
                 ; 0001 00AF     pageAdr=flashAddr & ~(PAGESIZE-1);      // Gets Flash page address from byte address
                 ; 0001 00B0 
                 ; 0001 00B1     #ifdef __FLASH_RECOVER
                 ; 0001 00B2     FlashBackup.status=0;                   // Inicate that Flash buffer does
                 ; 0001 00B3                                             // not contain data for writing
                 ; 0001 00B4     while(EECR & (1<<EEWE));
                 ; 0001 00B5     LpmReplaceSpm(flashAddr, data);         // Fills Flash write buffer
                 ; 0001 00B6     WriteBufToFlash(ADR_FLASH_BUFFER);      // Writes to Flash recovery buffer
                 ; 0001 00B7     FlashBackup.pageNumber = (unsigned int) (pageAdr/PAGESIZE); // Stores page address
                 ; 0001 00B8                                                        // data should be written to
                 ; 0001 00B9     FlashBackup.status = FLASH_BUFFER_FULL_ID; // Indicates that Flash recovery buffer
                 ; 0001 00BA                                                // contains unwritten data
                 ; 0001 00BB     while(EECR & (1<<EEWE));
                 ; 0001 00BC     #endif
                 ; 0001 00BD 
                 ; 0001 00BE     if(LpmReplaceSpm(flashAddr, data)!=0)         // Fills Flash write buffer
                 ; 0001 00BF     {
                 ; 0001 00C0         _PAGE_WRITE(pageAdr);
                 ; 0001 00C1         PORTC.1=0;
                 ; 0001 00C2     }
                 ; 0001 00C3     else
                 ; 0001 00C4     {
                 ; 0001 00C5         _PAGE_EW(pageAdr);
                 ; 0001 00C6         PORTC.2=0;
                 ; 0001 00C7     }
                 ; 0001 00C8 
                 ; 0001 00C9     #ifdef __FLASH_RECOVER
                 ; 0001 00CA     FlashBackup.status = 0;                 // Indicates that Flash recovery buffer
                 ; 0001 00CB                                             // does not contain unwritten data
                 ; 0001 00CC     while(EECR & (1<<EEWE));
                 ; 0001 00CD     #endif
                 ; 0001 00CE 
                 ; 0001 00CF     EECR |= eepromInterruptSettings;        // Restore EEPROM interrupt mask
                 ; 0001 00D0     SREG=saveSREG;
                 ; 0001 00D1     return TRUE;                            // Return TRUE if address
                 ; 0001 00D2                                             // valid for writing
                 ; 0001 00D3   }
                 ; 0001 00D4   else
                 ; 0001 00D5     return FALSE;                           // Return FALSE if address not
                 ; 0001 00D6                                             // valid for writing
                 ; 0001 00D7 }
                 ;
                 ;/*!
                 ;* The function writes data from array dataPage[] to Flash page address
                 ;* flashStartAdr. The Number of bytes written is depending upon the Flash page
                 ;* size. Returns FALSE if input argument ucFlashStartAdr is not a valid Flash
                 ;* page address for writing, else TRUE.
                 ;**/
                 ;unsigned char WriteFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage)
                 ; 0001 00E0 {
                 _WriteFlashPage:
                 ; .FSTART _WriteFlashPage
                 ; 0001 00E1   unsigned int index;
                 ; 0001 00E2   unsigned char eepromInterruptSettings,saveSREG;
                 ; 0001 00E3   MyAddressType  pageAdr;
                 ; 0001 00E4   flashStartAdr;//+=ADR_LIMIT_LOW;
0004d3 93ba      	ST   -Y,R27
0004d4 93aa      	ST   -Y,R26
0004d5 9724      	SBIW R28,4
0004d6 940e 186b 	CALL __SAVELOCR4
                 ;	flashStartAdr -> Y+10
                 ;	*dataPage -> Y+8
                 ;	index -> R16,R17
                 ;	eepromInterruptSettings -> R19
                 ;	saveSREG -> R18
                 ;	pageAdr -> Y+4
0004d8 940e 148a 	CALL SUBOPT_0x17
                 ; 0001 00E5   if( AddressCheck(flashStartAdr) ){
0004da 940e 148f 	CALL SUBOPT_0x18
0004dc d0a8      	RCALL _AddressCheck
0004dd 30e0      	CPI  R30,0
0004de f409      	BRNE PC+2
0004df c063      	RJMP _0x20033
                 ; 0001 00E6     if(eepromBackup(flashStartAdr,PAGESIZE,dataPage)==0)
0004e0 940e 148a 	CALL SUBOPT_0x17
0004e2 940e 180d 	CALL __PUTPARD1
0004e4 e0e0      	LDI  R30,LOW(256)
0004e5 e0f1      	LDI  R31,HIGH(256)
0004e6 93fa      	ST   -Y,R31
0004e7 93ea      	ST   -Y,R30
0004e8 85ae      	LDD  R26,Y+14
0004e9 85bf      	LDD  R27,Y+14+1
0004ea d05d      	RCALL _eepromBackup
0004eb 30e0      	CPI  R30,0
0004ec f429      	BRNE _0x20034
                 ; 0001 00E7     {
                 ; 0001 00E8         return FALSE;
0004ed e0e0      	LDI  R30,LOW(0)
0004ee 940e 1872 	CALL __LOADLOCR4
0004f0 962e      	ADIW R28,14
0004f1 9508      	RET
                 ; 0001 00E9     }
                 ; 0001 00EA     eepromInterruptSettings = EECR & (1<<EERIE); // Stoes EEPROM interrupt mask
                 _0x20034:
0004f2 b3ec      	IN   R30,0x1C
0004f3 70e8      	ANDI R30,LOW(0x8)
0004f4 2f3e      	MOV  R19,R30
                 ; 0001 00EB     EECR &= ~(1<<EERIE);                    // Disable EEPROM interrupt
0004f5 98e3      	CBI  0x1C,3
                 ; 0001 00EC     while(EECR & (1<<EEWE));                // Wait if ongoing EEPROM write
                 _0x20035:
0004f6 99e1      	SBIC 0x1C,1
0004f7 cffe      	RJMP _0x20035
                 ; 0001 00ED     saveSREG=SREG;                          // Save SREG
0004f8 b72f      	IN   R18,63
                 ; 0001 00EE     #asm("cli")
0004f9 94f8      	cli
                 ; 0001 00EF 
                 ; 0001 00F0     #ifdef __FLASH_RECOVER
                 ; 0001 00F1     FlashBackup.status=0;                   // Inicate that Flash buffer does
                 ; 0001 00F2                                             // not contain data for writing
                 ; 0001 00F3     while(EECR & (1<<EEWE));
                 ; 0001 00F4 
                 ; 0001 00F5     for(index = 0; index < PAGESIZE; index+=2){ // Fills Flash write buffer
                 ; 0001 00F6       _WAIT_FOR_SPM();
                 ; 0001 00F7       _FILL_TEMP_WORD(index, (unsigned int)dataPage[index]+((unsigned int)dataPage[index+1] << 8));
                 ; 0001 00F8     }
                 ; 0001 00F9 
                 ; 0001 00FA     WriteBufToFlash(ADR_FLASH_BUFFER);      // Writes to Flash recovery buffer
                 ; 0001 00FB     FlashBackup.pageNumber=(unsigned int)(flashStartAdr/PAGESIZE);
                 ; 0001 00FC     FlashBackup.status = FLASH_BUFFER_FULL_ID; // Indicates that Flash recovery buffer
                 ; 0001 00FD                                            // contains unwritten data
                 ; 0001 00FE     while(EECR & (1<<EEWE));
                 ; 0001 00FF     #endif
                 ; 0001 0100 
                 ; 0001 0101     //debug
                 ; 0001 0102     _PAGE_ERASE(flashStartAdr);
0004fa 940e 148f 	CALL SUBOPT_0x18
                +
0004fc 91e0 0ae3+LDS R30 , ___AddrToZ24ByteToSPMCR_SPM_E + ( 0 )
0004fe 91f0 0ae4+LDS R31 , ___AddrToZ24ByteToSPMCR_SPM_E + ( 0 ) + 1
000500 9509     +ICALL
                 	__CALL1MN ___AddrToZ24ByteToSPMCR_SPM_E,0
                 ; 0001 0103 
                 ; 0001 0104     for(index = 0; index < PAGESIZE; index+=2){ // Fills Flash write buffer
                +
000501 e000     +LDI R16 , LOW ( 0 )
000502 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x20039:
                +
000503 3000     +CPI R16 , LOW ( 256 )
000504 e0e1     +LDI R30 , HIGH ( 256 )
000505 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
000506 f4e0      	BRSH _0x2003A
                 ; 0001 0105       _FILL_TEMP_WORD(index, (unsigned int)dataPage[index]+((unsigned int)dataPage[index+1] << 8));
000507 01f8      	MOVW R30,R16
000508 2766      	CLR  R22
000509 2777      	CLR  R23
00050a 940e 180d 	CALL __PUTPARD1
00050c 01f8      	MOVW R30,R16
00050d 85ac      	LDD  R26,Y+12
00050e 85bd      	LDD  R27,Y+12+1
00050f 0fae      	ADD  R26,R30
000510 1fbf      	ADC  R27,R31
000511 900c      	LD   R0,X
000512 2411      	CLR  R1
000513 9631      	ADIW R30,1
000514 85ac      	LDD  R26,Y+12
000515 85bd      	LDD  R27,Y+12+1
000516 0fae      	ADD  R26,R30
000517 1fbf      	ADC  R27,R31
000518 91ec      	LD   R30,X
000519 2ffe      	MOV  R31,R30
00051a e0e0      	LDI  R30,0
00051b 01d0      	MOVW R26,R0
00051c 0fae      	ADD  R26,R30
00051d 1fbf      	ADC  R27,R31
00051e 01f5      	MOVW R30,R10
00051f 9509      	ICALL
                 ; 0001 0106     }
                +
000520 5f0e     +SUBI R16 , LOW ( - 2 )
000521 4f1f     +SBCI R17 , HIGH ( - 2 )
                 	__ADDWRN 16,17,2
000522 cfe0      	RJMP _0x20039
                 _0x2003A:
                 ; 0001 0107     _PAGE_WRITE(flashStartAdr);
000523 940e 148f 	CALL SUBOPT_0x18
000525 01f6      	MOVW R30,R12
000526 9509      	ICALL
                 ; 0001 0108     if(VerifyFlashPage(flashStartAdr,dataPage)==FALSE)
000527 940e 148a 	CALL SUBOPT_0x17
000529 940e 180d 	CALL __PUTPARD1
00052b 85ac      	LDD  R26,Y+12
00052c 85bd      	LDD  R27,Y+12+1
00052d deda      	RCALL _VerifyFlashPage
00052e 30e0      	CPI  R30,0
00052f f429      	BRNE _0x2003B
                 ; 0001 0109     {
                 ; 0001 010A       //PORTC.6=0;
                 ; 0001 010B       return FALSE;
000530 e0e0      	LDI  R30,LOW(0)
000531 940e 1872 	CALL __LOADLOCR4
000533 940c 0a73 	JMP  _0x20C0011
                 ; 0001 010C     }
                 ; 0001 010D     #ifdef __FLASH_RECOVER
                 ; 0001 010E       FlashBackup.status=0;                 // Inicate that Flash buffer does
                 ; 0001 010F                                             // not contain data for writing
                 ; 0001 0110       while(EECR & (1<<EEWE));
                 ; 0001 0111     #endif
                 ; 0001 0112 
                 ; 0001 0113     EECR |= eepromInterruptSettings;        // Restore EEPROM interrupt mask
                 _0x2003B:
000535 b3ec      	IN   R30,0x1C
000536 2be3      	OR   R30,R19
000537 bbec      	OUT  0x1C,R30
                 ; 0001 0114     SREG=saveSREG;                          // Restore interrupts to SREG
000538 bf2f      	OUT  0x3F,R18
                 ; 0001 0115     _EepromBackup.status=0;
                +
000539 e1a0     +LDI R26 , LOW ( __EepromBackup + ( 6 ) )
00053a e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 6 ) )
                 	__POINTW2MN __EepromBackup,6
00053b e0e0      	LDI  R30,LOW(0)
00053c 940e 1840 	CALL __EEPROMWRB
                 ; 0001 0116     return TRUE;                            // Return TRUE if address                                            // vali ...
00053e e0e1      	LDI  R30,LOW(1)
00053f 940e 1872 	CALL __LOADLOCR4
000541 940c 0a73 	JMP  _0x20C0011
                 ; 0001 0117   }
                 ; 0001 0118   else
                 _0x20033:
                 ; 0001 0119     return FALSE;                           // Return FALSE if not address not
000543 e0e0      	LDI  R30,LOW(0)
000544 940e 1872 	CALL __LOADLOCR4
000546 940c 0a73 	JMP  _0x20C0011
                 ; 0001 011A                                             // valid for writing
                 ; 0001 011B }
                 ; .FEND
                 ;
                 ;unsigned char eepromBackup(unsigned long flashStartAdr, unsigned int length, unsigned char *data)
                 ; 0001 011E {
                 _eepromBackup:
                 ; .FSTART _eepromBackup
                 ; 0001 011F     _EepromBackup.flashStartAdr=flashStartAdr;
000548 93ba      	ST   -Y,R27
000549 93aa      	ST   -Y,R26
                 ;	flashStartAdr -> Y+4
                 ;	length -> Y+2
                 ;	*data -> Y+0
00054a 940e 143f 	CALL SUBOPT_0xC
00054c e0aa      	LDI  R26,LOW(__EepromBackup)
00054d e0b0      	LDI  R27,HIGH(__EepromBackup)
00054e 940e 1830 	CALL __EEPROMWRD
                 ; 0001 0120     _EepromBackup.length=length;
                +
000550 e0ae     +LDI R26 , LOW ( __EepromBackup + ( 4 ) )
000551 e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 4 ) )
                 	__POINTW2MN __EepromBackup,4
000552 81ea      	LDD  R30,Y+2
000553 81fb      	LDD  R31,Y+2+1
000554 940e 1838 	CALL __EEPROMWRW
                 ; 0001 0121     for(;length>0;length--)
                 _0x2003E:
000556 81aa      	LDD  R26,Y+2
000557 81bb      	LDD  R27,Y+2+1
000558 940e 1855 	CALL __CPW02
00055a f518      	BRSH _0x2003F
                 ; 0001 0122     {
                 ; 0001 0123          _EepromBackup.data[length-1]=data[length-1];
                +
00055b e1a1     +LDI R26 , LOW ( __EepromBackup + ( 7 ) )
00055c e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 7 ) )
                 	__POINTW2MN __EepromBackup,7
00055d 81ea      	LDD  R30,Y+2
00055e 81fb      	LDD  R31,Y+2+1
00055f 9731      	SBIW R30,1
000560 0fea      	ADD  R30,R26
000561 1ffb      	ADC  R31,R27
000562 010f      	MOVW R0,R30
000563 940e 1494 	CALL SUBOPT_0x19
000565 01d0      	MOVW R26,R0
000566 940e 1840 	CALL __EEPROMWRB
                 ; 0001 0124          if(_EepromBackup.data[length-1]!=data[length-1])
                +
000568 e1a1     +LDI R26 , LOW ( __EepromBackup + ( 7 ) )
000569 e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 7 ) )
                 	__POINTW2MN __EepromBackup,7
00056a 81ea      	LDD  R30,Y+2
00056b 81fb      	LDD  R31,Y+2+1
00056c 9731      	SBIW R30,1
00056d 0fae      	ADD  R26,R30
00056e 1fbf      	ADC  R27,R31
00056f 940e 1824 	CALL __EEPROMRDB
000571 2e0e      	MOV  R0,R30
000572 940e 1494 	CALL SUBOPT_0x19
000574 15e0      	CP   R30,R0
000575 f011      	BREQ _0x20040
                 ; 0001 0125          {
                 ; 0001 0126             return FALSE;//error during backup on eeprom
000576 e0e0      	LDI  R30,LOW(0)
000577 c00b      	RJMP _0x20C0017
                 ; 0001 0127          }
                 ; 0001 0128     }
                 _0x20040:
000578 81ea      	LDD  R30,Y+2
000579 81fb      	LDD  R31,Y+2+1
00057a 9731      	SBIW R30,1
00057b 83ea      	STD  Y+2,R30
00057c 83fb      	STD  Y+2+1,R31
00057d cfd8      	RJMP _0x2003E
                 _0x2003F:
                 ; 0001 0129     _EepromBackup.status=1;//1=ready to move to flash
                +
00057e e1a0     +LDI R26 , LOW ( __EepromBackup + ( 6 ) )
00057f e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 6 ) )
                 	__POINTW2MN __EepromBackup,6
000580 e0e1      	LDI  R30,LOW(1)
000581 940e 1840 	CALL __EEPROMWRB
                 ; 0001 012A     return TRUE;
                 _0x20C0017:
000583 9628      	ADIW R28,8
000584 9508      	RET
                 ; 0001 012B }
                 ; .FEND
                 ;
                 ;/*!
                 ;* The function checks if global variable FlashBackup.status indicates that Flash recovery
                 ;* buffer contains data that needs to be written to Flash. Writes data from
                 ;* Flash recovery buffer to Flash page address given by FLASH_recovery.pageAdr.
                 ;* This function should be called at program startup if FLASH recovery option
                 ;* is enabeled.
                 ;**/
                 ;unsigned char RecoverFlash(){
                 ; 0001 0134 unsigned char RecoverFlash(){
                 ; 0001 0135 #ifdef __FLASH_RECOVER
                 ; 0001 0136   unsigned int index;
                 ; 0001 0137   unsigned long flashStartAdr = (MyAddressType)FlashBackup.pageNumber * PAGESIZE;
                 ; 0001 0138   if(FlashBackup.status == FLASH_BUFFER_FULL_ID){ // Checks if Flash recovery
                 ; 0001 0139                                                   //  buffer contains data
                 ; 0001 013A 
                 ; 0001 013B     for(index=0; index < PAGESIZE; index+=2){     // Writes to Flash write buffer
                 ; 0001 013C         _WAIT_FOR_SPM();
                 ; 0001 013D         _FILL_TEMP_WORD( index, *((MyFlashIntPointer)(ADR_FLASH_BUFFER+index)) );
                 ; 0001 013E     }
                 ; 0001 013F 
                 ; 0001 0140 
                 ; 0001 0141     //WriteBufToFlash((MyAddressType)FlashBackup.pageNumber * PAGESIZE);
                 ; 0001 0142     _WAIT_FOR_SPM();
                 ; 0001 0143     _PAGE_ERASE( flashStartAdr );
                 ; 0001 0144     _WAIT_FOR_SPM();
                 ; 0001 0145     _PAGE_WRITE( flashStartAdr );
                 ; 0001 0146     _WAIT_FOR_SPM();
                 ; 0001 0147     _ENABLE_RWW_SECTION();
                 ; 0001 0148     FlashBackup.status=0;                   // Inicate that Flash buffer does
                 ; 0001 0149                                             // not contain data for writing
                 ; 0001 014A     while(EECR & (1<<EEWE));
                 ; 0001 014B     return TRUE;                            // Returns TRUE if recovery has
                 ; 0001 014C                                             // taken place
                 ; 0001 014D   }
                 ; 0001 014E #endif
                 ; 0001 014F   return FALSE;
                 ; 0001 0150 }
                 ;
                 ;
                 ;/*!
                 ;* The function checks if input argument is a valid Flash page address for
                 ;* writing. Returns TRUE only if:
                 ;* - Address points to the beginning of a Flash page
                 ;* - Address is within the limits defined in Self_programming.h
                 ;* - Address is not equal to page address used for buffring by the Flash recovery
                 ;*   functions (if enabled).
                 ;* Returns FALSE else.
                 ;**/
                 ;unsigned char AddressCheck(MyAddressType flashAdr){
                 ; 0001 015C unsigned char AddressCheck(MyAddressType flashAdr){
                 _AddressCheck:
                 ; .FSTART _AddressCheck
                 ; 0001 015D   #ifdef __FLASH_RECOVER
                 ; 0001 015E   // The next line gives a warning 'pointless comparison with zero' if ADR_LIMIT_LOW is 0. Ignore it.
                 ; 0001 015F   if( (flashAdr >= ADR_LIMIT_LOW) && (flashAdr <= ADR_LIMIT_HIGH) &&
                 ; 0001 0160       (flashAdr != ADR_FLASH_BUFFER) && !(flashAdr & (PAGESIZE-1)) )
                 ; 0001 0161     return TRUE;                            // Address is a valid page address
                 ; 0001 0162   else
                 ; 0001 0163     return FALSE;                           // Address is not a valid page address
                 ; 0001 0164   #else
                 ; 0001 0165   if((flashAdr >= ADR_LIMIT_LOW) && (flashAdr <= ADR_LIMIT_HIGH) && !(flashAdr & (PAGESIZE-1) ) )
000585 940e 1812 	CALL __PUTPARD2
                 ;	flashAdr -> Y+0
000587 940e 1808 	CALL __GETD2S0
                +
000589 30a0     +CPI R26 , LOW ( 0xE000 )
00058a eee0     +LDI R30 , HIGH ( 0xE000 )
00058b 07be     +CPC R27 , R30
00058c e0e0     +LDI R30 , BYTE3 ( 0xE000 )
00058d 078e     +CPC R24 , R30
00058e e0e0     +LDI R30 , BYTE4 ( 0xE000 )
00058f 079e     +CPC R25 , R30
                 	__CPD2N 0xE000
000590 f060      	BRLO _0x20042
                +
000591 30a0     +CPI R26 , LOW ( 0x1E000 )
000592 eee0     +LDI R30 , HIGH ( 0x1E000 )
000593 07be     +CPC R27 , R30
000594 e0e1     +LDI R30 , BYTE3 ( 0x1E000 )
000595 078e     +CPC R24 , R30
000596 e0e0     +LDI R30 , BYTE4 ( 0x1E000 )
000597 079e     +CPC R25 , R30
                 	__CPD2N 0x1E000
000598 f420      	BRSH _0x20042
000599 940e 1437 	CALL SUBOPT_0xA
00059b 30e0      	CPI  R30,0
00059c f009      	BREQ _0x20043
                 _0x20042:
00059d c002      	RJMP _0x20041
                 _0x20043:
                 ; 0001 0166     return TRUE;                            // Address is a valid page address
00059e e0e1      	LDI  R30,LOW(1)
00059f c001      	RJMP _0x20C0016
                 ; 0001 0167   else
                 _0x20041:
                 ; 0001 0168     return FALSE;                           // Address is not a valid page address
0005a0 e0e0      	LDI  R30,LOW(0)
                 ; 0001 0169   #endif
                 ; 0001 016A }
                 _0x20C0016:
0005a1 9624      	ADIW R28,4
0005a2 9508      	RET
                 ; .FEND
                 ;
                 ;
                 ;/*!
                 ;* The function reads Flash page given by flashAddr, replaces one byte given by
                 ;* flashAddr with data, and stores entire page in Flash temporary buffer.
                 ;**/
                 ;unsigned char LpmReplaceSpm(MyAddressType flashAddr, unsigned char data){
                 ; 0001 0171 unsigned char LpmReplaceSpm(MyAddressType flashAddr, unsigned char data){
                 ; 0001 0172 //#pragma diag_suppress=Pe1053 // Suppress warning for conversion from long-type address to flash ptr.
                 ; 0001 0173     unsigned int index, oddByte, pcWord;
                 ; 0001 0174     unsigned char onlyWrite=1;
                 ; 0001 0175     MyAddressType  pageAdr;
                 ; 0001 0176     oddByte=(unsigned char)flashAddr & 1;
                 ;	flashAddr -> Y+12
                 ;	data -> Y+11
                 ;	index -> R16,R17
                 ;	oddByte -> R18,R19
                 ;	pcWord -> R20,R21
                 ;	onlyWrite -> Y+10
                 ;	pageAdr -> Y+6
                 ; 0001 0177     pcWord=(unsigned int)flashAddr & (PAGESIZE-2); // Used when writing FLASH temp buffer
                 ; 0001 0178     pageAdr=flashAddr & ~(PAGESIZE-1);        // Get FLASH page address from byte address
                 ; 0001 0179     //_FILL_TEMP_WORD(index, (unsigned int)dataPage[index]+((unsigned int)dataPage[index+1] << 8));
                 ; 0001 017A     for(index=0; index < PAGESIZE; index+=2){
                 ; 0001 017B         if(index==pcWord){
                 ; 0001 017C           if(oddByte){
                 ; 0001 017D             _FILL_TEMP_WORD( index, (*(MyFlashCharPointer)(flashAddr & ~1) | ((unsigned int)data<<8)) );
                 ; 0001 017E           }                                     // Write odd byte in temporary buffer
                 ; 0001 017F           else{
                 ; 0001 0180             _FILL_TEMP_WORD( index, ( (*( (MyFlashCharPointer)flashAddr+1)<<8)  | data ) );
                 ; 0001 0181           }                                     // Write even byte in temporary buffer
                 ; 0001 0182           if(((*((MyFlashCharPointer)flashAddr))&0xFF)!=0xFF)
                 ; 0001 0183                 onlyWrite=0;
                 ; 0001 0184         }
                 ; 0001 0185         else{
                 ; 0001 0186           _FILL_TEMP_WORD(index, *( (MyFlashIntPointer)(pageAdr+index) ) );
                 ; 0001 0187           //if(*((MyFlashIntPointer)(pageAdr+index)) != 0xFFFF)
                 ; 0001 0188                 //onlyWrite=0;
                 ; 0001 0189         }                                       // Write Flash word directly to temporary buffer
                 ; 0001 018A     }
                 ; 0001 018B     return onlyWrite;
                 ; 0001 018C //#pragma diag_default=Pe1053 // Back to default.
                 ; 0001 018D }
                 ;//-----------------------------------------------------------------------
                 ;// PFF - Low level disk control module for ATmega32
                 ;//-----------------------------------------------------------------------
                 ;#define _WRITE_FUNC	1			//allow write operations
                 ;
                 ;//#include "common.h"
                 ;#include "diskio.h"
                 ;#include "mmc.h"
                 ;#include <mega128.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 ;#include <delay.h>
                 ;
                 ;// Definitions for MMC/SDC connection
                 ;
                 ;//#define SD_INS  6
                 ;//#define SD_WP   7
                 ;
                 ;// Definitions for MMC/SDC command
                 ;#define CMD0	(0x40+0)	// GO_IDLE_STATE
                 ;#define CMD1	(0x40+1)	// SEND_OP_COND (MMC)
                 ;#define	ACMD41	(0xC0+41)	// SEND_OP_COND (SDC)
                 ;#define CMD8	(0x40+8)	// SEND_IF_COND
                 ;#define CMD16	(0x40+16)	// SET_BLOCKLEN
                 ;#define CMD17	(0x40+17)	// READ_SINGLE_BLOCK
                 ;#define CMD24	(0x40+24)	// WRITE_BLOCK
                 ;#define CMD55	(0x40+55)	// APP_CMD
                 ;#define CMD58	(0x40+58)	// READ_OCR
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// SPI functions
                 ;//-----------------------------------------------------------------------
                 ;#define hardware_spi //  ,  spi 
                 ;
                 ;#define SPI_PORTX PORTB
                 ;#define SPI_DDRX DDRB
                 ;
                 ;#define SPI_MISO SD_DO
                 ;#define SPI_MOSI SD_DI
                 ;#define SPI_SCK SD_CLK
                 ;#define SPI_SS SD_CS
                 ;
                 ;void INIT_SPI(void) {
                 ; 0002 0029 void INIT_SPI(void) {
                 
                 	.CSEG
                 _INIT_SPI:
                 ; .FSTART _INIT_SPI
                 ; 0002 002A #ifdef hardware_spi
                 ; 0002 002B 	/*  -
                 ; 0002 002C 	  ,  MISO */
                 ; 0002 002D 	SPI_DDRX |= (1 << SPI_MOSI) | (1 << SPI_SCK) | (1 << SPI_SS) | (0 << SPI_MISO);
0005a3 b3e7      	IN   R30,0x17
0005a4 60e7      	ORI  R30,LOW(0x7)
0005a5 bbe7      	OUT  0x17,R30
                 ; 0002 002E 	SPI_PORTX |= (1 << SPI_MOSI) | (1 << SPI_SCK) | (1 << SPI_SS) | (1 << SPI_MISO);
0005a6 b3e8      	IN   R30,0x18
0005a7 60ef      	ORI  R30,LOW(0xF)
0005a8 bbe8      	OUT  0x18,R30
                 ; 0002 002F 
                 ; 0002 0030 	/* spi,  ,,  0*/
                 ; 0002 0031 	SPCR = (1 << SPE) | (0 << DORD) | (1 << MSTR) | (0 << CPOL) | (0 << CPHA) | (0 << SPR1) | (0 << SPR0);
0005a9 e5e0      	LDI  R30,LOW(80)
0005aa b9ed      	OUT  0xD,R30
                 ; 0002 0032     SPSR = (1 << SPI2X);
0005ab e0e1      	LDI  R30,LOW(1)
0005ac b9ee      	OUT  0xE,R30
                 ; 0002 0033     //SPCR |= (1 << SPR1) | (1 << SPR0);
                 ; 0002 0034     //SPSR &= ~(1 << SPI2X);
                 ; 0002 0035 #else
                 ; 0002 0036 	PORTB |= (1<<SD_CS) | (1<<SD_DO) | (1<<SD_DI)/* | (1<<SD_WP) | (1<<SD_INS)*/;
                 ; 0002 0037 	DDRB |=(1<<SD_CS) | (1<<SD_DI) | (1<<SD_CLK);
                 ; 0002 0038 #endif
                 ; 0002 0039 }
0005ad 9508      	RET
                 ; .FEND
                 ;
                 ;void xmit_spi(BYTE data) {		// Send a byte
                 ; 0002 003B void xmit_spi(BYTE data) {
                 _xmit_spi:
                 ; .FSTART _xmit_spi
                 ; 0002 003C #ifdef hardware_spi
                 ; 0002 003D 	SPDR = data;
0005ae 93aa      	ST   -Y,R26
                 ;	data -> Y+0
0005af 81e8      	LD   R30,Y
0005b0 b9ef      	OUT  0xF,R30
                 ; 0002 003E 	while (!(SPSR & (1 << SPIF)));
                 _0x40003:
0005b1 9b77      	SBIS 0xE,7
0005b2 cffe      	RJMP _0x40003
                 ; 0002 003F #else
                 ; 0002 0040 	BYTE i;
                 ; 0002 0041 
                 ; 0002 0042 	for (i = 0; i < 8; i++) {
                 ; 0002 0043 		if ((data & 0x80) == 0x00)
                 ; 0002 0044 			PORTB &= ~(1<<SD_DI);
                 ; 0002 0045 		else
                 ; 0002 0046 			PORTB |= (1<<SD_DI);
                 ; 0002 0047 		data = data << 1;
                 ; 0002 0048 		PORTB |= (1<<SD_CLK);
                 ; 0002 0049 		#asm("nop")
                 ; 0002 004A 		PORTB &= ~(1<<SD_CLK);
                 ; 0002 004B 	}
                 ; 0002 004C #endif
                 ; 0002 004D }
0005b3 9621      	ADIW R28,1
0005b4 9508      	RET
                 ; .FEND
                 ;
                 ;BYTE rcv_spi(void) {				// Send 0xFF and receive a byte
                 ; 0002 004F BYTE rcv_spi(void) {
                 _rcv_spi:
                 ; .FSTART _rcv_spi
                 ; 0002 0050 #ifdef hardware_spi
                 ; 0002 0051 	unsigned char data;
                 ; 0002 0052 	SPDR = 0xFF;
0005b5 931a      	ST   -Y,R17
                 ;	data -> R17
0005b6 efef      	LDI  R30,LOW(255)
0005b7 b9ef      	OUT  0xF,R30
                 ; 0002 0053 	while (!(SPSR & (1 << SPIF)));
                 _0x40006:
0005b8 9b77      	SBIS 0xE,7
0005b9 cffe      	RJMP _0x40006
                 ; 0002 0054 	data = SPDR;
0005ba b11f      	IN   R17,15
                 ; 0002 0055 	return data;
0005bb 2fe1      	MOV  R30,R17
0005bc 9119      	LD   R17,Y+
0005bd 9508      	RET
                 ; 0002 0056 #else
                 ; 0002 0057 	BYTE i, res = 0;
                 ; 0002 0058 
                 ; 0002 0059 	PORTB |= (1<<SD_DI);
                 ; 0002 005A 
                 ; 0002 005B 	for (i = 0; i < 8; i++) {
                 ; 0002 005C 		PORTB |= (1<<SD_CLK);
                 ; 0002 005D 		res = res << 1;
                 ; 0002 005E 		if ((PINB & (1<<SD_DO))!=0x00)
                 ; 0002 005F 		res = res | 0x01;
                 ; 0002 0060 		PORTB &= ~(1<<SD_CLK);
                 ; 0002 0061 		#asm("nop")
                 ; 0002 0062 	}
                 ; 0002 0063 	return res;
                 ; 0002 0064 #endif
                 ; 0002 0065 } /* Send 0xFF and receive a byte */
                 ; .FEND
                 ;//-----------------------------------------------------------------------
                 ;
                 ;
                 ;
                 ;//-----------------------------------------------------------------------
                 ;//   Module Private Function
                 ;//-----------------------------------------------------------------------
                 ;static BYTE CardType;
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// Deselect the card and release SPI bus
                 ;//-----------------------------------------------------------------------
                 ;static
                 ;void release_spi (void)
                 ; 0002 0074 {
                 _release_spi_G002:
                 ; .FSTART _release_spi_G002
                 ; 0002 0075 	rcv_spi();
0005be dff6      	RCALL _rcv_spi
                 ; 0002 0076 }
0005bf 9508      	RET
                 ; .FEND
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// Send a command packet to MMC
                 ;//-----------------------------------------------------------------------
                 ;static
                 ;BYTE send_cmd (
                 ; 0002 007D 	BYTE cmd,		// Command byte
                 ; 0002 007E 	DWORD arg		// Argument
                 ; 0002 007F )
                 ; 0002 0080 {
                 _send_cmd_G002:
                 ; .FSTART _send_cmd_G002
                 ; 0002 0081 	BYTE n, res;
                 ; 0002 0082 
                 ; 0002 0083 
                 ; 0002 0084 	if (cmd & 0x80) {	// ACMD<n> is the command sequense of CMD55-CMD<n>
0005c0 940e 1812 	CALL __PUTPARD2
0005c2 931a      	ST   -Y,R17
0005c3 930a      	ST   -Y,R16
                 ;	cmd -> Y+6
                 ;	arg -> Y+2
                 ;	n -> R17
                 ;	res -> R16
0005c4 81ee      	LDD  R30,Y+6
0005c5 78e0      	ANDI R30,LOW(0x80)
0005c6 f049      	BREQ _0x40009
                 ; 0002 0085 		cmd &= 0x7F;
0005c7 81ee      	LDD  R30,Y+6
0005c8 77ef      	ANDI R30,0x7F
0005c9 83ee      	STD  Y+6,R30
                 ; 0002 0086 		res = send_cmd(CMD55, 0);
0005ca e7e7      	LDI  R30,LOW(119)
0005cb 940e 149d 	CALL SUBOPT_0x1A
0005cd 2f0e      	MOV  R16,R30
                 ; 0002 0087 		if (res > 1) return res;
0005ce 3002      	CPI  R16,2
0005cf f570      	BRSH _0x20C0014
                 ; 0002 0088 	}
                 ; 0002 0089 
                 ; 0002 008A 	// Select the card
                 ; 0002 008B 	DESELECT();
                 _0x40009:
0005d0 9ac0      	SBI  0x18,0
                 ; 0002 008C 	rcv_spi();
0005d1 dfe3      	RCALL _rcv_spi
                 ; 0002 008D 	SELECT();
0005d2 98c0      	CBI  0x18,0
                 ; 0002 008E 	rcv_spi();
0005d3 dfe1      	RCALL _rcv_spi
                 ; 0002 008F 
                 ; 0002 0090 	// Send a command packet
                 ; 0002 0091 	xmit_spi(cmd);						// Start + Command index
0005d4 81ae      	LDD  R26,Y+6
0005d5 940e 14a4 	CALL SUBOPT_0x1B
                 ; 0002 0092 	xmit_spi((BYTE)(arg >> 24));		// Argument[31..24]
0005d7 e1e8      	LDI  R30,LOW(24)
0005d8 940e 1745 	CALL __LSRD12
0005da 2fae      	MOV  R26,R30
0005db dfd2      	RCALL _xmit_spi
                 ; 0002 0093 	xmit_spi((BYTE)(arg >> 16));		// Argument[23..16]
0005dc 940e 14ab 	CALL SUBOPT_0x1C
0005de 940e 1768 	CALL __LSRD16
0005e0 2fae      	MOV  R26,R30
0005e1 940e 14a4 	CALL SUBOPT_0x1B
                 ; 0002 0094 	xmit_spi((BYTE)(arg >> 8));			// Argument[15..8]
0005e3 e0e8      	LDI  R30,LOW(8)
0005e4 940e 1745 	CALL __LSRD12
0005e6 2fae      	MOV  R26,R30
0005e7 dfc6      	RCALL _xmit_spi
                 ; 0002 0095 	xmit_spi((BYTE)arg);				// Argument[7..0]
0005e8 81aa      	LDD  R26,Y+2
0005e9 dfc4      	RCALL _xmit_spi
                 ; 0002 0096 	n = 0x01;							// Dummy CRC + Stop
0005ea e011      	LDI  R17,LOW(1)
                 ; 0002 0097 	if (cmd == CMD0) n = 0x95;			// Valid CRC for CMD0(0)
0005eb 81ae      	LDD  R26,Y+6
0005ec 34a0      	CPI  R26,LOW(0x40)
0005ed f409      	BRNE _0x4000B
0005ee e915      	LDI  R17,LOW(149)
                 ; 0002 0098 	if (cmd == CMD8) n = 0x87;			// Valid CRC for CMD8(0x1AA)
                 _0x4000B:
0005ef 81ae      	LDD  R26,Y+6
0005f0 34a8      	CPI  R26,LOW(0x48)
0005f1 f409      	BRNE _0x4000C
0005f2 e817      	LDI  R17,LOW(135)
                 ; 0002 0099 	xmit_spi(n);
                 _0x4000C:
0005f3 2fa1      	MOV  R26,R17
0005f4 dfb9      	RCALL _xmit_spi
                 ; 0002 009A 
                 ; 0002 009B 	// Receive a command response
                 ; 0002 009C 	n = 10;								// Wait for a valid response in timeout of 10 attempts
0005f5 e01a      	LDI  R17,LOW(10)
                 ; 0002 009D 	do {
                 _0x4000E:
                 ; 0002 009E 		res = rcv_spi();
0005f6 dfbe      	RCALL _rcv_spi
0005f7 2f0e      	MOV  R16,R30
                 ; 0002 009F 	} while ((res & 0x80) && --n);
0005f8 ff07      	SBRS R16,7
0005f9 c002      	RJMP _0x40010
0005fa 5011      	SUBI R17,LOW(1)
0005fb f409      	BRNE _0x40011
                 _0x40010:
0005fc c001      	RJMP _0x4000F
                 _0x40011:
0005fd cff8      	RJMP _0x4000E
                 _0x4000F:
                 ; 0002 00A0 
                 ; 0002 00A1 	return res;			// Return with the response value
                 _0x20C0014:
0005fe 2fe0      	MOV  R30,R16
0005ff 8119      	LDD  R17,Y+1
000600 8108      	LDD  R16,Y+0
                 _0x20C0015:
000601 9627      	ADIW R28,7
000602 9508      	RET
                 ; 0002 00A2 }
                 ; .FEND
                 ;
                 ;//--------------------------------------------------------------------------
                 ;//
                 ;//   Public Functions
                 ;//
                 ;//--------------------------------------------------------------------------
                 ;
                 ;//--------------------------------------------------------------------------
                 ;// Initialize Disk Drive
                 ;//--------------------------------------------------------------------------
                 ;DSTATUS disk_initialize (void)
                 ; 0002 00AE {
                 _disk_initialize:
                 ; .FSTART _disk_initialize
                 ; 0002 00AF 	BYTE n, cmd, ty, ocr[4];
                 ; 0002 00B0 	WORD tmr;
                 ; 0002 00B1     BYTE retry=0;
                 ; 0002 00B2     while(retry<5){
000603 9724      	SBIW R28,4
000604 940e 1869 	CALL __SAVELOCR6
                 ;	n -> R17
                 ;	cmd -> R16
                 ;	ty -> R19
                 ;	ocr -> Y+6
                 ;	tmr -> R20,R21
                 ;	retry -> R18
000606 e020      	LDI  R18,0
                 _0x40012:
000607 3025      	CPI  R18,5
000608 f008      	BRLO PC+2
000609 c08b      	RJMP _0x40014
                 ; 0002 00B3         INIT_SPI();
00060a df98      	RCALL _INIT_SPI
                 ; 0002 00B4 
                 ; 0002 00B5     //	if ((PINB&_BV(SD_INS))!=0x00) return STA_NOINIT;
                 ; 0002 00B6 
                 ; 0002 00B7     #if _WRITE_FUNC
                 ; 0002 00B8         //if (MMC_SEL) disk_writep(0, 0);		// Finalize write process if it is in progress
                 ; 0002 00B9     #endif
                 ; 0002 00BA         for (n = 100; n; n--) rcv_spi();	// Dummy clocks
00060b e614      	LDI  R17,LOW(100)
                 _0x40016:
00060c 3010      	CPI  R17,0
00060d f019      	BREQ _0x40017
00060e dfa6      	RCALL _rcv_spi
00060f 5011      	SUBI R17,1
000610 cffb      	RJMP _0x40016
                 _0x40017:
                 ; 0002 00BC ty = 0;
000611 e030      	LDI  R19,LOW(0)
                 ; 0002 00BD         if (send_cmd(CMD0, 0) == 1) {			// Enter Idle state
000612 e4e0      	LDI  R30,LOW(64)
000613 940e 149d 	CALL SUBOPT_0x1A
000615 30e1      	CPI  R30,LOW(0x1)
000616 f009      	BREQ PC+2
000617 c072      	RJMP _0x40018
                 ; 0002 00BE             if (send_cmd(CMD8, 0x1AA) == 1) {	// SDv2
000618 e4e8      	LDI  R30,LOW(72)
000619 93ea      	ST   -Y,R30
                +
00061a eaaa     +LDI R26 , LOW ( 0x1AA )
00061b e0b1     +LDI R27 , HIGH ( 0x1AA )
00061c e080     +LDI R24 , BYTE3 ( 0x1AA )
00061d e090     +LDI R25 , BYTE4 ( 0x1AA )
                 	__GETD2N 0x1AA
00061e dfa1      	RCALL _send_cmd_G002
00061f 30e1      	CPI  R30,LOW(0x1)
000620 f009      	BREQ PC+2
000621 c044      	RJMP _0x40019
                 ; 0002 00BF                 for (n = 0; n < 4; n++) ocr[n] = rcv_spi();		// Get trailing return value of R7 resp
000622 e010      	LDI  R17,LOW(0)
                 _0x4001B:
000623 3014      	CPI  R17,4
000624 f450      	BRSH _0x4001C
000625 940e 14b0 	CALL SUBOPT_0x1D
000627 93ff      	PUSH R31
000628 93ef      	PUSH R30
000629 df8b      	RCALL _rcv_spi
00062a 91af      	POP  R26
00062b 91bf      	POP  R27
00062c 93ec      	ST   X,R30
00062d 5f1f      	SUBI R17,-1
00062e cff4      	RJMP _0x4001B
                 _0x4001C:
                 ; 0002 00C0 if (ocr[2] == 0x01 && ocr[3] == 0xAA) {
00062f 85a8      	LDD  R26,Y+8
000630 30a1      	CPI  R26,LOW(0x1)
000631 f419      	BRNE _0x4001E
000632 85a9      	LDD  R26,Y+9
000633 3aaa      	CPI  R26,LOW(0xAA)
000634 f009      	BREQ _0x4001F
                 _0x4001E:
000635 c02f      	RJMP _0x4001D
                 _0x4001F:
                 ; 0002 00C1                     for (tmr = 12000; tmr && send_cmd(ACMD41, 1UL << 30); tmr--) ;	// Wait for leaving idle state (ACMD4 ...
                +
000636 ee40     +LDI R20 , LOW ( 12000 )
000637 e25e     +LDI R21 , HIGH ( 12000 )
                 	__GETWRN 20,21,12000
                 _0x40021:
000638 2e04      	MOV  R0,R20
000639 2a05      	OR   R0,R21
00063a f049      	BREQ _0x40023
00063b eee9      	LDI  R30,LOW(233)
00063c 93ea      	ST   -Y,R30
                +
00063d e0a0     +LDI R26 , LOW ( 0x40000000 )
00063e e0b0     +LDI R27 , HIGH ( 0x40000000 )
00063f e080     +LDI R24 , BYTE3 ( 0x40000000 )
000640 e490     +LDI R25 , BYTE4 ( 0x40000000 )
                 	__GETD2N 0x40000000
000641 df7e      	RCALL _send_cmd_G002
000642 30e0      	CPI  R30,0
000643 f409      	BRNE _0x40024
                 _0x40023:
000644 c003      	RJMP _0x40022
                 _0x40024:
                +
000645 5041     +SUBI R20 , LOW ( 1 )
000646 4050     +SBCI R21 , HIGH ( 1 )
                 	__SUBWRN 20,21,1
000647 cff0      	RJMP _0x40021
                 _0x40022:
                 ; 0002 00C2                     if (tmr && send_cmd(CMD58, 0) == 0) {		// Check CCS bit in the OCR
000648 2e04      	MOV  R0,R20
000649 2a05      	OR   R0,R21
00064a f029      	BREQ _0x40026
00064b e7ea      	LDI  R30,LOW(122)
00064c 940e 149d 	CALL SUBOPT_0x1A
00064e 30e0      	CPI  R30,0
00064f f009      	BREQ _0x40027
                 _0x40026:
000650 c014      	RJMP _0x40025
                 _0x40027:
                 ; 0002 00C3                         for (n = 0; n < 4; n++) ocr[n] = rcv_spi();
000651 e010      	LDI  R17,LOW(0)
                 _0x40029:
000652 3014      	CPI  R17,4
000653 f450      	BRSH _0x4002A
000654 940e 14b0 	CALL SUBOPT_0x1D
000656 93ff      	PUSH R31
000657 93ef      	PUSH R30
000658 df5c      	RCALL _rcv_spi
000659 91af      	POP  R26
00065a 91bf      	POP  R27
00065b 93ec      	ST   X,R30
00065c 5f1f      	SUBI R17,-1
00065d cff4      	RJMP _0x40029
                 _0x4002A:
                 ; 0002 00C4 ty = (ocr[0] & 0x40) ? 0x04	 | 0x08	 : 0x04	;
00065e 81ee      	LDD  R30,Y+6
00065f 74e0      	ANDI R30,LOW(0x40)
000660 f011      	BREQ _0x4002B
000661 e0ec      	LDI  R30,LOW(12)
000662 c001      	RJMP _0x4002C
                 _0x4002B:
000663 e0e4      	LDI  R30,LOW(4)
                 _0x4002C:
000664 2f3e      	MOV  R19,R30
                 ; 0002 00C5                     }
                 ; 0002 00C6                 }
                 _0x40025:
                 ; 0002 00C7             } else {							// SDv1 or MMCv3
                 _0x4001D:
000665 c024      	RJMP _0x4002E
                 _0x40019:
                 ; 0002 00C8                 if (send_cmd(ACMD41, 0) <= 1) 	{
000666 eee9      	LDI  R30,LOW(233)
000667 940e 149d 	CALL SUBOPT_0x1A
000669 30e2      	CPI  R30,LOW(0x2)
00066a f418      	BRSH _0x4002F
                 ; 0002 00C9                     ty = CT_SD1; cmd = ACMD41;	// SDv1
00066b e032      	LDI  R19,LOW(2)
00066c ee09      	LDI  R16,LOW(233)
                 ; 0002 00CA                 } else {
00066d c002      	RJMP _0x40030
                 _0x4002F:
                 ; 0002 00CB                     ty = CT_MMC; cmd = CMD1;	// MMCv3
00066e e031      	LDI  R19,LOW(1)
00066f e401      	LDI  R16,LOW(65)
                 ; 0002 00CC                 }
                 _0x40030:
                 ; 0002 00CD                 for (tmr = 25000; tmr && send_cmd(cmd, 0); tmr--) ;	// Wait for leaving idle state
                +
000670 ea48     +LDI R20 , LOW ( 25000 )
000671 e651     +LDI R21 , HIGH ( 25000 )
                 	__GETWRN 20,21,25000
                 _0x40032:
000672 2e04      	MOV  R0,R20
000673 2a05      	OR   R0,R21
000674 f031      	BREQ _0x40034
000675 930a      	ST   -Y,R16
000676 940e 14b7 	CALL SUBOPT_0x1E
000678 df47      	RCALL _send_cmd_G002
000679 30e0      	CPI  R30,0
00067a f409      	BRNE _0x40035
                 _0x40034:
00067b c003      	RJMP _0x40033
                 _0x40035:
                +
00067c 5041     +SUBI R20 , LOW ( 1 )
00067d 4050     +SBCI R21 , HIGH ( 1 )
                 	__SUBWRN 20,21,1
00067e cff3      	RJMP _0x40032
                 _0x40033:
                 ; 0002 00CE                 if (!tmr || send_cmd(CMD16, 512) != 0)			// Set R/W block length to 512
00067f 2e04      	MOV  R0,R20
000680 2a05      	OR   R0,R21
000681 f039      	BREQ _0x40037
000682 e5e0      	LDI  R30,LOW(80)
000683 93ea      	ST   -Y,R30
000684 940e 14bc 	CALL SUBOPT_0x1F
000686 df39      	RCALL _send_cmd_G002
000687 30e0      	CPI  R30,0
000688 f009      	BREQ _0x40036
                 _0x40037:
                 ; 0002 00CF                     ty = 0;
000689 e030      	LDI  R19,LOW(0)
                 ; 0002 00D0             }
                 _0x40036:
                 _0x4002E:
                 ; 0002 00D1         }
                 ; 0002 00D2         CardType = ty;
                 _0x40018:
00068a 9330 0ae7 	STS  _CardType_G002,R19
                 ; 0002 00D3         release_spi();
00068c df31      	RCALL _release_spi_G002
                 ; 0002 00D4         if(ty){
00068d 3030      	CPI  R19,0
00068e f431      	BRNE _0x40014
                 ; 0002 00D5            break;
                 ; 0002 00D6         }
                 ; 0002 00D7         retry++;
00068f 5f2f      	SUBI R18,-1
                 ; 0002 00D8         delay_ms(200);
000690 eca8      	LDI  R26,LOW(200)
000691 e0b0      	LDI  R27,0
000692 940e 1715 	CALL _delay_ms
                 ; 0002 00D9     }
000694 cf72      	RJMP _0x40012
                 _0x40014:
                 ; 0002 00DA #ifdef hardware_spi
                 ; 0002 00DB 	//  SPI!!!--------------------------------------------
                 ; 0002 00DC     //INIT_SPI();
                 ; 0002 00DD     //SPCR &= ~((1 << SPR1) | (1 << SPR0)); //  
                 ; 0002 00DE 	//SPSR |= (1 << SPI2X); //  
                 ; 0002 00DF 
                 ; 0002 00E0 #else
                 ; 0002 00E1     //------------------------------------------------------------------
                 ; 0002 00E2 #endif
                 ; 0002 00E3 
                 ; 0002 00E4 	return ty ? 0 : STA_NOINIT;
000695 3030      	CPI  R19,0
000696 f011      	BREQ _0x4003A
000697 e0e0      	LDI  R30,LOW(0)
000698 c001      	RJMP _0x4003B
                 _0x4003A:
000699 e0e1      	LDI  R30,LOW(1)
                 _0x4003B:
00069a c437      	RJMP _0x20C0010
                 ; 0002 00E5 }
                 ; .FEND
                 ;//-----------------------------------------------------------------------
                 ;// Read partial sector
                 ;//-----------------------------------------------------------------------
                 ;
                 ;DRESULT disk_readp (
                 ; 0002 00EB 	BYTE *buff,		// Pointer to the read buffer (NULL:Read bytes are forwarded to the stream)
                 ; 0002 00EC 	DWORD lba,		// Sector number (LBA)
                 ; 0002 00ED 	WORD ofs,		// Byte offset to read from (0..511)
                 ; 0002 00EE 	WORD cnt		// Number of bytes to read (ofs + cnt mus be <= 512)
                 ; 0002 00EF )
                 ; 0002 00F0 {
                 _disk_readp:
                 ; .FSTART _disk_readp
                 ; 0002 00F1 	DRESULT res;
                 ; 0002 00F2 	BYTE rc;
                 ; 0002 00F3 	WORD bc;
                 ; 0002 00F4 
                 ; 0002 00F5 //	if ((PINB&_BV(SD_INS))!=0x00) return RES_ERROR;
                 ; 0002 00F6 
                 ; 0002 00F7 	if (!(CardType & CT_BLOCK)) lba *= 512;		// Convert to byte address if needed
00069b 940e 14c1 	CALL SUBOPT_0x20
                 ;	*buff -> Y+12
                 ;	lba -> Y+8
                 ;	ofs -> Y+6
                 ;	cnt -> Y+4
                 ;	res -> R17
                 ;	rc -> R16
                 ;	bc -> R18,R19
00069d 91e0 0ae7 	LDS  R30,_CardType_G002
00069f 70e8      	ANDI R30,LOW(0x8)
0006a0 f441      	BRNE _0x4003D
0006a1 940e 147b 	CALL SUBOPT_0x14
0006a3 940e 14c6 	CALL SUBOPT_0x21
                +
0006a5 87e8     +STD Y + 8 , R30
0006a6 87f9     +STD Y + 8 + 1 , R31
0006a7 876a     +STD Y + 8 + 2 , R22
0006a8 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
                 ; 0002 00F8 
                 ; 0002 00F9 	res = RES_ERROR;
                 _0x4003D:
0006a9 e011      	LDI  R17,LOW(1)
                 ; 0002 00FA 	if (send_cmd(CMD17, lba) == 0) {		// READ_SINGLE_BLOCK
0006aa e5e1      	LDI  R30,LOW(81)
0006ab 93ea      	ST   -Y,R30
0006ac 940e 14ca 	CALL SUBOPT_0x22
0006ae df11      	RCALL _send_cmd_G002
0006af 30e0      	CPI  R30,0
0006b0 f009      	BREQ PC+2
0006b1 c047      	RJMP _0x4003E
                 ; 0002 00FB 
                 ; 0002 00FC 		bc = 30000;
                +
0006b2 e320     +LDI R18 , LOW ( 30000 )
0006b3 e735     +LDI R19 , HIGH ( 30000 )
                 	__GETWRN 18,19,30000
                 ; 0002 00FD 		do {							// Wait for data packet in timeout of 100ms
                 _0x40040:
                 ; 0002 00FE 			rc = rcv_spi();
0006b4 df00      	RCALL _rcv_spi
0006b5 2f0e      	MOV  R16,R30
                 ; 0002 00FF 		} while (rc == 0xFF && --bc);
0006b6 3f0f      	CPI  R16,255
0006b7 f419      	BRNE _0x40042
                +
0006b8 5021     +SUBI R18 , LOW ( 1 )
0006b9 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
0006ba f409      	BRNE _0x40043
                 _0x40042:
0006bb c001      	RJMP _0x40041
                 _0x40043:
0006bc cff7      	RJMP _0x40040
                 _0x40041:
                 ; 0002 0100 
                 ; 0002 0101 		if (rc == 0xFE) {				// A data packet arrived
0006bd 3f0e      	CPI  R16,254
0006be f5d1      	BRNE _0x40044
                 ; 0002 0102 			bc = 514 - ofs - cnt;
0006bf 81ae      	LDD  R26,Y+6
0006c0 81bf      	LDD  R27,Y+6+1
0006c1 e0e2      	LDI  R30,LOW(514)
0006c2 e0f2      	LDI  R31,HIGH(514)
0006c3 1bea      	SUB  R30,R26
0006c4 0bfb      	SBC  R31,R27
0006c5 01df      	MOVW R26,R30
0006c6 81ec      	LDD  R30,Y+4
0006c7 81fd      	LDD  R31,Y+4+1
0006c8 1bae      	SUB  R26,R30
0006c9 0bbf      	SBC  R27,R31
0006ca 019d      	MOVW R18,R26
                 ; 0002 0103 
                 ; 0002 0104 			// Skip leading bytes
                 ; 0002 0105 			if (ofs) {
0006cb 81ee      	LDD  R30,Y+6
0006cc 81ff      	LDD  R31,Y+6+1
0006cd 9730      	SBIW R30,0
0006ce f039      	BREQ _0x40045
                 ; 0002 0106 				do rcv_spi(); while (--ofs);
                 _0x40047:
0006cf dee5      	RCALL _rcv_spi
0006d0 81ee      	LDD  R30,Y+6
0006d1 81ff      	LDD  R31,Y+6+1
0006d2 9731      	SBIW R30,1
0006d3 83ee      	STD  Y+6,R30
0006d4 83ff      	STD  Y+6+1,R31
0006d5 f7c9      	BRNE _0x40047
                 ; 0002 0107 			}
                 ; 0002 0108 
                 ; 0002 0109 			// Receive a part of the sector
                 ; 0002 010A 			if (buff) {	// Store data to the memory
                 _0x40045:
0006d6 85ec      	LDD  R30,Y+12
0006d7 85fd      	LDD  R31,Y+12+1
0006d8 9730      	SBIW R30,0
0006d9 f099      	BREQ _0x40049
                 ; 0002 010B 				do
                 _0x4004B:
                 ; 0002 010C 					*buff++ = rcv_spi();
0006da 85ec      	LDD  R30,Y+12
0006db 85fd      	LDD  R31,Y+12+1
0006dc 9631      	ADIW R30,1
0006dd 87ec      	STD  Y+12,R30
0006de 87fd      	STD  Y+12+1,R31
0006df 9731      	SBIW R30,1
0006e0 93ff      	PUSH R31
0006e1 93ef      	PUSH R30
0006e2 ded2      	RCALL _rcv_spi
0006e3 91af      	POP  R26
0006e4 91bf      	POP  R27
0006e5 93ec      	ST   X,R30
                 ; 0002 010D 				while (--cnt);
0006e6 81ec      	LDD  R30,Y+4
0006e7 81fd      	LDD  R31,Y+4+1
0006e8 9731      	SBIW R30,1
0006e9 83ec      	STD  Y+4,R30
0006ea 83fd      	STD  Y+4+1,R31
0006eb f771      	BRNE _0x4004B
                 ; 0002 010E 			} else {	// Forward data to the outgoing stream (depends on the project)
0006ec c006      	RJMP _0x4004D
                 _0x40049:
                 ; 0002 010F 				do
                 _0x4004F:
                 ; 0002 0110                 ;//uart_transmit(rcv_spi());		// (Console output)
                 ; 0002 0111 				while (--cnt);
0006ed 81ec      	LDD  R30,Y+4
0006ee 81fd      	LDD  R31,Y+4+1
0006ef 9731      	SBIW R30,1
0006f0 83ec      	STD  Y+4,R30
0006f1 83fd      	STD  Y+4+1,R31
0006f2 f7d1      	BRNE _0x4004F
                 ; 0002 0112 			}
                 _0x4004D:
                 ; 0002 0113 
                 ; 0002 0114 			// Skip trailing bytes and CRC
                 ; 0002 0115 			do rcv_spi(); while (--bc);
                 _0x40052:
0006f3 dec1      	RCALL _rcv_spi
0006f4 01f9      	MOVW R30,R18
0006f5 9731      	SBIW R30,1
0006f6 019f      	MOVW R18,R30
0006f7 f7d9      	BRNE _0x40052
                 ; 0002 0116 
                 ; 0002 0117 			res = RES_OK;
0006f8 e010      	LDI  R17,LOW(0)
                 ; 0002 0118 		}
                 ; 0002 0119 	}
                 _0x40044:
                 ; 0002 011A 
                 ; 0002 011B 	release_spi();
                 _0x4003E:
0006f9 dec4      	RCALL _release_spi_G002
                 ; 0002 011C 
                 ; 0002 011D 	return res;
0006fa 2fe1      	MOV  R30,R17
0006fb 940e 1872 	CALL __LOADLOCR4
0006fd c375      	RJMP _0x20C0011
                 ; 0002 011E }
                 ; .FEND
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// Write partial sector
                 ;//-----------------------------------------------------------------------
                 ;#if _WRITE_FUNC
                 ;
                 ;DRESULT disk_writep (
                 ; 0002 0126 	const BYTE *buff,	// Pointer to the bytes to be written (NULL:Initiate/Finalize sector write)
                 ; 0002 0127 	DWORD sa			// Number of bytes to send, Sector number (LBA) or zero
                 ; 0002 0128 )
                 ; 0002 0129 {
                 _disk_writep:
                 ; .FSTART _disk_writep
                 ; 0002 012A 	DRESULT res;
                 ; 0002 012B 	WORD bc;
                 ; 0002 012C 	static WORD wc;
                 ; 0002 012D 
                 ; 0002 012E //	if ((PINB&_BV(SD_INS))!=0x00) return RES_ERROR;
                 ; 0002 012F //	if ((PINB&_BV(SD_WP))!=0x00) return RES_ERROR;
                 ; 0002 0130 
                 ; 0002 0131 	res = RES_ERROR;
0006fe 940e 1812 	CALL __PUTPARD2
000700 940e 186b 	CALL __SAVELOCR4
                 ;	*buff -> Y+8
                 ;	sa -> Y+4
                 ;	res -> R17
                 ;	bc -> R18,R19
000702 e011      	LDI  R17,LOW(1)
                 ; 0002 0132 
                 ; 0002 0133 	if (buff) {		// Send data bytes
000703 85e8      	LDD  R30,Y+8
000704 85f9      	LDD  R31,Y+8+1
000705 9730      	SBIW R30,0
000706 f0f9      	BREQ _0x40054
                 ; 0002 0134 		bc = (WORD)sa;
                +
000707 812c     +LDD R18 , Y + 4
000708 813d     +LDD R19 , Y + 4 + 1
                 	__GETWRS 18,19,4
                 ; 0002 0135 		while (bc && wc) {		// Send data bytes to the card
                 _0x40055:
000709 2e02      	MOV  R0,R18
00070a 2a03      	OR   R0,R19
00070b f031      	BREQ _0x40058
00070c 91e0 0ae8 	LDS  R30,_wc_S0020007000
00070e 91f0 0ae9 	LDS  R31,_wc_S0020007000+1
000710 9730      	SBIW R30,0
000711 f409      	BRNE _0x40059
                 _0x40058:
000712 c011      	RJMP _0x40057
                 _0x40059:
                 ; 0002 0136 			xmit_spi(*buff++);
000713 85a8      	LDD  R26,Y+8
000714 85b9      	LDD  R27,Y+8+1
000715 91ed      	LD   R30,X+
000716 87a8      	STD  Y+8,R26
000717 87b9      	STD  Y+8+1,R27
000718 2fae      	MOV  R26,R30
000719 de94      	RCALL _xmit_spi
                 ; 0002 0137 			wc--; bc--;
00071a eea8      	LDI  R26,LOW(_wc_S0020007000)
00071b e0ba      	LDI  R27,HIGH(_wc_S0020007000)
00071c 91ed      	LD   R30,X+
00071d 91fd      	LD   R31,X+
00071e 9731      	SBIW R30,1
00071f 93fe      	ST   -X,R31
000720 93ee      	ST   -X,R30
                +
000721 5021     +SUBI R18 , LOW ( 1 )
000722 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
                 ; 0002 0138 		}
000723 cfe5      	RJMP _0x40055
                 _0x40057:
                 ; 0002 0139 		res = RES_OK;
000724 e010      	LDI  R17,LOW(0)
                 ; 0002 013A 	} else {
000725 c047      	RJMP _0x4005A
                 _0x40054:
                 ; 0002 013B 		if (sa) {	// Initiate sector write process
000726 940e 143f 	CALL SUBOPT_0xC
000728 940e 1851 	CALL __CPD10
00072a f0f9      	BREQ _0x4005B
                 ; 0002 013C 			if (!(CardType & CT_BLOCK)) sa *= 512;	// Convert to byte address if needed
00072b 91e0 0ae7 	LDS  R30,_CardType_G002
00072d 70e8      	ANDI R30,LOW(0x8)
00072e f431      	BRNE _0x4005C
00072f 940e 143f 	CALL SUBOPT_0xC
000731 940e 14c6 	CALL SUBOPT_0x21
000733 940e 1480 	CALL SUBOPT_0x15
                 ; 0002 013D 			if (send_cmd(CMD24, sa) == 0) {			// WRITE_SINGLE_BLOCK
                 _0x4005C:
000735 e5e8      	LDI  R30,LOW(88)
000736 93ea      	ST   -Y,R30
                +
000737 81ad     +LDD R26 , Y + 5
000738 81be     +LDD R27 , Y + 5 + 1
000739 818f     +LDD R24 , Y + 5 + 2
00073a 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
00073b de84      	RCALL _send_cmd_G002
00073c 30e0      	CPI  R30,0
00073d f459      	BRNE _0x4005D
                 ; 0002 013E 				xmit_spi(0xFF); xmit_spi(0xFE);		// Data block header
00073e efaf      	LDI  R26,LOW(255)
00073f de6e      	RCALL _xmit_spi
000740 efae      	LDI  R26,LOW(254)
000741 de6c      	RCALL _xmit_spi
                 ; 0002 013F 				wc = 512;							// Set byte counter
000742 e0e0      	LDI  R30,LOW(512)
000743 e0f2      	LDI  R31,HIGH(512)
000744 93e0 0ae8 	STS  _wc_S0020007000,R30
000746 93f0 0ae9 	STS  _wc_S0020007000+1,R31
                 ; 0002 0140 				res = RES_OK;
000748 e010      	LDI  R17,LOW(0)
                 ; 0002 0141 			}
                 ; 0002 0142 		} else {	// Finalize sector write process
                 _0x4005D:
000749 c023      	RJMP _0x4005E
                 _0x4005B:
                 ; 0002 0143 			bc = wc + 2;
00074a 91e0 0ae8 	LDS  R30,_wc_S0020007000
00074c 91f0 0ae9 	LDS  R31,_wc_S0020007000+1
00074e 9632      	ADIW R30,2
00074f 019f      	MOVW R18,R30
                 ; 0002 0144 			while (bc--) xmit_spi(0);	// Fill left bytes and CRC with zeros
                 _0x4005F:
000750 01f9      	MOVW R30,R18
                +
000751 5021     +SUBI R18 , LOW ( 1 )
000752 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
000753 9730      	SBIW R30,0
000754 f019      	BREQ _0x40061
000755 e0a0      	LDI  R26,LOW(0)
000756 de57      	RCALL _xmit_spi
000757 cff8      	RJMP _0x4005F
                 _0x40061:
                 ; 0002 0145 if ((rcv_spi() & 0x1F) == 0x05) {
000758 de5c      	RCALL _rcv_spi
000759 71ef      	ANDI R30,LOW(0x1F)
00075a 30e5      	CPI  R30,LOW(0x5)
00075b f481      	BRNE _0x40062
                 ; 0002 0146 				for (bc = 65000; rcv_spi() != 0xFF && bc; bc--) ;	// Wait ready
                +
00075c ee28     +LDI R18 , LOW ( - 536 )
00075d ef3d     +LDI R19 , HIGH ( - 536 )
                 	__GETWRN 18,19,-536
                 _0x40064:
00075e de56      	RCALL _rcv_spi
00075f 3fef      	CPI  R30,LOW(0xFF)
000760 f019      	BREQ _0x40066
000761 2e02      	MOV  R0,R18
000762 2a03      	OR   R0,R19
000763 f409      	BRNE _0x40067
                 _0x40066:
000764 c003      	RJMP _0x40065
                 _0x40067:
                +
000765 5021     +SUBI R18 , LOW ( 1 )
000766 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
000767 cff6      	RJMP _0x40064
                 _0x40065:
                 ; 0002 0147 				if (bc) res = RES_OK;
000768 2e02      	MOV  R0,R18
000769 2a03      	OR   R0,R19
00076a f009      	BREQ _0x40068
00076b e010      	LDI  R17,LOW(0)
                 ; 0002 0148 			}
                 _0x40068:
                 ; 0002 0149 			release_spi();
                 _0x40062:
00076c de51      	RCALL _release_spi_G002
                 ; 0002 014A 		}
                 _0x4005E:
                 ; 0002 014B 	}
                 _0x4005A:
                 ; 0002 014C 
                 ; 0002 014D 	return res;
00076d 2fe1      	MOV  R30,R17
00076e 940e 1872 	CALL __LOADLOCR4
000770 c363      	RJMP _0x20C000F
                 ; 0002 014E }
                 ; .FEND
                 ;#endif
                 ;/*----------------------------------------------------------------------------/
                 ;/  Petit FatFs - FAT file system module  R0.02                 (C)ChaN, 2009
                 ;/-----------------------------------------------------------------------------/
                 ;/ Petit FatFs module is an open source software to implement FAT file system to
                 ;/ small embedded systems. This is a free software and is opened for education,
                 ;/ research and commercial developments under license policy of following trems.
                 ;/
                 ;/  Copyright (C) 2009, ChaN, all right reserved.
                 ;/
                 ;/ * The Petit FatFs module is a free software and there is NO WARRANTY.
                 ;/ * No restriction on use. You can use, modify and redistribute it for
                 ;/   personal, non-profit or commercial use UNDER YOUR RESPONSIBILITY.
                 ;/ * Redistributions of source code must retain the above copyright notice.
                 ;/
                 ;/-----------------------------------------------------------------------------/
                 ;/ Jun 15,'09  R0.01a  First release. (Branched from FatFs R0.07b.)
                 ;/
                 ;/ Dec 14,'09  R0.02   Added multiple code page support.
                 ;/                     Added write funciton.
                 ;/                     Changed stream read mode interface.
                 ;/----------------------------------------------------------------------------*/
                 ;
                 ;#include "pff_rn.h"		/* Petit FatFs configurations and declarations */
                 ;#include "diskio.h"		/* Declarations of low level disk I/O functions */
                 ;#include <string.h>
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Private Functions
                 ;
                 ;---------------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FATFS *FatFs;	/* Pointer to the file system object (logical drive) */
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* String functions                                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;/* Fill memory */
                 ;static
                 ;void mem_set (void* dst, int val, int cnt) {
                 ; 0003 002C void mem_set (void* dst, int val, int cnt) {
                 
                 	.CSEG
                 _mem_set_G003:
                 ; .FSTART _mem_set_G003
                 ; 0003 002D 	char *d = (char*)dst;
                 ; 0003 002E 	while (cnt--) *d++ = (char)val;
000771 940e 143a 	CALL SUBOPT_0xB
                 ;	*dst -> Y+6
                 ;	val -> Y+4
                 ;	cnt -> Y+2
                 ;	*d -> R16,R17
                +
000773 810e     +LDD R16 , Y + 6
000774 811f     +LDD R17 , Y + 6 + 1
                 	__GETWRS 16,17,6
                 _0x60003:
000775 81ea      	LDD  R30,Y+2
000776 81fb      	LDD  R31,Y+2+1
000777 9731      	SBIW R30,1
000778 83ea      	STD  Y+2,R30
000779 83fb      	STD  Y+2+1,R31
00077a 9631      	ADIW R30,1
00077b f049      	BREQ _0x60005
00077c 931f      	PUSH R17
00077d 930f      	PUSH R16
                +
00077e 5f0f     +SUBI R16 , LOW ( - 1 )
00077f 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000780 81ec      	LDD  R30,Y+4
000781 91af      	POP  R26
000782 91bf      	POP  R27
000783 93ec      	ST   X,R30
000784 cff0      	RJMP _0x60003
                 _0x60005:
                 ; 0003 002F }
000785 8119      	LDD  R17,Y+1
000786 8108      	LDD  R16,Y+0
000787 c3bc      	RJMP _0x20C000E
                 ; .FEND
                 ;
                 ;/* Compare memory to memory */
                 ;static
                 ;int mem_cmp (const void* dst, const void* src, int cnt) {
                 ; 0003 0033 int mem_cmp (const void* dst, const void* src, int cnt) {
                 _mem_cmp_G003:
                 ; .FSTART _mem_cmp_G003
                 ; 0003 0034 	const char *d = (const char *)dst, *s = (const char *)src;
                 ; 0003 0035 	int r = 0;
                 ; 0003 0036 	while (cnt-- && (r = *d++ - *s++) == 0) ;
000788 940e 14cf 	CALL SUBOPT_0x23
                 ;	*dst -> Y+10
                 ;	*src -> Y+8
                 ;	cnt -> Y+6
                 ;	*d -> R16,R17
                 ;	*s -> R18,R19
                 ;	r -> R20,R21
                +
00078a 850a     +LDD R16 , Y + 10
00078b 851b     +LDD R17 , Y + 10 + 1
                 	__GETWRS 16,17,10
                +
00078c 8528     +LDD R18 , Y + 8
00078d 8539     +LDD R19 , Y + 8 + 1
                 	__GETWRS 18,19,8
                +
00078e e040     +LDI R20 , LOW ( 0 )
00078f e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x60006:
000790 81ee      	LDD  R30,Y+6
000791 81ff      	LDD  R31,Y+6+1
000792 9731      	SBIW R30,1
000793 83ee      	STD  Y+6,R30
000794 83ff      	STD  Y+6+1,R31
000795 9631      	ADIW R30,1
000796 f081      	BREQ _0x60009
000797 01d8      	MOVW R26,R16
                +
000798 5f0f     +SUBI R16 , LOW ( - 1 )
000799 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
00079a 900c      	LD   R0,X
00079b 2411      	CLR  R1
00079c 01d9      	MOVW R26,R18
                +
00079d 5f2f     +SUBI R18 , LOW ( - 1 )
00079e 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
00079f 91ac      	LD   R26,X
0007a0 27bb      	CLR  R27
0007a1 01f0      	MOVW R30,R0
0007a2 1bea      	SUB  R30,R26
0007a3 0bfb      	SBC  R31,R27
0007a4 01af      	MOVW R20,R30
0007a5 9730      	SBIW R30,0
0007a6 f009      	BREQ _0x6000A
                 _0x60009:
0007a7 c001      	RJMP _0x60008
                 _0x6000A:
0007a8 cfe7      	RJMP _0x60006
                 _0x60008:
                 ; 0003 0037 	return r;
0007a9 01fa      	MOVW R30,R20
0007aa 940e 1870 	CALL __LOADLOCR6
0007ac 962c      	ADIW R28,12
0007ad 9508      	RET
                 ; 0003 0038 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* FAT access - Read value of a FAT entry                                */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;CLUST get_fat (	/* 1:IO error, Else:Cluster status */
                 ; 0003 0042 	CLUST clst	/* Cluster# to get the link information */
                 ; 0003 0043 )
                 ; 0003 0044 {
                 _get_fat_G003:
                 ; .FSTART _get_fat_G003
                 ; 0003 0045 	WORD wc, bc, ofs;
                 ; 0003 0046 	BYTE buf[4];
                 ; 0003 0047 	FATFS *fs = FatFs;
                 ; 0003 0048 
                 ; 0003 0049 
                 ; 0003 004A 	if (clst < 2 || clst >= fs->max_clust)	/* Range check */
0007ae 940e 1812 	CALL __PUTPARD2
0007b0 9726      	SBIW R28,6
0007b1 940e 1869 	CALL __SAVELOCR6
                 ;	clst -> Y+12
                 ;	wc -> R16,R17
                 ;	bc -> R18,R19
                 ;	ofs -> R20,R21
                 ;	buf -> Y+8
                 ;	*fs -> Y+6
0007b3 940e 14d4 	CALL SUBOPT_0x24
0007b5 83ee      	STD  Y+6,R30
0007b6 83ff      	STD  Y+6+1,R31
0007b7 940e 14d9 	CALL SUBOPT_0x25
0007b9 940e 14de 	CALL SUBOPT_0x26
0007bb f050      	BRLO _0x6000C
0007bc 81ae      	LDD  R26,Y+6
0007bd 81bf      	LDD  R27,Y+6+1
0007be 9618      	ADIW R26,8
0007bf 940e 17dc 	CALL __GETD1P
0007c1 940e 14d9 	CALL SUBOPT_0x25
0007c3 940e 1864 	CALL __CPD21
0007c5 f008      	BRLO _0x6000B
                 _0x6000C:
                 ; 0003 004B 		return 1;
0007c6 c0a2      	RJMP _0x20C0013
                 ; 0003 004C 
                 ; 0003 004D 	switch (fs->fs_type) {
                 _0x6000B:
0007c7 81ae      	LDD  R26,Y+6
0007c8 81bf      	LDD  R27,Y+6+1
0007c9 91ec      	LD   R30,X
0007ca e0f0      	LDI  R31,0
                 ; 0003 004E 	case FS_FAT12 :
0007cb 30e1      	CPI  R30,LOW(0x1)
0007cc e0a0      	LDI  R26,HIGH(0x1)
0007cd 07fa      	CPC  R31,R26
0007ce f009      	BREQ PC+2
0007cf c049      	RJMP _0x60011
                 ; 0003 004F 		bc = (WORD)clst; bc += bc / 2;
                +
0007d0 852c     +LDD R18 , Y + 12
0007d1 853d     +LDD R19 , Y + 12 + 1
                 	__GETWRS 18,19,12
0007d2 01f9      	MOVW R30,R18
0007d3 95f6      	LSR  R31
0007d4 95e7      	ROR  R30
                +
0007d5 0f2e     +ADD R18 , R30
0007d6 1f3f     +ADC R19 , R31
                 	__ADDWRR 18,19,30,31
                 ; 0003 0050 		ofs = bc % 512; bc /= 512;
0007d7 01f9      	MOVW R30,R18
0007d8 70f1      	ANDI R31,HIGH(0x1FF)
0007d9 01af      	MOVW R20,R30
0007da 01d9      	MOVW R26,R18
0007db e0e0      	LDI  R30,LOW(512)
0007dc e0f2      	LDI  R31,HIGH(512)
0007dd 940e 179c 	CALL __DIVW21U
0007df 019f      	MOVW R18,R30
                 ; 0003 0051 		if (ofs != 511) {
0007e0 efef      	LDI  R30,LOW(511)
0007e1 e0f1      	LDI  R31,HIGH(511)
0007e2 17e4      	CP   R30,R20
0007e3 07f5      	CPC  R31,R21
0007e4 f059      	BREQ _0x60012
                 ; 0003 0052 			if (disk_readp(buf, fs->fatbase + bc, ofs, 2)) break;
0007e5 940e 14e6 	CALL SUBOPT_0x27
0007e7 940e 180d 	CALL __PUTPARD1
0007e9 935a      	ST   -Y,R21
0007ea 934a      	ST   -Y,R20
0007eb 940e 14f2 	CALL SUBOPT_0x28
0007ed f009      	BREQ _0x60013
0007ee c07a      	RJMP _0x60010
                 ; 0003 0053 		} else {
                 _0x60013:
0007ef c01b      	RJMP _0x60014
                 _0x60012:
                 ; 0003 0054 			if (disk_readp(buf, fs->fatbase + bc, 511, 1)) break;
0007f0 940e 14e6 	CALL SUBOPT_0x27
0007f2 940e 180d 	CALL __PUTPARD1
0007f4 efef      	LDI  R30,LOW(511)
0007f5 e0f1      	LDI  R31,HIGH(511)
0007f6 940e 14f8 	CALL SUBOPT_0x29
0007f8 f009      	BREQ _0x60015
0007f9 c06f      	RJMP _0x60010
                 ; 0003 0055 			if (disk_readp(buf+1, fs->fatbase + bc + 1, 0, 1)) break;
                 _0x60015:
0007fa 01fe      	MOVW R30,R28
0007fb 9639      	ADIW R30,9
0007fc 940e 1500 	CALL SUBOPT_0x2A
0007fe 01f9      	MOVW R30,R18
0007ff 940e 1485 	CALL SUBOPT_0x16
000801 940e 1509 	CALL SUBOPT_0x2B
000803 940e 180d 	CALL __PUTPARD1
000805 e0e0      	LDI  R30,LOW(0)
000806 e0f0      	LDI  R31,HIGH(0)
000807 940e 14f8 	CALL SUBOPT_0x29
000809 f009      	BREQ _0x60016
00080a c05e      	RJMP _0x60010
                 ; 0003 0056 		}
                 _0x60016:
                 _0x60014:
                 ; 0003 0057 		wc = LD_WORD(buf);
                +
00080b 8508     +LDD R16 , Y + 8
00080c 8519     +LDD R17 , Y + 8 + 1
                 	__GETWRS 16,17,8
                 ; 0003 0058 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
00080d 85ec      	LDD  R30,Y+12
00080e 70e1      	ANDI R30,LOW(0x1)
00080f f021      	BREQ _0x60017
000810 01f8      	MOVW R30,R16
000811 940e 175a 	CALL __LSRW4
000813 c002      	RJMP _0x60111
                 _0x60017:
000814 01f8      	MOVW R30,R16
000815 70ff      	ANDI R31,HIGH(0xFFF)
                 _0x60111:
000816 2766      	CLR  R22
000817 2777      	CLR  R23
000818 c054      	RJMP _0x20C0012
                 ; 0003 0059 
                 ; 0003 005A 	case FS_FAT16 :
                 _0x60011:
000819 30e2      	CPI  R30,LOW(0x2)
00081a e0a0      	LDI  R26,HIGH(0x2)
00081b 07fa      	CPC  R31,R26
00081c f509      	BRNE _0x6001A
                 ; 0003 005B 		if (disk_readp(buf, fs->fatbase + clst / 256, (WORD)(((WORD)clst % 256) * 2), 2)) break;
00081d 01fe      	MOVW R30,R28
00081e 9638      	ADIW R30,8
00081f 940e 1500 	CALL SUBOPT_0x2A
000821 939f      	PUSH R25
000822 938f      	PUSH R24
000823 93bf      	PUSH R27
000824 93af      	PUSH R26
000825 940e 150e 	CALL SUBOPT_0x2C
                +
000827 e0e0     +LDI R30 , LOW ( 0x100 )
000828 e0f1     +LDI R31 , HIGH ( 0x100 )
000829 e060     +LDI R22 , BYTE3 ( 0x100 )
00082a e070     +LDI R23 , BYTE4 ( 0x100 )
                 	__GETD1N 0x100
00082b 940e 17af 	CALL __DIVD21U
00082d 91af      	POP  R26
00082e 91bf      	POP  R27
00082f 918f      	POP  R24
000830 919f      	POP  R25
000831 940e 1513 	CALL SUBOPT_0x2D
000833 70f0      	ANDI R31,HIGH(0xFF)
000834 0fee      	LSL  R30
000835 1fff      	ROL  R31
000836 940e 151a 	CALL SUBOPT_0x2E
000838 f581      	BRNE _0x60010
                 ; 0003 005C 		return LD_WORD(buf);
000839 85e8      	LDD  R30,Y+8
00083a 85f9      	LDD  R31,Y+8+1
00083b 2766      	CLR  R22
00083c 2777      	CLR  R23
00083d c02f      	RJMP _0x20C0012
                 ; 0003 005D #if _FS_FAT32
                 ; 0003 005E 	case FS_FAT32 :
                 _0x6001A:
00083e 30e3      	CPI  R30,LOW(0x3)
00083f e0a0      	LDI  R26,HIGH(0x3)
000840 07fa      	CPC  R31,R26
000841 f539      	BRNE _0x60010
                 ; 0003 005F 		if (disk_readp(buf, fs->fatbase + clst / 128, (WORD)(((WORD)clst % 128) * 4), 4)) break;
000842 01fe      	MOVW R30,R28
000843 9638      	ADIW R30,8
000844 940e 1500 	CALL SUBOPT_0x2A
000846 939f      	PUSH R25
000847 938f      	PUSH R24
000848 93bf      	PUSH R27
000849 93af      	PUSH R26
00084a 940e 150e 	CALL SUBOPT_0x2C
                +
00084c e8e0     +LDI R30 , LOW ( 0x80 )
00084d e0f0     +LDI R31 , HIGH ( 0x80 )
00084e e060     +LDI R22 , BYTE3 ( 0x80 )
00084f e070     +LDI R23 , BYTE4 ( 0x80 )
                 	__GETD1N 0x80
000850 940e 17af 	CALL __DIVD21U
000852 91af      	POP  R26
000853 91bf      	POP  R27
000854 918f      	POP  R24
000855 919f      	POP  R25
000856 940e 1513 	CALL SUBOPT_0x2D
000858 77ef      	ANDI R30,LOW(0x7F)
000859 70f0      	ANDI R31,HIGH(0x7F)
00085a 940e 1755 	CALL __LSLW2
00085c 93fa      	ST   -Y,R31
00085d 93ea      	ST   -Y,R30
00085e e0a4      	LDI  R26,LOW(4)
00085f 940e 151d 	CALL SUBOPT_0x2F
000861 f439      	BRNE _0x60010
                 ; 0003 0060 		return LD_DWORD(buf) & 0x0FFFFFFF;
000862 940e 147b 	CALL SUBOPT_0x14
                +
000864 7fef     +ANDI R30 , LOW ( 0xFFFFFFF )
000865 7fff     +ANDI R31 , HIGH ( 0xFFFFFFF )
000866 7f6f     +ANDI R22 , BYTE3 ( 0xFFFFFFF )
000867 707f     +ANDI R23 , BYTE4 ( 0xFFFFFFF )
                 	__ANDD1N 0xFFFFFFF
000868 c004      	RJMP _0x20C0012
                 ; 0003 0061 #endif
                 ; 0003 0062 	}
                 _0x60010:
                 ; 0003 0063 
                 ; 0003 0064 	return 1;	/* An error occured at the disk I/O layer */
                 _0x20C0013:
                +
000869 e0e1     +LDI R30 , LOW ( 0x1 )
00086a e0f0     +LDI R31 , HIGH ( 0x1 )
00086b e060     +LDI R22 , BYTE3 ( 0x1 )
00086c e070     +LDI R23 , BYTE4 ( 0x1 )
                 	__GETD1N 0x1
                 _0x20C0012:
00086d 940e 1870 	CALL __LOADLOCR6
00086f 9660      	ADIW R28,16
000870 9508      	RET
                 ; 0003 0065 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get sector# from cluster#                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
                 ; 0003 0070 	CLUST clst		/* Cluster# to be converted */
                 ; 0003 0071 )
                 ; 0003 0072 {
                 _clust2sect_G003:
                 ; .FSTART _clust2sect_G003
                 ; 0003 0073 	FATFS *fs = FatFs;
                 ; 0003 0074 
                 ; 0003 0075 
                 ; 0003 0076 	clst -= 2;
000871 940e 1812 	CALL __PUTPARD2
000873 940e 1522 	CALL SUBOPT_0x30
                 ;	clst -> Y+2
                 ;	*fs -> R16,R17
000875 940e 14ab 	CALL SUBOPT_0x1C
                +
000877 50e2     +SUBI R30 , LOW ( 2 )
000878 40f0     +SBCI R31 , HIGH ( 2 )
000879 4060     +SBCI R22 , BYTE3 ( 2 )
00087a 4070     +SBCI R23 , BYTE4 ( 2 )
                 	__SUBD1N 2
00087b 940e 1529 	CALL SUBOPT_0x31
                 ; 0003 0077 	if (clst >= (fs->max_clust - 2)) return 0;		/* Invalid cluster# */
00087d 01f8      	MOVW R30,R16
                +
00087e 85a0     +LDD R26 , Z + 8
00087f 85b1     +LDD R27 , Z + 8 + 1
000880 8582     +LDD R24 , Z + 8 + 2
000881 8593     +LDD R25 , Z + 8 + 3
                 	__GETD2Z 8
                +
000882 e0e2     +LDI R30 , LOW ( 0x2 )
000883 e0f0     +LDI R31 , HIGH ( 0x2 )
000884 e060     +LDI R22 , BYTE3 ( 0x2 )
000885 e070     +LDI R23 , BYTE4 ( 0x2 )
                 	__GETD1N 0x2
000886 940e 1817 	CALL __SWAPD12
000888 940e 172d 	CALL __SUBD12
00088a 940e 152e 	CALL SUBOPT_0x32
00088c 940e 1864 	CALL __CPD21
00088e f028      	BRLO _0x6001E
00088f 940e 1533 	CALL SUBOPT_0x33
000891 8119      	LDD  R17,Y+1
000892 8108      	LDD  R16,Y+0
000893 c2e6      	RJMP _0x20C000D
                 ; 0003 0078 	return (DWORD)clst * fs->csize + fs->database;
                 _0x6001E:
000894 01f8      	MOVW R30,R16
000895 81e1      	LDD  R30,Z+1
000896 e0f0      	LDI  R31,0
000897 940e 152e 	CALL SUBOPT_0x32
000899 940e 1772 	CALL __CWD1
00089b 940e 177c 	CALL __MULD12U
00089d 937f      	PUSH R23
00089e 936f      	PUSH R22
00089f 93ff      	PUSH R31
0008a0 93ef      	PUSH R30
0008a1 01d8      	MOVW R26,R16
0008a2 9654      	ADIW R26,20
0008a3 940e 17dc 	CALL __GETD1P
0008a5 91af      	POP  R26
0008a6 91bf      	POP  R27
0008a7 918f      	POP  R24
0008a8 919f      	POP  R25
0008a9 940e 1723 	CALL __ADDD12
0008ab 8119      	LDD  R17,Y+1
0008ac 8108      	LDD  R16,Y+0
0008ad c2cc      	RJMP _0x20C000D
                 ; 0003 0079 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Rewind directory index                           */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_rewind (
                 ; 0003 0084 	DIR *dj			/* Pointer to directory object */
                 ; 0003 0085 )
                 ; 0003 0086 {
                 _dir_rewind_G003:
                 ; .FSTART _dir_rewind_G003
                 ; 0003 0087 	CLUST clst;
                 ; 0003 0088 	FATFS *fs = FatFs;
                 ; 0003 0089 
                 ; 0003 008A 
                 ; 0003 008B 	dj->index = 0;
0008ae 93ba      	ST   -Y,R27
0008af 93aa      	ST   -Y,R26
0008b0 9724      	SBIW R28,4
0008b1 940e 1522 	CALL SUBOPT_0x30
                 ;	*dj -> Y+6
                 ;	clst -> Y+2
                 ;	*fs -> R16,R17
0008b3 81ae      	LDD  R26,Y+6
0008b4 81bf      	LDD  R27,Y+6+1
0008b5 940e 1538 	CALL SUBOPT_0x34
                 ; 0003 008C 	clst = dj->sclust;
0008b7 81ae      	LDD  R26,Y+6
0008b8 81bf      	LDD  R27,Y+6+1
0008b9 9614      	ADIW R26,4
0008ba 940e 153d 	CALL SUBOPT_0x35
                 ; 0003 008D 	if (clst == 1 || clst >= fs->max_clust)	/* Check start cluster range */
0008bc 940e 152e 	CALL SUBOPT_0x32
                +
0008be 30a1     +CPI R26 , LOW ( 0x1 )
0008bf e0e0     +LDI R30 , HIGH ( 0x1 )
0008c0 07be     +CPC R27 , R30
0008c1 e0e0     +LDI R30 , BYTE3 ( 0x1 )
0008c2 078e     +CPC R24 , R30
0008c3 e0e0     +LDI R30 , BYTE4 ( 0x1 )
0008c4 079e     +CPC R25 , R30
                 	__CPD2N 0x1
0008c5 f049      	BREQ _0x60020
0008c6 01d8      	MOVW R26,R16
0008c7 9618      	ADIW R26,8
0008c8 940e 17dc 	CALL __GETD1P
0008ca 940e 152e 	CALL SUBOPT_0x32
0008cc 940e 1864 	CALL __CPD21
0008ce f020      	BRLO _0x6001F
                 _0x60020:
                 ; 0003 008E 		return FR_DISK_ERR;
0008cf e0e1      	LDI  R30,LOW(1)
0008d0 8119      	LDD  R17,Y+1
0008d1 8108      	LDD  R16,Y+0
0008d2 c271      	RJMP _0x20C000E
                 ; 0003 008F #if _FS_FAT32
                 ; 0003 0090 	if (!clst && fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
                 _0x6001F:
0008d3 940e 14ab 	CALL SUBOPT_0x1C
0008d5 940e 1851 	CALL __CPD10
0008d7 f421      	BRNE _0x60023
0008d8 01d8      	MOVW R26,R16
0008d9 91ac      	LD   R26,X
0008da 30a3      	CPI  R26,LOW(0x3)
0008db f009      	BREQ _0x60024
                 _0x60023:
0008dc c004      	RJMP _0x60022
                 _0x60024:
                 ; 0003 0091 		clst = fs->dirbase;
0008dd 01d8      	MOVW R26,R16
0008de 9650      	ADIW R26,16
0008df 940e 153d 	CALL SUBOPT_0x35
                 ; 0003 0092 #endif
                 ; 0003 0093 	dj->clust = clst;						/* Current cluster */
                 _0x60022:
0008e1 940e 14ab 	CALL SUBOPT_0x1C
                +
0008e3 81ae     +LDD R26 , Y + 6
0008e4 81bf     +LDD R27 , Y + 6 + 1
0008e5 9618     +ADIW R26 , 8
0008e6 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 6,8
                 ; 0003 0094 	dj->sect = clst ? clust2sect(clst) : fs->dirbase;	/* Current sector */
0008e8 940e 14ab 	CALL SUBOPT_0x1C
0008ea 940e 1851 	CALL __CPD10
0008ec f021      	BREQ _0x60025
0008ed 940e 152e 	CALL SUBOPT_0x32
0008ef df81      	RCALL _clust2sect_G003
0008f0 c004      	RJMP _0x60026
                 _0x60025:
0008f1 01d8      	MOVW R26,R16
0008f2 9650      	ADIW R26,16
0008f3 940e 17dc 	CALL __GETD1P
                 _0x60026:
                +
0008f5 81ae     +LDD R26 , Y + 6
0008f6 81bf     +LDD R27 , Y + 6 + 1
0008f7 961c     +ADIW R26 , 12
0008f8 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 6,12
                 ; 0003 0095 
                 ; 0003 0096 	return FR_OK;	/* Seek succeeded */
0008fa e0e0      	LDI  R30,LOW(0)
0008fb 8119      	LDD  R17,Y+1
0008fc 8108      	LDD  R16,Y+0
0008fd c246      	RJMP _0x20C000E
                 ; 0003 0097 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Move directory index next                        */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table */
                 ; 0003 00A2 	DIR *dj			/* Pointer to directory object */
                 ; 0003 00A3 )
                 ; 0003 00A4 {
                 _dir_next_G003:
                 ; .FSTART _dir_next_G003
                 ; 0003 00A5 	CLUST clst;
                 ; 0003 00A6 	WORD i;
                 ; 0003 00A7 	FATFS *fs = FatFs;
                 ; 0003 00A8 
                 ; 0003 00A9 
                 ; 0003 00AA 	i = dj->index + 1;
0008fe 93ba      	ST   -Y,R27
0008ff 93aa      	ST   -Y,R26
000900 9724      	SBIW R28,4
000901 940e 1540 	CALL SUBOPT_0x36
                 ;	*dj -> Y+8
                 ;	clst -> Y+4
                 ;	i -> R16,R17
                 ;	*fs -> R18,R19
000903 85a8      	LDD  R26,Y+8
000904 85b9      	LDD  R27,Y+8+1
000905 940e 17d8 	CALL __GETW1P
000907 9631      	ADIW R30,1
000908 018f      	MOVW R16,R30
                 ; 0003 00AB 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
000909 2e00      	MOV  R0,R16
00090a 2a01      	OR   R0,R17
00090b f019      	BREQ _0x60029
00090c 940e 1547 	CALL SUBOPT_0x37
00090e f421      	BRNE _0x60028
                 _0x60029:
                 ; 0003 00AC 		return FR_NO_FILE;
00090f e0e3      	LDI  R30,LOW(3)
000910 940e 1872 	CALL __LOADLOCR4
000912 c1c1      	RJMP _0x20C000F
                 ; 0003 00AD 
                 ; 0003 00AE 	if (!(i & (16-1))) {	/* Sector changed? */
                 _0x60028:
000913 01f8      	MOVW R30,R16
000914 70ef      	ANDI R30,LOW(0xF)
000915 f009      	BREQ PC+2
000916 c059      	RJMP _0x6002B
                 ; 0003 00AF 		dj->sect++;			/* Next sector */
000917 85a8      	LDD  R26,Y+8
000918 85b9      	LDD  R27,Y+8+1
000919 961c      	ADIW R26,12
00091a 940e 17e2 	CALL __GETD1P_INC
                +
00091c 5fef     +SUBI R30 , LOW ( - 1 )
00091d 4fff     +SBCI R31 , HIGH ( - 1 )
00091e 4f6f     +SBCI R22 , BYTE3 ( - 1 )
00091f 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__SUBD1N -1
000920 940e 17ec 	CALL __PUTDP1_DEC
                 ; 0003 00B0 
                 ; 0003 00B1 		if (dj->clust == 0) {	/* Static table */
000922 85a8      	LDD  R26,Y+8
000923 85b9      	LDD  R27,Y+8+1
000924 9618      	ADIW R26,8
000925 940e 17dc 	CALL __GETD1P
000927 940e 1851 	CALL __CPD10
000929 f461      	BRNE _0x6002C
                 ; 0003 00B2 			if (i >= fs->n_rootdir)	/* Report EOT when end of table */
00092a 01d9      	MOVW R26,R18
00092b 9614      	ADIW R26,4
00092c 940e 17d8 	CALL __GETW1P
00092e 170e      	CP   R16,R30
00092f 071f      	CPC  R17,R31
000930 f020      	BRLO _0x6002D
                 ; 0003 00B3 				return FR_NO_FILE;
000931 e0e3      	LDI  R30,LOW(3)
000932 940e 1872 	CALL __LOADLOCR4
000934 c19f      	RJMP _0x20C000F
                 ; 0003 00B4 		}
                 _0x6002D:
                 ; 0003 00B5 		else {					/* Dynamic table */
000935 c03a      	RJMP _0x6002E
                 _0x6002C:
                 ; 0003 00B6 			if (((i / 16) & (fs->csize-1)) == 0) {	/* Cluster changed? */
000936 01f8      	MOVW R30,R16
000937 940e 175a 	CALL __LSRW4
000939 01df      	MOVW R26,R30
00093a 01f9      	MOVW R30,R18
00093b 81e1      	LDD  R30,Z+1
00093c e0f0      	LDI  R31,0
00093d 9731      	SBIW R30,1
00093e 23ea      	AND  R30,R26
00093f 23fb      	AND  R31,R27
000940 9730      	SBIW R30,0
000941 f571      	BRNE _0x6002F
                 ; 0003 00B7 				clst = get_fat(dj->clust);		/* Get next cluster */
000942 85e8      	LDD  R30,Y+8
000943 85f9      	LDD  R31,Y+8+1
                +
000944 85a0     +LDD R26 , Z + 8
000945 85b1     +LDD R27 , Z + 8 + 1
000946 8582     +LDD R24 , Z + 8 + 2
000947 8593     +LDD R25 , Z + 8 + 3
                 	__GETD2Z 8
000948 de65      	RCALL _get_fat_G003
000949 940e 1480 	CALL SUBOPT_0x15
                 ; 0003 00B8 				if (clst <= 1) return FR_DISK_ERR;
00094b 940e 154f 	CALL SUBOPT_0x38
00094d 940e 14de 	CALL SUBOPT_0x26
00094f f420      	BRSH _0x60030
000950 e0e1      	LDI  R30,LOW(1)
000951 940e 1872 	CALL __LOADLOCR4
000953 c180      	RJMP _0x20C000F
                 ; 0003 00B9 				if (clst >= fs->max_clust)		/* When it reached end of dynamic table */
                 _0x60030:
000954 01d9      	MOVW R26,R18
000955 9618      	ADIW R26,8
000956 940e 17dc 	CALL __GETD1P
000958 940e 154f 	CALL SUBOPT_0x38
00095a 940e 1864 	CALL __CPD21
00095c f020      	BRLO _0x60031
                 ; 0003 00BA 					return FR_NO_FILE;			/* Report EOT */
00095d e0e3      	LDI  R30,LOW(3)
00095e 940e 1872 	CALL __LOADLOCR4
000960 c173      	RJMP _0x20C000F
                 ; 0003 00BB 				dj->clust = clst;				/* Initialize data for new cluster */
                 _0x60031:
000961 940e 143f 	CALL SUBOPT_0xC
                +
000963 85a8     +LDD R26 , Y + 8
000964 85b9     +LDD R27 , Y + 8 + 1
000965 9618     +ADIW R26 , 8
000966 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 8,8
                 ; 0003 00BC 				dj->sect = clust2sect(clst);
000968 940e 154f 	CALL SUBOPT_0x38
00096a df06      	RCALL _clust2sect_G003
                +
00096b 85a8     +LDD R26 , Y + 8
00096c 85b9     +LDD R27 , Y + 8 + 1
00096d 961c     +ADIW R26 , 12
00096e 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 8,12
                 ; 0003 00BD 			}
                 ; 0003 00BE 		}
                 _0x6002F:
                 _0x6002E:
                 ; 0003 00BF 	}
                 ; 0003 00C0 
                 ; 0003 00C1 	dj->index = i;
                 _0x6002B:
000970 85a8      	LDD  R26,Y+8
000971 85b9      	LDD  R27,Y+8+1
000972 930d      	ST   X+,R16
000973 931c      	ST   X,R17
                 ; 0003 00C2 
                 ; 0003 00C3 	return FR_OK;
000974 e0e0      	LDI  R30,LOW(0)
000975 940e 1872 	CALL __LOADLOCR4
000977 c15c      	RJMP _0x20C000F
                 ; 0003 00C4 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Find an object in the directory                  */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_find (
                 ; 0003 00CF 	DIR *dj			/* Pointer to the directory object linked to the file name */
                 ; 0003 00D0 )
                 ; 0003 00D1 {
                 _dir_find_G003:
                 ; .FSTART _dir_find_G003
                 ; 0003 00D2 	FRESULT res;
                 ; 0003 00D3 	BYTE c, *dir;
                 ; 0003 00D4 
                 ; 0003 00D5 
                 ; 0003 00D6 	res = dir_rewind(dj);			/* Rewind directory object */
000978 940e 14c1 	CALL SUBOPT_0x20
                 ;	*dj -> Y+4
                 ;	res -> R17
                 ;	c -> R16
                 ;	*dir -> R18,R19
00097a 81ac      	LDD  R26,Y+4
00097b 81bd      	LDD  R27,Y+4+1
00097c df31      	RCALL _dir_rewind_G003
00097d 2f1e      	MOV  R17,R30
                 ; 0003 00D7 	if (res != FR_OK) return res;
00097e 3010      	CPI  R17,0
00097f f019      	BREQ _0x60032
000980 940e 1872 	CALL __LOADLOCR4
000982 c1f7      	RJMP _0x20C000D
                 ; 0003 00D8 
                 ; 0003 00D9 	dir = FatFs->buf;
                 _0x60032:
000983 940e 1554 	CALL SUBOPT_0x39
000985 912d      	LD   R18,X+
000986 913c      	LD   R19,X
                 ; 0003 00DA 	do {
                 _0x60034:
                 ; 0003 00DB 		res = disk_readp(dir, dj->sect, (WORD)((dj->index % 16) * 32), 32)	/* Read an entry */
                 ; 0003 00DC 			? FR_DISK_ERR : FR_OK;
000987 933a      	ST   -Y,R19
000988 932a      	ST   -Y,R18
000989 81ee      	LDD  R30,Y+6
00098a 81ff      	LDD  R31,Y+6+1
00098b 940e 155a 	CALL SUBOPT_0x3A
00098d 85aa      	LDD  R26,Y+10
00098e 85bb      	LDD  R27,Y+10+1
00098f 940e 1561 	CALL SUBOPT_0x3B
000991 f011      	BREQ _0x60036
000992 e0e1      	LDI  R30,LOW(1)
000993 c001      	RJMP _0x60037
                 _0x60036:
000994 e0e0      	LDI  R30,LOW(0)
                 _0x60037:
000995 2f1e      	MOV  R17,R30
                 ; 0003 00DD 		if (res != FR_OK) break;
000996 3010      	CPI  R17,0
000997 f4f9      	BRNE _0x60035
                 ; 0003 00DE 		c = dir[DIR_Name];	/* First character */
000998 01d9      	MOVW R26,R18
000999 910c      	LD   R16,X
                 ; 0003 00DF 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
00099a 3000      	CPI  R16,0
00099b f411      	BRNE _0x6003A
00099c e013      	LDI  R17,LOW(3)
00099d c019      	RJMP _0x60035
                 ; 0003 00E0 		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dj->fn, 11)) /* Is it a valid entry? */
                 _0x6003A:
00099e 01f9      	MOVW R30,R18
00099f 85e3      	LDD  R30,Z+11
0009a0 70e8      	ANDI R30,LOW(0x8)
0009a1 f469      	BRNE _0x6003C
0009a2 933a      	ST   -Y,R19
0009a3 932a      	ST   -Y,R18
0009a4 81ee      	LDD  R30,Y+6
0009a5 81ff      	LDD  R31,Y+6+1
0009a6 81a2      	LDD  R26,Z+2
0009a7 81b3      	LDD  R27,Z+3
0009a8 93ba      	ST   -Y,R27
0009a9 93aa      	ST   -Y,R26
0009aa e0ab      	LDI  R26,LOW(11)
0009ab e0b0      	LDI  R27,0
0009ac dddb      	RCALL _mem_cmp_G003
0009ad 9730      	SBIW R30,0
0009ae f009      	BREQ _0x6003D
                 _0x6003C:
0009af c001      	RJMP _0x6003B
                 _0x6003D:
                 ; 0003 00E1 			break;
0009b0 c006      	RJMP _0x60035
                 ; 0003 00E2 		res = dir_next(dj);							/* Next entry */
                 _0x6003B:
0009b1 81ac      	LDD  R26,Y+4
0009b2 81bd      	LDD  R27,Y+4+1
0009b3 df4a      	RCALL _dir_next_G003
0009b4 2f1e      	MOV  R17,R30
                 ; 0003 00E3 	} while (res == FR_OK);
0009b5 3010      	CPI  R17,0
0009b6 f281      	BREQ _0x60034
                 _0x60035:
                 ; 0003 00E4 
                 ; 0003 00E5 	return res;
0009b7 2fe1      	MOV  R30,R17
0009b8 940e 1872 	CALL __LOADLOCR4
0009ba c1bf      	RJMP _0x20C000D
                 ; 0003 00E6 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read an object from the directory                                     */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_DIR
                 ;static
                 ;FRESULT dir_read (
                 ; 0003 00F1 	DIR *dj			/* Pointer to the directory object to store read object name */
                 ; 0003 00F2 )
                 ; 0003 00F3 {
                 _dir_read_G003:
                 ; .FSTART _dir_read_G003
                 ; 0003 00F4 	FRESULT res;
                 ; 0003 00F5 	BYTE a, c, *dir;
                 ; 0003 00F6 
                 ; 0003 00F7 
                 ; 0003 00F8 	res = FR_NO_FILE;
0009bb 940e 14cf 	CALL SUBOPT_0x23
                 ;	*dj -> Y+6
                 ;	res -> R17
                 ;	a -> R16
                 ;	c -> R19
                 ;	*dir -> R20,R21
0009bd e013      	LDI  R17,LOW(3)
                 ; 0003 00F9 	dir = FatFs->buf;
0009be 940e 1554 	CALL SUBOPT_0x39
0009c0 914d      	LD   R20,X+
0009c1 915c      	LD   R21,X
                 ; 0003 00FA 	while (dj->sect) {
                 _0x6003E:
0009c2 81ae      	LDD  R26,Y+6
0009c3 81bf      	LDD  R27,Y+6+1
0009c4 961c      	ADIW R26,12
0009c5 940e 17dc 	CALL __GETD1P
0009c7 940e 1851 	CALL __CPD10
0009c9 f149      	BREQ _0x60040
                 ; 0003 00FB 		res = disk_readp(dir, dj->sect, (WORD)((dj->index % 16) * 32), 32)	/* Read an entry */
                 ; 0003 00FC 			? FR_DISK_ERR : FR_OK;
0009ca 935a      	ST   -Y,R21
0009cb 934a      	ST   -Y,R20
0009cc 85e8      	LDD  R30,Y+8
0009cd 85f9      	LDD  R31,Y+8+1
0009ce 940e 155a 	CALL SUBOPT_0x3A
0009d0 85ac      	LDD  R26,Y+12
0009d1 85bd      	LDD  R27,Y+12+1
0009d2 940e 1561 	CALL SUBOPT_0x3B
0009d4 f011      	BREQ _0x60041
0009d5 e0e1      	LDI  R30,LOW(1)
0009d6 c001      	RJMP _0x60042
                 _0x60041:
0009d7 e0e0      	LDI  R30,LOW(0)
                 _0x60042:
0009d8 2f1e      	MOV  R17,R30
                 ; 0003 00FD 		if (res != FR_OK) break;
0009d9 3010      	CPI  R17,0
0009da f4c1      	BRNE _0x60040
                 ; 0003 00FE 		c = dir[DIR_Name];
0009db 01da      	MOVW R26,R20
0009dc 913c      	LD   R19,X
                 ; 0003 00FF 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
0009dd 3030      	CPI  R19,0
0009de f411      	BRNE _0x60045
0009df e013      	LDI  R17,LOW(3)
0009e0 c012      	RJMP _0x60040
                 ; 0003 0100 		a = dir[DIR_Attr] & AM_MASK;
                 _0x60045:
0009e1 01fa      	MOVW R30,R20
0009e2 85e3      	LDD  R30,Z+11
0009e3 73ef      	ANDI R30,LOW(0x3F)
0009e4 2f0e      	MOV  R16,R30
                 ; 0003 0101 		if (c != 0xE5 && c != '.' && !(a & AM_VOL))	/* Is it a valid entry? */
0009e5 3e35      	CPI  R19,229
0009e6 f021      	BREQ _0x60047
0009e7 323e      	CPI  R19,46
0009e8 f011      	BREQ _0x60047
0009e9 ff03      	SBRS R16,3
0009ea c001      	RJMP _0x60048
                 _0x60047:
0009eb c001      	RJMP _0x60046
                 _0x60048:
                 ; 0003 0102 			break;
0009ec c006      	RJMP _0x60040
                 ; 0003 0103 		res = dir_next(dj);				/* Next entry */
                 _0x60046:
0009ed 81ae      	LDD  R26,Y+6
0009ee 81bf      	LDD  R27,Y+6+1
0009ef df0e      	RCALL _dir_next_G003
0009f0 2f1e      	MOV  R17,R30
                 ; 0003 0104 		if (res != FR_OK) break;
0009f1 3010      	CPI  R17,0
0009f2 f279      	BREQ _0x6003E
                 ; 0003 0105 	}
                 _0x60040:
                 ; 0003 0106 
                 ; 0003 0107 	if (res != FR_OK) dj->sect = 0;
0009f3 3010      	CPI  R17,0
0009f4 f021      	BREQ _0x6004A
0009f5 81ae      	LDD  R26,Y+6
0009f6 81bf      	LDD  R27,Y+6+1
0009f7 940e 156c 	CALL SUBOPT_0x3C
                 ; 0003 0108 
                 ; 0003 0109 	return res;
                 _0x6004A:
0009f9 2fe1      	MOV  R30,R17
0009fa 940e 1870 	CALL __LOADLOCR6
0009fc c147      	RJMP _0x20C000E
                 ; 0003 010A }
                 ; .FEND
                 ;
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Pick a segment and create the object name in directory form           */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;#ifdef _EXCVT
                 ;	static const BYTE cvt[] = _EXCVT;
                 ;#endif
                 ;
                 ;static
                 ;FRESULT create_name (
                 ; 0003 011A 	DIR *dj,			/* Pointer to the directory object */
                 ; 0003 011B 	const char **path	/* Pointer to pointer to the segment in the path string */
                 ; 0003 011C )
                 ; 0003 011D {
                 _create_name_G003:
                 ; .FSTART _create_name_G003
                 ; 0003 011E 	BYTE c, d, ni, si, i, *sfn;
                 ; 0003 011F 	const char *p;
                 ; 0003 0120 
                 ; 0003 0121 	/* Create file name in directory form */
                 ; 0003 0122 	sfn = dj->fn;
0009fd 93ba      	ST   -Y,R27
0009fe 93aa      	ST   -Y,R26
0009ff 9724      	SBIW R28,4
000a00 940e 1869 	CALL __SAVELOCR6
                 ;	*dj -> Y+12
                 ;	*path -> Y+10
                 ;	c -> R17
                 ;	d -> R16
                 ;	ni -> R19
                 ;	si -> R18
                 ;	i -> R21
                 ;	*sfn -> Y+8
                 ;	*p -> Y+6
000a02 85ac      	LDD  R26,Y+12
000a03 85bd      	LDD  R27,Y+12+1
000a04 9612      	ADIW R26,2
000a05 940e 17d8 	CALL __GETW1P
000a07 87e8      	STD  Y+8,R30
000a08 87f9      	STD  Y+8+1,R31
                 ; 0003 0123 	mem_set(sfn, ' ', 11);
000a09 93fa      	ST   -Y,R31
000a0a 93ea      	ST   -Y,R30
000a0b e2e0      	LDI  R30,LOW(32)
000a0c e0f0      	LDI  R31,HIGH(32)
000a0d 93fa      	ST   -Y,R31
000a0e 93ea      	ST   -Y,R30
000a0f e0ab      	LDI  R26,LOW(11)
000a10 e0b0      	LDI  R27,0
000a11 dd5f      	RCALL _mem_set_G003
                 ; 0003 0124 	si = i = 0; ni = 8;
000a12 e0e0      	LDI  R30,LOW(0)
000a13 2f5e      	MOV  R21,R30
000a14 2f2e      	MOV  R18,R30
000a15 e038      	LDI  R19,LOW(8)
                 ; 0003 0125 	p = *path;
000a16 85aa      	LDD  R26,Y+10
000a17 85bb      	LDD  R27,Y+10+1
000a18 940e 17d8 	CALL __GETW1P
000a1a 83ee      	STD  Y+6,R30
000a1b 83ff      	STD  Y+6+1,R31
                 ; 0003 0126 	for (;;) {
                 _0x6004C:
                 ; 0003 0127 		c = p[si++];
000a1c 940e 1571 	CALL SUBOPT_0x3D
000a1e 911c      	LD   R17,X
                 ; 0003 0128 		if (c <= ' ' || c == '/') break;	/* Break on end of segment */
000a1f 3211      	CPI  R17,33
000a20 f010      	BRLO _0x6004F
000a21 321f      	CPI  R17,47
000a22 f409      	BRNE _0x6004E
                 _0x6004F:
000a23 c039      	RJMP _0x6004D
                 ; 0003 0129 		if (c == '.' || i >= ni) {
                 _0x6004E:
000a24 321e      	CPI  R17,46
000a25 f011      	BREQ _0x60052
000a26 1753      	CP   R21,R19
000a27 f040      	BRLO _0x60051
                 _0x60052:
                 ; 0003 012A 			if (ni != 8 || c != '.') break;
000a28 3038      	CPI  R19,8
000a29 f411      	BRNE _0x60055
000a2a 321e      	CPI  R17,46
000a2b f009      	BREQ _0x60054
                 _0x60055:
000a2c c030      	RJMP _0x6004D
                 ; 0003 012B 			i = 8; ni = 11;
                 _0x60054:
000a2d e058      	LDI  R21,LOW(8)
000a2e e03b      	LDI  R19,LOW(11)
                 ; 0003 012C 			continue;
000a2f c02c      	RJMP _0x6004B
                 ; 0003 012D 		}
                 ; 0003 012E #ifdef _EXCVT
                 ; 0003 012F 		if (c >= 0x80)					/* To upper extended char (SBCS) */
                 _0x60051:
000a30 3810      	CPI  R17,128
000a31 f058      	BRLO _0x60057
                 ; 0003 0130 			c = cvt[c - 0x80];
000a32 2fe1      	MOV  R30,R17
000a33 e0f0      	LDI  R31,0
000a34 58e0      	SUBI R30,LOW(128)
000a35 40f0      	SBCI R31,HIGH(128)
000a36 2766      	CLR  R22
000a37 2777      	CLR  R23
000a38 53e0      	SUBI R30,LOW(-_cvt_G003*2)
000a39 4fff      	SBCI R31,HIGH(-_cvt_G003*2)
000a3a 4f6f      	SBCI R22,BYTE3(-_cvt_G003*2)
                +
000a3b bf6b     +OUT RAMPZ , R22
000a3c 9116     +ELPM R17 , Z
                 	__GETBRPF 17
                 ; 0003 0131 #endif
                 ; 0003 0132 		if (IsDBCS1(c) && i >= ni - 1) {	/* DBC 1st byte? */
                 _0x60057:
000a3d e0e0      	LDI  R30,LOW(0)
000a3e 30e0      	CPI  R30,0
000a3f f041      	BREQ _0x60059
000a40 2fe3      	MOV  R30,R19
000a41 e0f0      	LDI  R31,0
000a42 9731      	SBIW R30,1
000a43 2fa5      	MOV  R26,R21
000a44 e0b0      	LDI  R27,0
000a45 17ae      	CP   R26,R30
000a46 07bf      	CPC  R27,R31
000a47 f40c      	BRGE _0x6005A
                 _0x60059:
000a48 c00a      	RJMP _0x60058
                 _0x6005A:
                 ; 0003 0133 			d = p[si++];					/* Get 2nd byte */
000a49 940e 1571 	CALL SUBOPT_0x3D
000a4b 910c      	LD   R16,X
                 ; 0003 0134 			sfn[i++] = c;
000a4c 940e 1579 	CALL SUBOPT_0x3E
000a4e 8310      	ST   Z,R17
                 ; 0003 0135 			sfn[i++] = d;
000a4f 940e 1579 	CALL SUBOPT_0x3E
000a51 8300      	ST   Z,R16
                 ; 0003 0136 		} else {						/* Single byte code */
000a52 c009      	RJMP _0x6005B
                 _0x60058:
                 ; 0003 0137 			if (IsLower(c)) c -= 0x20;	/* toupper */
000a53 3611      	CPI  R17,97
000a54 f010      	BRLO _0x6005D
000a55 371b      	CPI  R17,123
000a56 f008      	BRLO _0x6005E
                 _0x6005D:
000a57 c001      	RJMP _0x6005C
                 _0x6005E:
000a58 5210      	SUBI R17,LOW(32)
                 ; 0003 0138 			sfn[i++] = c;
                 _0x6005C:
000a59 940e 1579 	CALL SUBOPT_0x3E
000a5b 8310      	ST   Z,R17
                 ; 0003 0139 		}
                 _0x6005B:
                 ; 0003 013A 	}
                 _0x6004B:
000a5c cfbf      	RJMP _0x6004C
                 _0x6004D:
                 ; 0003 013B 	*path = &p[si];						/* Rerurn pointer to the next segment */
000a5d 2fe2      	MOV  R30,R18
000a5e 81ae      	LDD  R26,Y+6
000a5f 81bf      	LDD  R27,Y+6+1
000a60 e0f0      	LDI  R31,0
000a61 0fea      	ADD  R30,R26
000a62 1ffb      	ADC  R31,R27
000a63 85aa      	LDD  R26,Y+10
000a64 85bb      	LDD  R27,Y+10+1
000a65 93ed      	ST   X+,R30
000a66 93fc      	ST   X,R31
                 ; 0003 013C 
                 ; 0003 013D 	sfn[11] = (c <= ' ') ? 1 : 0;		/* Set last segment flag if end of path */
000a67 3211      	CPI  R17,33
000a68 f410      	BRSH _0x6005F
000a69 e0e1      	LDI  R30,LOW(1)
000a6a c001      	RJMP _0x60060
                 _0x6005F:
000a6b e0e0      	LDI  R30,LOW(0)
                 _0x60060:
                +
000a6c 85a8     +LDD R26 , Y + 8
000a6d 85b9     +LDD R27 , Y + 8 + 1
000a6e 961b     +ADIW R26 , 11
000a6f 93ec     +ST X , R30
                 	__PUTB1SNS 8,11
                 ; 0003 013E 
                 ; 0003 013F 	return FR_OK;
000a70 e0e0      	LDI  R30,LOW(0)
000a71 940e 1870 	CALL __LOADLOCR6
                 _0x20C0011:
000a73 962e      	ADIW R28,14
000a74 9508      	RET
                 ; 0003 0140 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get file information from directory entry                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_DIR
                 ;static
                 ;void get_fileinfo (		/* No return code */
                 ; 0003 014B 	DIR *dj,			/* Pointer to the directory object */
                 ; 0003 014C 	FILINFO *fno	 	/* Pointer to store the file information */
                 ; 0003 014D )
                 ; 0003 014E {
                 _get_fileinfo_G003:
                 ; .FSTART _get_fileinfo_G003
                 ; 0003 014F 	BYTE i, c, *dir;
                 ; 0003 0150 	char *p;
                 ; 0003 0151 
                 ; 0003 0152 
                 ; 0003 0153 	p = fno->fname;
000a75 940e 14cf 	CALL SUBOPT_0x23
                 ;	*dj -> Y+8
                 ;	*fno -> Y+6
                 ;	i -> R17
                 ;	c -> R16
                 ;	*dir -> R18,R19
                 ;	*p -> R20,R21
000a77 81ee      	LDD  R30,Y+6
000a78 81ff      	LDD  R31,Y+6+1
000a79 9639      	ADIW R30,9
000a7a 01af      	MOVW R20,R30
                 ; 0003 0154 	if (dj->sect) {
000a7b 940e 1547 	CALL SUBOPT_0x37
000a7d f409      	BRNE PC+2
000a7e c050      	RJMP _0x60062
                 ; 0003 0155 		dir = FatFs->buf;
000a7f 940e 1554 	CALL SUBOPT_0x39
000a81 912d      	LD   R18,X+
000a82 913c      	LD   R19,X
                 ; 0003 0156 		for (i = 0; i < 8; i++) {	/* Copy file name body */
000a83 e010      	LDI  R17,LOW(0)
                 _0x60064:
000a84 3018      	CPI  R17,8
000a85 f480      	BRSH _0x60065
                 ; 0003 0157 			c = dir[i];
000a86 940e 1581 	CALL SUBOPT_0x3F
                 ; 0003 0158 			if (c == ' ') break;
000a88 f069      	BREQ _0x60065
                 ; 0003 0159 			if (c == 0x05) c = 0xE5;
000a89 3005      	CPI  R16,5
000a8a f409      	BRNE _0x60067
000a8b ee05      	LDI  R16,LOW(229)
                 ; 0003 015A 			*p++ = c;
                 _0x60067:
000a8c 935f      	PUSH R21
000a8d 934f      	PUSH R20
                +
000a8e 5f4f     +SUBI R20 , LOW ( - 1 )
000a8f 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000a90 2fe0      	MOV  R30,R16
000a91 91af      	POP  R26
000a92 91bf      	POP  R27
000a93 93ec      	ST   X,R30
                 ; 0003 015B 		}
000a94 5f1f      	SUBI R17,-1
000a95 cfee      	RJMP _0x60064
                 _0x60065:
                 ; 0003 015C 		if (dir[8] != ' ') {		/* Copy file name extension */
000a96 01f9      	MOVW R30,R18
000a97 85a0      	LDD  R26,Z+8
000a98 32a0      	CPI  R26,LOW(0x20)
000a99 f0a9      	BREQ _0x60068
                 ; 0003 015D 			*p++ = '.';
000a9a 01da      	MOVW R26,R20
                +
000a9b 5f4f     +SUBI R20 , LOW ( - 1 )
000a9c 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000a9d e2ee      	LDI  R30,LOW(46)
000a9e 93ec      	ST   X,R30
                 ; 0003 015E 			for (i = 8; i < 11; i++) {
000a9f e018      	LDI  R17,LOW(8)
                 _0x6006A:
000aa0 301b      	CPI  R17,11
000aa1 f468      	BRSH _0x6006B
                 ; 0003 015F 				c = dir[i];
000aa2 940e 1581 	CALL SUBOPT_0x3F
                 ; 0003 0160 				if (c == ' ') break;
000aa4 f051      	BREQ _0x6006B
                 ; 0003 0161 				*p++ = c;
000aa5 935f      	PUSH R21
000aa6 934f      	PUSH R20
                +
000aa7 5f4f     +SUBI R20 , LOW ( - 1 )
000aa8 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000aa9 2fe0      	MOV  R30,R16
000aaa 91af      	POP  R26
000aab 91bf      	POP  R27
000aac 93ec      	ST   X,R30
                 ; 0003 0162 			}
000aad 5f1f      	SUBI R17,-1
000aae cff1      	RJMP _0x6006A
                 _0x6006B:
                 ; 0003 0163 		}
                 ; 0003 0164 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
                 _0x60068:
000aaf 01f9      	MOVW R30,R18
000ab0 85e3      	LDD  R30,Z+11
                +
000ab1 81ae     +LDD R26 , Y + 6
000ab2 81bf     +LDD R27 , Y + 6 + 1
000ab3 9618     +ADIW R26 , 8
000ab4 93ec     +ST X , R30
                 	__PUTB1SNS 6,8
                 ; 0003 0165 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
000ab5 01d9      	MOVW R26,R18
000ab6 965c      	ADIW R26,28
000ab7 940e 17dc 	CALL __GETD1P
000ab9 81ae      	LDD  R26,Y+6
000aba 81bf      	LDD  R27,Y+6+1
000abb 940e 17e7 	CALL __PUTDP1
                 ; 0003 0166 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
000abd 01d9      	MOVW R26,R18
000abe 9658      	ADIW R26,24
000abf 940e 17d8 	CALL __GETW1P
                +
000ac1 81ae     +LDD R26 , Y + 6
000ac2 81bf     +LDD R27 , Y + 6 + 1
000ac3 9614     +ADIW R26 , 4
000ac4 93ed     +ST X + , R30
000ac5 93fc     +ST X , R31
                 	__PUTW1SNS 6,4
                 ; 0003 0167 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
000ac6 01d9      	MOVW R26,R18
000ac7 9656      	ADIW R26,22
000ac8 940e 17d8 	CALL __GETW1P
                +
000aca 81ae     +LDD R26 , Y + 6
000acb 81bf     +LDD R27 , Y + 6 + 1
000acc 9616     +ADIW R26 , 6
000acd 93ed     +ST X + , R30
000ace 93fc     +ST X , R31
                 	__PUTW1SNS 6,6
                 ; 0003 0168 	}
                 ; 0003 0169 	*p = 0;
                 _0x60062:
000acf 01da      	MOVW R26,R20
000ad0 e0e0      	LDI  R30,LOW(0)
000ad1 93ec      	ST   X,R30
                 ; 0003 016A }
                 _0x20C0010:
000ad2 940e 1870 	CALL __LOADLOCR6
                 _0x20C000F:
000ad4 962a      	ADIW R28,10
000ad5 9508      	RET
                 ; .FEND
                 ;
                 ;
                 ;#endif /* _USE_DIR */
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Follow a file path                                                    */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
                 ; 0003 0177 	DIR *dj,			/* Directory object to return last directory and found object */
                 ; 0003 0178 	const char *path	/* Full-path string to find a file or directory */
                 ; 0003 0179 )
                 ; 0003 017A {
                 _follow_path_G003:
                 ; .FSTART _follow_path_G003
                 ; 0003 017B 	FRESULT res;
                 ; 0003 017C 	BYTE *dir;
                 ; 0003 017D 
                 ; 0003 017E 
                 ; 0003 017F 	while (*path == ' ') path++;		/* Skip leading spaces */
000ad6 940e 14c1 	CALL SUBOPT_0x20
                 ;	*dj -> Y+6
                 ;	*path -> Y+4
                 ;	res -> R17
                 ;	*dir -> R18,R19
                 _0x6006D:
000ad8 81ac      	LDD  R26,Y+4
000ad9 81bd      	LDD  R27,Y+4+1
000ada 91ac      	LD   R26,X
000adb 32a0      	CPI  R26,LOW(0x20)
000adc f431      	BRNE _0x6006F
000add 81ec      	LDD  R30,Y+4
000ade 81fd      	LDD  R31,Y+4+1
000adf 9631      	ADIW R30,1
000ae0 83ec      	STD  Y+4,R30
000ae1 83fd      	STD  Y+4+1,R31
000ae2 cff5      	RJMP _0x6006D
                 _0x6006F:
                 ; 0003 0180 if (*path == '/') path++;
000ae3 81ac      	LDD  R26,Y+4
000ae4 81bd      	LDD  R27,Y+4+1
000ae5 91ac      	LD   R26,X
000ae6 32af      	CPI  R26,LOW(0x2F)
000ae7 f429      	BRNE _0x60070
000ae8 81ec      	LDD  R30,Y+4
000ae9 81fd      	LDD  R31,Y+4+1
000aea 9631      	ADIW R30,1
000aeb 83ec      	STD  Y+4,R30
000aec 83fd      	STD  Y+4+1,R31
                 ; 0003 0181 	dj->sclust = 0;						/* Set start directory (always root dir) */
                 _0x60070:
000aed 81ae      	LDD  R26,Y+6
000aee 81bf      	LDD  R27,Y+6+1
000aef 9614      	ADIW R26,4
000af0 940e 1588 	CALL SUBOPT_0x40
                 ; 0003 0182 
                 ; 0003 0183 	if ((BYTE)*path <= ' ') {			/* Null path means the root directory */
000af2 81ac      	LDD  R26,Y+4
000af3 81bd      	LDD  R27,Y+4+1
000af4 91ac      	LD   R26,X
000af5 32a1      	CPI  R26,LOW(0x21)
000af6 f458      	BRSH _0x60071
                 ; 0003 0184 		res = dir_rewind(dj);
000af7 81ae      	LDD  R26,Y+6
000af8 81bf      	LDD  R27,Y+6+1
000af9 ddb4      	RCALL _dir_rewind_G003
000afa 2f1e      	MOV  R17,R30
                 ; 0003 0185 		FatFs->buf[0] = 0;
000afb 940e 14d4 	CALL SUBOPT_0x24
000afd 81a6      	LDD  R26,Z+6
000afe 81b7      	LDD  R27,Z+7
000aff e0e0      	LDI  R30,LOW(0)
000b00 93ec      	ST   X,R30
                 ; 0003 0186 
                 ; 0003 0187 	} else {							/* Follow path */
000b01 c03f      	RJMP _0x60072
                 _0x60071:
                 ; 0003 0188 		for (;;) {
                 _0x60074:
                 ; 0003 0189 			res = create_name(dj, &path);	/* Get a segment */
000b02 81ee      	LDD  R30,Y+6
000b03 81ff      	LDD  R31,Y+6+1
000b04 93fa      	ST   -Y,R31
000b05 93ea      	ST   -Y,R30
000b06 01de      	MOVW R26,R28
000b07 9616      	ADIW R26,6
000b08 def4      	RCALL _create_name_G003
000b09 2f1e      	MOV  R17,R30
                 ; 0003 018A 			if (res != FR_OK) break;
000b0a 3010      	CPI  R17,0
000b0b f5a9      	BRNE _0x60075
                 ; 0003 018B 			res = dir_find(dj);				/* Find it */
000b0c 81ae      	LDD  R26,Y+6
000b0d 81bf      	LDD  R27,Y+6+1
000b0e de69      	RCALL _dir_find_G003
000b0f 2f1e      	MOV  R17,R30
                 ; 0003 018C 			if (res != FR_OK) {				/* Could not find the object */
000b10 3010      	CPI  R17,0
000b11 f041      	BREQ _0x60077
                 ; 0003 018D 				if (res == FR_NO_FILE && !*(dj->fn+11))
000b12 3013      	CPI  R17,3
000b13 f419      	BRNE _0x60079
000b14 940e 158c 	CALL SUBOPT_0x41
000b16 f009      	BREQ _0x6007A
                 _0x60079:
000b17 c001      	RJMP _0x60078
                 _0x6007A:
                 ; 0003 018E 					res = FR_NO_PATH;
000b18 e014      	LDI  R17,LOW(4)
                 ; 0003 018F 				break;
                 _0x60078:
000b19 c027      	RJMP _0x60075
                 ; 0003 0190 			}
                 ; 0003 0191 			if (*(dj->fn+11)) break;		/* Last segment match. Function completed. */
                 _0x60077:
000b1a 940e 158c 	CALL SUBOPT_0x41
000b1c f521      	BRNE _0x60075
                 ; 0003 0192 			dir = FatFs->buf;				/* There is next segment. Follow the sub directory */
000b1d 940e 1554 	CALL SUBOPT_0x39
000b1f 912d      	LD   R18,X+
000b20 913c      	LD   R19,X
                 ; 0003 0193 			if (!(dir[DIR_Attr] & AM_DIR)) { /* Cannot follow because it is a file */
000b21 01f9      	MOVW R30,R18
000b22 85e3      	LDD  R30,Z+11
000b23 71e0      	ANDI R30,LOW(0x10)
000b24 f411      	BRNE _0x6007C
                 ; 0003 0194 				res = FR_NO_PATH; break;
000b25 e014      	LDI  R17,LOW(4)
000b26 c01a      	RJMP _0x60075
                 ; 0003 0195 			}
                 ; 0003 0196 			dj->sclust =
                 _0x6007C:
                 ; 0003 0197 #if _FS_FAT32
                 ; 0003 0198 				((DWORD)LD_WORD(dir+DIR_FstClusHI) << 16) |
                 ; 0003 0199 #endif
                 ; 0003 019A 				LD_WORD(dir+DIR_FstClusLO);
000b27 01d9      	MOVW R26,R18
000b28 9654      	ADIW R26,20
000b29 940e 1594 	CALL SUBOPT_0x42
000b2b 940e 176d 	CALL __LSLD16
000b2d 937f      	PUSH R23
000b2e 936f      	PUSH R22
000b2f 93ff      	PUSH R31
000b30 93ef      	PUSH R30
000b31 01d9      	MOVW R26,R18
000b32 965a      	ADIW R26,26
000b33 940e 17d8 	CALL __GETW1P
000b35 91af      	POP  R26
000b36 91bf      	POP  R27
000b37 918f      	POP  R24
000b38 919f      	POP  R25
000b39 940e 1599 	CALL SUBOPT_0x43
                +
000b3b 81ae     +LDD R26 , Y + 6
000b3c 81bf     +LDD R27 , Y + 6 + 1
000b3d 9614     +ADIW R26 , 4
000b3e 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 6,4
                 ; 0003 019B 		}
000b40 cfc1      	RJMP _0x60074
                 _0x60075:
                 ; 0003 019C 	}
                 _0x60072:
                 ; 0003 019D 
                 ; 0003 019E 	return res;
000b41 2fe1      	MOV  R30,R17
000b42 940e 1872 	CALL __LOADLOCR4
                 _0x20C000E:
000b44 9628      	ADIW R28,8
000b45 9508      	RET
                 ; 0003 019F }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Check a sector if it is an FAT boot record                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;BYTE check_fs (	/* 0:The FAT boot record, 1:Valid boot record but not an FAT, 2:Not a boot record, 3:Error */
                 ; 0003 01AA 	BYTE *buf,	/* Working buffer */
                 ; 0003 01AB 	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
                 ; 0003 01AC )
                 ; 0003 01AD {
                 _check_fs_G003:
                 ; .FSTART _check_fs_G003
                 ; 0003 01AE     if (disk_readp(buf, sect, 510, 2))		/* Read the boot sector */
000b46 940e 1812 	CALL __PUTPARD2
                 ;	*buf -> Y+4
                 ;	sect -> Y+0
000b48 940e 159e 	CALL SUBOPT_0x44
000b4a efee      	LDI  R30,LOW(510)
000b4b e0f1      	LDI  R31,HIGH(510)
000b4c 940e 151a 	CALL SUBOPT_0x2E
000b4e f011      	BREQ _0x6007D
                 ; 0003 01AF 		return 3;
000b4f e0e3      	LDI  R30,LOW(3)
000b50 c029      	RJMP _0x20C000D
                 ; 0003 01B0 	if (LD_WORD(buf) != 0xAA55)				/* Check record signature */
                 _0x6007D:
000b51 940e 15a6 	CALL SUBOPT_0x45
000b53 35e5      	CPI  R30,LOW(0xAA55)
000b54 eaaa      	LDI  R26,HIGH(0xAA55)
000b55 07fa      	CPC  R31,R26
000b56 f011      	BREQ _0x6007E
                 ; 0003 01B1 		return 2;
000b57 e0e2      	LDI  R30,LOW(2)
000b58 c021      	RJMP _0x20C000D
                 ; 0003 01B2 
                 ; 0003 01B3 	if (!disk_readp(buf, sect, BS_FilSysType, 2) && LD_WORD(buf) == 0x4146)	/* Check FAT12/16 */
                 _0x6007E:
000b59 940e 159e 	CALL SUBOPT_0x44
000b5b e3e6      	LDI  R30,LOW(54)
000b5c e0f0      	LDI  R31,HIGH(54)
000b5d 940e 151a 	CALL SUBOPT_0x2E
000b5f f431      	BRNE _0x60080
000b60 940e 15a6 	CALL SUBOPT_0x45
000b62 34e6      	CPI  R30,LOW(0x4146)
000b63 e4a1      	LDI  R26,HIGH(0x4146)
000b64 07fa      	CPC  R31,R26
000b65 f009      	BREQ _0x60081
                 _0x60080:
000b66 c002      	RJMP _0x6007F
                 _0x60081:
                 ; 0003 01B4 		return 0;
000b67 e0e0      	LDI  R30,LOW(0)
000b68 c011      	RJMP _0x20C000D
                 ; 0003 01B5 #if _FS_FAT32
                 ; 0003 01B6 	if (!disk_readp(buf, sect, BS_FilSysType32, 2) && LD_WORD(buf) == 0x4146)	/* Check FAT32 */
                 _0x6007F:
000b69 940e 159e 	CALL SUBOPT_0x44
000b6b e5e2      	LDI  R30,LOW(82)
000b6c e0f0      	LDI  R31,HIGH(82)
000b6d 940e 151a 	CALL SUBOPT_0x2E
000b6f f431      	BRNE _0x60083
000b70 940e 15a6 	CALL SUBOPT_0x45
000b72 34e6      	CPI  R30,LOW(0x4146)
000b73 e4a1      	LDI  R26,HIGH(0x4146)
000b74 07fa      	CPC  R31,R26
000b75 f009      	BREQ _0x60084
                 _0x60083:
000b76 c002      	RJMP _0x60082
                 _0x60084:
                 ; 0003 01B7 		return 0;
000b77 e0e0      	LDI  R30,LOW(0)
000b78 c001      	RJMP _0x20C000D
                 ; 0003 01B8 #endif
                 ; 0003 01B9 	return 1;
                 _0x60082:
000b79 e0e1      	LDI  R30,LOW(1)
                 _0x20C000D:
000b7a 9626      	ADIW R28,6
000b7b 9508      	RET
                 ; 0003 01BA }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Public Functions
                 ;
                 ;--------------------------------------------------------------------------*/
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Mount/Unmount a Locical Drive                                         */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT pf_mount (
                 ; 0003 01CC 	FATFS *fs		/* Pointer to new file system object (NULL: Unmount) */
                 ; 0003 01CD )
                 ; 0003 01CE {
                 _pf_mount:
                 ; .FSTART _pf_mount
                 ; 0003 01CF 	BYTE fmt, buf[36];
                 ; 0003 01D0 	DWORD bsect, fsize, tsect, mclst;
                 ; 0003 01D1 
                 ; 0003 01D2 
                 ; 0003 01D3 	FatFs = 0;
000b7c 93ba      	ST   -Y,R27
000b7d 93aa      	ST   -Y,R26
000b7e 97e4      	SBIW R28,52
000b7f 931a      	ST   -Y,R17
                 ;	*fs -> Y+53
                 ;	fmt -> R17
                 ;	buf -> Y+17
                 ;	bsect -> Y+13
                 ;	fsize -> Y+9
                 ;	tsect -> Y+5
                 ;	mclst -> Y+1
000b80 e0e0      	LDI  R30,LOW(0)
000b81 93e0 0aea 	STS  _FatFs_G003,R30
000b83 93e0 0aeb 	STS  _FatFs_G003+1,R30
                 ; 0003 01D4 	if (!fs) return FR_OK;				/* Unregister fs object */
000b85 a9ed      	LDD  R30,Y+53
000b86 a9fe      	LDD  R31,Y+53+1
000b87 9730      	SBIW R30,0
000b88 f409      	BRNE _0x60085
000b89 c111      	RJMP _0x20C000C
                 ; 0003 01D5 
                 ; 0003 01D6 
                 ; 0003 01D7 	if (disk_initialize() & STA_NOINIT)	/* Check if the drive is ready or not */
                 _0x60085:
000b8a da78      	RCALL _disk_initialize
000b8b 70e1      	ANDI R30,LOW(0x1)
000b8c f011      	BREQ _0x60086
                 ; 0003 01D8 		return FR_NOT_READY;
000b8d e0e2      	LDI  R30,LOW(2)
000b8e c10d      	RJMP _0x20C000B
                 ; 0003 01D9 
                 ; 0003 01DA 	/* Search FAT partition on the drive */
                 ; 0003 01DB 	bsect = 0;
                 _0x60086:
000b8f e0e0      	LDI  R30,LOW(0)
                +
000b90 87ed     +STD Y + 13 , R30
000b91 87ee     +STD Y + 13 + 1 , R30
000b92 87ef     +STD Y + 13 + 2 , R30
000b93 8be8     +STD Y + 13 + 3 , R30
                 	__CLRD1S 13
                 ; 0003 01DC 	fmt = check_fs(buf, bsect);			/* Check sector 0 as an SFD format */
000b94 940e 15ab 	CALL SUBOPT_0x46
000b96 940e 15b0 	CALL SUBOPT_0x47
                 ; 0003 01DD 	if (fmt == 1) {						/* Not an FAT boot record, it may be FDISK format */
000b98 3011      	CPI  R17,1
000b99 f4e9      	BRNE _0x60087
                 ; 0003 01DE 		/* Check a partition listed in top of the partition table */
                 ; 0003 01DF 		if (disk_readp(buf, bsect, MBR_Table, 16)) {	/* 1st partition entry */
000b9a 940e 15ab 	CALL SUBOPT_0x46
000b9c 940e 15b8 	CALL SUBOPT_0x48
000b9e ebee      	LDI  R30,LOW(446)
000b9f e0f1      	LDI  R31,HIGH(446)
000ba0 93fa      	ST   -Y,R31
000ba1 93ea      	ST   -Y,R30
000ba2 e1a0      	LDI  R26,LOW(16)
000ba3 940e 151d 	CALL SUBOPT_0x2F
000ba5 f011      	BREQ _0x60088
                 ; 0003 01E0 			fmt = 3;
000ba6 e013      	LDI  R17,LOW(3)
                 ; 0003 01E1 		} else {
000ba7 c00f      	RJMP _0x60089
                 _0x60088:
                 ; 0003 01E2 			if (buf[4]) {					/* Is the partition existing? */
000ba8 89ed      	LDD  R30,Y+21
000ba9 30e0      	CPI  R30,0
000baa f061      	BREQ _0x6008A
                 ; 0003 01E3 				bsect = LD_DWORD(&buf[8]);	/* Partition offset in LBA */
                +
000bab 8de9     +LDD R30 , Y + 25
000bac 8dfa     +LDD R31 , Y + 25 + 1
000bad 8d6b     +LDD R22 , Y + 25 + 2
000bae 8d7c     +LDD R23 , Y + 25 + 3
                 	__GETD1S 25
                +
000baf 87ed     +STD Y + 13 , R30
000bb0 87fe     +STD Y + 13 + 1 , R31
000bb1 876f     +STD Y + 13 + 2 , R22
000bb2 8b78     +STD Y + 13 + 3 , R23
                 	__PUTD1S 13
                 ; 0003 01E4 				fmt = check_fs(buf, bsect);	/* Check the partition */
000bb3 940e 15ab 	CALL SUBOPT_0x46
000bb5 940e 15b0 	CALL SUBOPT_0x47
                 ; 0003 01E5 			}
                 ; 0003 01E6 		}
                 _0x6008A:
                 _0x60089:
                 ; 0003 01E7 	}
                 ; 0003 01E8 	if (fmt == 3) return FR_DISK_ERR;
                 _0x60087:
000bb7 3013      	CPI  R17,3
000bb8 f411      	BRNE _0x6008B
000bb9 e0e1      	LDI  R30,LOW(1)
000bba c0e1      	RJMP _0x20C000B
                 ; 0003 01E9 	if (fmt) return FR_NO_FILESYSTEM;	/* No valid FAT patition is found */
                 _0x6008B:
000bbb 3010      	CPI  R17,0
000bbc f011      	BREQ _0x6008C
000bbd e0e7      	LDI  R30,LOW(7)
000bbe c0dd      	RJMP _0x20C000B
                 ; 0003 01EA 
                 ; 0003 01EB 	/* Initialize the file system object */
                 ; 0003 01EC 	if (disk_readp(buf, bsect, 13, sizeof(buf))) return FR_DISK_ERR;
                 _0x6008C:
000bbf 940e 15ab 	CALL SUBOPT_0x46
000bc1 940e 15b8 	CALL SUBOPT_0x48
000bc3 e0ed      	LDI  R30,LOW(13)
000bc4 e0f0      	LDI  R31,HIGH(13)
000bc5 93fa      	ST   -Y,R31
000bc6 93ea      	ST   -Y,R30
000bc7 e2a4      	LDI  R26,LOW(36)
000bc8 940e 151d 	CALL SUBOPT_0x2F
000bca f011      	BREQ _0x6008D
000bcb e0e1      	LDI  R30,LOW(1)
000bcc c0cf      	RJMP _0x20C000B
                 ; 0003 01ED 
                 ; 0003 01EE 	fsize = LD_WORD(buf+BPB_FATSz16-13);				/* Number of sectors per FAT */
                 _0x6008D:
000bcd 01fe      	MOVW R30,R28
000bce 96b7      	ADIW R30,39
000bcf 973d      	SBIW R30,13
000bd0 01df      	MOVW R26,R30
000bd1 940e 1594 	CALL SUBOPT_0x42
000bd3 940e 15bf 	CALL SUBOPT_0x49
                 ; 0003 01EF 	if (!fsize) fsize = LD_DWORD(buf+BPB_FATSz32-13);
000bd5 940e 15c4 	CALL SUBOPT_0x4A
000bd7 940e 1851 	CALL __CPD10
000bd9 f441      	BRNE _0x6008E
000bda 01fe      	MOVW R30,R28
000bdb 96f5      	ADIW R30,53
000bdc 973d      	SBIW R30,13
000bdd 01df      	MOVW R26,R30
000bde 940e 17dc 	CALL __GETD1P
000be0 940e 15bf 	CALL SUBOPT_0x49
                 ; 0003 01F0 
                 ; 0003 01F1 	fsize *= buf[BPB_NumFATs-13];						/* Number of sectors in FAT area */
                 _0x6008E:
000be2 89ec      	LDD  R30,Y+20
000be3 e0f0      	LDI  R31,0
000be4 940e 14ca 	CALL SUBOPT_0x22
000be6 940e 1772 	CALL __CWD1
000be8 940e 177c 	CALL __MULD12U
000bea 940e 15bf 	CALL SUBOPT_0x49
                 ; 0003 01F2 	fs->fatbase = bsect + LD_WORD(buf+BPB_RsvdSecCnt-13); /* FAT start sector (lba) */
000bec 940e 15c9 	CALL SUBOPT_0x4B
                +
000bee 85ad     +LDD R26 , Y + 13
000bef 85be     +LDD R27 , Y + 13 + 1
000bf0 858f     +LDD R24 , Y + 13 + 2
000bf1 8998     +LDD R25 , Y + 13 + 3
                 	__GETD2S 13
000bf2 940e 1485 	CALL SUBOPT_0x16
                +
000bf4 a9ad     +LDD R26 , Y + 53
000bf5 a9be     +LDD R27 , Y + 53 + 1
000bf6 961c     +ADIW R26 , 12
000bf7 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 53,12
                 ; 0003 01F3 	fs->csize = buf[BPB_SecPerClus-13];					/* Number of sectors per cluster */
000bf9 89e9      	LDD  R30,Y+17
                +
000bfa a9ad     +LDD R26 , Y + 53
000bfb a9be     +LDD R27 , Y + 53 + 1
000bfc 9611     +ADIW R26 , 1
000bfd 93ec     +ST X , R30
                 	__PUTB1SNS 53,1
                 ; 0003 01F4 	fs->n_rootdir = LD_WORD(buf+BPB_RootEntCnt-13);		/* Nmuber of root directory entries */
000bfe 01fe      	MOVW R30,R28
000bff 96b2      	ADIW R30,34
000c00 973d      	SBIW R30,13
000c01 01df      	MOVW R26,R30
000c02 940e 17d8 	CALL __GETW1P
                +
000c04 a9ad     +LDD R26 , Y + 53
000c05 a9be     +LDD R27 , Y + 53 + 1
000c06 9614     +ADIW R26 , 4
000c07 93ed     +ST X + , R30
000c08 93fc     +ST X , R31
                 	__PUTW1SNS 53,4
                 ; 0003 01F5 	tsect = LD_WORD(buf+BPB_TotSec16-13);				/* Number of sectors on the file system */
000c09 01fe      	MOVW R30,R28
000c0a 96b4      	ADIW R30,36
000c0b 973d      	SBIW R30,13
000c0c 01df      	MOVW R26,R30
000c0d 940e 1594 	CALL SUBOPT_0x42
                +
000c0f 83ed     +STD Y + 5 , R30
000c10 83fe     +STD Y + 5 + 1 , R31
000c11 836f     +STD Y + 5 + 2 , R22
000c12 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
                 ; 0003 01F6 	if (!tsect) tsect = LD_DWORD(buf+BPB_TotSec32-13);
000c13 940e 1851 	CALL __CPD10
000c15 f451      	BRNE _0x6008F
000c16 01fe      	MOVW R30,R28
000c17 96f1      	ADIW R30,49
000c18 973d      	SBIW R30,13
000c19 01df      	MOVW R26,R30
000c1a 940e 17dc 	CALL __GETD1P
                +
000c1c 83ed     +STD Y + 5 , R30
000c1d 83fe     +STD Y + 5 + 1 , R31
000c1e 836f     +STD Y + 5 + 2 , R22
000c1f 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
                 ; 0003 01F7 	mclst = (tsect						/* Last cluster# + 1 */
                 _0x6008F:
                 ; 0003 01F8 		- LD_WORD(buf+BPB_RsvdSecCnt-13) - fsize - fs->n_rootdir / 16
                 ; 0003 01F9 		) / fs->csize + 2;
000c20 940e 15c9 	CALL SUBOPT_0x4B
                +
000c22 81ad     +LDD R26 , Y + 5
000c23 81be     +LDD R27 , Y + 5 + 1
000c24 818f     +LDD R24 , Y + 5 + 2
000c25 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
000c26 2766      	CLR  R22
000c27 2777      	CLR  R23
000c28 940e 1817 	CALL __SWAPD12
000c2a 940e 172d 	CALL __SUBD12
000c2c 940e 14ca 	CALL SUBOPT_0x22
000c2e 940e 172d 	CALL __SUBD12
000c30 937f      	PUSH R23
000c31 936f      	PUSH R22
000c32 93ff      	PUSH R31
000c33 93ef      	PUSH R30
000c34 940e 15d0 	CALL SUBOPT_0x4C
000c36 91af      	POP  R26
000c37 91bf      	POP  R27
000c38 918f      	POP  R24
000c39 919f      	POP  R25
000c3a 2766      	CLR  R22
000c3b 2777      	CLR  R23
000c3c 940e 1732 	CALL __SUBD21
000c3e a9ed      	LDD  R30,Y+53
000c3f a9fe      	LDD  R31,Y+53+1
000c40 940e 15d8 	CALL SUBOPT_0x4D
000c42 940e 17af 	CALL __DIVD21U
                +
000c44 5fee     +SUBI R30 , LOW ( - 2 )
000c45 4fff     +SBCI R31 , HIGH ( - 2 )
000c46 4f6f     +SBCI R22 , BYTE3 ( - 2 )
000c47 4f7f     +SBCI R23 , BYTE4 ( - 2 )
                 	__ADDD1N 2
                +
000c48 83e9     +STD Y + 1 , R30
000c49 83fa     +STD Y + 1 + 1 , R31
000c4a 836b     +STD Y + 1 + 2 , R22
000c4b 837c     +STD Y + 1 + 3 , R23
                 	__PUTD1S 1
                 ; 0003 01FA 	fs->max_clust = (CLUST)mclst;
                +
000c4c a9ad     +LDD R26 , Y + 53
000c4d a9be     +LDD R27 , Y + 53 + 1
000c4e 9618     +ADIW R26 , 8
000c4f 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 53,8
                 ; 0003 01FB 
                 ; 0003 01FC 	fmt = FS_FAT12;							/* Determine the FAT sub type */
000c51 e011      	LDI  R17,LOW(1)
                 ; 0003 01FD 	if (mclst >= 0xFF7) fmt = FS_FAT16;		/* Number of clusters >= 0xFF5 */
                +
000c52 81a9     +LDD R26 , Y + 1
000c53 81ba     +LDD R27 , Y + 1 + 1
000c54 818b     +LDD R24 , Y + 1 + 2
000c55 819c     +LDD R25 , Y + 1 + 3
                 	__GETD2S 1
                +
000c56 3fa7     +CPI R26 , LOW ( 0xFF7 )
000c57 e0ef     +LDI R30 , HIGH ( 0xFF7 )
000c58 07be     +CPC R27 , R30
000c59 e0e0     +LDI R30 , BYTE3 ( 0xFF7 )
000c5a 078e     +CPC R24 , R30
000c5b e0e0     +LDI R30 , BYTE4 ( 0xFF7 )
000c5c 079e     +CPC R25 , R30
                 	__CPD2N 0xFF7
000c5d f008      	BRLO _0x60090
000c5e e012      	LDI  R17,LOW(2)
                 ; 0003 01FE 	if (mclst >= 0xFFF7)					/* Number of clusters >= 0xFFF5 */
                 _0x60090:
                +
000c5f 81a9     +LDD R26 , Y + 1
000c60 81ba     +LDD R27 , Y + 1 + 1
000c61 818b     +LDD R24 , Y + 1 + 2
000c62 819c     +LDD R25 , Y + 1 + 3
                 	__GETD2S 1
                +
000c63 3fa7     +CPI R26 , LOW ( 0xFFF7 )
000c64 efef     +LDI R30 , HIGH ( 0xFFF7 )
000c65 07be     +CPC R27 , R30
000c66 e0e0     +LDI R30 , BYTE3 ( 0xFFF7 )
000c67 078e     +CPC R24 , R30
000c68 e0e0     +LDI R30 , BYTE4 ( 0xFFF7 )
000c69 079e     +CPC R25 , R30
                 	__CPD2N 0xFFF7
000c6a f008      	BRLO _0x60091
                 ; 0003 01FF #if _FS_FAT32
                 ; 0003 0200 		fmt = FS_FAT32;
000c6b e013      	LDI  R17,LOW(3)
                 ; 0003 0201 #else
                 ; 0003 0202 		return FR_NO_FILESYSTEM;
                 ; 0003 0203 #endif
                 ; 0003 0204 
                 ; 0003 0205 	fs->fs_type = fmt;		/* FAT sub-type */
                 _0x60091:
000c6c a9ad      	LDD  R26,Y+53
000c6d a9be      	LDD  R27,Y+53+1
000c6e 931c      	ST   X,R17
                 ; 0003 0206 #if _FS_FAT32
                 ; 0003 0207 	if (fmt == FS_FAT32)
000c6f 3013      	CPI  R17,3
000c70 f429      	BRNE _0x60092
                 ; 0003 0208 		fs->dirbase = LD_DWORD(buf+(BPB_RootClus-13));	/* Root directory start cluster */
                +
000c71 a9e8     +LDD R30 , Y + 48
000c72 a9f9     +LDD R31 , Y + 48 + 1
000c73 a96a     +LDD R22 , Y + 48 + 2
000c74 a97b     +LDD R23 , Y + 48 + 3
                 	__GETD1S 48
000c75 c002      	RJMP _0x60112
                 ; 0003 0209 	else
                 _0x60092:
                 ; 0003 020A #endif
                 ; 0003 020B 		fs->dirbase = fs->fatbase + fsize;				/* Root directory start sector (lba) */
000c76 940e 15dd 	CALL SUBOPT_0x4E
                 _0x60112:
                +
000c78 a9ad     +LDD R26 , Y + 53
000c79 a9be     +LDD R27 , Y + 53 + 1
000c7a 9650     +ADIW R26 , 16
000c7b 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 53,16
                 ; 0003 020C 	fs->database = fs->fatbase + fsize + fs->n_rootdir / 16;	/* Data start sector (lba) */
000c7d 940e 15dd 	CALL SUBOPT_0x4E
000c7f 937f      	PUSH R23
000c80 936f      	PUSH R22
000c81 93ff      	PUSH R31
000c82 93ef      	PUSH R30
000c83 940e 15d0 	CALL SUBOPT_0x4C
000c85 91af      	POP  R26
000c86 91bf      	POP  R27
000c87 918f      	POP  R24
000c88 919f      	POP  R25
000c89 940e 1485 	CALL SUBOPT_0x16
                +
000c8b a9ad     +LDD R26 , Y + 53
000c8c a9be     +LDD R27 , Y + 53 + 1
000c8d 9654     +ADIW R26 , 20
000c8e 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 53,20
                 ; 0003 020D 
                 ; 0003 020E 	fs->flag = 0;
000c90 a9ad      	LDD  R26,Y+53
000c91 a9be      	LDD  R27,Y+53+1
000c92 9612      	ADIW R26,2
000c93 e0e0      	LDI  R30,LOW(0)
000c94 93ec      	ST   X,R30
                 ; 0003 020F 	FatFs = fs;
000c95 a9ed      	LDD  R30,Y+53
000c96 a9fe      	LDD  R31,Y+53+1
000c97 93e0 0aea 	STS  _FatFs_G003,R30
000c99 93f0 0aeb 	STS  _FatFs_G003+1,R31
                 ; 0003 0210 
                 ; 0003 0211 	return FR_OK;
                 _0x20C000C:
000c9b e0e0      	LDI  R30,LOW(0)
                 _0x20C000B:
000c9c 8118      	LDD  R17,Y+0
000c9d 96e7      	ADIW R28,55
000c9e 9508      	RET
                 ; 0003 0212 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Open or Create a File                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT pf_open (
                 ; 0003 021C 	const char *path	/* Pointer to the file name */
                 ; 0003 021D )
                 ; 0003 021E {
                 _pf_open:
                 ; .FSTART _pf_open
                 ; 0003 021F 	FRESULT res;
                 ; 0003 0220 	DIR dj;
                 ; 0003 0221 	BYTE sp[12], dir[32];
                 ; 0003 0222 	FATFS *fs = FatFs;
                 ; 0003 0223 
                 ; 0003 0224 
                 ; 0003 0225 	if (!fs)						/* Check file system */
000c9f 93ba      	ST   -Y,R27
000ca0 93aa      	ST   -Y,R26
000ca1 97ec      	SBIW R28,60
000ca2 940e 1540 	CALL SUBOPT_0x36
                 ;	*path -> Y+64
                 ;	res -> R17
                 ;	dj -> Y+48
                 ;	sp -> Y+36
                 ;	dir -> Y+4
                 ;	*fs -> R18,R19
000ca4 2e02      	MOV  R0,R18
000ca5 2a03      	OR   R0,R19
000ca6 f411      	BRNE _0x60094
                 ; 0003 0226 		return FR_NOT_ENABLED;
000ca7 e0e6      	LDI  R30,LOW(6)
000ca8 c036      	RJMP _0x20C000A
                 ; 0003 0227 
                 ; 0003 0228 	fs->flag = 0;
                 _0x60094:
000ca9 01d9      	MOVW R26,R18
000caa 9612      	ADIW R26,2
000cab e0e0      	LDI  R30,LOW(0)
000cac 93ec      	ST   X,R30
                 ; 0003 0229 	fs->buf = dir;
000cad 940e 15e7 	CALL SUBOPT_0x4F
                 ; 0003 022A 	dj.fn = sp;
000caf abea      	STD  Y+50,R30
000cb0 abfb      	STD  Y+50+1,R31
                 ; 0003 022B 	res = follow_path(&dj, path);	/* Follow the file path */
000cb1 01fe      	MOVW R30,R28
000cb2 96f0      	ADIW R30,48
000cb3 93fa      	ST   -Y,R31
000cb4 93ea      	ST   -Y,R30
                +
000cb5 01de     +MOVW R26 , R28
000cb6 5bae     +SUBI R26 , LOW ( - 66 )
000cb7 4fbf     +SBCI R27 , HIGH ( - 66 )
000cb8 900d     +LD R0 , X +
000cb9 91bc     +LD R27 , X
000cba 2da0     +MOV R26 , R0
                 	__GETW2SX 66
000cbb de1a      	RCALL _follow_path_G003
000cbc 2f1e      	MOV  R17,R30
                 ; 0003 022C 	if (res != FR_OK) return res;	/* Follow failed */
000cbd 3010      	CPI  R17,0
000cbe f009      	BREQ _0x60095
000cbf c01f      	RJMP _0x20C000A
                 ; 0003 022D 	if (!dir[0] || (dir[DIR_Attr] & AM_DIR))	/* It is a directory */
                 _0x60095:
000cc0 81ec      	LDD  R30,Y+4
000cc1 30e0      	CPI  R30,0
000cc2 f019      	BREQ _0x60097
000cc3 85ef      	LDD  R30,Y+15
000cc4 71e0      	ANDI R30,LOW(0x10)
000cc5 f011      	BREQ _0x60096
                 _0x60097:
                 ; 0003 022E 		return FR_NO_FILE;
000cc6 e0e3      	LDI  R30,LOW(3)
000cc7 c017      	RJMP _0x20C000A
                 ; 0003 022F 
                 ; 0003 0230 	fs->org_clust =						/* File start cluster */
                 _0x60096:
                 ; 0003 0231 #if _FS_FAT32
                 ; 0003 0232 		((DWORD)LD_WORD(dir+DIR_FstClusHI) << 16) |
                 ; 0003 0233 #endif
                 ; 0003 0234 		LD_WORD(dir+DIR_FstClusLO);
000cc8 940e 15f0 	CALL SUBOPT_0x50
                +
000cca 01d9     +MOVW R26 , R18
000ccb 9690     +ADIW R26 , 32
000ccc 940e 17e7+CALL __PUTDP1
                 	__PUTD1RNS 18,32
                 ; 0003 0235 	fs->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
                +
000cce a1e8     +LDD R30 , Y + 32
000ccf a1f9     +LDD R31 , Y + 32 + 1
000cd0 a16a     +LDD R22 , Y + 32 + 2
000cd1 a17b     +LDD R23 , Y + 32 + 3
                 	__GETD1S 32
                +
000cd2 01d9     +MOVW R26 , R18
000cd3 965c     +ADIW R26 , 28
000cd4 940e 17e7+CALL __PUTDP1
                 	__PUTD1RNS 18,28
                 ; 0003 0236 	fs->fptr = 0;						/* File pointer */
000cd6 01d9      	MOVW R26,R18
000cd7 9658      	ADIW R26,24
000cd8 940e 1588 	CALL SUBOPT_0x40
                 ; 0003 0237 	fs->flag = FA_OPENED;
000cda 01d9      	MOVW R26,R18
000cdb 9612      	ADIW R26,2
000cdc e0e1      	LDI  R30,LOW(1)
000cdd 93ec      	ST   X,R30
                 ; 0003 0238 
                 ; 0003 0239 	return FR_OK;
000cde e0e0      	LDI  R30,LOW(0)
                 _0x20C000A:
000cdf 940e 1872 	CALL __LOADLOCR4
000ce1 96ef      	ADIW R28,63
000ce2 9623      	ADIW R28,3
000ce3 9508      	RET
                 ; 0003 023A }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read File                                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_READ
                 ;
                 ;FRESULT pf_read (
                 ; 0003 0245 	void* buff,		/* Pointer to the read buffer (NULL:Forward data to the stream)*/
                 ; 0003 0246 	WORD btr,		/* Number of bytes to read */
                 ; 0003 0247 	WORD* br		/* Pointer to number of bytes read */
                 ; 0003 0248 )
                 ; 0003 0249 {
                 _pf_read:
                 ; .FSTART _pf_read
                 ; 0003 024A 	DRESULT dr;
                 ; 0003 024B 	CLUST clst;
                 ; 0003 024C 	DWORD sect, remain;
                 ; 0003 024D 	BYTE *rbuff = buff;
                 ; 0003 024E 	WORD rcnt;
                 ; 0003 024F 	FATFS *fs = FatFs;
                 ; 0003 0250 
                 ; 0003 0251 
                 ; 0003 0252 	*br = 0;
000ce4 93ba      	ST   -Y,R27
000ce5 93aa      	ST   -Y,R26
000ce6 972e      	SBIW R28,14
000ce7 940e 1869 	CALL __SAVELOCR6
                 ;	*buff -> Y+24
                 ;	btr -> Y+22
                 ;	*br -> Y+20
                 ;	dr -> R17
                 ;	clst -> Y+16
                 ;	sect -> Y+12
                 ;	remain -> Y+8
                 ;	*rbuff -> R18,R19
                 ;	rcnt -> R20,R21
                 ;	*fs -> Y+6
                +
000ce9 8d28     +LDD R18 , Y + 24
000cea 8d39     +LDD R19 , Y + 24 + 1
                 	__GETWRS 18,19,24
000ceb 940e 14d4 	CALL SUBOPT_0x24
000ced 83ee      	STD  Y+6,R30
000cee 83ff      	STD  Y+6+1,R31
000cef 89ac      	LDD  R26,Y+20
000cf0 89bd      	LDD  R27,Y+20+1
000cf1 940e 1538 	CALL SUBOPT_0x34
                 ; 0003 0253 	if (!fs) return FR_NOT_ENABLED;		/* Check file system */
000cf3 81ee      	LDD  R30,Y+6
000cf4 81ff      	LDD  R31,Y+6+1
000cf5 9730      	SBIW R30,0
000cf6 f411      	BRNE _0x60099
000cf7 e0e6      	LDI  R30,LOW(6)
000cf8 c0d6      	RJMP _0x20C0009
                 ; 0003 0254 	if (!(fs->flag & FA_OPENED))		/* Check if opened */
                 _0x60099:
000cf9 81ee      	LDD  R30,Y+6
000cfa 81ff      	LDD  R31,Y+6+1
000cfb 81a2      	LDD  R26,Z+2
000cfc 70a1      	ANDI R26,LOW(0x1)
000cfd f411      	BRNE _0x6009A
                 ; 0003 0255 		return FR_NOT_OPENED;
000cfe e0e5      	LDI  R30,LOW(5)
000cff c0cf      	RJMP _0x20C0009
                 ; 0003 0256 
                 ; 0003 0257 	remain = fs->fsize - fs->fptr;
                 _0x6009A:
000d00 81ee      	LDD  R30,Y+6
000d01 81ff      	LDD  R31,Y+6+1
                +
000d02 8da4     +LDD R26 , Z + 28
000d03 8db5     +LDD R27 , Z + 28 + 1
000d04 8d86     +LDD R24 , Z + 28 + 2
000d05 8d97     +LDD R25 , Z + 28 + 3
                 	__GETD2Z 28
000d06 939f      	PUSH R25
000d07 938f      	PUSH R24
000d08 93bf      	PUSH R27
000d09 93af      	PUSH R26
000d0a 940e 15fb 	CALL SUBOPT_0x51
000d0c 91ef      	POP  R30
000d0d 91ff      	POP  R31
000d0e 916f      	POP  R22
000d0f 917f      	POP  R23
000d10 940e 172d 	CALL __SUBD12
                +
000d12 87e8     +STD Y + 8 , R30
000d13 87f9     +STD Y + 8 + 1 , R31
000d14 876a     +STD Y + 8 + 2 , R22
000d15 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
                 ; 0003 0258 	if (btr > remain) btr = (WORD)remain;			/* Truncate btr by remaining bytes */
000d16 940e 147b 	CALL SUBOPT_0x14
000d18 89ae      	LDD  R26,Y+22
000d19 89bf      	LDD  R27,Y+22+1
000d1a 2788      	CLR  R24
000d1b 2799      	CLR  R25
000d1c 940e 185f 	CALL __CPD12
000d1e f420      	BRSH _0x6009B
000d1f 85e8      	LDD  R30,Y+8
000d20 85f9      	LDD  R31,Y+8+1
000d21 8bee      	STD  Y+22,R30
000d22 8bff      	STD  Y+22+1,R31
                 ; 0003 0259 
                 ; 0003 025A 	while (btr)	{									/* Repeat until all data transferred */
                 _0x6009B:
                 _0x6009C:
000d23 89ee      	LDD  R30,Y+22
000d24 89ff      	LDD  R31,Y+22+1
000d25 9730      	SBIW R30,0
000d26 f409      	BRNE PC+2
000d27 c0a1      	RJMP _0x6009E
                 ; 0003 025B 		if ((fs->fptr % 512) == 0) {				/* On the sector boundary? */
000d28 940e 15fb 	CALL SUBOPT_0x51
000d2a 01fd      	MOVW R30,R26
000d2b 01bc      	MOVW R22,R24
000d2c 70f1      	ANDI R31,HIGH(0x1FF)
000d2d 9730      	SBIW R30,0
000d2e f009      	BREQ PC+2
000d2f c04d      	RJMP _0x6009F
                 ; 0003 025C 			if ((fs->fptr / 512 % fs->csize) == 0) {	/* On the cluster boundary? */
000d30 940e 15fb 	CALL SUBOPT_0x51
000d32 940e 1602 	CALL SUBOPT_0x52
000d34 81ee      	LDD  R30,Y+6
000d35 81ff      	LDD  R31,Y+6+1
000d36 940e 15d8 	CALL SUBOPT_0x4D
000d38 940e 17d4 	CALL __MODD21U
000d3a 940e 1851 	CALL __CPD10
000d3c f541      	BRNE _0x600A0
                 ; 0003 025D 				clst = (fs->fptr == 0) ?			/* On the top of the file? */
                 ; 0003 025E 					fs->org_clust : get_fat(fs->curr_clust);
000d3d 940e 15fb 	CALL SUBOPT_0x51
000d3f 940e 1859 	CALL __CPD02
000d41 f431      	BRNE _0x600A1
000d42 81ae      	LDD  R26,Y+6
000d43 81bf      	LDD  R27,Y+6+1
000d44 9690      	ADIW R26,32
000d45 940e 17dc 	CALL __GETD1P
000d47 c003      	RJMP _0x600A2
                 _0x600A1:
000d48 940e 160b 	CALL SUBOPT_0x53
000d4a da63      	RCALL _get_fat_G003
                 _0x600A2:
                +
000d4b 8be8     +STD Y + 16 , R30
000d4c 8bf9     +STD Y + 16 + 1 , R31
000d4d 8b6a     +STD Y + 16 + 2 , R22
000d4e 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
                 ; 0003 025F 				if (clst <= 1) goto fr_abort;
                +
000d4f 89a8     +LDD R26 , Y + 16
000d50 89b9     +LDD R27 , Y + 16 + 1
000d51 898a     +LDD R24 , Y + 16 + 2
000d52 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
000d53 940e 14de 	CALL SUBOPT_0x26
000d55 f408      	BRSH _0x600A4
000d56 c074      	RJMP _0x600A5
                 ; 0003 0260 				fs->curr_clust = clst;				/* Update current cluster */
                 _0x600A4:
                +
000d57 89e8     +LDD R30 , Y + 16
000d58 89f9     +LDD R31 , Y + 16 + 1
000d59 896a     +LDD R22 , Y + 16 + 2
000d5a 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
                +
000d5b 81ae     +LDD R26 , Y + 6
000d5c 81bf     +LDD R27 , Y + 6 + 1
000d5d 9694     +ADIW R26 , 36
000d5e 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 6,36
                 ; 0003 0261 				fs->csect = 0;						/* Reset sector offset in the cluster */
000d60 81ae      	LDD  R26,Y+6
000d61 81bf      	LDD  R27,Y+6+1
000d62 9613      	ADIW R26,3
000d63 e0e0      	LDI  R30,LOW(0)
000d64 93ec      	ST   X,R30
                 ; 0003 0262 			}
                 ; 0003 0263 			sect = clust2sect(fs->curr_clust);		/* Get current sector */
                 _0x600A0:
000d65 940e 160b 	CALL SUBOPT_0x53
000d67 db09      	RCALL _clust2sect_G003
                +
000d68 87ec     +STD Y + 12 , R30
000d69 87fd     +STD Y + 12 + 1 , R31
000d6a 876e     +STD Y + 12 + 2 , R22
000d6b 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ; 0003 0264 			if (!sect) goto fr_abort;
000d6c 940e 1851 	CALL __CPD10
000d6e f409      	BRNE _0x600A6
000d6f c05b      	RJMP _0x600A5
                 ; 0003 0265 			fs->dsect = sect + fs->csect++;
                 _0x600A6:
000d70 81ae      	LDD  R26,Y+6
000d71 81bf      	LDD  R27,Y+6+1
000d72 940e 1612 	CALL SUBOPT_0x54
000d74 940e 14d9 	CALL SUBOPT_0x25
000d76 940e 1619 	CALL SUBOPT_0x55
                +
000d78 81ae     +LDD R26 , Y + 6
000d79 81bf     +LDD R27 , Y + 6 + 1
000d7a 9698     +ADIW R26 , 40
000d7b 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 6,40
                 ; 0003 0266 		}
                 ; 0003 0267 		rcnt = 512 - ((WORD)fs->fptr % 512);		/* Get partial sector data from sector buffer */
                 _0x6009F:
000d7d 81ee      	LDD  R30,Y+6
000d7e 81ff      	LDD  R31,Y+6+1
000d7f 940e 161e 	CALL SUBOPT_0x56
000d81 e0a0      	LDI  R26,LOW(512)
000d82 e0b2      	LDI  R27,HIGH(512)
000d83 1bae      	SUB  R26,R30
000d84 0bbf      	SBC  R27,R31
000d85 01ad      	MOVW R20,R26
                 ; 0003 0268 		if (rcnt > btr) rcnt = btr;
000d86 89ee      	LDD  R30,Y+22
000d87 89ff      	LDD  R31,Y+22+1
000d88 17e4      	CP   R30,R20
000d89 07f5      	CPC  R31,R21
000d8a f410      	BRSH _0x600A7
                +
000d8b 894e     +LDD R20 , Y + 22
000d8c 895f     +LDD R21 , Y + 22 + 1
                 	__GETWRS 20,21,22
                 ; 0003 0269 		dr = disk_readp(!buff ? 0 : rbuff, fs->dsect, (WORD)(fs->fptr % 512), rcnt);
                 _0x600A7:
000d8d 8de8      	LDD  R30,Y+24
000d8e 8df9      	LDD  R31,Y+24+1
000d8f 9730      	SBIW R30,0
000d90 f419      	BRNE _0x600A8
000d91 e0e0      	LDI  R30,LOW(0)
000d92 e0f0      	LDI  R31,HIGH(0)
000d93 c001      	RJMP _0x600A9
                 _0x600A8:
000d94 01f9      	MOVW R30,R18
                 _0x600A9:
000d95 93fa      	ST   -Y,R31
000d96 93ea      	ST   -Y,R30
000d97 85e8      	LDD  R30,Y+8
000d98 85f9      	LDD  R31,Y+8+1
                +
000d99 a5a0     +LDD R26 , Z + 40
000d9a a5b1     +LDD R27 , Z + 40 + 1
000d9b a582     +LDD R24 , Z + 40 + 2
000d9c a593     +LDD R25 , Z + 40 + 3
                 	__GETD2Z 40
000d9d 940e 1812 	CALL __PUTPARD2
000d9f 85ac      	LDD  R26,Y+12
000da0 85bd      	LDD  R27,Y+12+1
000da1 9658      	ADIW R26,24
000da2 940e 17d8 	CALL __GETW1P
000da4 70f1      	ANDI R31,HIGH(0x1FF)
000da5 93fa      	ST   -Y,R31
000da6 93ea      	ST   -Y,R30
000da7 01da      	MOVW R26,R20
000da8 d8f2      	RCALL _disk_readp
000da9 2f1e      	MOV  R17,R30
                 ; 0003 026A 		if (dr) goto fr_abort;
000daa 3010      	CPI  R17,0
000dab f4f9      	BRNE _0x600A5
                 ; 0003 026B 		fs->fptr += rcnt; rbuff += rcnt;			/* Update pointers and counters */
000dac 81ee      	LDD  R30,Y+6
000dad 81ff      	LDD  R31,Y+6+1
000dae 940e 1623 	CALL SUBOPT_0x57
000db0 01df      	MOVW R26,R30
000db1 01cb      	MOVW R24,R22
000db2 01fa      	MOVW R30,R20
000db3 940e 1485 	CALL SUBOPT_0x16
000db5 01d0      	MOVW R26,R0
000db6 940e 17e7 	CALL __PUTDP1
                +
000db8 0f24     +ADD R18 , R20
000db9 1f35     +ADC R19 , R21
                 	__ADDWRR 18,19,20,21
                 ; 0003 026C 		btr -= rcnt; *br += rcnt;
000dba 89ee      	LDD  R30,Y+22
000dbb 89ff      	LDD  R31,Y+22+1
000dbc 1be4      	SUB  R30,R20
000dbd 0bf5      	SBC  R31,R21
000dbe 8bee      	STD  Y+22,R30
000dbf 8bff      	STD  Y+22+1,R31
000dc0 89ac      	LDD  R26,Y+20
000dc1 89bd      	LDD  R27,Y+20+1
000dc2 91ed      	LD   R30,X+
000dc3 91fd      	LD   R31,X+
000dc4 0fe4      	ADD  R30,R20
000dc5 1ff5      	ADC  R31,R21
000dc6 93fe      	ST   -X,R31
000dc7 93ee      	ST   -X,R30
                 ; 0003 026D 	}
000dc8 cf5a      	RJMP _0x6009C
                 _0x6009E:
                 ; 0003 026E 
                 ; 0003 026F 	return FR_OK;
000dc9 e0e0      	LDI  R30,LOW(0)
000dca c004      	RJMP _0x20C0009
                 ; 0003 0270 
                 ; 0003 0271 fr_abort:
                 _0x600A5:
                 ; 0003 0272 	fs->flag = 0;
000dcb 81ae      	LDD  R26,Y+6
000dcc 81bf      	LDD  R27,Y+6+1
000dcd 940e 1629 	CALL SUBOPT_0x58
                 ; 0003 0273 	return FR_DISK_ERR;
                 _0x20C0009:
000dcf 940e 1870 	CALL __LOADLOCR6
000dd1 966a      	ADIW R28,26
000dd2 9508      	RET
                 ; 0003 0274 }
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Write File                                                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_WRITE
                 ;
                 ;FRESULT pf_write (
                 ; 0003 027F 	const void* buff,	/* Pointer to the data to be written */
                 ; 0003 0280 	WORD btw,			/* Number of bytes to write (0:Finalize the current write operation) */
                 ; 0003 0281 	WORD* bw			/* Pointer to number of bytes written */
                 ; 0003 0282 )
                 ; 0003 0283 {
                 _pf_write:
                 ; .FSTART _pf_write
                 ; 0003 0284 	CLUST clst;
                 ; 0003 0285 	DWORD sect, remain;
                 ; 0003 0286 	const BYTE *p = buff;
                 ; 0003 0287 	WORD wcnt;
                 ; 0003 0288 	FATFS *fs = FatFs;
                 ; 0003 0289 
                 ; 0003 028A 
                 ; 0003 028B 	*bw = 0;
000dd3 93ba      	ST   -Y,R27
000dd4 93aa      	ST   -Y,R26
000dd5 972c      	SBIW R28,12
000dd6 940e 1869 	CALL __SAVELOCR6
                 ;	*buff -> Y+22
                 ;	btw -> Y+20
                 ;	*bw -> Y+18
                 ;	clst -> Y+14
                 ;	sect -> Y+10
                 ;	remain -> Y+6
                 ;	*p -> R16,R17
                 ;	wcnt -> R18,R19
                 ;	*fs -> R20,R21
                +
000dd8 890e     +LDD R16 , Y + 22
000dd9 891f     +LDD R17 , Y + 22 + 1
                 	__GETWRS 16,17,22
                +
000dda 9140 0aea+LDS R20 , 0 + ( _FatFs_G003 )
000ddc 9150 0aeb+LDS R21 , 0 + ( _FatFs_G003 ) + 1
                 	__GETWRMN 20,21,0,_FatFs_G003
000dde 89aa      	LDD  R26,Y+18
000ddf 89bb      	LDD  R27,Y+18+1
000de0 940e 1538 	CALL SUBOPT_0x34
                 ; 0003 028C 	if (!fs) return FR_NOT_ENABLED;		/* Check file system */
000de2 2e04      	MOV  R0,R20
000de3 2a05      	OR   R0,R21
000de4 f411      	BRNE _0x600AC
000de5 e0e6      	LDI  R30,LOW(6)
000de6 c005      	RJMP _0x20C0008
                 ; 0003 028D 	if (!(fs->flag & FA_OPENED))		/* Check if opened */
                 _0x600AC:
000de7 01fa      	MOVW R30,R20
000de8 81a2      	LDD  R26,Z+2
000de9 70a1      	ANDI R26,LOW(0x1)
000dea f429      	BRNE _0x600AD
                 ; 0003 028E 		return FR_NOT_OPENED;
000deb e0e5      	LDI  R30,LOW(5)
                 _0x20C0008:
000dec 940e 1870 	CALL __LOADLOCR6
000dee 9668      	ADIW R28,24
000def 9508      	RET
                 ; 0003 028F 
                 ; 0003 0290 	if (!btw) {		/* Finalize request */
                 _0x600AD:
000df0 89ec      	LDD  R30,Y+20
000df1 89fd      	LDD  R31,Y+20+1
000df2 9730      	SBIW R30,0
000df3 f4a9      	BRNE _0x600AE
                 ; 0003 0291 		if ((fs->flag & FA__WIP) && disk_writep(0, 0)) goto fw_abort;
000df4 01fa      	MOVW R30,R20
000df5 81a2      	LDD  R26,Z+2
000df6 74a0      	ANDI R26,LOW(0x40)
000df7 f039      	BREQ _0x600B0
000df8 940e 162e 	CALL SUBOPT_0x59
000dfa 940e 14b7 	CALL SUBOPT_0x1E
000dfc d901      	RCALL _disk_writep
000dfd 30e0      	CPI  R30,0
000dfe f409      	BRNE _0x600B1
                 _0x600B0:
000dff c001      	RJMP _0x600AF
                 _0x600B1:
000e00 c0df      	RJMP _0x600B2
                 ; 0003 0292 		fs->flag &= ~FA__WIP;
                 _0x600AF:
000e01 01da      	MOVW R26,R20
000e02 9612      	ADIW R26,2
000e03 91ec      	LD   R30,X
000e04 7bef      	ANDI R30,0xBF
000e05 93ec      	ST   X,R30
                 ; 0003 0293 		return FR_OK;
000e06 e0e0      	LDI  R30,LOW(0)
000e07 940c 12bc 	JMP  _0x20C0003
                 ; 0003 0294 	} else {		/* Write data request */
                 _0x600AE:
                 ; 0003 0295 		if (!(fs->flag & FA__WIP))		/* Round down fptr to the sector boundary */
000e09 01fa      	MOVW R30,R20
000e0a 81a2      	LDD  R26,Z+2
000e0b 74a0      	ANDI R26,LOW(0x40)
000e0c f441      	BRNE _0x600B4
                 ; 0003 0296 			fs->fptr &= 0xFFFFFE00;
000e0d 01da      	MOVW R26,R20
000e0e 9658      	ADIW R26,24
000e0f 91ed      	LD   R30,X+
000e10 91fd      	LD   R31,X+
000e11 70e0      	ANDI R30,LOW(0xFFFFFE00)
000e12 7ffe      	ANDI R31,HIGH(0xFFFFFE00)
000e13 93fe      	ST   -X,R31
000e14 93ee      	ST   -X,R30
                 ; 0003 0297 	}
                 _0x600B4:
                 ; 0003 0298 	remain = fs->fsize - fs->fptr;
000e15 01fa      	MOVW R30,R20
                +
000e16 8da4     +LDD R26 , Z + 28
000e17 8db5     +LDD R27 , Z + 28 + 1
000e18 8d86     +LDD R24 , Z + 28 + 2
000e19 8d97     +LDD R25 , Z + 28 + 3
                 	__GETD2Z 28
000e1a 939f      	PUSH R25
000e1b 938f      	PUSH R24
000e1c 93bf      	PUSH R27
000e1d 93af      	PUSH R26
000e1e 940e 1633 	CALL SUBOPT_0x5A
000e20 91ef      	POP  R30
000e21 91ff      	POP  R31
000e22 916f      	POP  R22
000e23 917f      	POP  R23
000e24 940e 172d 	CALL __SUBD12
000e26 940e 1454 	CALL SUBOPT_0xF
                 ; 0003 0299 	if (btw > remain) btw = (WORD)remain;			/* Truncate btw by remaining bytes */
000e28 940e 144f 	CALL SUBOPT_0xE
000e2a 89ac      	LDD  R26,Y+20
000e2b 89bd      	LDD  R27,Y+20+1
000e2c 2788      	CLR  R24
000e2d 2799      	CLR  R25
000e2e 940e 185f 	CALL __CPD12
000e30 f420      	BRSH _0x600B5
000e31 81ee      	LDD  R30,Y+6
000e32 81ff      	LDD  R31,Y+6+1
000e33 8bec      	STD  Y+20,R30
000e34 8bfd      	STD  Y+20+1,R31
                 ; 0003 029A 
                 ; 0003 029B 	while (btw)	{									/* Repeat until all data transferred */
                 _0x600B5:
                 _0x600B6:
000e35 89ec      	LDD  R30,Y+20
000e36 89fd      	LDD  R31,Y+20+1
000e37 9730      	SBIW R30,0
000e38 f409      	BRNE PC+2
000e39 c0a3      	RJMP _0x600B8
                 ; 0003 029C 		if (((WORD)fs->fptr % 512) == 0) {				/* On the sector boundary? */
000e3a 01fa      	MOVW R30,R20
000e3b 940e 161e 	CALL SUBOPT_0x56
000e3d 9730      	SBIW R30,0
000e3e f009      	BREQ PC+2
000e3f c059      	RJMP _0x600B9
                 ; 0003 029D 			if ((fs->fptr / 512 % fs->csize) == 0) {	/* On the cluster boundary? */
000e40 940e 1633 	CALL SUBOPT_0x5A
000e42 940e 1602 	CALL SUBOPT_0x52
000e44 01fa      	MOVW R30,R20
000e45 940e 15d8 	CALL SUBOPT_0x4D
000e47 940e 17d4 	CALL __MODD21U
000e49 940e 1851 	CALL __CPD10
000e4b f511      	BRNE _0x600BA
                 ; 0003 029E 				clst = (fs->fptr == 0) ?			/* On the top of the file? */
                 ; 0003 029F 					fs->org_clust : get_fat(fs->curr_clust);
000e4c 940e 1633 	CALL SUBOPT_0x5A
000e4e 940e 1859 	CALL __CPD02
000e50 f429      	BRNE _0x600BB
000e51 01da      	MOVW R26,R20
000e52 9690      	ADIW R26,32
000e53 940e 17dc 	CALL __GETD1P
000e55 c006      	RJMP _0x600BC
                 _0x600BB:
000e56 01fa      	MOVW R30,R20
                +
000e57 a1a4     +LDD R26 , Z + 36
000e58 a1b5     +LDD R27 , Z + 36 + 1
000e59 a186     +LDD R24 , Z + 36 + 2
000e5a a197     +LDD R25 , Z + 36 + 3
                 	__GETD2Z 36
000e5b d952      	RCALL _get_fat_G003
                 _0x600BC:
000e5c 940e 1639 	CALL SUBOPT_0x5B
                 ; 0003 02A0 				if (clst <= 1) goto fw_abort;
000e5e 940e 150e 	CALL SUBOPT_0x2C
000e60 940e 14de 	CALL SUBOPT_0x26
000e62 f408      	BRSH _0x600BE
000e63 c07c      	RJMP _0x600B2
                 ; 0003 02A1 				fs->curr_clust = clst;				/* Update current cluster */
                 _0x600BE:
000e64 940e 163e 	CALL SUBOPT_0x5C
                +
000e66 01da     +MOVW R26 , R20
000e67 9694     +ADIW R26 , 36
000e68 940e 17e7+CALL __PUTDP1
                 	__PUTD1RNS 20,36
                 ; 0003 02A2 				fs->csect = 0;						/* Reset sector offset in the cluster */
000e6a 01da      	MOVW R26,R20
000e6b 9613      	ADIW R26,3
000e6c e0e0      	LDI  R30,LOW(0)
000e6d 93ec      	ST   X,R30
                 ; 0003 02A3 			}
                 ; 0003 02A4 			sect = clust2sect(fs->curr_clust);		/* Get current sector */
                 _0x600BA:
000e6e 01fa      	MOVW R30,R20
                +
000e6f a1a4     +LDD R26 , Z + 36
000e70 a1b5     +LDD R27 , Z + 36 + 1
000e71 a186     +LDD R24 , Z + 36 + 2
000e72 a197     +LDD R25 , Z + 36 + 3
                 	__GETD2Z 36
000e73 d9fd      	RCALL _clust2sect_G003
                +
000e74 87ea     +STD Y + 10 , R30
000e75 87fb     +STD Y + 10 + 1 , R31
000e76 876c     +STD Y + 10 + 2 , R22
000e77 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
                 ; 0003 02A5 			if (!sect) goto fw_abort;
000e78 940e 148a 	CALL SUBOPT_0x17
000e7a 940e 1851 	CALL __CPD10
000e7c f409      	BRNE _0x600BF
000e7d c062      	RJMP _0x600B2
                 ; 0003 02A6 			fs->dsect = sect + fs->csect++;
                 _0x600BF:
000e7e 01da      	MOVW R26,R20
000e7f 940e 1612 	CALL SUBOPT_0x54
000e81 940e 148f 	CALL SUBOPT_0x18
000e83 940e 1619 	CALL SUBOPT_0x55
                +
000e85 01da     +MOVW R26 , R20
000e86 9698     +ADIW R26 , 40
000e87 940e 17e7+CALL __PUTDP1
                 	__PUTD1RNS 20,40
                 ; 0003 02A7 			if (disk_writep(0, fs->dsect)) goto fw_abort;	/* Initiate a sector write operation */
000e89 940e 162e 	CALL SUBOPT_0x59
000e8b 01fa      	MOVW R30,R20
                +
000e8c a5a0     +LDD R26 , Z + 40
000e8d a5b1     +LDD R27 , Z + 40 + 1
000e8e a582     +LDD R24 , Z + 40 + 2
000e8f a593     +LDD R25 , Z + 40 + 3
                 	__GETD2Z 40
000e90 d86d      	RCALL _disk_writep
000e91 30e0      	CPI  R30,0
000e92 f009      	BREQ _0x600C0
000e93 c04c      	RJMP _0x600B2
                 ; 0003 02A8 			fs->flag |= FA__WIP;
                 _0x600C0:
000e94 01da      	MOVW R26,R20
000e95 9612      	ADIW R26,2
000e96 91ec      	LD   R30,X
000e97 64e0      	ORI  R30,0x40
000e98 93ec      	ST   X,R30
                 ; 0003 02A9 		}
                 ; 0003 02AA 		wcnt = 512 - ((WORD)fs->fptr % 512);		/* Number of bytes to write to the sector */
                 _0x600B9:
000e99 01fa      	MOVW R30,R20
000e9a 940e 161e 	CALL SUBOPT_0x56
000e9c e0a0      	LDI  R26,LOW(512)
000e9d e0b2      	LDI  R27,HIGH(512)
000e9e 1bae      	SUB  R26,R30
000e9f 0bbf      	SBC  R27,R31
000ea0 019d      	MOVW R18,R26
                 ; 0003 02AB 		if (wcnt > btw) wcnt = btw;
000ea1 89ec      	LDD  R30,Y+20
000ea2 89fd      	LDD  R31,Y+20+1
000ea3 17e2      	CP   R30,R18
000ea4 07f3      	CPC  R31,R19
000ea5 f410      	BRSH _0x600C1
                +
000ea6 892c     +LDD R18 , Y + 20
000ea7 893d     +LDD R19 , Y + 20 + 1
                 	__GETWRS 18,19,20
                 ; 0003 02AC 		if (disk_writep(p, wcnt)) goto fw_abort;	/* Send data to the sector */
                 _0x600C1:
000ea8 931a      	ST   -Y,R17
000ea9 930a      	ST   -Y,R16
000eaa 01d9      	MOVW R26,R18
000eab 2788      	CLR  R24
000eac 2799      	CLR  R25
000ead d850      	RCALL _disk_writep
000eae 30e0      	CPI  R30,0
000eaf f581      	BRNE _0x600B2
                 ; 0003 02AD 		fs->fptr += wcnt; p += wcnt;				/* Update pointers and counters */
000eb0 01fa      	MOVW R30,R20
000eb1 940e 1623 	CALL SUBOPT_0x57
000eb3 01df      	MOVW R26,R30
000eb4 01cb      	MOVW R24,R22
000eb5 01f9      	MOVW R30,R18
000eb6 940e 1485 	CALL SUBOPT_0x16
000eb8 01d0      	MOVW R26,R0
000eb9 940e 17e7 	CALL __PUTDP1
                +
000ebb 0f02     +ADD R16 , R18
000ebc 1f13     +ADC R17 , R19
                 	__ADDWRR 16,17,18,19
                 ; 0003 02AE 		btw -= wcnt; *bw += wcnt;
000ebd 89ec      	LDD  R30,Y+20
000ebe 89fd      	LDD  R31,Y+20+1
000ebf 1be2      	SUB  R30,R18
000ec0 0bf3      	SBC  R31,R19
000ec1 8bec      	STD  Y+20,R30
000ec2 8bfd      	STD  Y+20+1,R31
000ec3 89aa      	LDD  R26,Y+18
000ec4 89bb      	LDD  R27,Y+18+1
000ec5 91ed      	LD   R30,X+
000ec6 91fd      	LD   R31,X+
000ec7 0fe2      	ADD  R30,R18
000ec8 1ff3      	ADC  R31,R19
000ec9 93fe      	ST   -X,R31
000eca 93ee      	ST   -X,R30
                 ; 0003 02AF 		if (((WORD)fs->fptr % 512) == 0) {
000ecb 01fa      	MOVW R30,R20
000ecc 940e 161e 	CALL SUBOPT_0x56
000ece 9730      	SBIW R30,0
000ecf f461      	BRNE _0x600C3
                 ; 0003 02B0 			if (disk_writep(0, 0)) goto fw_abort;	/* Finalize the currtent secter write operation */
000ed0 940e 162e 	CALL SUBOPT_0x59
000ed2 940e 14b7 	CALL SUBOPT_0x1E
000ed4 d829      	RCALL _disk_writep
000ed5 30e0      	CPI  R30,0
000ed6 f449      	BRNE _0x600B2
                 ; 0003 02B1 			fs->flag &= ~FA__WIP;
000ed7 01da      	MOVW R26,R20
000ed8 9612      	ADIW R26,2
000ed9 91ec      	LD   R30,X
000eda 7bef      	ANDI R30,0xBF
000edb 93ec      	ST   X,R30
                 ; 0003 02B2 		}
                 ; 0003 02B3 	}
                 _0x600C3:
000edc cf58      	RJMP _0x600B6
                 _0x600B8:
                 ; 0003 02B4 
                 ; 0003 02B5 	return FR_OK;
000edd e0e0      	LDI  R30,LOW(0)
000ede 940c 12bc 	JMP  _0x20C0003
                 ; 0003 02B6 
                 ; 0003 02B7 fw_abort:
                 _0x600B2:
                 ; 0003 02B8 	fs->flag = 0;
000ee0 01da      	MOVW R26,R20
000ee1 940e 1629 	CALL SUBOPT_0x58
                 ; 0003 02B9 	return FR_DISK_ERR;
000ee3 940c 12bc 	JMP  _0x20C0003
                 ; 0003 02BA }
                 ; .FEND
                 ;
                 ;FRESULT pf_write512 (
                 ; 0003 02BD 	BYTE* buff,	/* Pointer to the data to be written */
                 ; 0003 02BE 	WORD ofs,			//offset to fill data
                 ; 0003 02BF 	WORD btw,           /* Number of bytes to write */
                 ; 0003 02C0     WORD* bw			/* Pointer to number of bytes written */
                 ; 0003 02C1 )
                 ; 0003 02C2 {
                 _pf_write512:
                 ; .FSTART _pf_write512
                 ; 0003 02C3      BYTE res;
                 ; 0003 02C4      WORD i=ofs%512,j=0;
                 ; 0003 02C5      BYTE buf512[512];
                 ; 0003 02C6      FATFS *fs = FatFs;
                 ; 0003 02C7 
                 ; 0003 02C8      //WORD nbytes=0;
                 ; 0003 02C9      if((btw)>512){
000ee5 93ba      	ST   -Y,R27
000ee6 93aa      	ST   -Y,R26
000ee7 9722      	SBIW R28,2
000ee8 50d2      	SUBI R29,2
000ee9 940e 1869 	CALL __SAVELOCR6
                 ;	*buff -> Y+526
                 ;	ofs -> Y+524
                 ;	btw -> Y+522
                 ;	*bw -> Y+520
                 ;	res -> R17
                 ;	i -> R18,R19
                 ;	j -> R20,R21
                 ;	buf512 -> Y+8
                 ;	*fs -> Y+6
000eeb 940e 1643 	CALL SUBOPT_0x5D
000eed 019f      	MOVW R18,R30
                +
000eee e040     +LDI R20 , LOW ( 0 )
000eef e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
000ef0 940e 14d4 	CALL SUBOPT_0x24
000ef2 83ee      	STD  Y+6,R30
000ef3 83ff      	STD  Y+6+1,R31
000ef4 940e 164b 	CALL SUBOPT_0x5E
000ef6 30a1      	CPI  R26,LOW(0x201)
000ef7 e0e2      	LDI  R30,HIGH(0x201)
000ef8 07be      	CPC  R27,R30
000ef9 f010      	BRLO _0x600C5
                 ; 0003 02CA          return FR_DISK_ERR; //write bytes great than 512
000efa e0e1      	LDI  R30,LOW(1)
000efb c05b      	RJMP _0x20C0007
                 ; 0003 02CB      }
                 ; 0003 02CC      res=pf_lseek((ofs/512)*512);
                 _0x600C5:
000efc 940e 1652 	CALL SUBOPT_0x5F
000efe e0e0      	LDI  R30,LOW(512)
000eff e0f2      	LDI  R31,HIGH(512)
000f00 940e 179c 	CALL __DIVW21U
000f02 0fee      	LSL  R30
000f03 1fff      	ROL  R31
000f04 2ffe      	MOV  R31,R30
000f05 e0e0      	LDI  R30,0
000f06 2766      	CLR  R22
000f07 2777      	CLR  R23
000f08 01df      	MOVW R26,R30
000f09 01cb      	MOVW R24,R22
000f0a d051      	RCALL _pf_lseek
000f0b 2f1e      	MOV  R17,R30
                 ; 0003 02CD      if(((ofs%512)+btw)>512){//read replace then write
000f0c 940e 1643 	CALL SUBOPT_0x5D
000f0e 940e 164b 	CALL SUBOPT_0x5E
000f10 0fae      	ADD  R26,R30
000f11 1fbf      	ADC  R27,R31
000f12 30a1      	CPI  R26,LOW(0x201)
000f13 e0e2      	LDI  R30,HIGH(0x201)
000f14 07be      	CPC  R27,R30
000f15 f0f8      	BRLO _0x600C6
                 ; 0003 02CE         res=pf_read(buf512, 512, bw);
000f16 940e 1659 	CALL SUBOPT_0x60
000f18 ddcb      	RCALL _pf_read
000f19 2f1e      	MOV  R17,R30
                 ; 0003 02CF         if(res!=FR_OK){
000f1a 3010      	CPI  R17,0
000f1b f009      	BREQ _0x600C7
                 ; 0003 02D0             return res;
000f1c c03a      	RJMP _0x20C0007
                 ; 0003 02D1         }
                 ; 0003 02D2         for(;i<512;i++,j++){
                 _0x600C7:
                 _0x600C9:
                +
000f1d 3020     +CPI R18 , LOW ( 512 )
000f1e e0e2     +LDI R30 , HIGH ( 512 )
000f1f 073e     +CPC R19 , R30
                 	__CPWRN 18,19,512
000f20 f438      	BRSH _0x600CA
                 ; 0003 02D3             buf512[i]=buff[j];
000f21 940e 1662 	CALL SUBOPT_0x61
                 ; 0003 02D4         }
                +
000f23 5f2f     +SUBI R18 , LOW ( - 1 )
000f24 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
                +
000f25 5f4f     +SUBI R20 , LOW ( - 1 )
000f26 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000f27 cff5      	RJMP _0x600C9
                 _0x600CA:
                 ; 0003 02D5         res=pf_lseek(fs->fptr - 512);
000f28 940e 15fb 	CALL SUBOPT_0x51
000f2a 940e 1675 	CALL SUBOPT_0x62
                 ; 0003 02D6         //res=pf_lseek((ofs/512)*512);
                 ; 0003 02D7         res=pf_write(buf512, 512, bw);
000f2c 940e 1659 	CALL SUBOPT_0x60
000f2e dea4      	RCALL _pf_write
000f2f 2f1e      	MOV  R17,R30
                 ; 0003 02D8         if(res!=FR_OK){
000f30 3010      	CPI  R17,0
000f31 f009      	BREQ _0x600CB
                 ; 0003 02D9             return res;
000f32 c024      	RJMP _0x20C0007
                 ; 0003 02DA         }
                 ; 0003 02DB         i=0;
                 _0x600CB:
                +
000f33 e020     +LDI R18 , LOW ( 0 )
000f34 e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
                 ; 0003 02DC          //return FR_DISK_ERR; //write bytes great than 512
                 ; 0003 02DD      }
                 ; 0003 02DE      {
                 _0x600C6:
                 ; 0003 02DF 
                 ; 0003 02E0         res=pf_read(buf512, 512, bw);
000f35 940e 1659 	CALL SUBOPT_0x60
000f37 ddac      	RCALL _pf_read
000f38 2f1e      	MOV  R17,R30
                 ; 0003 02E1         res=pf_lseek(fs->fptr - 512);
000f39 940e 15fb 	CALL SUBOPT_0x51
000f3b 940e 1675 	CALL SUBOPT_0x62
                 ; 0003 02E2         /*
                 ; 0003 02E3         if(j>0){
                 ; 0003 02E4             res=pf_lseek(((ofs/512)+1)*512);
                 ; 0003 02E5         }
                 ; 0003 02E6         else{
                 ; 0003 02E7             res=pf_lseek((ofs/512)*512);
                 ; 0003 02E8         }
                 ; 0003 02E9         */
                 ; 0003 02EA         if(res!=FR_OK){
000f3d 3010      	CPI  R17,0
000f3e f011      	BREQ _0x600CC
                 ; 0003 02EB             return res;
000f3f 2fe1      	MOV  R30,R17
000f40 c016      	RJMP _0x20C0007
                 ; 0003 02EC         }
                 ; 0003 02ED         for(;j<btw;i++,j++){
                 _0x600CC:
                 _0x600CE:
                +
000f41 01fe     +MOVW R30 , R28
000f42 5fe6     +SUBI R30 , LOW ( - 522 )
000f43 4ffd     +SBCI R31 , HIGH ( - 522 )
000f44 9001     +LD R0 , Z +
000f45 81f0     +LD R31 , Z
000f46 2de0     +MOV R30 , R0
                 	__GETW1SX 522
000f47 174e      	CP   R20,R30
000f48 075f      	CPC  R21,R31
000f49 f438      	BRSH _0x600CF
                 ; 0003 02EE             buf512[i]=buff[j];
000f4a 940e 1662 	CALL SUBOPT_0x61
                 ; 0003 02EF         }
                +
000f4c 5f2f     +SUBI R18 , LOW ( - 1 )
000f4d 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
                +
000f4e 5f4f     +SUBI R20 , LOW ( - 1 )
000f4f 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000f50 cff0      	RJMP _0x600CE
                 _0x600CF:
                 ; 0003 02F0 
                 ; 0003 02F1         res=pf_write(buf512, 512, bw);
000f51 940e 1659 	CALL SUBOPT_0x60
000f53 de7f      	RCALL _pf_write
000f54 2f1e      	MOV  R17,R30
                 ; 0003 02F2         if(res!=FR_OK){
000f55 3010      	CPI  R17,0
000f56 f001      	BREQ _0x600D0
                 ; 0003 02F3             return res;
                 ; 0003 02F4         }
                 ; 0003 02F5      }
                 _0x600D0:
                 ; 0003 02F6 
                 ; 0003 02F7 }
                 _0x20C0007:
000f57 940e 1870 	CALL __LOADLOCR6
000f59 9660      	ADIW R28,16
000f5a 5fde      	SUBI R29,-2
000f5b 9508      	RET
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Seek File R/W Pointer                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_LSEEK
                 ;
                 ;FRESULT pf_lseek (
                 ; 0003 0302 	DWORD ofs		/* File pointer from top of file */
                 ; 0003 0303 )
                 ; 0003 0304 {
                 _pf_lseek:
                 ; .FSTART _pf_lseek
                 ; 0003 0305 	CLUST clst;
                 ; 0003 0306 	DWORD bcs, sect, ifptr;
                 ; 0003 0307 	FATFS *fs = FatFs;
                 ; 0003 0308 
                 ; 0003 0309 
                 ; 0003 030A 	if (!fs) return FR_NOT_ENABLED;		/* Check file system */
000f5c 940e 1812 	CALL __PUTPARD2
000f5e 9760      	SBIW R28,16
000f5f 940e 1522 	CALL SUBOPT_0x30
                 ;	ofs -> Y+18
                 ;	clst -> Y+14
                 ;	bcs -> Y+10
                 ;	sect -> Y+6
                 ;	ifptr -> Y+2
                 ;	*fs -> R16,R17
000f61 2e00      	MOV  R0,R16
000f62 2a01      	OR   R0,R17
000f63 f411      	BRNE _0x600D1
000f64 e0e6      	LDI  R30,LOW(6)
000f65 c0d7      	RJMP _0x20C0006
                 ; 0003 030B 	if (!(fs->flag & FA_OPENED))		/* Check if opened */
                 _0x600D1:
000f66 01f8      	MOVW R30,R16
000f67 81a2      	LDD  R26,Z+2
000f68 70a1      	ANDI R26,LOW(0x1)
000f69 f411      	BRNE _0x600D2
                 ; 0003 030C 			return FR_NOT_OPENED;
000f6a e0e5      	LDI  R30,LOW(5)
000f6b c0d1      	RJMP _0x20C0006
                 ; 0003 030D 
                 ; 0003 030E 	if (ofs > fs->fsize) ofs = fs->fsize;	/* Clip offset with the file size */
                 _0x600D2:
000f6c 01d8      	MOVW R26,R16
000f6d 965c      	ADIW R26,28
000f6e 940e 167d 	CALL SUBOPT_0x63
000f70 940e 185f 	CALL __CPD12
000f72 f440      	BRSH _0x600D3
000f73 01d8      	MOVW R26,R16
000f74 965c      	ADIW R26,28
000f75 940e 17dc 	CALL __GETD1P
                +
000f77 8bea     +STD Y + 18 , R30
000f78 8bfb     +STD Y + 18 + 1 , R31
000f79 8b6c     +STD Y + 18 + 2 , R22
000f7a 8b7d     +STD Y + 18 + 3 , R23
                 	__PUTD1S 18
                 ; 0003 030F 	ifptr = fs->fptr;
                 _0x600D3:
000f7b 01d8      	MOVW R26,R16
000f7c 9658      	ADIW R26,24
000f7d 940e 153d 	CALL SUBOPT_0x35
                 ; 0003 0310 	fs->fptr = 0;
000f7f 01d8      	MOVW R26,R16
000f80 9658      	ADIW R26,24
000f81 940e 1588 	CALL SUBOPT_0x40
                 ; 0003 0311 	if (ofs > 0) {
000f83 940e 1684 	CALL SUBOPT_0x64
000f85 940e 1859 	CALL __CPD02
000f87 f008      	BRLO PC+2
000f88 c0af      	RJMP _0x600D4
                 ; 0003 0312 		bcs = (DWORD)fs->csize * 512;	/* Cluster size (byte) */
000f89 01f8      	MOVW R30,R16
000f8a 940e 15d8 	CALL SUBOPT_0x4D
000f8c 940e 14c6 	CALL SUBOPT_0x21
                +
000f8e 87ea     +STD Y + 10 , R30
000f8f 87fb     +STD Y + 10 + 1 , R31
000f90 876c     +STD Y + 10 + 2 , R22
000f91 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
                 ; 0003 0313 		if (ifptr > 0 &&
                 ; 0003 0314 			(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
000f92 940e 152e 	CALL SUBOPT_0x32
000f94 940e 1859 	CALL __CPD02
000f96 f498      	BRSH _0x600D6
000f97 940e 1689 	CALL SUBOPT_0x65
000f99 940e 168e 	CALL SUBOPT_0x66
000f9b 937f      	PUSH R23
000f9c 936f      	PUSH R22
000f9d 93ff      	PUSH R31
000f9e 93ef      	PUSH R30
000f9f 940e 14ab 	CALL SUBOPT_0x1C
000fa1 940e 168e 	CALL SUBOPT_0x66
000fa3 91af      	POP  R26
000fa4 91bf      	POP  R27
000fa5 918f      	POP  R24
000fa6 919f      	POP  R25
000fa7 940e 1864 	CALL __CPD21
000fa9 f408      	BRSH _0x600D7
                 _0x600D6:
000faa c023      	RJMP _0x600D5
                 _0x600D7:
                 ; 0003 0315 			fs->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
000fab 940e 14ab 	CALL SUBOPT_0x1C
000fad 940e 1698 	CALL SUBOPT_0x67
000faf 01df      	MOVW R26,R30
000fb0 01cb      	MOVW R24,R22
000fb1 940e 148a 	CALL SUBOPT_0x17
000fb3 940e 1698 	CALL SUBOPT_0x67
000fb5 940e 1777 	CALL __COMD1
000fb7 940e 1737 	CALL __ANDD12
                +
000fb9 01d8     +MOVW R26 , R16
000fba 9658     +ADIW R26 , 24
000fbb 940e 17e7+CALL __PUTDP1
                 	__PUTD1RNS 16,24
                 ; 0003 0316 			ofs -= fs->fptr;
000fbd 01d8      	MOVW R26,R16
000fbe 9658      	ADIW R26,24
000fbf 940e 167d 	CALL SUBOPT_0x63
000fc1 940e 1732 	CALL __SUBD21
                +
000fc3 8baa     +STD Y + 18 , R26
000fc4 8bbb     +STD Y + 18 + 1 , R27
000fc5 8b8c     +STD Y + 18 + 2 , R24
000fc6 8b9d     +STD Y + 18 + 3 , R25
                 	__PUTD2S 18
                 ; 0003 0317 			clst = fs->curr_clust;
000fc7 01d8      	MOVW R26,R16
000fc8 9694      	ADIW R26,36
000fc9 940e 17dc 	CALL __GETD1P
000fcb 940e 1639 	CALL SUBOPT_0x5B
                 ; 0003 0318 		} else {							/* When seek to back cluster, */
000fcd c008      	RJMP _0x600D8
                 _0x600D5:
                 ; 0003 0319 			clst = fs->org_clust;			/* start from the first cluster */
000fce 01d8      	MOVW R26,R16
000fcf 9690      	ADIW R26,32
000fd0 940e 17dc 	CALL __GETD1P
000fd2 940e 1639 	CALL SUBOPT_0x5B
                 ; 0003 031A 			fs->curr_clust = clst;
000fd4 940e 169d 	CALL SUBOPT_0x68
                 ; 0003 031B 		}
                 _0x600D8:
                 ; 0003 031C 		while (ofs > bcs) {				/* Cluster following loop */
                 _0x600D9:
000fd6 940e 148a 	CALL SUBOPT_0x17
000fd8 940e 1684 	CALL SUBOPT_0x64
000fda 940e 185f 	CALL __CPD12
000fdc f560      	BRSH _0x600DB
                 ; 0003 031D 			clst = get_fat(clst);		/* Follow cluster chain */
000fdd 940e 150e 	CALL SUBOPT_0x2C
000fdf 940e 07ae 	CALL _get_fat_G003
000fe1 940e 1639 	CALL SUBOPT_0x5B
                 ; 0003 031E 			if (clst <= 1 || clst >= fs->max_clust) goto fe_abort;
000fe3 940e 150e 	CALL SUBOPT_0x2C
000fe5 940e 14de 	CALL SUBOPT_0x26
000fe7 f048      	BRLO _0x600DD
000fe8 01d8      	MOVW R26,R16
000fe9 9618      	ADIW R26,8
000fea 940e 17dc 	CALL __GETD1P
000fec 940e 150e 	CALL SUBOPT_0x2C
000fee 940e 1864 	CALL __CPD21
000ff0 f008      	BRLO _0x600DC
                 _0x600DD:
000ff1 c048      	RJMP _0x600DF
                 ; 0003 031F 			fs->curr_clust = clst;
                 _0x600DC:
000ff2 940e 169d 	CALL SUBOPT_0x68
                 ; 0003 0320 			fs->fptr += bcs;
000ff4 01f8      	MOVW R30,R16
000ff5 940e 1623 	CALL SUBOPT_0x57
000ff7 940e 148f 	CALL SUBOPT_0x18
000ff9 940e 1723 	CALL __ADDD12
000ffb 01d0      	MOVW R26,R0
000ffc 940e 17e7 	CALL __PUTDP1
                 ; 0003 0321 			ofs -= bcs;
000ffe 940e 148f 	CALL SUBOPT_0x18
001000 940e 1689 	CALL SUBOPT_0x65
001002 940e 172d 	CALL __SUBD12
                +
001004 8bea     +STD Y + 18 , R30
001005 8bfb     +STD Y + 18 + 1 , R31
001006 8b6c     +STD Y + 18 + 2 , R22
001007 8b7d     +STD Y + 18 + 3 , R23
                 	__PUTD1S 18
                 ; 0003 0322 		}
001008 cfcd      	RJMP _0x600D9
                 _0x600DB:
                 ; 0003 0323 		fs->fptr += ofs;
001009 01f8      	MOVW R30,R16
00100a 940e 1623 	CALL SUBOPT_0x57
00100c 940e 1684 	CALL SUBOPT_0x64
00100e 940e 1723 	CALL __ADDD12
001010 01d0      	MOVW R26,R0
001011 940e 17e7 	CALL __PUTDP1
                 ; 0003 0324 		sect = clust2sect(clst);		/* Current sector */
001013 940e 150e 	CALL SUBOPT_0x2C
001015 d85b      	RCALL _clust2sect_G003
001016 940e 1454 	CALL SUBOPT_0xF
                 ; 0003 0325 		if (!sect) goto fe_abort;
001018 940e 144f 	CALL SUBOPT_0xE
00101a 940e 1851 	CALL __CPD10
00101c f0e9      	BREQ _0x600DF
                 ; 0003 0326 		fs->csect = (BYTE)(ofs / 512);	/* Sector offset in the cluster */
00101d 940e 1684 	CALL SUBOPT_0x64
                +
00101f e0e0     +LDI R30 , LOW ( 0x200 )
001020 e0f2     +LDI R31 , HIGH ( 0x200 )
001021 e060     +LDI R22 , BYTE3 ( 0x200 )
001022 e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
001023 940e 17af 	CALL __DIVD21U
                +
001025 01d8     +MOVW R26 , R16
001026 9613     +ADIW R26 , 3
001027 93ec     +ST X , R30
                 	__PUTB1RNS 16,3
                 ; 0003 0327 		if (ofs % 512)
001028 940e 1689 	CALL SUBOPT_0x65
00102a 70f1      	ANDI R31,HIGH(0x1FF)
00102b 9730      	SBIW R30,0
00102c f059      	BREQ _0x600E1
                 ; 0003 0328 			fs->dsect = sect + fs->csect++;
00102d 01d8      	MOVW R26,R16
00102e 940e 1612 	CALL SUBOPT_0x54
001030 940e 1459 	CALL SUBOPT_0x10
001032 940e 1619 	CALL SUBOPT_0x55
                +
001034 01d8     +MOVW R26 , R16
001035 9698     +ADIW R26 , 40
001036 940e 17e7+CALL __PUTDP1
                 	__PUTD1RNS 16,40
                 ; 0003 0329 	}
                 _0x600E1:
                 ; 0003 032A 
                 ; 0003 032B 	return FR_OK;
                 _0x600D4:
001038 e0e0      	LDI  R30,LOW(0)
001039 c003      	RJMP _0x20C0006
                 ; 0003 032C 
                 ; 0003 032D fe_abort:
                 _0x600DF:
                 ; 0003 032E 	fs->flag = 0;
00103a 01d8      	MOVW R26,R16
00103b 940e 1629 	CALL SUBOPT_0x58
                 ; 0003 032F 	return FR_DISK_ERR;
                 _0x20C0006:
00103d 8119      	LDD  R17,Y+1
00103e 8108      	LDD  R16,Y+0
00103f 9666      	ADIW R28,22
001040 9508      	RET
                 ; 0003 0330 }
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Create a Directroy Object                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_DIR
                 ;
                 ;FRESULT pf_opendir (
                 ; 0003 033B 	DIR *dj,			/* Pointer to directory object to create */
                 ; 0003 033C 	const char *path	/* Pointer to the directory path */
                 ; 0003 033D )
                 ; 0003 033E {
                 _pf_opendir:
                 ; .FSTART _pf_opendir
                 ; 0003 033F 	FRESULT res;
                 ; 0003 0340 	BYTE sp[12], dir[32];
                 ; 0003 0341 	FATFS *fs = FatFs;
                 ; 0003 0342 
                 ; 0003 0343 
                 ; 0003 0344 	if (!fs) {				/* Check file system */
001041 93ba      	ST   -Y,R27
001042 93aa      	ST   -Y,R26
001043 97ac      	SBIW R28,44
001044 940e 1540 	CALL SUBOPT_0x36
                 ;	*dj -> Y+50
                 ;	*path -> Y+48
                 ;	res -> R17
                 ;	sp -> Y+36
                 ;	dir -> Y+4
                 ;	*fs -> R18,R19
001046 2e02      	MOV  R0,R18
001047 2a03      	OR   R0,R19
001048 f411      	BRNE _0x600E2
                 ; 0003 0345 		res = FR_NOT_ENABLED;
001049 e016      	LDI  R17,LOW(6)
                 ; 0003 0346 	} else {
00104a c025      	RJMP _0x600E3
                 _0x600E2:
                 ; 0003 0347 		fs->buf = dir;
00104b 940e 15e7 	CALL SUBOPT_0x4F
                 ; 0003 0348 		dj->fn = sp;
                +
00104d a9aa     +LDD R26 , Y + 50
00104e a9bb     +LDD R27 , Y + 50 + 1
00104f 9612     +ADIW R26 , 2
001050 93ed     +ST X + , R30
001051 93fc     +ST X , R31
                 	__PUTW1SNS 50,2
                 ; 0003 0349 		res = follow_path(dj, path);			/* Follow the path to the directory */
001052 940e 16a3 	CALL SUBOPT_0x69
001054 da81      	RCALL _follow_path_G003
001055 2f1e      	MOV  R17,R30
                 ; 0003 034A 		if (res == FR_OK) {						/* Follow completed */
001056 3010      	CPI  R17,0
001057 f4a9      	BRNE _0x600E4
                 ; 0003 034B 			if (dir[0]) {						/* It is not the root dir */
001058 81ec      	LDD  R30,Y+4
001059 30e0      	CPI  R30,0
00105a f061      	BREQ _0x600E5
                 ; 0003 034C 				if (dir[DIR_Attr] & AM_DIR) {	/* The object is a directory */
00105b 85ef      	LDD  R30,Y+15
00105c 71e0      	ANDI R30,LOW(0x10)
00105d f041      	BREQ _0x600E6
                 ; 0003 034D 					dj->sclust =
                 ; 0003 034E #if _FS_FAT32
                 ; 0003 034F 					((DWORD)LD_WORD(dir+DIR_FstClusHI) << 16) |
                 ; 0003 0350 #endif
                 ; 0003 0351 					LD_WORD(dir+DIR_FstClusLO);
00105e 940e 15f0 	CALL SUBOPT_0x50
                +
001060 a9aa     +LDD R26 , Y + 50
001061 a9bb     +LDD R27 , Y + 50 + 1
001062 9614     +ADIW R26 , 4
001063 940e 17e7+CALL __PUTDP1
                 	__PUTD1SNS 50,4
                 ; 0003 0352 				} else {						/* The object is not a directory */
001065 c001      	RJMP _0x600E7
                 _0x600E6:
                 ; 0003 0353 					res = FR_NO_PATH;
001066 e014      	LDI  R17,LOW(4)
                 ; 0003 0354 				}
                 _0x600E7:
                 ; 0003 0355 			}
                 ; 0003 0356 			if (res == FR_OK)
                 _0x600E5:
001067 3010      	CPI  R17,0
001068 f421      	BRNE _0x600E8
                 ; 0003 0357 				res = dir_rewind(dj);			/* Rewind dir */
001069 a9aa      	LDD  R26,Y+50
00106a a9bb      	LDD  R27,Y+50+1
00106b d842      	RCALL _dir_rewind_G003
00106c 2f1e      	MOV  R17,R30
                 ; 0003 0358 		}
                 _0x600E8:
                 ; 0003 0359 		if (res == FR_NO_FILE) res = FR_NO_PATH;
                 _0x600E4:
00106d 3013      	CPI  R17,3
00106e f409      	BRNE _0x600E9
00106f e014      	LDI  R17,LOW(4)
                 ; 0003 035A 	}
                 _0x600E9:
                 _0x600E3:
                 ; 0003 035B 
                 ; 0003 035C 	return res;
001070 c036      	RJMP _0x20C0005
                 ; 0003 035D }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read Directory Entry in Sequense                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT pf_readdir (
                 ; 0003 0367 	DIR *dj,			/* Pointer to the open directory object */
                 ; 0003 0368 	FILINFO *fno		/* Pointer to file information to return */
                 ; 0003 0369 )
                 ; 0003 036A {
                 _pf_readdir:
                 ; .FSTART _pf_readdir
                 ; 0003 036B 	FRESULT res;
                 ; 0003 036C 	BYTE sp[12], dir[32];
                 ; 0003 036D 	FATFS *fs = FatFs;
                 ; 0003 036E 
                 ; 0003 036F 
                 ; 0003 0370 	if (!fs) {				/* Check file system */
001071 93ba      	ST   -Y,R27
001072 93aa      	ST   -Y,R26
001073 97ac      	SBIW R28,44
001074 940e 1540 	CALL SUBOPT_0x36
                 ;	*dj -> Y+50
                 ;	*fno -> Y+48
                 ;	res -> R17
                 ;	sp -> Y+36
                 ;	dir -> Y+4
                 ;	*fs -> R18,R19
001076 2e02      	MOV  R0,R18
001077 2a03      	OR   R0,R19
001078 f411      	BRNE _0x600EA
                 ; 0003 0371 		res = FR_NOT_ENABLED;
001079 e016      	LDI  R17,LOW(6)
                 ; 0003 0372 	} else {
00107a c02c      	RJMP _0x600EB
                 _0x600EA:
                 ; 0003 0373 		fs->buf = dir;
00107b 940e 15e7 	CALL SUBOPT_0x4F
                 ; 0003 0374 		dj->fn = sp;
                +
00107d a9aa     +LDD R26 , Y + 50
00107e a9bb     +LDD R27 , Y + 50 + 1
00107f 9612     +ADIW R26 , 2
001080 93ed     +ST X + , R30
001081 93fc     +ST X , R31
                 	__PUTW1SNS 50,2
                 ; 0003 0375 		if (!fno) {
001082 a9e8      	LDD  R30,Y+48
001083 a9f9      	LDD  R31,Y+48+1
001084 9730      	SBIW R30,0
001085 f431      	BRNE _0x600EC
                 ; 0003 0376 			res = dir_rewind(dj);
001086 a9aa      	LDD  R26,Y+50
001087 a9bb      	LDD  R27,Y+50+1
001088 940e 08ae 	CALL _dir_rewind_G003
00108a 2f1e      	MOV  R17,R30
                 ; 0003 0377 		} else {
00108b c01b      	RJMP _0x600ED
                 _0x600EC:
                 ; 0003 0378 			res = dir_read(dj);
00108c a9aa      	LDD  R26,Y+50
00108d a9bb      	LDD  R27,Y+50+1
00108e d92c      	RCALL _dir_read_G003
00108f 2f1e      	MOV  R17,R30
                 ; 0003 0379 			if (res == FR_NO_FILE) {
001090 3013      	CPI  R17,3
001091 f429      	BRNE _0x600EE
                 ; 0003 037A 				dj->sect = 0;
001092 a9aa      	LDD  R26,Y+50
001093 a9bb      	LDD  R27,Y+50+1
001094 940e 156c 	CALL SUBOPT_0x3C
                 ; 0003 037B 				res = FR_OK;
001096 e010      	LDI  R17,LOW(0)
                 ; 0003 037C 			}
                 ; 0003 037D 			if (res == FR_OK) {				/* A valid entry is found */
                 _0x600EE:
001097 3010      	CPI  R17,0
001098 f471      	BRNE _0x600EF
                 ; 0003 037E 				get_fileinfo(dj, fno);		/* Get the object information */
001099 940e 16a3 	CALL SUBOPT_0x69
00109b d9d9      	RCALL _get_fileinfo_G003
                 ; 0003 037F 				res = dir_next(dj);			/* Increment index for next */
00109c a9aa      	LDD  R26,Y+50
00109d a9bb      	LDD  R27,Y+50+1
00109e d85f      	RCALL _dir_next_G003
00109f 2f1e      	MOV  R17,R30
                 ; 0003 0380 				if (res == FR_NO_FILE) {
0010a0 3013      	CPI  R17,3
0010a1 f429      	BRNE _0x600F0
                 ; 0003 0381 					dj->sect = 0;
0010a2 a9aa      	LDD  R26,Y+50
0010a3 a9bb      	LDD  R27,Y+50+1
0010a4 940e 156c 	CALL SUBOPT_0x3C
                 ; 0003 0382 					res = FR_OK;
0010a6 e010      	LDI  R17,LOW(0)
                 ; 0003 0383 				}
                 ; 0003 0384 			}
                 _0x600F0:
                 ; 0003 0385 		}
                 _0x600EF:
                 _0x600ED:
                 ; 0003 0386 	}
                 _0x600EB:
                 ; 0003 0387 
                 ; 0003 0388 	return res;
                 _0x20C0005:
0010a7 2fe1      	MOV  R30,R17
0010a8 940e 1872 	CALL __LOADLOCR4
0010aa 96e4      	ADIW R28,52
0010ab 9508      	RET
                 ; 0003 0389 }
                 ; .FEND
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Rename file inside provided directory                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;FRESULT pf_rename (
                 ; 0003 0390     const char* dirname,
                 ; 0003 0391     const char* oldname,
                 ; 0003 0392     const char* newname
                 ; 0003 0393 )
                 ; 0003 0394 {
                 _pf_rename:
                 ; .FSTART _pf_rename
                 ; 0003 0395     FRESULT res;
                 ; 0003 0396     FILINFO fno;
                 ; 0003 0397     DIR dir;
                 ; 0003 0398     int i,j;
                 ; 0003 0399     BYTE rwbuf[512];
                 ; 0003 039A 
                 ; 0003 039B     res = pf_opendir(&dir, dirname);
0010ac 93ba      	ST   -Y,R27
0010ad 93aa      	ST   -Y,R26
0010ae 97a6      	SBIW R28,38
0010af 50d2      	SUBI R29,2
0010b0 940e 1869 	CALL __SAVELOCR6
                 ;	*dirname -> Y+560
                 ;	*oldname -> Y+558
                 ;	*newname -> Y+556
                 ;	res -> R17
                 ;	fno -> Y+534
                 ;	dir -> Y+518
                 ;	i -> R18,R19
                 ;	j -> R20,R21
                 ;	rwbuf -> Y+6
0010b2 940e 16aa 	CALL SUBOPT_0x6A
0010b4 940e 16b0 	CALL SUBOPT_0x6B
                 ; 0003 039C     if (res == FR_OK) {
0010b6 f009      	BREQ PC+2
0010b7 c0a8      	RJMP _0x600F1
                 ; 0003 039D         i = strlen(oldname);
0010b8 940e 16bb 	CALL SUBOPT_0x6C
0010ba 019f      	MOVW R18,R30
                 ; 0003 039E         j = strlen(oldname);
0010bb 940e 16bb 	CALL SUBOPT_0x6C
0010bd 01af      	MOVW R20,R30
                 ; 0003 039F         if(i==6 || j==6){
                 ; 0003 03A0 
                 ; 0003 03A1         }
                 ; 0003 03A2         for (;;) {
                 _0x600F6:
                 ; 0003 03A3             res = pf_readdir(&dir, &fno);
0010be 940e 16aa 	CALL SUBOPT_0x6A
0010c0 940e 16c3 	CALL SUBOPT_0x6D
                 ; 0003 03A4             if (res != FR_OK || fno.fname[0] == 0) break;
0010c2 f431      	BRNE _0x600F9
0010c3 01fe      	MOVW R30,R28
0010c4 5eea      	SUBI R30,LOW(-(534))
0010c5 4ffd      	SBCI R31,HIGH(-(534))
0010c6 85a1      	LDD  R26,Z+9
0010c7 30a0      	CPI  R26,LOW(0x0)
0010c8 f409      	BRNE _0x600F8
                 _0x600F9:
0010c9 c096      	RJMP _0x600F7
                 ; 0003 03A5             for(j=0;j<i;j++){
                 _0x600F8:
                +
0010ca e040     +LDI R20 , LOW ( 0 )
0010cb e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x600FC:
                +
0010cc 1742     +CP R20 , R18
0010cd 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
0010ce f484      	BRGE _0x600FD
                 ; 0003 03A6                 if(fno.fname[j] != oldname[j]){
0010cf 940e 16cb 	CALL SUBOPT_0x6E
                +
0010d1 01de     +MOVW R26 , R28
0010d2 5da2     +SUBI R26 , LOW ( - 558 )
0010d3 4fbd     +SBCI R27 , HIGH ( - 558 )
0010d4 900d     +LD R0 , X +
0010d5 91bc     +LD R27 , X
0010d6 2da0     +MOV R26 , R0
                 	__GETW2SX 558
0010d7 0fae      	ADD  R26,R30
0010d8 1fbf      	ADC  R27,R31
0010d9 91ec      	LD   R30,X
0010da 15e1      	CP   R30,R1
0010db f419      	BRNE _0x600FD
                 ; 0003 03A7                     break;
                 ; 0003 03A8                 }
                 ; 0003 03A9             }
                +
0010dc 5f4f     +SUBI R20 , LOW ( - 1 )
0010dd 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
0010de cfed      	RJMP _0x600FC
                 _0x600FD:
                 ; 0003 03AA             if(i==j){
                +
0010df 1742     +CP R20 , R18
0010e0 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
0010e1 f009      	BREQ PC+2
0010e2 c07b      	RJMP _0x600FF
                 ; 0003 03AB 
                 ; 0003 03AC                res = disk_readp(rwbuf,dir.sect,0,512);
0010e3 01fe      	MOVW R30,R28
0010e4 9636      	ADIW R30,6
0010e5 93fa      	ST   -Y,R31
0010e6 93ea      	ST   -Y,R30
0010e7 940e 16d4 	CALL SUBOPT_0x6F
0010e9 940e 180d 	CALL __PUTPARD1
0010eb 940e 162e 	CALL SUBOPT_0x59
0010ed e0a0      	LDI  R26,LOW(512)
0010ee e0b2      	LDI  R27,HIGH(512)
0010ef 940e 069b 	CALL _disk_readp
0010f1 2f1e      	MOV  R17,R30
                 ; 0003 03AD                if (res != FR_OK) break;
0010f2 3010      	CPI  R17,0
0010f3 f009      	BREQ _0x60100
0010f4 c06b      	RJMP _0x600F7
                 ; 0003 03AE                i = strlen(newname);
                 _0x60100:
0010f5 940e 16dc 	CALL SUBOPT_0x70
0010f7 940e 1320 	CALL _strlen
0010f9 019f      	MOVW R18,R30
                 ; 0003 03AF                for(j=0;j<i;j++){
                +
0010fa e040     +LDI R20 , LOW ( 0 )
0010fb e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x60102:
                +
0010fc 1742     +CP R20 , R18
0010fd 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
0010fe f4f4      	BRGE _0x60103
                 ; 0003 03B0                   rwbuf[((dir.index-1)*32)%512+j]=newname[j];
                +
0010ff 01fe     +MOVW R30 , R28
001100 5fea     +SUBI R30 , LOW ( - 518 )
001101 4ffd     +SBCI R31 , HIGH ( - 518 )
001102 9001     +LD R0 , Z +
001103 81f0     +LD R31 , Z
001104 2de0     +MOV R30 , R0
                 	__GETW1SX 518
001105 9731      	SBIW R30,1
001106 0fee      	LSL  R30
001107 1fff      	ROL  R31
001108 940e 1751 	CALL __LSLW4
00110a 70f1      	ANDI R31,HIGH(0x1FF)
00110b 0fe4      	ADD  R30,R20
00110c 1ff5      	ADC  R31,R21
00110d 01de      	MOVW R26,R28
00110e 9616      	ADIW R26,6
00110f 0fea      	ADD  R30,R26
001110 1ffb      	ADC  R31,R27
001111 01bf      	MOVW R22,R30
001112 01fa      	MOVW R30,R20
001113 940e 16dc 	CALL SUBOPT_0x70
001115 0fae      	ADD  R26,R30
001116 1fbf      	ADC  R27,R31
001117 91ec      	LD   R30,X
001118 01db      	MOVW R26,R22
001119 93ec      	ST   X,R30
                 ; 0003 03B1                }
                +
00111a 5f4f     +SUBI R20 , LOW ( - 1 )
00111b 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
00111c cfdf      	RJMP _0x60102
                 _0x60103:
                 ; 0003 03B2                res = disk_writep(0,dir.sect);
00111d 940e 162e 	CALL SUBOPT_0x59
00111f 940e 16d4 	CALL SUBOPT_0x6F
001121 01df      	MOVW R26,R30
001122 01cb      	MOVW R24,R22
001123 940e 16e3 	CALL SUBOPT_0x71
                 ; 0003 03B3                if (res != FR_OK) break;
001125 f5d1      	BRNE _0x600F7
                 ; 0003 03B4                res = disk_writep(rwbuf,512);
001126 01fe      	MOVW R30,R28
001127 9636      	ADIW R30,6
001128 93fa      	ST   -Y,R31
001129 93ea      	ST   -Y,R30
00112a 940e 14bc 	CALL SUBOPT_0x1F
00112c 940e 16e3 	CALL SUBOPT_0x71
                 ; 0003 03B5                if (res != FR_OK) break;
00112e f589      	BRNE _0x600F7
                 ; 0003 03B6                res = disk_writep(0,0);
00112f 940e 162e 	CALL SUBOPT_0x59
001131 940e 14b7 	CALL SUBOPT_0x1E
001133 940e 16e3 	CALL SUBOPT_0x71
                 ; 0003 03B7                if (res != FR_OK) break;
001135 f551      	BRNE _0x600F7
                 ; 0003 03B8                res = pf_opendir(&dir, dirname);
001136 940e 16aa 	CALL SUBOPT_0x6A
001138 940e 16b0 	CALL SUBOPT_0x6B
                 ; 0003 03B9                if (res != FR_OK) break;
00113a f529      	BRNE _0x600F7
                 ; 0003 03BA                res = pf_readdir(&dir, &fno);
00113b 940e 16aa 	CALL SUBOPT_0x6A
00113d 940e 16c3 	CALL SUBOPT_0x6D
                 ; 0003 03BB                if (res != FR_OK || fno.fname[0] == 0) break;
00113f f431      	BRNE _0x60109
001140 01fe      	MOVW R30,R28
001141 5eea      	SUBI R30,LOW(-(534))
001142 4ffd      	SBCI R31,HIGH(-(534))
001143 85a1      	LDD  R26,Z+9
001144 30a0      	CPI  R26,LOW(0x0)
001145 f409      	BRNE _0x60108
                 _0x60109:
001146 c019      	RJMP _0x600F7
                 ; 0003 03BC                for(j=0;j<i;j++){
                 _0x60108:
                +
001147 e040     +LDI R20 , LOW ( 0 )
001148 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x6010C:
                +
001149 1742     +CP R20 , R18
00114a 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
00114b f474      	BRGE _0x6010D
                 ; 0003 03BD                     if(fno.fname[j] != newname[j]){
00114c 940e 16cb 	CALL SUBOPT_0x6E
00114e 940e 16dc 	CALL SUBOPT_0x70
001150 0fae      	ADD  R26,R30
001151 1fbf      	ADC  R27,R31
001152 91ec      	LD   R30,X
001153 15e1      	CP   R30,R1
001154 f011      	BREQ _0x6010E
                 ; 0003 03BE                         return FR_NO_FILE;
001155 e0e3      	LDI  R30,LOW(3)
001156 c00a      	RJMP _0x20C0004
                 ; 0003 03BF                     }
                 ; 0003 03C0                }
                 _0x6010E:
                +
001157 5f4f     +SUBI R20 , LOW ( - 1 )
001158 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
001159 cfef      	RJMP _0x6010C
                 _0x6010D:
                 ; 0003 03C1                if(i==j){
                +
00115a 1742     +CP R20 , R18
00115b 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
00115c f019      	BREQ _0x600F7
                 ; 0003 03C2                   break;
                 ; 0003 03C3                }
                 ; 0003 03C4             }
                 ; 0003 03C5             else{
00115d c001      	RJMP _0x60110
                 _0x600FF:
                 ; 0003 03C6                res=FR_NO_FILE;
00115e e013      	LDI  R17,LOW(3)
                 ; 0003 03C7             }
                 _0x60110:
                 ; 0003 03C8         }
00115f cf5e      	RJMP _0x600F6
                 _0x600F7:
                 ; 0003 03C9     }
                 ; 0003 03CA 
                 ; 0003 03CB     return res;
                 _0x600F1:
001160 2fe1      	MOV  R30,R17
                 _0x20C0004:
001161 940e 1870 	CALL __LOADLOCR6
001163 96e2      	ADIW R28,50
001164 5fde      	SUBI R29,-2
001165 9508      	RET
                 ; 0003 03CC }
                 ; .FEND
                 ;#endif /* _USE_DIR */
                 ;
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 
                 	.CSEG
                 _putchar:
                 ; .FSTART _putchar
001166 93aa      	ST   -Y,R26
                 putchar0:
001167 9b5d           sbis usr,udre
001168 cffe           rjmp putchar0
001169 81e8           ld   r30,y
00116a b9ec           out  udr,r30
00116b 940c 13e2 	JMP  _0x20C0001
                 ; .FEND
                 _put_usart_G100:
                 ; .FSTART _put_usart_G100
00116d 93ba      	ST   -Y,R27
00116e 93aa      	ST   -Y,R26
00116f 81aa      	LDD  R26,Y+2
001170 dff5      	RCALL _putchar
001171 81a8      	LD   R26,Y
001172 81b9      	LDD  R27,Y+1
001173 91ed      	LD   R30,X+
001174 91fd      	LD   R31,X+
001175 9631      	ADIW R30,1
001176 93fe      	ST   -X,R31
001177 93ee      	ST   -X,R30
001178 940c 13a1 	JMP  _0x20C0002
                 ; .FEND
                 __print_G100:
                 ; .FSTART __print_G100
00117a 93ba      	ST   -Y,R27
00117b 93aa      	ST   -Y,R26
00117c 9728      	SBIW R28,8
00117d 940e 1869 	CALL __SAVELOCR6
00117f e010      	LDI  R17,0
001180 85ae      	LDD  R26,Y+14
001181 85bf      	LDD  R27,Y+14+1
001182 940e 1538 	CALL SUBOPT_0x34
                 _0x2000016:
001184 01de      	MOVW R26,R28
001185 9654      	ADIW R26,20
001186 940e 16e8 	CALL SUBOPT_0x72
                +
001188 bf6b     +OUT RAMPZ , R22
001189 91e6     +ELPM R30 , Z
                 	__GETBRPF 30
00118a 2f2e      	MOV  R18,R30
00118b 30e0      	CPI  R30,0
00118c f409      	BRNE PC+2
00118d c12a      	RJMP _0x2000018
00118e 2fe1      	MOV  R30,R17
00118f 30e0      	CPI  R30,0
001190 f439      	BRNE _0x200001C
001191 3225      	CPI  R18,37
001192 f411      	BRNE _0x200001D
001193 e011      	LDI  R17,LOW(1)
001194 c002      	RJMP _0x200001E
                 _0x200001D:
001195 940e 16ee 	CALL SUBOPT_0x73
                 _0x200001E:
001197 c11f      	RJMP _0x200001B
                 _0x200001C:
001198 30e1      	CPI  R30,LOW(0x1)
001199 f4a9      	BRNE _0x200001F
00119a 3225      	CPI  R18,37
00119b f419      	BRNE _0x2000020
00119c 940e 16ee 	CALL SUBOPT_0x73
00119e c117      	RJMP _0x20000CC
                 _0x2000020:
00119f e012      	LDI  R17,LOW(2)
0011a0 e040      	LDI  R20,LOW(0)
0011a1 e000      	LDI  R16,LOW(0)
0011a2 322d      	CPI  R18,45
0011a3 f411      	BRNE _0x2000021
0011a4 e001      	LDI  R16,LOW(1)
0011a5 c111      	RJMP _0x200001B
                 _0x2000021:
0011a6 322b      	CPI  R18,43
0011a7 f411      	BRNE _0x2000022
0011a8 e24b      	LDI  R20,LOW(43)
0011a9 c10d      	RJMP _0x200001B
                 _0x2000022:
0011aa 3220      	CPI  R18,32
0011ab f411      	BRNE _0x2000023
0011ac e240      	LDI  R20,LOW(32)
0011ad c109      	RJMP _0x200001B
                 _0x2000023:
0011ae c002      	RJMP _0x2000024
                 _0x200001F:
0011af 30e2      	CPI  R30,LOW(0x2)
0011b0 f439      	BRNE _0x2000025
                 _0x2000024:
0011b1 e050      	LDI  R21,LOW(0)
0011b2 e013      	LDI  R17,LOW(3)
0011b3 3320      	CPI  R18,48
0011b4 f411      	BRNE _0x2000026
0011b5 6800      	ORI  R16,LOW(128)
0011b6 c100      	RJMP _0x200001B
                 _0x2000026:
0011b7 c003      	RJMP _0x2000027
                 _0x2000025:
0011b8 30e3      	CPI  R30,LOW(0x3)
0011b9 f009      	BREQ PC+2
0011ba c0fc      	RJMP _0x200001B
                 _0x2000027:
0011bb 3320      	CPI  R18,48
0011bc f010      	BRLO _0x200002A
0011bd 332a      	CPI  R18,58
0011be f008      	BRLO _0x200002B
                 _0x200002A:
0011bf c007      	RJMP _0x2000029
                 _0x200002B:
0011c0 e0aa      	LDI  R26,LOW(10)
0011c1 9f5a      	MUL  R21,R26
0011c2 2d50      	MOV  R21,R0
0011c3 2fe2      	MOV  R30,R18
0011c4 53e0      	SUBI R30,LOW(48)
0011c5 0f5e      	ADD  R21,R30
0011c6 c0f0      	RJMP _0x200001B
                 _0x2000029:
0011c7 2fe2      	MOV  R30,R18
0011c8 36e3      	CPI  R30,LOW(0x63)
0011c9 f449      	BRNE _0x200002F
0011ca 940e 16f5 	CALL SUBOPT_0x74
0011cc 89ea      	LDD  R30,Y+18
0011cd 89fb      	LDD  R31,Y+18+1
0011ce 81a4      	LDD  R26,Z+4
0011cf 93aa      	ST   -Y,R26
0011d0 940e 16fb 	CALL SUBOPT_0x75
0011d2 c0e3      	RJMP _0x2000030
                 _0x200002F:
0011d3 37e3      	CPI  R30,LOW(0x73)
0011d4 f461      	BRNE _0x2000032
0011d5 940e 16f5 	CALL SUBOPT_0x74
0011d7 940e 1701 	CALL SUBOPT_0x76
0011d9 83ee      	STD  Y+6,R30
0011da 83ff      	STD  Y+6+1,R31
0011db 81ae      	LDD  R26,Y+6
0011dc 81bf      	LDD  R27,Y+6+1
0011dd 940e 1320 	CALL _strlen
0011df 2f1e      	MOV  R17,R30
0011e0 c011      	RJMP _0x2000033
                 _0x2000032:
0011e1 37e0      	CPI  R30,LOW(0x70)
0011e2 f499      	BRNE _0x2000035
0011e3 940e 16f5 	CALL SUBOPT_0x74
0011e5 89aa      	LDD  R26,Y+18
0011e6 89bb      	LDD  R27,Y+18+1
0011e7 9614      	ADIW R26,4
0011e8 940e 17dc 	CALL __GETD1P
0011ea 940e 1454 	CALL SUBOPT_0xF
0011ec 940e 1459 	CALL SUBOPT_0x10
0011ee 940e 132c 	CALL _strlenf
0011f0 2f1e      	MOV  R17,R30
0011f1 6008      	ORI  R16,LOW(8)
                 _0x2000033:
0011f2 6002      	ORI  R16,LOW(2)
0011f3 770f      	ANDI R16,LOW(127)
0011f4 e030      	LDI  R19,LOW(0)
0011f5 c03a      	RJMP _0x2000036
                 _0x2000035:
0011f6 36e4      	CPI  R30,LOW(0x64)
0011f7 f011      	BREQ _0x2000039
0011f8 36e9      	CPI  R30,LOW(0x69)
0011f9 f411      	BRNE _0x200003A
                 _0x2000039:
0011fa 6004      	ORI  R16,LOW(4)
0011fb c002      	RJMP _0x200003B
                 _0x200003A:
0011fc 37e5      	CPI  R30,LOW(0x75)
0011fd f441      	BRNE _0x200003C
                 _0x200003B:
                +
0011fe e5e0     +LDI R30 , LOW ( 2 * _tbl10_G100 + ( 0 ) )
0011ff e0f1     +LDI R31 , HIGH ( 2 * _tbl10_G100 + ( 0 ) )
001200 e060     +LDI R22 , BYTE3 ( 2 * _tbl10_G100 + ( 0 ) )
001201 e070     +LDI R23 , BYTE4 ( 2 * _tbl10_G100 + ( 0 ) )
                 	__POINTD1FN _tbl10_G100,0
001202 940e 1454 	CALL SUBOPT_0xF
001204 e015      	LDI  R17,LOW(5)
001205 c00e      	RJMP _0x200003D
                 _0x200003C:
001206 35e8      	CPI  R30,LOW(0x58)
001207 f411      	BRNE _0x200003F
001208 6008      	ORI  R16,LOW(8)
001209 c003      	RJMP _0x2000040
                 _0x200003F:
00120a 37e8      	CPI  R30,LOW(0x78)
00120b f009      	BREQ PC+2
00120c c0a9      	RJMP _0x2000071
                 _0x2000040:
                +
00120d e5ea     +LDI R30 , LOW ( 2 * _tbl16_G100 + ( 0 ) )
00120e e0f1     +LDI R31 , HIGH ( 2 * _tbl16_G100 + ( 0 ) )
00120f e060     +LDI R22 , BYTE3 ( 2 * _tbl16_G100 + ( 0 ) )
001210 e070     +LDI R23 , BYTE4 ( 2 * _tbl16_G100 + ( 0 ) )
                 	__POINTD1FN _tbl16_G100,0
001211 940e 1454 	CALL SUBOPT_0xF
001213 e014      	LDI  R17,LOW(4)
                 _0x200003D:
001214 ff02      	SBRS R16,2
001215 c014      	RJMP _0x2000042
001216 940e 16f5 	CALL SUBOPT_0x74
001218 940e 1701 	CALL SUBOPT_0x76
00121a 87ec      	STD  Y+12,R30
00121b 87fd      	STD  Y+12+1,R31
00121c 85ad      	LDD  R26,Y+13
00121d 23aa      	TST  R26
00121e f42a      	BRPL _0x2000043
00121f 940e 1741 	CALL __ANEGW1
001221 87ec      	STD  Y+12,R30
001222 87fd      	STD  Y+12+1,R31
001223 e24d      	LDI  R20,LOW(45)
                 _0x2000043:
001224 3040      	CPI  R20,0
001225 f011      	BREQ _0x2000044
001226 5f1f      	SUBI R17,-LOW(1)
001227 c001      	RJMP _0x2000045
                 _0x2000044:
001228 7f0b      	ANDI R16,LOW(251)
                 _0x2000045:
001229 c006      	RJMP _0x2000046
                 _0x2000042:
00122a 940e 16f5 	CALL SUBOPT_0x74
00122c 940e 1701 	CALL SUBOPT_0x76
00122e 87ec      	STD  Y+12,R30
00122f 87fd      	STD  Y+12+1,R31
                 _0x2000046:
                 _0x2000036:
001230 fd00      	SBRC R16,0
001231 c011      	RJMP _0x2000047
                 _0x2000048:
001232 1715      	CP   R17,R21
001233 f478      	BRSH _0x200004A
001234 ff07      	SBRS R16,7
001235 c008      	RJMP _0x200004B
001236 ff02      	SBRS R16,2
001237 c004      	RJMP _0x200004C
001238 7f0b      	ANDI R16,LOW(251)
001239 2f24      	MOV  R18,R20
00123a 5011      	SUBI R17,LOW(1)
00123b c001      	RJMP _0x200004D
                 _0x200004C:
00123c e320      	LDI  R18,LOW(48)
                 _0x200004D:
00123d c001      	RJMP _0x200004E
                 _0x200004B:
00123e e220      	LDI  R18,LOW(32)
                 _0x200004E:
00123f 940e 16ee 	CALL SUBOPT_0x73
001241 5051      	SUBI R21,LOW(1)
001242 cfef      	RJMP _0x2000048
                 _0x200004A:
                 _0x2000047:
001243 2f31      	MOV  R19,R17
001244 ff01      	SBRS R16,1
001245 c018      	RJMP _0x200004F
                 _0x2000050:
001246 3030      	CPI  R19,0
001247 f0a9      	BREQ _0x2000052
001248 ff03      	SBRS R16,3
001249 c007      	RJMP _0x2000053
00124a 01de      	MOVW R26,R28
00124b 9616      	ADIW R26,6
00124c 940e 16e8 	CALL SUBOPT_0x72
                +
00124e bf6b     +OUT RAMPZ , R22
00124f 9126     +ELPM R18 , Z
                 	__GETBRPF 18
001250 c005      	RJMP _0x2000054
                 _0x2000053:
001251 81ae      	LDD  R26,Y+6
001252 81bf      	LDD  R27,Y+6+1
001253 912d      	LD   R18,X+
001254 83ae      	STD  Y+6,R26
001255 83bf      	STD  Y+6+1,R27
                 _0x2000054:
001256 940e 16ee 	CALL SUBOPT_0x73
001258 3050      	CPI  R21,0
001259 f009      	BREQ _0x2000055
00125a 5051      	SUBI R21,LOW(1)
                 _0x2000055:
00125b 5031      	SUBI R19,LOW(1)
00125c cfe9      	RJMP _0x2000050
                 _0x2000052:
00125d c04e      	RJMP _0x2000056
                 _0x200004F:
                 _0x2000058:
00125e e320      	LDI  R18,LOW(48)
00125f 940e 144f 	CALL SUBOPT_0xE
001261 940e 17f1 	CALL __GETW1PF
001263 87ea      	STD  Y+10,R30
001264 87fb      	STD  Y+10+1,R31
001265 940e 144f 	CALL SUBOPT_0xE
                +
001267 5fee     +SUBI R30 , LOW ( - 2 )
001268 4fff     +SBCI R31 , HIGH ( - 2 )
001269 4f6f     +SBCI R22 , BYTE3 ( - 2 )
00126a 4f7f     +SBCI R23 , BYTE4 ( - 2 )
                 	__ADDD1N 2
00126b 940e 1454 	CALL SUBOPT_0xF
                 _0x200005A:
00126d 85ea      	LDD  R30,Y+10
00126e 85fb      	LDD  R31,Y+10+1
00126f 85ac      	LDD  R26,Y+12
001270 85bd      	LDD  R27,Y+12+1
001271 17ae      	CP   R26,R30
001272 07bf      	CPC  R27,R31
001273 f050      	BRLO _0x200005C
001274 5f2f      	SUBI R18,-LOW(1)
001275 85aa      	LDD  R26,Y+10
001276 85bb      	LDD  R27,Y+10+1
001277 85ec      	LDD  R30,Y+12
001278 85fd      	LDD  R31,Y+12+1
001279 1bea      	SUB  R30,R26
00127a 0bfb      	SBC  R31,R27
00127b 87ec      	STD  Y+12,R30
00127c 87fd      	STD  Y+12+1,R31
00127d cfef      	RJMP _0x200005A
                 _0x200005C:
00127e 332a      	CPI  R18,58
00127f f028      	BRLO _0x200005D
001280 ff03      	SBRS R16,3
001281 c002      	RJMP _0x200005E
001282 5f29      	SUBI R18,-LOW(7)
001283 c001      	RJMP _0x200005F
                 _0x200005E:
001284 5d29      	SUBI R18,-LOW(39)
                 _0x200005F:
                 _0x200005D:
001285 fd04      	SBRC R16,4
001286 c01a      	RJMP _0x2000061
001287 3321      	CPI  R18,49
001288 f420      	BRSH _0x2000063
001289 85aa      	LDD  R26,Y+10
00128a 85bb      	LDD  R27,Y+10+1
00128b 9711      	SBIW R26,1
00128c f409      	BRNE _0x2000062
                 _0x2000063:
00128d c009      	RJMP _0x20000CD
                 _0x2000062:
00128e 1753      	CP   R21,R19
00128f f010      	BRLO _0x2000067
001290 ff00      	SBRS R16,0
001291 c001      	RJMP _0x2000068
                 _0x2000067:
001292 c013      	RJMP _0x2000066
                 _0x2000068:
001293 e220      	LDI  R18,LOW(32)
001294 ff07      	SBRS R16,7
001295 c00b      	RJMP _0x2000069
001296 e320      	LDI  R18,LOW(48)
                 _0x20000CD:
001297 6100      	ORI  R16,LOW(16)
001298 ff02      	SBRS R16,2
001299 c007      	RJMP _0x200006A
00129a 7f0b      	ANDI R16,LOW(251)
00129b 934a      	ST   -Y,R20
00129c 940e 16fb 	CALL SUBOPT_0x75
00129e 3050      	CPI  R21,0
00129f f009      	BREQ _0x200006B
0012a0 5051      	SUBI R21,LOW(1)
                 _0x200006B:
                 _0x200006A:
                 _0x2000069:
                 _0x2000061:
0012a1 940e 16ee 	CALL SUBOPT_0x73
0012a3 3050      	CPI  R21,0
0012a4 f009      	BREQ _0x200006C
0012a5 5051      	SUBI R21,LOW(1)
                 _0x200006C:
                 _0x2000066:
0012a6 5031      	SUBI R19,LOW(1)
0012a7 85aa      	LDD  R26,Y+10
0012a8 85bb      	LDD  R27,Y+10+1
0012a9 9712      	SBIW R26,2
0012aa f008      	BRLO _0x2000059
0012ab cfb2      	RJMP _0x2000058
                 _0x2000059:
                 _0x2000056:
0012ac ff00      	SBRS R16,0
0012ad c008      	RJMP _0x200006D
                 _0x200006E:
0012ae 3050      	CPI  R21,0
0012af f031      	BREQ _0x2000070
0012b0 5051      	SUBI R21,LOW(1)
0012b1 e2e0      	LDI  R30,LOW(32)
0012b2 93ea      	ST   -Y,R30
0012b3 940e 16fb 	CALL SUBOPT_0x75
0012b5 cff8      	RJMP _0x200006E
                 _0x2000070:
                 _0x200006D:
                 _0x2000071:
                 _0x2000030:
                 _0x20000CC:
0012b6 e010      	LDI  R17,LOW(0)
                 _0x200001B:
0012b7 cecc      	RJMP _0x2000016
                 _0x2000018:
0012b8 85ae      	LDD  R26,Y+14
0012b9 85bf      	LDD  R27,Y+14+1
0012ba 940e 17d8 	CALL __GETW1P
                 _0x20C0003:
0012bc 940e 1870 	CALL __LOADLOCR6
0012be 9668      	ADIW R28,24
0012bf 9508      	RET
                 ; .FEND
                 _printf:
                 ; .FSTART _printf
0012c0 92ff      	PUSH R15
0012c1 2ef8      	MOV  R15,R24
0012c2 9726      	SBIW R28,6
0012c3 931a      	ST   -Y,R17
0012c4 930a      	ST   -Y,R16
0012c5 01de      	MOVW R26,R28
0012c6 9614      	ADIW R26,4
0012c7 940e 171f 	CALL __ADDW2R15
0012c9 018d      	MOVW R16,R26
0012ca e0e0      	LDI  R30,LOW(0)
0012cb 83ec      	STD  Y+4,R30
0012cc 83ed      	STD  Y+4+1,R30
0012cd 83ee      	STD  Y+6,R30
0012ce 83ef      	STD  Y+6+1,R30
0012cf 01de      	MOVW R26,R28
0012d0 9618      	ADIW R26,8
0012d1 940e 171f 	CALL __ADDW2R15
0012d3 940e 17dc 	CALL __GETD1P
0012d5 940e 180d 	CALL __PUTPARD1
0012d7 931a      	ST   -Y,R17
0012d8 930a      	ST   -Y,R16
0012d9 e6ed      	LDI  R30,LOW(_put_usart_G100)
0012da e1f1      	LDI  R31,HIGH(_put_usart_G100)
0012db 93fa      	ST   -Y,R31
0012dc 93ea      	ST   -Y,R30
0012dd 01de      	MOVW R26,R28
0012de 961a      	ADIW R26,10
0012df de9a      	RCALL __print_G100
0012e0 8119      	LDD  R17,Y+1
0012e1 8108      	LDD  R16,Y+0
0012e2 9628      	ADIW R28,8
0012e3 90ff      	POP  R15
0012e4 9508      	RET
                 ; .FEND
                 
                 	.CSEG
                 _itoa:
                 ; .FSTART _itoa
0012e5 93ba      	ST   -Y,R27
0012e6 93aa      	ST   -Y,R26
0012e7 91a9          ld   r26,y+
0012e8 91b9          ld   r27,y+
0012e9 91e9          ld   r30,y+
0012ea 91f9          ld   r31,y+
0012eb 9630          adiw r30,0
0012ec f42a          brpl __itoa0
0012ed 95e0          com  r30
0012ee 95f0          com  r31
0012ef 9631          adiw r30,1
0012f0 e26d          ldi  r22,'-'
0012f1 936d          st   x+,r22
                 __itoa0:
0012f2 94e8          clt
0012f3 e180          ldi  r24,low(10000)
0012f4 e297          ldi  r25,high(10000)
0012f5 d00d          rcall __itoa1
0012f6 ee88          ldi  r24,low(1000)
0012f7 e093          ldi  r25,high(1000)
0012f8 d00a          rcall __itoa1
0012f9 e684          ldi  r24,100
0012fa 2799          clr  r25
0012fb d007          rcall __itoa1
0012fc e08a          ldi  r24,10
0012fd d005          rcall __itoa1
0012fe 2f6e          mov  r22,r30
0012ff d010          rcall __itoa5
001300 2766          clr  r22
001301 936c          st   x,r22
001302 9508          ret
                 
                 __itoa1:
001303 2766          clr	 r22
                 __itoa2:
001304 17e8          cp   r30,r24
001305 07f9          cpc  r31,r25
001306 f020          brlo __itoa3
001307 9563          inc  r22
001308 1be8          sub  r30,r24
001309 0bf9          sbc  r31,r25
00130a f7c9          brne __itoa2
                 __itoa3:
00130b 2366          tst  r22
00130c f411          brne __itoa4
00130d f016          brts __itoa5
00130e 9508          ret
                 __itoa4:
00130f 9468          set
                 __itoa5:
001310 5d60          subi r22,-0x30
001311 936d          st   x+,r22
001312 9508          ret
                 ; .FEND
                 
                 	.DSEG
                 
                 	.CSEG
                 
                 	.CSEG
                 _strcpy:
                 ; .FSTART _strcpy
001313 93ba      	ST   -Y,R27
001314 93aa      	ST   -Y,R26
001315 91e9          ld   r30,y+
001316 91f9          ld   r31,y+
001317 91a9          ld   r26,y+
001318 91b9          ld   r27,y+
001319 01cd          movw r24,r26
                 strcpy0:
00131a 9161          ld   r22,z+
00131b 936d          st   x+,r22
00131c 2366          tst  r22
00131d f7e1          brne strcpy0
00131e 01fc          movw r30,r24
00131f 9508          ret
                 ; .FEND
                 _strlen:
                 ; .FSTART _strlen
001320 93ba      	ST   -Y,R27
001321 93aa      	ST   -Y,R26
001322 91a9          ld   r26,y+
001323 91b9          ld   r27,y+
001324 27ee          clr  r30
001325 27ff          clr  r31
                 strlen0:
001326 916d          ld   r22,x+
001327 2366          tst  r22
001328 f011          breq strlen1
001329 9631          adiw r30,1
00132a cffb          rjmp strlen0
                 strlen1:
00132b 9508          ret
                 ; .FEND
                 _strlenf:
                 ; .FSTART _strlenf
00132c 940e 1812 	CALL __PUTPARD2
00132e 27aa          clr  r26
00132f 27bb          clr  r27
001330 91e9          ld   r30,y+
001331 91f9          ld   r31,y+
001332 9169          ld   r22,y+
001333 9179          ld   r23,y+
001334 bf6b          out  rampz,r22
                 strlenf0:
001335 9007          elpm r0,z+
001336 2000          tst  r0
001337 f011          breq strlenf1
001338 9611          adiw r26,1
001339 cffb          rjmp strlenf0
                 strlenf1:
00133a 01fd          movw r30,r26
00133b 9508          ret
                 ; .FEND
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 
                 	.DSEG
                 
                 	.CSEG
                 __lcd_write_nibble_G103:
                 ; .FSTART __lcd_write_nibble_G103
00133c 93aa      	ST   -Y,R26
00133d b3e5      	IN   R30,0x15
00133e 70ef      	ANDI R30,LOW(0xF)
00133f 2fae      	MOV  R26,R30
001340 81e8      	LD   R30,Y
001341 7fe0      	ANDI R30,LOW(0xF0)
001342 2bea      	OR   R30,R26
001343 bbe5      	OUT  0x15,R30
                +
001344 e181     +LDI R24 , LOW ( 17 )
                +__DELAY_USB_LOOP :
001345 958a     +DEC R24
001346 f7f1     +BRNE __DELAY_USB_LOOP
                 	__DELAY_USB 17
001347 9aa9      	SBI  0x15,1
                +
001348 e181     +LDI R24 , LOW ( 17 )
                +__DELAY_USB_LOOP :
001349 958a     +DEC R24
00134a f7f1     +BRNE __DELAY_USB_LOOP
                 	__DELAY_USB 17
00134b 98a9      	CBI  0x15,1
                +
00134c e181     +LDI R24 , LOW ( 17 )
                +__DELAY_USB_LOOP :
00134d 958a     +DEC R24
00134e f7f1     +BRNE __DELAY_USB_LOOP
                 	__DELAY_USB 17
00134f c092      	RJMP _0x20C0001
                 ; .FEND
                 __lcd_write_data:
                 ; .FSTART __lcd_write_data
001350 93aa      	ST   -Y,R26
001351 81a8      	LD   R26,Y
001352 dfe9      	RCALL __lcd_write_nibble_G103
001353 81e8          ld    r30,y
001354 95e2          swap  r30
001355 83e8          st    y,r30
001356 81a8      	LD   R26,Y
001357 dfe4      	RCALL __lcd_write_nibble_G103
                +
001358 ea87     +LDI R24 , LOW ( 167 )
                +__DELAY_USB_LOOP :
001359 958a     +DEC R24
00135a f7f1     +BRNE __DELAY_USB_LOOP
                 	__DELAY_USB 167
00135b c086      	RJMP _0x20C0001
                 ; .FEND
                 _lcd_gotoxy:
                 ; .FSTART _lcd_gotoxy
00135c 93aa      	ST   -Y,R26
00135d 81e8      	LD   R30,Y
00135e e0f0      	LDI  R31,0
00135f 51e0      	SUBI R30,LOW(-__base_y_G103)
001360 4ff5      	SBCI R31,HIGH(-__base_y_G103)
001361 81e0      	LD   R30,Z
001362 81a9      	LDD  R26,Y+1
001363 0fae      	ADD  R26,R30
001364 dfeb      	RCALL __lcd_write_data
001365 8069      	LDD  R6,Y+1
001366 81e8      	LD   R30,Y
001367 93e0 0af4 	STS  __lcd_y,R30
001369 9622      	ADIW R28,2
00136a 9508      	RET
                 ; .FEND
                 _lcd_clear:
                 ; .FSTART _lcd_clear
00136b e0a2      	LDI  R26,LOW(2)
00136c 940e 1707 	CALL SUBOPT_0x77
00136e e0ac      	LDI  R26,LOW(12)
00136f dfe0      	RCALL __lcd_write_data
001370 e0a1      	LDI  R26,LOW(1)
001371 940e 1707 	CALL SUBOPT_0x77
001373 e0e0      	LDI  R30,LOW(0)
001374 93e0 0af4 	STS  __lcd_y,R30
001376 2e6e      	MOV  R6,R30
001377 9508      	RET
                 ; .FEND
                 _lcd_putchar:
                 ; .FSTART _lcd_putchar
001378 93aa      	ST   -Y,R26
001379 81a8      	LD   R26,Y
00137a 30aa      	CPI  R26,LOW(0xA)
00137b f021      	BREQ _0x2060005
00137c 91e0 0af5 	LDS  R30,__lcd_maxx
00137e 166e      	CP   R6,R30
00137f f060      	BRLO _0x2060004
                 _0x2060005:
001380 e0e0      	LDI  R30,LOW(0)
001381 93ea      	ST   -Y,R30
001382 91a0 0af4 	LDS  R26,__lcd_y
001384 5faf      	SUBI R26,-LOW(1)
001385 93a0 0af4 	STS  __lcd_y,R26
001387 dfd4      	RCALL _lcd_gotoxy
001388 81a8      	LD   R26,Y
001389 30aa      	CPI  R26,LOW(0xA)
00138a f409      	BRNE _0x2060007
00138b c056      	RJMP _0x20C0001
                 _0x2060007:
                 _0x2060004:
00138c 9463      	INC  R6
00138d 9aaa      	SBI  0x15,2
00138e 81a8      	LD   R26,Y
00138f dfc0      	RCALL __lcd_write_data
001390 98aa      	CBI  0x15,2
001391 c050      	RJMP _0x20C0001
                 ; .FEND
                 _lcd_puts:
                 ; .FSTART _lcd_puts
001392 93ba      	ST   -Y,R27
001393 93aa      	ST   -Y,R26
001394 931a      	ST   -Y,R17
                 _0x2060008:
001395 81a9      	LDD  R26,Y+1
001396 81ba      	LDD  R27,Y+1+1
001397 91ed      	LD   R30,X+
001398 83a9      	STD  Y+1,R26
001399 83ba      	STD  Y+1+1,R27
00139a 2f1e      	MOV  R17,R30
00139b 30e0      	CPI  R30,0
00139c f019      	BREQ _0x206000A
00139d 2fa1      	MOV  R26,R17
00139e dfd9      	RCALL _lcd_putchar
00139f cff5      	RJMP _0x2060008
                 _0x206000A:
0013a0 8118      	LDD  R17,Y+0
                 _0x20C0002:
0013a1 9623      	ADIW R28,3
0013a2 9508      	RET
                 ; .FEND
                 _lcd_putsf:
                 ; .FSTART _lcd_putsf
0013a3 940e 1812 	CALL __PUTPARD2
0013a5 931a      	ST   -Y,R17
                 _0x206000B:
0013a6 01de      	MOVW R26,R28
0013a7 9611      	ADIW R26,1
0013a8 940e 16e8 	CALL SUBOPT_0x72
                +
0013aa bf6b     +OUT RAMPZ , R22
0013ab 91e6     +ELPM R30 , Z
                 	__GETBRPF 30
0013ac 2f1e      	MOV  R17,R30
0013ad 30e0      	CPI  R30,0
0013ae f019      	BREQ _0x206000D
0013af 2fa1      	MOV  R26,R17
0013b0 dfc7      	RCALL _lcd_putchar
0013b1 cff4      	RJMP _0x206000B
                 _0x206000D:
0013b2 8118      	LDD  R17,Y+0
0013b3 9625      	ADIW R28,5
0013b4 9508      	RET
                 ; .FEND
                 _lcd_init:
                 ; .FSTART _lcd_init
0013b5 93aa      	ST   -Y,R26
0013b6 b3e4      	IN   R30,0x14
0013b7 6fe0      	ORI  R30,LOW(0xF0)
0013b8 bbe4      	OUT  0x14,R30
0013b9 9aa1      	SBI  0x14,1
0013ba 9aa2      	SBI  0x14,2
0013bb 9aa3      	SBI  0x14,3
0013bc 98a9      	CBI  0x15,1
0013bd 98aa      	CBI  0x15,2
0013be 98ab      	CBI  0x15,3
0013bf 81e8      	LD   R30,Y
0013c0 93e0 0af5 	STS  __lcd_maxx,R30
0013c2 58e0      	SUBI R30,-LOW(128)
                +
0013c3 93e0 0af2+STS __base_y_G103 + ( 2 ) , R30
                 	__PUTB1MN __base_y_G103,2
0013c5 81e8      	LD   R30,Y
0013c6 54e0      	SUBI R30,-LOW(192)
                +
0013c7 93e0 0af3+STS __base_y_G103 + ( 3 ) , R30
                 	__PUTB1MN __base_y_G103,3
0013c9 e1a4      	LDI  R26,LOW(20)
0013ca e0b0      	LDI  R27,0
0013cb 940e 1715 	CALL _delay_ms
0013cd 940e 170d 	CALL SUBOPT_0x78
0013cf 940e 170d 	CALL SUBOPT_0x78
0013d1 940e 170d 	CALL SUBOPT_0x78
0013d3 e2a0      	LDI  R26,LOW(32)
0013d4 df67      	RCALL __lcd_write_nibble_G103
                +
0013d5 ef8a     +LDI R24 , LOW ( 250 )
0013d6 e090     +LDI R25 , HIGH ( 250 )
                +__DELAY_USW_LOOP :
0013d7 9701     +SBIW R24 , 1
0013d8 f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 250
0013d9 e2a8      	LDI  R26,LOW(40)
0013da df75      	RCALL __lcd_write_data
0013db e0a4      	LDI  R26,LOW(4)
0013dc df73      	RCALL __lcd_write_data
0013dd e8a5      	LDI  R26,LOW(133)
0013de df71      	RCALL __lcd_write_data
0013df e0a6      	LDI  R26,LOW(6)
0013e0 df6f      	RCALL __lcd_write_data
0013e1 df89      	RCALL _lcd_clear
                 _0x20C0001:
0013e2 9621      	ADIW R28,1
0013e3 9508      	RET
                 ; .FEND
                 
                 	.CSEG
                 
                 	.CSEG
                 
                 	.DSEG
                 _fat:
00096a           	.BYTE 0x2C
                 _path:
000996           	.BYTE 0x40
                 _text:
0009d6           	.BYTE 0xC
                 _buffer:
0009e2           	.BYTE 0x100
                 _testChar_S0000005000:
000ae2           	.BYTE 0x1
                 ___AddrToZ24ByteToSPMCR_SPM_E:
000ae3           	.BYTE 0x2
                 ___AddrToZ24ByteToSPMCR_SPM_EW:
000ae5           	.BYTE 0x2
                 
                 	.ESEG
                 
                 	.ORG 0xA
                 __EepromBackup:
00000a           	.BYTE 0x107
                 
                 	.ORG 0x0
                 
                 	.DSEG
                 _CardType_G002:
000ae7           	.BYTE 0x1
                 _wc_S0020007000:
000ae8           	.BYTE 0x2
                 _FatFs_G003:
000aea           	.BYTE 0x2
                 __seed_G101:
000aec           	.BYTE 0x4
                 __base_y_G103:
000af0           	.BYTE 0x4
                 __lcd_y:
000af4           	.BYTE 0x1
                 __lcd_maxx:
000af5           	.BYTE 0x1
                 
                 	.CSEG
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x0:
0013e4 e0f0      	LDI  R31,0
0013e5 93fa      	ST   -Y,R31
0013e6 93ea      	ST   -Y,R30
0013e7 01de      	MOVW R26,R28
0013e8 9612      	ADIW R26,2
0013e9 940c 12e5 	JMP  _itoa
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x1:
0013eb e8ac      	LDI  R26,LOW(_error_msg*2)
0013ec e0b0      	LDI  R27,HIGH(_error_msg*2)
0013ed e080      	LDI  R24,BYTE3(_error_msg*2)
0013ee 27ff      	CLR  R31
0013ef 2766      	CLR  R22
0013f0 2777      	CLR  R23
0013f1 940e 1763 	CALL __LSLD1
0013f3 940e 1763 	CALL __LSLD1
0013f5 940e 1723 	CALL __ADDD12
0013f7 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x2:
0013f8 940e 180d 	CALL __PUTPARD1
0013fa e084      	LDI  R24,4
0013fb 940e 12c0 	CALL _printf
0013fd 9628      	ADIW R28,8
0013fe 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x3:
0013ff efa4      	LDI  R26,LOW(500)
001400 e0b1      	LDI  R27,HIGH(500)
001401 940c 1715 	JMP  _delay_ms
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x4:
001403 940e 180d 	CALL __PUTPARD1
001405 e9e6      	LDI  R30,LOW(_path)
001406 e0f9      	LDI  R31,HIGH(_path)
001407 2766      	CLR  R22
001408 2777      	CLR  R23
001409 cfee      	RJMP SUBOPT_0x2
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x5:
00140a 93fa      	ST   -Y,R31
00140b 93ea      	ST   -Y,R30
00140c e0a8      	LDI  R26,LOW(8)
00140d e0b0      	LDI  R27,HIGH(8)
00140e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:16 WORDS
                 SUBOPT_0x6:
                +
00140f ede9     +LDI R30 , LOW ( 2 * _0x0 + ( 349 ) )
001410 e0f2     +LDI R31 , HIGH ( 2 * _0x0 + ( 349 ) )
001411 e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 349 ) )
001412 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 349 ) )
                 	__POINTD1FN _0x0,349
001413 940e 180d 	CALL __PUTPARD1
001415 01f4      	MOVW R30,R8
001416 2766      	CLR  R22
001417 2777      	CLR  R23
001418 940e 180d 	CALL __PUTPARD1
                +
00141a e0eb     +LDI R30 , LOW ( 0xB )
00141b e0f0     +LDI R31 , HIGH ( 0xB )
00141c e060     +LDI R22 , BYTE3 ( 0xB )
00141d e070     +LDI R23 , BYTE4 ( 0xB )
                 	__GETD1N 0xB
00141e 940e 180d 	CALL __PUTPARD1
001420 e088      	LDI  R24,8
001421 940e 12c0 	CALL _printf
001423 962c      	ADIW R28,12
001424 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x7:
                +
001425 e0e2     +LDI R30 , LOW ( 0x2 )
001426 e0f0     +LDI R31 , HIGH ( 0x2 )
001427 e060     +LDI R22 , BYTE3 ( 0x2 )
001428 e070     +LDI R23 , BYTE4 ( 0x2 )
                 	__GETD1N 0x2
001429 940e 180d 	CALL __PUTPARD1
00142b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:15 WORDS
                 SUBOPT_0x8:
00142c eee2      	LDI  R30,LOW(_testChar_S0000005000)
00142d e0fa      	LDI  R31,HIGH(_testChar_S0000005000)
00142e 93fa      	ST   -Y,R31
00142f 93ea      	ST   -Y,R30
001430 e0a1      	LDI  R26,LOW(1)
001431 e0b0      	LDI  R27,0
001432 940c 03dd 	JMP  _ReadFlashBytes
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x9:
001434 940e 180d 	CALL __PUTPARD1
001436 cff5      	RJMP SUBOPT_0x8
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0xA:
001437 940e 1803 	CALL __GETD1S0
001439 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0xB:
00143a 93ba      	ST   -Y,R27
00143b 93aa      	ST   -Y,R26
00143c 931a      	ST   -Y,R17
00143d 930a      	ST   -Y,R16
00143e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 9 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0xC:
                +
00143f 81ec     +LDD R30 , Y + 4
001440 81fd     +LDD R31 , Y + 4 + 1
001441 816e     +LDD R22 , Y + 4 + 2
001442 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
001443 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0xD:
001444 01f8      	MOVW R30,R16
                +
001445 81ac     +LDD R26 , Y + 4
001446 81bd     +LDD R27 , Y + 4 + 1
001447 818e     +LDD R24 , Y + 4 + 2
001448 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
001449 2766      	CLR  R22
00144a 2777      	CLR  R23
00144b 940e 1728 	CALL __ADDD21
00144d 940c 03af 	JMP  _ReadFlashByte
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0xE:
                +
00144f 81ee     +LDD R30 , Y + 6
001450 81ff     +LDD R31 , Y + 6 + 1
001451 8568     +LDD R22 , Y + 6 + 2
001452 8579     +LDD R23 , Y + 6 + 3
                 	__GETD1S 6
001453 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0xF:
                +
001454 83ee     +STD Y + 6 , R30
001455 83ff     +STD Y + 6 + 1 , R31
001456 8768     +STD Y + 6 + 2 , R22
001457 8779     +STD Y + 6 + 3 , R23
                 	__PUTD1S 6
001458 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x10:
                +
001459 81ae     +LDD R26 , Y + 6
00145a 81bf     +LDD R27 , Y + 6 + 1
00145b 8588     +LDD R24 , Y + 6 + 2
00145c 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
00145d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x11:
                +
00145e 01fe     +MOVW R30 , R28
00145f 5fe4     +SUBI R30 , LOW ( - 268 )
001460 4ffe     +SBCI R31 , HIGH ( - 268 )
001461 9001     +LD R0 , Z +
001462 81f0     +LD R31 , Z
001463 2de0     +MOV R30 , R0
                 	__GETW1SX 268
001464 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x12:
                +
001465 01fe     +MOVW R30 , R28
001466 5fe0     +SUBI R30 , LOW ( - 272 )
001467 4ffe     +SBCI R31 , HIGH ( - 272 )
001468 9001     +LD R0 , Z +
001469 9011     +LD R1 , Z +
00146a 9161     +LD R22 , Z +
00146b 8170     +LD R23 , Z
00146c 01f0     +MOVW R30 , R0
                 	__GETD1SX 272
                +
00146d 7fef     +ANDI R30 , LOW ( 0xFF )
00146e 70f0     +ANDI R31 , HIGH ( 0xFF )
00146f 7060     +ANDI R22 , BYTE3 ( 0xFF )
001470 7070     +ANDI R23 , BYTE4 ( 0xFF )
                 	__ANDD1N 0xFF
001471 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x13:
                +
001472 01de     +MOVW R26 , R28
001473 5fa0     +SUBI R26 , LOW ( - 272 )
001474 4fbe     +SBCI R27 , HIGH ( - 272 )
001475 900d     +LD R0 , X +
001476 901d     +LD R1 , X +
001477 918d     +LD R24 , X +
001478 919c     +LD R25 , X
001479 01d0     +MOVW R26 , R0
                 	__GETD2SX 272
00147a 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x14:
                +
00147b 85e8     +LDD R30 , Y + 8
00147c 85f9     +LDD R31 , Y + 8 + 1
00147d 856a     +LDD R22 , Y + 8 + 2
00147e 857b     +LDD R23 , Y + 8 + 3
                 	__GETD1S 8
00147f 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x15:
                +
001480 83ec     +STD Y + 4 , R30
001481 83fd     +STD Y + 4 + 1 , R31
001482 836e     +STD Y + 4 + 2 , R22
001483 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
001484 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 8 TIMES, CODE SIZE REDUCTION:11 WORDS
                 SUBOPT_0x16:
001485 2766      	CLR  R22
001486 2777      	CLR  R23
001487 940e 1723 	CALL __ADDD12
001489 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 8 TIMES, CODE SIZE REDUCTION:11 WORDS
                 SUBOPT_0x17:
                +
00148a 85ea     +LDD R30 , Y + 10
00148b 85fb     +LDD R31 , Y + 10 + 1
00148c 856c     +LDD R22 , Y + 10 + 2
00148d 857d     +LDD R23 , Y + 10 + 3
                 	__GETD1S 10
00148e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x18:
                +
00148f 85aa     +LDD R26 , Y + 10
001490 85bb     +LDD R27 , Y + 10 + 1
001491 858c     +LDD R24 , Y + 10 + 2
001492 859d     +LDD R25 , Y + 10 + 3
                 	__GETD2S 10
001493 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x19:
001494 81ea      	LDD  R30,Y+2
001495 81fb      	LDD  R31,Y+2+1
001496 9731      	SBIW R30,1
001497 81a8      	LD   R26,Y
001498 81b9      	LDD  R27,Y+1
001499 0fae      	ADD  R26,R30
00149a 1fbf      	ADC  R27,R31
00149b 91ec      	LD   R30,X
00149c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:12 WORDS
                 SUBOPT_0x1A:
00149d 93ea      	ST   -Y,R30
                +
00149e e0a0     +LDI R26 , LOW ( 0x0 )
00149f e0b0     +LDI R27 , HIGH ( 0x0 )
0014a0 e080     +LDI R24 , BYTE3 ( 0x0 )
0014a1 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
0014a2 940c 05c0 	JMP  _send_cmd_G002
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x1B:
0014a4 940e 05ae 	CALL _xmit_spi
                +
0014a6 81aa     +LDD R26 , Y + 2
0014a7 81bb     +LDD R27 , Y + 2 + 1
0014a8 818c     +LDD R24 , Y + 2 + 2
0014a9 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
0014aa 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 10 TIMES, CODE SIZE REDUCTION:15 WORDS
                 SUBOPT_0x1C:
                +
0014ab 81ea     +LDD R30 , Y + 2
0014ac 81fb     +LDD R31 , Y + 2 + 1
0014ad 816c     +LDD R22 , Y + 2 + 2
0014ae 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
0014af 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x1D:
0014b0 2fe1      	MOV  R30,R17
0014b1 e0f0      	LDI  R31,0
0014b2 01de      	MOVW R26,R28
0014b3 9616      	ADIW R26,6
0014b4 0fea      	ADD  R30,R26
0014b5 1ffb      	ADC  R31,R27
0014b6 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x1E:
                +
0014b7 e0a0     +LDI R26 , LOW ( 0x0 )
0014b8 e0b0     +LDI R27 , HIGH ( 0x0 )
0014b9 e080     +LDI R24 , BYTE3 ( 0x0 )
0014ba e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
0014bb 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x1F:
                +
0014bc e0a0     +LDI R26 , LOW ( 0x200 )
0014bd e0b2     +LDI R27 , HIGH ( 0x200 )
0014be e080     +LDI R24 , BYTE3 ( 0x200 )
0014bf e090     +LDI R25 , BYTE4 ( 0x200 )
                 	__GETD2N 0x200
0014c0 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x20:
0014c1 93ba      	ST   -Y,R27
0014c2 93aa      	ST   -Y,R26
0014c3 940e 186b 	CALL __SAVELOCR4
0014c5 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x21:
0014c6 dff5      	RCALL SUBOPT_0x1F
0014c7 940e 177c 	CALL __MULD12U
0014c9 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x22:
                +
0014ca 85a9     +LDD R26 , Y + 9
0014cb 85ba     +LDD R27 , Y + 9 + 1
0014cc 858b     +LDD R24 , Y + 9 + 2
0014cd 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
0014ce 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x23:
0014cf 93ba      	ST   -Y,R27
0014d0 93aa      	ST   -Y,R26
0014d1 940e 1869 	CALL __SAVELOCR6
0014d3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x24:
0014d4 91e0 0aea 	LDS  R30,_FatFs_G003
0014d6 91f0 0aeb 	LDS  R31,_FatFs_G003+1
0014d8 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x25:
                +
0014d9 85ac     +LDD R26 , Y + 12
0014da 85bd     +LDD R27 , Y + 12 + 1
0014db 858e     +LDD R24 , Y + 12 + 2
0014dc 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
0014dd 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:17 WORDS
                 SUBOPT_0x26:
                +
0014de 30a2     +CPI R26 , LOW ( 0x2 )
0014df e0e0     +LDI R30 , HIGH ( 0x2 )
0014e0 07be     +CPC R27 , R30
0014e1 e0e0     +LDI R30 , BYTE3 ( 0x2 )
0014e2 078e     +CPC R24 , R30
0014e3 e0e0     +LDI R30 , BYTE4 ( 0x2 )
0014e4 079e     +CPC R25 , R30
                 	__CPD2N 0x2
0014e5 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:8 WORDS
                 SUBOPT_0x27:
0014e6 01fe      	MOVW R30,R28
0014e7 9638      	ADIW R30,8
0014e8 93fa      	ST   -Y,R31
0014e9 93ea      	ST   -Y,R30
0014ea 85e8      	LDD  R30,Y+8
0014eb 85f9      	LDD  R31,Y+8+1
                +
0014ec 85a4     +LDD R26 , Z + 12
0014ed 85b5     +LDD R27 , Z + 12 + 1
0014ee 8586     +LDD R24 , Z + 12 + 2
0014ef 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
0014f0 01f9      	MOVW R30,R18
0014f1 cf93      	RJMP SUBOPT_0x16
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x28:
0014f2 e0a2      	LDI  R26,LOW(2)
0014f3 e0b0      	LDI  R27,0
0014f4 940e 069b 	CALL _disk_readp
0014f6 30e0      	CPI  R30,0
0014f7 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x29:
0014f8 93fa      	ST   -Y,R31
0014f9 93ea      	ST   -Y,R30
0014fa e0a1      	LDI  R26,LOW(1)
0014fb e0b0      	LDI  R27,0
0014fc 940e 069b 	CALL _disk_readp
0014fe 30e0      	CPI  R30,0
0014ff 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x2A:
001500 93fa      	ST   -Y,R31
001501 93ea      	ST   -Y,R30
001502 85e8      	LDD  R30,Y+8
001503 85f9      	LDD  R31,Y+8+1
                +
001504 85a4     +LDD R26 , Z + 12
001505 85b5     +LDD R27 , Z + 12 + 1
001506 8586     +LDD R24 , Z + 12 + 2
001507 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
001508 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x2B:
                +
001509 5fef     +SUBI R30 , LOW ( - 1 )
00150a 4fff     +SBCI R31 , HIGH ( - 1 )
00150b 4f6f     +SBCI R22 , BYTE3 ( - 1 )
00150c 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__ADDD1N 1
00150d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x2C:
                +
00150e 85ae     +LDD R26 , Y + 14
00150f 85bf     +LDD R27 , Y + 14 + 1
001510 8988     +LDD R24 , Y + 14 + 2
001511 8999     +LDD R25 , Y + 14 + 3
                 	__GETD2S 14
001512 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x2D:
001513 940e 1723 	CALL __ADDD12
001515 940e 180d 	CALL __PUTPARD1
001517 89ea      	LDD  R30,Y+18
001518 89fb      	LDD  R31,Y+18+1
001519 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x2E:
00151a 93fa      	ST   -Y,R31
00151b 93ea      	ST   -Y,R30
00151c cfd5      	RJMP SUBOPT_0x28
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x2F:
00151d e0b0      	LDI  R27,0
00151e 940e 069b 	CALL _disk_readp
001520 30e0      	CPI  R30,0
001521 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x30:
001522 931a      	ST   -Y,R17
001523 930a      	ST   -Y,R16
                +
001524 9100 0aea+LDS R16 , 0 + ( _FatFs_G003 )
001526 9110 0aeb+LDS R17 , 0 + ( _FatFs_G003 ) + 1
                 	__GETWRMN 16,17,0,_FatFs_G003
001528 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x31:
                +
001529 83ea     +STD Y + 2 , R30
00152a 83fb     +STD Y + 2 + 1 , R31
00152b 836c     +STD Y + 2 + 2 , R22
00152c 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
00152d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x32:
                +
00152e 81aa     +LDD R26 , Y + 2
00152f 81bb     +LDD R27 , Y + 2 + 1
001530 818c     +LDD R24 , Y + 2 + 2
001531 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
001532 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x33:
                +
001533 e0e0     +LDI R30 , LOW ( 0x0 )
001534 e0f0     +LDI R31 , HIGH ( 0x0 )
001535 e060     +LDI R22 , BYTE3 ( 0x0 )
001536 e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
001537 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x34:
001538 e0e0      	LDI  R30,LOW(0)
001539 e0f0      	LDI  R31,HIGH(0)
00153a 93ed      	ST   X+,R30
00153b 93fc      	ST   X,R31
00153c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x35:
00153d 940e 17dc 	CALL __GETD1P
00153f cfe9      	RJMP SUBOPT_0x31
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x36:
001540 940e 186b 	CALL __SAVELOCR4
                +
001542 9120 0aea+LDS R18 , 0 + ( _FatFs_G003 )
001544 9130 0aeb+LDS R19 , 0 + ( _FatFs_G003 ) + 1
                 	__GETWRMN 18,19,0,_FatFs_G003
001546 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x37:
001547 85a8      	LDD  R26,Y+8
001548 85b9      	LDD  R27,Y+8+1
001549 961c      	ADIW R26,12
00154a 940e 17dc 	CALL __GETD1P
00154c 940e 1851 	CALL __CPD10
00154e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x38:
                +
00154f 81ac     +LDD R26 , Y + 4
001550 81bd     +LDD R27 , Y + 4 + 1
001551 818e     +LDD R24 , Y + 4 + 2
001552 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
001553 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x39:
001554 91a0 0aea 	LDS  R26,_FatFs_G003
001556 91b0 0aeb 	LDS  R27,_FatFs_G003+1
001558 9616      	ADIW R26,6
001559 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x3A:
                +
00155a 85a4     +LDD R26 , Z + 12
00155b 85b5     +LDD R27 , Z + 12 + 1
00155c 8586     +LDD R24 , Z + 12 + 2
00155d 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
00155e 940e 1812 	CALL __PUTPARD2
001560 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x3B:
001561 940e 17d8 	CALL __GETW1P
001563 70ef      	ANDI R30,LOW(0xF)
001564 70f0      	ANDI R31,HIGH(0xF)
001565 0fee      	LSL  R30
001566 940e 1751 	CALL __LSLW4
001568 93fa      	ST   -Y,R31
001569 93ea      	ST   -Y,R30
00156a e2a0      	LDI  R26,LOW(32)
00156b cfb1      	RJMP SUBOPT_0x2F
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x3C:
00156c 961c      	ADIW R26,12
00156d dfc5      	RCALL SUBOPT_0x33
00156e 940e 17e7 	CALL __PUTDP1
001570 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x3D:
001571 2fe2      	MOV  R30,R18
001572 5f2f      	SUBI R18,-1
001573 81ae      	LDD  R26,Y+6
001574 81bf      	LDD  R27,Y+6+1
001575 e0f0      	LDI  R31,0
001576 0fae      	ADD  R26,R30
001577 1fbf      	ADC  R27,R31
001578 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x3E:
001579 2fe5      	MOV  R30,R21
00157a 5f5f      	SUBI R21,-1
00157b 85a8      	LDD  R26,Y+8
00157c 85b9      	LDD  R27,Y+8+1
00157d e0f0      	LDI  R31,0
00157e 0fea      	ADD  R30,R26
00157f 1ffb      	ADC  R31,R27
001580 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x3F:
001581 01d9      	MOVW R26,R18
001582 27ee      	CLR  R30
001583 0fa1      	ADD  R26,R17
001584 1fbe      	ADC  R27,R30
001585 910c      	LD   R16,X
001586 3200      	CPI  R16,32
001587 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x40:
001588 dfaa      	RCALL SUBOPT_0x33
001589 940e 17e7 	CALL __PUTDP1
00158b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x41:
00158c 81ae      	LDD  R26,Y+6
00158d 81bf      	LDD  R27,Y+6+1
00158e 9612      	ADIW R26,2
00158f 940e 17d8 	CALL __GETW1P
001591 85e3      	LDD  R30,Z+11
001592 30e0      	CPI  R30,0
001593 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x42:
001594 940e 17d8 	CALL __GETW1P
001596 2766      	CLR  R22
001597 2777      	CLR  R23
001598 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x43:
001599 2766      	CLR  R22
00159a 2777      	CLR  R23
00159b 940e 173c 	CALL __ORD12
00159d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x44:
00159e 81ec      	LDD  R30,Y+4
00159f 81fd      	LDD  R31,Y+4+1
0015a0 93fa      	ST   -Y,R31
0015a1 93ea      	ST   -Y,R30
0015a2 df08      	RCALL SUBOPT_0x1C
0015a3 940e 180d 	CALL __PUTPARD1
0015a5 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x45:
0015a6 81ac      	LDD  R26,Y+4
0015a7 81bd      	LDD  R27,Y+4+1
0015a8 940e 17d8 	CALL __GETW1P
0015aa 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x46:
0015ab 01fe      	MOVW R30,R28
0015ac 9671      	ADIW R30,17
0015ad 93fa      	ST   -Y,R31
0015ae 93ea      	ST   -Y,R30
0015af 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x47:
                +
0015b0 85af     +LDD R26 , Y + 15
0015b1 89b8     +LDD R27 , Y + 15 + 1
0015b2 8989     +LDD R24 , Y + 15 + 2
0015b3 899a     +LDD R25 , Y + 15 + 3
                 	__GETD2S 15
0015b4 940e 0b46 	CALL _check_fs_G003
0015b6 2f1e      	MOV  R17,R30
0015b7 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x48:
                +
0015b8 85ef     +LDD R30 , Y + 15
0015b9 89f8     +LDD R31 , Y + 15 + 1
0015ba 8969     +LDD R22 , Y + 15 + 2
0015bb 897a     +LDD R23 , Y + 15 + 3
                 	__GETD1S 15
0015bc 940e 180d 	CALL __PUTPARD1
0015be 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x49:
                +
0015bf 87e9     +STD Y + 9 , R30
0015c0 87fa     +STD Y + 9 + 1 , R31
0015c1 876b     +STD Y + 9 + 2 , R22
0015c2 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
0015c3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x4A:
                +
0015c4 85e9     +LDD R30 , Y + 9
0015c5 85fa     +LDD R31 , Y + 9 + 1
0015c6 856b     +LDD R22 , Y + 9 + 2
0015c7 857c     +LDD R23 , Y + 9 + 3
                 	__GETD1S 9
0015c8 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x4B:
0015c9 01fe      	MOVW R30,R28
0015ca 967f      	ADIW R30,31
0015cb 973d      	SBIW R30,13
0015cc 01df      	MOVW R26,R30
0015cd 940e 17d8 	CALL __GETW1P
0015cf 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x4C:
0015d0 a9ed      	LDD  R30,Y+53
0015d1 a9fe      	LDD  R31,Y+53+1
0015d2 81a4      	LDD  R26,Z+4
0015d3 81b5      	LDD  R27,Z+5
0015d4 01fd      	MOVW R30,R26
0015d5 940e 175a 	CALL __LSRW4
0015d7 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x4D:
0015d8 81e1      	LDD  R30,Z+1
0015d9 e0f0      	LDI  R31,0
0015da 940e 1772 	CALL __CWD1
0015dc 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x4E:
0015dd a9ed      	LDD  R30,Y+53
0015de a9fe      	LDD  R31,Y+53+1
                +
0015df 85a4     +LDD R26 , Z + 12
0015e0 85b5     +LDD R27 , Z + 12 + 1
0015e1 8586     +LDD R24 , Z + 12 + 2
0015e2 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
0015e3 dfe0      	RCALL SUBOPT_0x4A
0015e4 940e 1723 	CALL __ADDD12
0015e6 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x4F:
0015e7 01fe      	MOVW R30,R28
0015e8 9634      	ADIW R30,4
                +
0015e9 01d9     +MOVW R26 , R18
0015ea 9616     +ADIW R26 , 6
0015eb 93ed     +ST X + , R30
0015ec 93fc     +ST X , R31
                 	__PUTW1RNS 18,6
0015ed 01fe      	MOVW R30,R28
0015ee 96b4      	ADIW R30,36
0015ef 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x50:
0015f0 8de8      	LDD  R30,Y+24
0015f1 8df9      	LDD  R31,Y+24+1
0015f2 2766      	CLR  R22
0015f3 2777      	CLR  R23
0015f4 940e 176d 	CALL __LSLD16
0015f6 01df      	MOVW R26,R30
0015f7 01cb      	MOVW R24,R22
0015f8 8dee      	LDD  R30,Y+30
0015f9 8dff      	LDD  R31,Y+30+1
0015fa cf9e      	RJMP SUBOPT_0x43
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:17 WORDS
                 SUBOPT_0x51:
0015fb 81ee      	LDD  R30,Y+6
0015fc 81ff      	LDD  R31,Y+6+1
                +
0015fd 8da0     +LDD R26 , Z + 24
0015fe 8db1     +LDD R27 , Z + 24 + 1
0015ff 8d82     +LDD R24 , Z + 24 + 2
001600 8d93     +LDD R25 , Z + 24 + 3
                 	__GETD2Z 24
001601 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x52:
                +
001602 e0e0     +LDI R30 , LOW ( 0x200 )
001603 e0f2     +LDI R31 , HIGH ( 0x200 )
001604 e060     +LDI R22 , BYTE3 ( 0x200 )
001605 e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
001606 940e 17af 	CALL __DIVD21U
001608 01df      	MOVW R26,R30
001609 01cb      	MOVW R24,R22
00160a 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x53:
00160b 81ee      	LDD  R30,Y+6
00160c 81ff      	LDD  R31,Y+6+1
                +
00160d a1a4     +LDD R26 , Z + 36
00160e a1b5     +LDD R27 , Z + 36 + 1
00160f a186     +LDD R24 , Z + 36 + 2
001610 a197     +LDD R25 , Z + 36 + 3
                 	__GETD2Z 36
001611 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x54:
001612 9613      	ADIW R26,3
001613 91ec      	LD   R30,X
001614 5fef      	SUBI R30,-LOW(1)
001615 93ec      	ST   X,R30
001616 50e1      	SUBI R30,LOW(1)
001617 e0f0      	LDI  R31,0
001618 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x55:
001619 940e 1772 	CALL __CWD1
00161b 940e 1723 	CALL __ADDD12
00161d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x56:
00161e 8da0      	LDD  R26,Z+24
00161f 8db1      	LDD  R27,Z+25
001620 01fd      	MOVW R30,R26
001621 70f1      	ANDI R31,HIGH(0x1FF)
001622 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x57:
001623 9678      	ADIW R30,24
001624 010f      	MOVW R0,R30
001625 01df      	MOVW R26,R30
001626 940e 17dc 	CALL __GETD1P
001628 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x58:
001629 9612      	ADIW R26,2
00162a e0e0      	LDI  R30,LOW(0)
00162b 93ec      	ST   X,R30
00162c e0e1      	LDI  R30,LOW(1)
00162d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x59:
00162e e0e0      	LDI  R30,LOW(0)
00162f e0f0      	LDI  R31,HIGH(0)
001630 93fa      	ST   -Y,R31
001631 93ea      	ST   -Y,R30
001632 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x5A:
001633 01fa      	MOVW R30,R20
                +
001634 8da0     +LDD R26 , Z + 24
001635 8db1     +LDD R27 , Z + 24 + 1
001636 8d82     +LDD R24 , Z + 24 + 2
001637 8d93     +LDD R25 , Z + 24 + 3
                 	__GETD2Z 24
001638 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x5B:
                +
001639 87ee     +STD Y + 14 , R30
00163a 87ff     +STD Y + 14 + 1 , R31
00163b 8b68     +STD Y + 14 + 2 , R22
00163c 8b79     +STD Y + 14 + 3 , R23
                 	__PUTD1S 14
00163d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x5C:
                +
00163e 85ee     +LDD R30 , Y + 14
00163f 85ff     +LDD R31 , Y + 14 + 1
001640 8968     +LDD R22 , Y + 14 + 2
001641 8979     +LDD R23 , Y + 14 + 3
                 	__GETD1S 14
001642 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x5D:
                +
001643 01fe     +MOVW R30 , R28
001644 5fe4     +SUBI R30 , LOW ( - 524 )
001645 4ffd     +SBCI R31 , HIGH ( - 524 )
001646 9001     +LD R0 , Z +
001647 81f0     +LD R31 , Z
001648 2de0     +MOV R30 , R0
                 	__GETW1SX 524
001649 70f1      	ANDI R31,HIGH(0x1FF)
00164a 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x5E:
                +
00164b 01de     +MOVW R26 , R28
00164c 5fa6     +SUBI R26 , LOW ( - 522 )
00164d 4fbd     +SBCI R27 , HIGH ( - 522 )
00164e 900d     +LD R0 , X +
00164f 91bc     +LD R27 , X
001650 2da0     +MOV R26 , R0
                 	__GETW2SX 522
001651 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x5F:
                +
001652 01de     +MOVW R26 , R28
001653 5fa4     +SUBI R26 , LOW ( - 524 )
001654 4fbd     +SBCI R27 , HIGH ( - 524 )
001655 900d     +LD R0 , X +
001656 91bc     +LD R27 , X
001657 2da0     +MOV R26 , R0
                 	__GETW2SX 524
001658 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:21 WORDS
                 SUBOPT_0x60:
001659 01fe      	MOVW R30,R28
00165a 9638      	ADIW R30,8
00165b 93fa      	ST   -Y,R31
00165c 93ea      	ST   -Y,R30
00165d e0e0      	LDI  R30,LOW(512)
00165e e0f2      	LDI  R31,HIGH(512)
00165f 93fa      	ST   -Y,R31
001660 93ea      	ST   -Y,R30
001661 cff0      	RJMP SUBOPT_0x5F
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x61:
001662 01f9      	MOVW R30,R18
001663 01de      	MOVW R26,R28
001664 9618      	ADIW R26,8
001665 0fea      	ADD  R30,R26
001666 1ffb      	ADC  R31,R27
001667 01bf      	MOVW R22,R30
001668 01fa      	MOVW R30,R20
                +
001669 01de     +MOVW R26 , R28
00166a 5fa2     +SUBI R26 , LOW ( - 526 )
00166b 4fbd     +SBCI R27 , HIGH ( - 526 )
00166c 900d     +LD R0 , X +
00166d 91bc     +LD R27 , X
00166e 2da0     +MOV R26 , R0
                 	__GETW2SX 526
00166f 0fae      	ADD  R26,R30
001670 1fbf      	ADC  R27,R31
001671 91ec      	LD   R30,X
001672 01db      	MOVW R26,R22
001673 93ec      	ST   X,R30
001674 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x62:
                +
001675 50a0     +SUBI R26 , LOW ( 512 )
001676 40b2     +SBCI R27 , HIGH ( 512 )
001677 4080     +SBCI R24 , BYTE3 ( 512 )
001678 4090     +SBCI R25 , BYTE4 ( 512 )
                 	__SUBD2N 512
001679 940e 0f5c 	CALL _pf_lseek
00167b 2f1e      	MOV  R17,R30
00167c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x63:
00167d 940e 17dc 	CALL __GETD1P
                +
00167f 89aa     +LDD R26 , Y + 18
001680 89bb     +LDD R27 , Y + 18 + 1
001681 898c     +LDD R24 , Y + 18 + 2
001682 899d     +LDD R25 , Y + 18 + 3
                 	__GETD2S 18
001683 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x64:
                +
001684 89aa     +LDD R26 , Y + 18
001685 89bb     +LDD R27 , Y + 18 + 1
001686 898c     +LDD R24 , Y + 18 + 2
001687 899d     +LDD R25 , Y + 18 + 3
                 	__GETD2S 18
001688 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x65:
                +
001689 89ea     +LDD R30 , Y + 18
00168a 89fb     +LDD R31 , Y + 18 + 1
00168b 896c     +LDD R22 , Y + 18 + 2
00168c 897d     +LDD R23 , Y + 18 + 3
                 	__GETD1S 18
00168d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x66:
                +
00168e 50e1     +SUBI R30 , LOW ( 1 )
00168f 40f0     +SBCI R31 , HIGH ( 1 )
001690 4060     +SBCI R22 , BYTE3 ( 1 )
001691 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
001692 01df      	MOVW R26,R30
001693 01cb      	MOVW R24,R22
001694 ddf5      	RCALL SUBOPT_0x17
001695 940e 17af 	CALL __DIVD21U
001697 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x67:
                +
001698 50e1     +SUBI R30 , LOW ( 1 )
001699 40f0     +SBCI R31 , HIGH ( 1 )
00169a 4060     +SBCI R22 , BYTE3 ( 1 )
00169b 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
00169c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x68:
00169d dfa0      	RCALL SUBOPT_0x5C
                +
00169e 01d8     +MOVW R26 , R16
00169f 9694     +ADIW R26 , 36
0016a0 940e 17e7+CALL __PUTDP1
                 	__PUTD1RNS 16,36
0016a2 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x69:
0016a3 a9ea      	LDD  R30,Y+50
0016a4 a9fb      	LDD  R31,Y+50+1
0016a5 93fa      	ST   -Y,R31
0016a6 93ea      	ST   -Y,R30
0016a7 a9aa      	LDD  R26,Y+50
0016a8 a9bb      	LDD  R27,Y+50+1
0016a9 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x6A:
0016aa 01fe      	MOVW R30,R28
0016ab 5fea      	SUBI R30,LOW(-(518))
0016ac 4ffd      	SBCI R31,HIGH(-(518))
0016ad 93fa      	ST   -Y,R31
0016ae 93ea      	ST   -Y,R30
0016af 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x6B:
                +
0016b0 01de     +MOVW R26 , R28
0016b1 5cae     +SUBI R26 , LOW ( - 562 )
0016b2 4fbd     +SBCI R27 , HIGH ( - 562 )
0016b3 900d     +LD R0 , X +
0016b4 91bc     +LD R27 , X
0016b5 2da0     +MOV R26 , R0
                 	__GETW2SX 562
0016b6 940e 1041 	CALL _pf_opendir
0016b8 2f1e      	MOV  R17,R30
0016b9 3010      	CPI  R17,0
0016ba 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x6C:
                +
0016bb 01de     +MOVW R26 , R28
0016bc 5da2     +SUBI R26 , LOW ( - 558 )
0016bd 4fbd     +SBCI R27 , HIGH ( - 558 )
0016be 900d     +LD R0 , X +
0016bf 91bc     +LD R27 , X
0016c0 2da0     +MOV R26 , R0
                 	__GETW2SX 558
0016c1 940c 1320 	JMP  _strlen
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x6D:
0016c3 01de      	MOVW R26,R28
0016c4 5ea8      	SUBI R26,LOW(-(536))
0016c5 4fbd      	SBCI R27,HIGH(-(536))
0016c6 940e 1071 	CALL _pf_readdir
0016c8 2f1e      	MOV  R17,R30
0016c9 3010      	CPI  R17,0
0016ca 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x6E:
0016cb 01fe      	MOVW R30,R28
0016cc 5eea      	SUBI R30,LOW(-(534))
0016cd 4ffd      	SBCI R31,HIGH(-(534))
0016ce 9639      	ADIW R30,9
0016cf 0fe4      	ADD  R30,R20
0016d0 1ff5      	ADC  R31,R21
0016d1 8010      	LD   R1,Z
0016d2 01fa      	MOVW R30,R20
0016d3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x6F:
0016d4 01fe      	MOVW R30,R28
0016d5 5fe8      	SUBI R30,LOW(-(520))
0016d6 4ffd      	SBCI R31,HIGH(-(520))
0016d7 963c      	ADIW R30,12
0016d8 01df      	MOVW R26,R30
0016d9 940e 17dc 	CALL __GETD1P
0016db 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x70:
                +
0016dc 01de     +MOVW R26 , R28
0016dd 5da4     +SUBI R26 , LOW ( - 556 )
0016de 4fbd     +SBCI R27 , HIGH ( - 556 )
0016df 900d     +LD R0 , X +
0016e0 91bc     +LD R27 , X
0016e1 2da0     +MOV R26 , R0
                 	__GETW2SX 556
0016e2 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x71:
0016e3 940e 06fe 	CALL _disk_writep
0016e5 2f1e      	MOV  R17,R30
0016e6 3010      	CPI  R17,0
0016e7 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x72:
0016e8 940e 17e2 	CALL __GETD1P_INC
0016ea de1e      	RCALL SUBOPT_0x2B
0016eb 940e 17ec 	CALL __PUTDP1_DEC
0016ed cfaa      	RJMP SUBOPT_0x67
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x73:
0016ee 932a      	ST   -Y,R18
0016ef 85af      	LDD  R26,Y+15
0016f0 89b8      	LDD  R27,Y+15+1
0016f1 89e9      	LDD  R30,Y+17
0016f2 89fa      	LDD  R31,Y+17+1
0016f3 9509      	ICALL
0016f4 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x74:
0016f5 89ea      	LDD  R30,Y+18
0016f6 89fb      	LDD  R31,Y+18+1
0016f7 9734      	SBIW R30,4
0016f8 8bea      	STD  Y+18,R30
0016f9 8bfb      	STD  Y+18+1,R31
0016fa 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x75:
0016fb 85af      	LDD  R26,Y+15
0016fc 89b8      	LDD  R27,Y+15+1
0016fd 89e9      	LDD  R30,Y+17
0016fe 89fa      	LDD  R31,Y+17+1
0016ff 9509      	ICALL
001700 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x76:
001701 89aa      	LDD  R26,Y+18
001702 89bb      	LDD  R27,Y+18+1
001703 9614      	ADIW R26,4
001704 940e 17d8 	CALL __GETW1P
001706 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x77:
001707 940e 1350 	CALL __lcd_write_data
001709 e0a3      	LDI  R26,LOW(3)
00170a e0b0      	LDI  R27,0
00170b 940c 1715 	JMP  _delay_ms
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x78:
00170d e3a0      	LDI  R26,LOW(48)
00170e 940e 133c 	CALL __lcd_write_nibble_G103
                +
001710 ef8a     +LDI R24 , LOW ( 250 )
001711 e090     +LDI R25 , HIGH ( 250 )
                +__DELAY_USW_LOOP :
001712 9701     +SBIW R24 , 1
001713 f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 250
001714 9508      	RET
                 
                 
                 	.CSEG
                 _delay_ms:
001715 9610      	adiw r26,0
001716 f039      	breq __delay_ms1
                 __delay_ms0:
                +
001717 ec84     +LDI R24 , LOW ( 0x9C4 )
001718 e099     +LDI R25 , HIGH ( 0x9C4 )
                +__DELAY_USW_LOOP :
001719 9701     +SBIW R24 , 1
00171a f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 0x9C4
00171b 95a8      	wdr
00171c 9711      	sbiw r26,1
00171d f7c9      	brne __delay_ms0
                 __delay_ms1:
00171e 9508      	ret
                 
                 __ADDW2R15:
00171f 2400      	CLR  R0
001720 0daf      	ADD  R26,R15
001721 1db0      	ADC  R27,R0
001722 9508      	RET
                 
                 __ADDD12:
001723 0fea      	ADD  R30,R26
001724 1ffb      	ADC  R31,R27
001725 1f68      	ADC  R22,R24
001726 1f79      	ADC  R23,R25
001727 9508      	RET
                 
                 __ADDD21:
001728 0fae      	ADD  R26,R30
001729 1fbf      	ADC  R27,R31
00172a 1f86      	ADC  R24,R22
00172b 1f97      	ADC  R25,R23
00172c 9508      	RET
                 
                 __SUBD12:
00172d 1bea      	SUB  R30,R26
00172e 0bfb      	SBC  R31,R27
00172f 0b68      	SBC  R22,R24
001730 0b79      	SBC  R23,R25
001731 9508      	RET
                 
                 __SUBD21:
001732 1bae      	SUB  R26,R30
001733 0bbf      	SBC  R27,R31
001734 0b86      	SBC  R24,R22
001735 0b97      	SBC  R25,R23
001736 9508      	RET
                 
                 __ANDD12:
001737 23ea      	AND  R30,R26
001738 23fb      	AND  R31,R27
001739 2368      	AND  R22,R24
00173a 2379      	AND  R23,R25
00173b 9508      	RET
                 
                 __ORD12:
00173c 2bea      	OR   R30,R26
00173d 2bfb      	OR   R31,R27
00173e 2b68      	OR   R22,R24
00173f 2b79      	OR   R23,R25
001740 9508      	RET
                 
                 __ANEGW1:
001741 95f1      	NEG  R31
001742 95e1      	NEG  R30
001743 40f0      	SBCI R31,0
001744 9508      	RET
                 
                 __LSRD12:
001745 23ee      	TST  R30
001746 2e0e      	MOV  R0,R30
001747 01fd      	MOVW R30,R26
001748 01bc      	MOVW R22,R24
001749 f031      	BREQ __LSRD12R
                 __LSRD12L:
00174a 9576      	LSR  R23
00174b 9567      	ROR  R22
00174c 95f7      	ROR  R31
00174d 95e7      	ROR  R30
00174e 940a      	DEC  R0
00174f f7d1      	BRNE __LSRD12L
                 __LSRD12R:
001750 9508      	RET
                 
                 __LSLW4:
001751 0fee      	LSL  R30
001752 1fff      	ROL  R31
                 __LSLW3:
001753 0fee      	LSL  R30
001754 1fff      	ROL  R31
                 __LSLW2:
001755 0fee      	LSL  R30
001756 1fff      	ROL  R31
001757 0fee      	LSL  R30
001758 1fff      	ROL  R31
001759 9508      	RET
                 
                 __LSRW4:
00175a 95f6      	LSR  R31
00175b 95e7      	ROR  R30
                 __LSRW3:
00175c 95f6      	LSR  R31
00175d 95e7      	ROR  R30
                 __LSRW2:
00175e 95f6      	LSR  R31
00175f 95e7      	ROR  R30
001760 95f6      	LSR  R31
001761 95e7      	ROR  R30
001762 9508      	RET
                 
                 __LSLD1:
001763 0fee      	LSL  R30
001764 1fff      	ROL  R31
001765 1f66      	ROL  R22
001766 1f77      	ROL  R23
001767 9508      	RET
                 
                 __LSRD16:
001768 2fe6      	MOV  R30,R22
001769 2ff7      	MOV  R31,R23
00176a e060      	LDI  R22,0
00176b e070      	LDI  R23,0
00176c 9508      	RET
                 
                 __LSLD16:
00176d 2f6e      	MOV  R22,R30
00176e 2f7f      	MOV  R23,R31
00176f e0e0      	LDI  R30,0
001770 e0f0      	LDI  R31,0
001771 9508      	RET
                 
                 __CWD1:
001772 2f6f      	MOV  R22,R31
001773 0f66      	ADD  R22,R22
001774 0b66      	SBC  R22,R22
001775 2f76      	MOV  R23,R22
001776 9508      	RET
                 
                 __COMD1:
001777 95e0      	COM  R30
001778 95f0      	COM  R31
001779 9560      	COM  R22
00177a 9570      	COM  R23
00177b 9508      	RET
                 
                 __MULD12U:
00177c 9f7a      	MUL  R23,R26
00177d 2d70      	MOV  R23,R0
00177e 9f6b      	MUL  R22,R27
00177f 0d70      	ADD  R23,R0
001780 9ff8      	MUL  R31,R24
001781 0d70      	ADD  R23,R0
001782 9fe9      	MUL  R30,R25
001783 0d70      	ADD  R23,R0
001784 9f6a      	MUL  R22,R26
001785 2d60      	MOV  R22,R0
001786 0d71      	ADD  R23,R1
001787 9ffb      	MUL  R31,R27
001788 0d60      	ADD  R22,R0
001789 1d71      	ADC  R23,R1
00178a 9fe8      	MUL  R30,R24
00178b 0d60      	ADD  R22,R0
00178c 1d71      	ADC  R23,R1
00178d 2788      	CLR  R24
00178e 9ffa      	MUL  R31,R26
00178f 2df0      	MOV  R31,R0
001790 0d61      	ADD  R22,R1
001791 1f78      	ADC  R23,R24
001792 9feb      	MUL  R30,R27
001793 0df0      	ADD  R31,R0
001794 1d61      	ADC  R22,R1
001795 1f78      	ADC  R23,R24
001796 9fea      	MUL  R30,R26
001797 2de0      	MOV  R30,R0
001798 0df1      	ADD  R31,R1
001799 1f68      	ADC  R22,R24
00179a 1f78      	ADC  R23,R24
00179b 9508      	RET
                 
                 __DIVW21U:
00179c 2400      	CLR  R0
00179d 2411      	CLR  R1
00179e e190      	LDI  R25,16
                 __DIVW21U1:
00179f 0faa      	LSL  R26
0017a0 1fbb      	ROL  R27
0017a1 1c00      	ROL  R0
0017a2 1c11      	ROL  R1
0017a3 1a0e      	SUB  R0,R30
0017a4 0a1f      	SBC  R1,R31
0017a5 f418      	BRCC __DIVW21U2
0017a6 0e0e      	ADD  R0,R30
0017a7 1e1f      	ADC  R1,R31
0017a8 c001      	RJMP __DIVW21U3
                 __DIVW21U2:
0017a9 60a1      	SBR  R26,1
                 __DIVW21U3:
0017aa 959a      	DEC  R25
0017ab f799      	BRNE __DIVW21U1
0017ac 01fd      	MOVW R30,R26
0017ad 01d0      	MOVW R26,R0
0017ae 9508      	RET
                 
                 __DIVD21U:
0017af 933f      	PUSH R19
0017b0 934f      	PUSH R20
0017b1 935f      	PUSH R21
0017b2 2400      	CLR  R0
0017b3 2411      	CLR  R1
0017b4 2744      	CLR  R20
0017b5 2755      	CLR  R21
0017b6 e230      	LDI  R19,32
                 __DIVD21U1:
0017b7 0faa      	LSL  R26
0017b8 1fbb      	ROL  R27
0017b9 1f88      	ROL  R24
0017ba 1f99      	ROL  R25
0017bb 1c00      	ROL  R0
0017bc 1c11      	ROL  R1
0017bd 1f44      	ROL  R20
0017be 1f55      	ROL  R21
0017bf 1a0e      	SUB  R0,R30
0017c0 0a1f      	SBC  R1,R31
0017c1 0b46      	SBC  R20,R22
0017c2 0b57      	SBC  R21,R23
0017c3 f428      	BRCC __DIVD21U2
0017c4 0e0e      	ADD  R0,R30
0017c5 1e1f      	ADC  R1,R31
0017c6 1f46      	ADC  R20,R22
0017c7 1f57      	ADC  R21,R23
0017c8 c001      	RJMP __DIVD21U3
                 __DIVD21U2:
0017c9 60a1      	SBR  R26,1
                 __DIVD21U3:
0017ca 953a      	DEC  R19
0017cb f759      	BRNE __DIVD21U1
0017cc 01fd      	MOVW R30,R26
0017cd 01bc      	MOVW R22,R24
0017ce 01d0      	MOVW R26,R0
0017cf 01ca      	MOVW R24,R20
0017d0 915f      	POP  R21
0017d1 914f      	POP  R20
0017d2 913f      	POP  R19
0017d3 9508      	RET
                 
                 __MODD21U:
0017d4 dfda      	RCALL __DIVD21U
0017d5 01fd      	MOVW R30,R26
0017d6 01bc      	MOVW R22,R24
0017d7 9508      	RET
                 
                 __GETW1P:
0017d8 91ed      	LD   R30,X+
0017d9 91fc      	LD   R31,X
0017da 9711      	SBIW R26,1
0017db 9508      	RET
                 
                 __GETD1P:
0017dc 91ed      	LD   R30,X+
0017dd 91fd      	LD   R31,X+
0017de 916d      	LD   R22,X+
0017df 917c      	LD   R23,X
0017e0 9713      	SBIW R26,3
0017e1 9508      	RET
                 
                 __GETD1P_INC:
0017e2 91ed      	LD   R30,X+
0017e3 91fd      	LD   R31,X+
0017e4 916d      	LD   R22,X+
0017e5 917d      	LD   R23,X+
0017e6 9508      	RET
                 
                 __PUTDP1:
0017e7 93ed      	ST   X+,R30
0017e8 93fd      	ST   X+,R31
0017e9 936d      	ST   X+,R22
0017ea 937c      	ST   X,R23
0017eb 9508      	RET
                 
                 __PUTDP1_DEC:
0017ec 937e      	ST   -X,R23
0017ed 936e      	ST   -X,R22
0017ee 93fe      	ST   -X,R31
0017ef 93ee      	ST   -X,R30
0017f0 9508      	RET
                 
                 __GETW1PF:
0017f1 bf6b      	OUT  RAMPZ,R22
0017f2 9007      	ELPM R0,Z+
0017f3 91f6      	ELPM R31,Z
0017f4 2de0      	MOV  R30,R0
0017f5 9508      	RET
                 
                 __GETD1PF:
0017f6 bf6b      	OUT  RAMPZ,R22
0017f7 9007      	ELPM R0,Z+
0017f8 9017      	ELPM R1,Z+
0017f9 9167      	ELPM R22,Z+
0017fa 9176      	ELPM R23,Z
0017fb 01f0      	MOVW R30,R0
0017fc 9508      	RET
                 
                 __GETD2PF:
0017fd bf6b      	OUT  RAMPZ,R22
0017fe 91a7      	ELPM R26,Z+
0017ff 91b7      	ELPM R27,Z+
001800 9187      	ELPM R24,Z+
001801 9196      	ELPM R25,Z
001802 9508      	RET
                 
                 __GETD1S0:
001803 81e8      	LD   R30,Y
001804 81f9      	LDD  R31,Y+1
001805 816a      	LDD  R22,Y+2
001806 817b      	LDD  R23,Y+3
001807 9508      	RET
                 
                 __GETD2S0:
001808 81a8      	LD   R26,Y
001809 81b9      	LDD  R27,Y+1
00180a 818a      	LDD  R24,Y+2
00180b 819b      	LDD  R25,Y+3
00180c 9508      	RET
                 
                 __PUTPARD1:
00180d 937a      	ST   -Y,R23
00180e 936a      	ST   -Y,R22
00180f 93fa      	ST   -Y,R31
001810 93ea      	ST   -Y,R30
001811 9508      	RET
                 
                 __PUTPARD2:
001812 939a      	ST   -Y,R25
001813 938a      	ST   -Y,R24
001814 93ba      	ST   -Y,R27
001815 93aa      	ST   -Y,R26
001816 9508      	RET
                 
                 __SWAPD12:
001817 2e18      	MOV  R1,R24
001818 2f86      	MOV  R24,R22
001819 2d61      	MOV  R22,R1
00181a 2e19      	MOV  R1,R25
00181b 2f97      	MOV  R25,R23
00181c 2d71      	MOV  R23,R1
                 
                 __SWAPW12:
00181d 2e1b      	MOV  R1,R27
00181e 2fbf      	MOV  R27,R31
00181f 2df1      	MOV  R31,R1
                 
                 __SWAPB12:
001820 2e1a      	MOV  R1,R26
001821 2fae      	MOV  R26,R30
001822 2de1      	MOV  R30,R1
001823 9508      	RET
                 
                 __EEPROMRDB:
001824 99e1      	SBIC EECR,EEWE
001825 cffe      	RJMP __EEPROMRDB
001826 93ff      	PUSH R31
001827 b7ff      	IN   R31,SREG
001828 94f8      	CLI
001829 bbae      	OUT  EEARL,R26
00182a bbbf      	OUT  EEARH,R27
00182b 9ae0      	SBI  EECR,EERE
00182c b3ed      	IN   R30,EEDR
00182d bfff      	OUT  SREG,R31
00182e 91ff      	POP  R31
00182f 9508      	RET
                 
                 __EEPROMWRD:
001830 d007      	RCALL __EEPROMWRW
001831 9612      	ADIW R26,2
001832 010f      	MOVW R0,R30
001833 01fb      	MOVW R30,R22
001834 d003      	RCALL __EEPROMWRW
001835 01f0      	MOVW R30,R0
001836 9712      	SBIW R26,2
001837 9508      	RET
                 
                 __EEPROMWRW:
001838 d007      	RCALL __EEPROMWRB
001839 9611      	ADIW R26,1
00183a 93ef      	PUSH R30
00183b 2fef      	MOV  R30,R31
00183c d003      	RCALL __EEPROMWRB
00183d 91ef      	POP  R30
00183e 9711      	SBIW R26,1
00183f 9508      	RET
                 
                 __EEPROMWRB:
001840 9be1      	SBIS EECR,EEWE
001841 c002      	RJMP __EEPROMWRB1
001842 95a8      	WDR
001843 cffc      	RJMP __EEPROMWRB
                 __EEPROMWRB1:
001844 b79f      	IN   R25,SREG
001845 94f8      	CLI
001846 bbae      	OUT  EEARL,R26
001847 bbbf      	OUT  EEARH,R27
001848 9ae0      	SBI  EECR,EERE
001849 b38d      	IN   R24,EEDR
00184a 17e8      	CP   R30,R24
00184b f019      	BREQ __EEPROMWRB0
00184c bbed      	OUT  EEDR,R30
00184d 9ae2      	SBI  EECR,EEMWE
00184e 9ae1      	SBI  EECR,EEWE
                 __EEPROMWRB0:
00184f bf9f      	OUT  SREG,R25
001850 9508      	RET
                 
                 __CPD10:
001851 9730      	SBIW R30,0
001852 4060      	SBCI R22,0
001853 4070      	SBCI R23,0
001854 9508      	RET
                 
                 __CPW02:
001855 2400      	CLR  R0
001856 160a      	CP   R0,R26
001857 060b      	CPC  R0,R27
001858 9508      	RET
                 
                 __CPD02:
001859 2400      	CLR  R0
00185a 160a      	CP   R0,R26
00185b 060b      	CPC  R0,R27
00185c 0608      	CPC  R0,R24
00185d 0609      	CPC  R0,R25
00185e 9508      	RET
                 
                 __CPD12:
00185f 17ea      	CP   R30,R26
001860 07fb      	CPC  R31,R27
001861 0768      	CPC  R22,R24
001862 0779      	CPC  R23,R25
001863 9508      	RET
                 
                 __CPD21:
001864 17ae      	CP   R26,R30
001865 07bf      	CPC  R27,R31
001866 0786      	CPC  R24,R22
001867 0797      	CPC  R25,R23
001868 9508      	RET
                 
                 __SAVELOCR6:
001869 935a      	ST   -Y,R21
                 __SAVELOCR5:
00186a 934a      	ST   -Y,R20
                 __SAVELOCR4:
00186b 933a      	ST   -Y,R19
                 __SAVELOCR3:
00186c 932a      	ST   -Y,R18
                 __SAVELOCR2:
00186d 931a      	ST   -Y,R17
00186e 930a      	ST   -Y,R16
00186f 9508      	RET
                 
                 __LOADLOCR6:
001870 815d      	LDD  R21,Y+5
                 __LOADLOCR5:
001871 814c      	LDD  R20,Y+4
                 __LOADLOCR4:
001872 813b      	LDD  R19,Y+3
                 __LOADLOCR3:
001873 812a      	LDD  R18,Y+2
                 __LOADLOCR2:
001874 8119      	LDD  R17,Y+1
001875 8108      	LD   R16,Y
001876 9508      	RET
                 
                 __INITLOCB:
                 __INITLOCW:
001877 0fac      	ADD  R26,R28
001878 1fbd      	ADC  R27,R29
001879 bf6b      	OUT  RAMPZ,R22
                 __INITLOC0:
00187a 9007      	ELPM R0,Z+
00187b 920d      	ST   X+,R0
00187c 958a      	DEC  R24
00187d f7e1      	BRNE __INITLOC0
00187e 9508      	RET
                 
                 ;END OF CODE MARKER
                 __END_OF_CODE:


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

ATmega128 register use summary:
r0 : 120 r1 :  31 r2 :   0 r3 :   0 r4 :   4 r5 :   2 r6 :   4 r7 :  18 
r8 :   3 r9 :   0 r10:   1 r11:   0 r12:   1 r13:   0 r14:   0 r15:   4 
r16: 141 r17: 202 r18: 119 r19:  71 r20:  96 r21:  71 r22: 180 r23: 130 
r24: 143 r25:  98 r26: 681 r27: 324 r28: 118 r29:  13 r30:1102 r31: 430 
x  : 163 y  : 899 z  : 136 
Registers used: 29 out of 35 (82.9%)

ATmega128 instruction use summary:
.lds  :   0 .lds.l:   0 .sts  :   0 .sts.l:   0 adc   :  49 add   :  48 
adiw  : 161 and   :   6 andi  :  52 asr   :   0 bclr  :   0 bld   :   0 
brbc  :   0 brbs  :   0 brcc  :   2 brcs  :   0 break :   0 breq  : 108 
brge  :   6 brhc  :   0 brhs  :   0 brid  :   0 brie  :   0 brlo  :  32 
brlt  :   0 brmi  :   0 brne  : 147 brpl  :   2 brsh  :  30 brtc  :   0 
brts  :   1 brvc  :   0 brvs  :   0 bset  :   0 bst   :   0 call  : 661 
cbi   :  18 cbr   :   0 clc   :   0 clh   :   0 cli   :   4 cln   :   0 
clr   :  72 cls   :   0 clt   :   1 clv   :   0 clz   :   0 com   :   6 
cp    :  29 cpc   :  56 cpi   : 163 cpse  :   0 dec   :   9 des   :   0 
elpm  :  26 eor   :   0 fmul  :   0 fmuls :   0 fmulsu:   0 icall :   5 
ijmp  :   0 in    :  13 inc   :   2 jmp   :  51 ld    : 133 ldd   : 618 
ldi   : 568 lds   :  24 lpm   :   0 lsl   :  11 lsr   :   6 mov   : 137 
movw  : 264 mul   :  11 muls  :   0 mulsu :   0 neg   :   2 nop   :   0 
or    :  19 ori   :  10 out   :  39 pop   :  59 push  :  59 rcall : 113 
ret   : 188 reti  :   0 rjmp  : 267 rol   :  20 ror   :   8 sbc   :  22 
sbci  :  93 sbi   :  16 sbic  :   2 sbis  :   4 sbiw  :  77 sbr   :   2 
sbrc  :   2 sbrs  :  12 sec   :   0 seh   :   0 sei   :   1 sen   :   0 
ser   :   0 ses   :   0 set   :   1 sev   :   0 sez   :   0 sleep :   0 
spm   :   0 st    : 276 std   : 145 sts   :  14 sub   :  15 subi  : 103 
swap  :   1 tst   :   9 wdr   :   2 
Instructions used: 67 out of 117 (57.3%)

ATmega128 memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x0030fe  11726    816  12542  131072   9.6%
[.dseg] 0x000100 0x000af6      0    470    470    4096  11.5%
[.eseg] 0x000000 0x000111      0    263    263    4096   6.4%

Assembly complete, 0 errors, 14 warnings
