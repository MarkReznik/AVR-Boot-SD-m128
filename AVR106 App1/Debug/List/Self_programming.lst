
AVRASM ver. 2.1.30  F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm Fri Oct 18 14:19:19 2024

F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1100): warning: Register r4 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1101): warning: Register r5 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1102): warning: Register r7 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1103): warning: Register r8 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1104): warning: Register r9 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1105): warning: Register r10 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1106): warning: Register r11 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1107): warning: Register r12 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1108): warning: Register r13 already defined by the .DEF directive
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1109): warning: Register r6 already defined by the .DEF directive
                 
                 
                 ;CodeVisionAVR C Compiler V3.12 Advanced
                 ;(C) Copyright 1998-2014 Pavel Haiduc, HP InfoTech s.r.l.
                 ;http://www.hpinfotech.com
                 
                 ;Build configuration    : Debug
                 ;Chip type              : ATmega128
                 ;Program type           : Application
                 ;Clock frequency        : 10.000000 MHz
                 ;Memory model           : Medium
                 ;Optimize for           : Size
                 ;(s)printf features     : int, width
                 ;(s)scanf features      : int, width
                 ;External RAM size      : 0
                 ;Data Stack size        : 2080 byte(s)
                 ;Heap size              : 0 byte(s)
                 ;Promote 'char' to 'int': Yes
                 ;'char' is unsigned     : Yes
                 ;8 bit enums            : Yes
                 ;Global 'const' stored in FLASH: Yes
                 ;Enhanced function parameter passing: Yes
                 ;Enhanced core instructions: On
                 ;Automatic register allocation for global variables: On
                 ;Smart register allocation: On
                 
                 	#define _MODEL_MEDIUM_
                 
                 	#pragma AVRPART ADMIN PART_NAME ATmega128
                 	#pragma AVRPART MEMORY PROG_FLASH 131072
                 	#pragma AVRPART MEMORY EEPROM 4096
                 	#pragma AVRPART MEMORY INT_SRAM SIZE 4096
                 	#pragma AVRPART MEMORY INT_SRAM START_ADDR 0x100
                 
                 	#define CALL_SUPPORTED 1
                 
                 	.LISTMAC
                 	.EQU UDRE=0x5
                 	.EQU RXC=0x7
                 	.EQU USR=0xB
                 	.EQU UDR=0xC
                 	.EQU SPSR=0xE
                 	.EQU SPDR=0xF
                 	.EQU EERE=0x0
                 	.EQU EEWE=0x1
                 	.EQU EEMWE=0x2
                 	.EQU EECR=0x1C
                 	.EQU EEDR=0x1D
                 	.EQU EEARL=0x1E
                 	.EQU EEARH=0x1F
                 	.EQU WDTCR=0x21
                 	.EQU MCUCR=0x35
                 	.EQU RAMPZ=0x3B
                 	.EQU SPL=0x3D
                 	.EQU SPH=0x3E
                 	.EQU SREG=0x3F
                 	.EQU XMCRA=0x6D
                 	.EQU XMCRB=0x6C
                 
                 	.DEF R0X0=R0
                 	.DEF R0X1=R1
                 	.DEF R0X2=R2
                 	.DEF R0X3=R3
                 	.DEF R0X4=R4
                 	.DEF R0X5=R5
                 	.DEF R0X6=R6
                 	.DEF R0X7=R7
                 	.DEF R0X8=R8
                 	.DEF R0X9=R9
                 	.DEF R0XA=R10
                 	.DEF R0XB=R11
                 	.DEF R0XC=R12
                 	.DEF R0XD=R13
                 	.DEF R0XE=R14
                 	.DEF R0XF=R15
                 	.DEF R0X10=R16
                 	.DEF R0X11=R17
                 	.DEF R0X12=R18
                 	.DEF R0X13=R19
                 	.DEF R0X14=R20
                 	.DEF R0X15=R21
                 	.DEF R0X16=R22
                 	.DEF R0X17=R23
                 	.DEF R0X18=R24
                 	.DEF R0X19=R25
                 	.DEF R0X1A=R26
                 	.DEF R0X1B=R27
                 	.DEF R0X1C=R28
                 	.DEF R0X1D=R29
                 	.DEF R0X1E=R30
                 	.DEF R0X1F=R31
                 
                 	.EQU __SRAM_START=0x0100
                 	.EQU __SRAM_END=0x10FF
                 	.EQU __DSTACK_SIZE=0x0820
                 	.EQU __HEAP_SIZE=0x0000
                 	.EQU __CLEAR_SRAM_SIZE=__SRAM_END-__SRAM_START+1
                 
                 	.MACRO __CPD1N
                 	CPI  R30,LOW(@0)
                 	LDI  R26,HIGH(@0)
                 	CPC  R31,R26
                 	LDI  R26,BYTE3(@0)
                 	CPC  R22,R26
                 	LDI  R26,BYTE4(@0)
                 	CPC  R23,R26
                 	.ENDM
                 
                 	.MACRO __CPD2N
                 	CPI  R26,LOW(@0)
                 	LDI  R30,HIGH(@0)
                 	CPC  R27,R30
                 	LDI  R30,BYTE3(@0)
                 	CPC  R24,R30
                 	LDI  R30,BYTE4(@0)
                 	CPC  R25,R30
                 	.ENDM
                 
                 	.MACRO __CPWRR
                 	CP   R@0,R@2
                 	CPC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __CPWRN
                 	CPI  R@0,LOW(@2)
                 	LDI  R30,HIGH(@2)
                 	CPC  R@1,R30
                 	.ENDM
                 
                 	.MACRO __ADDB1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDB2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	SBCI R31,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	SBCI R27,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	SBCI R22,BYTE3(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1N
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	SBCI R22,BYTE3(-@0)
                 	SBCI R23,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __ADDD2N
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	SBCI R24,BYTE3(-@0)
                 	SBCI R25,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __SUBD1N
                 	SUBI R30,LOW(@0)
                 	SBCI R31,HIGH(@0)
                 	SBCI R22,BYTE3(@0)
                 	SBCI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __SUBD2N
                 	SUBI R26,LOW(@0)
                 	SBCI R27,HIGH(@0)
                 	SBCI R24,BYTE3(@0)
                 	SBCI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDBMNN
                 	LDS  R30,@0+(@1)
                 	ANDI R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __ANDWMNN
                 	LDS  R30,@0+(@1)
                 	ANDI R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	LDS  R30,@0+(@1)+1
                 	ANDI R30,HIGH(@2)
                 	STS  @0+(@1)+1,R30
                 	.ENDM
                 
                 	.MACRO __ANDD1N
                 	ANDI R30,LOW(@0)
                 	ANDI R31,HIGH(@0)
                 	ANDI R22,BYTE3(@0)
                 	ANDI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDD2N
                 	ANDI R26,LOW(@0)
                 	ANDI R27,HIGH(@0)
                 	ANDI R24,BYTE3(@0)
                 	ANDI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORBMNN
                 	LDS  R30,@0+(@1)
                 	ORI  R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __ORWMNN
                 	LDS  R30,@0+(@1)
                 	ORI  R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	LDS  R30,@0+(@1)+1
                 	ORI  R30,HIGH(@2)
                 	STS  @0+(@1)+1,R30
                 	.ENDM
                 
                 	.MACRO __ORD1N
                 	ORI  R30,LOW(@0)
                 	ORI  R31,HIGH(@0)
                 	ORI  R22,BYTE3(@0)
                 	ORI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORD2N
                 	ORI  R26,LOW(@0)
                 	ORI  R27,HIGH(@0)
                 	ORI  R24,BYTE3(@0)
                 	ORI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __DELAY_USB
                 	LDI  R24,LOW(@0)
                 __DELAY_USB_LOOP:
                 	DEC  R24
                 	BRNE __DELAY_USB_LOOP
                 	.ENDM
                 
                 	.MACRO __DELAY_USW
                 	LDI  R24,LOW(@0)
                 	LDI  R25,HIGH(@0)
                 __DELAY_USW_LOOP:
                 	SBIW R24,1
                 	BRNE __DELAY_USW_LOOP
                 	.ENDM
                 
                 	.MACRO __GETD1S
                 	LDD  R30,Y+@0
                 	LDD  R31,Y+@0+1
                 	LDD  R22,Y+@0+2
                 	LDD  R23,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __GETD2S
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	LDD  R24,Y+@0+2
                 	LDD  R25,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __PUTD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R31
                 	STD  Y+@0+2,R22
                 	STD  Y+@0+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTD2S
                 	STD  Y+@0,R26
                 	STD  Y+@0+1,R27
                 	STD  Y+@0+2,R24
                 	STD  Y+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __PUTDZ2
                 	STD  Z+@0,R26
                 	STD  Z+@0+1,R27
                 	STD  Z+@0+2,R24
                 	STD  Z+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __CLRD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R30
                 	STD  Y+@0+2,R30
                 	STD  Y+@0+3,R30
                 	.ENDM
                 
                 	.MACRO __POINTB1MN
                 	LDI  R30,LOW(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW1MN
                 	LDI  R30,LOW(@0+(@1))
                 	LDI  R31,HIGH(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD1M
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __POINTW1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	LDI  R22,BYTE3(2*@0+(@1))
                 	LDI  R23,BYTE4(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTB2MN
                 	LDI  R26,LOW(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW2MN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW2FN
                 	LDI  R26,LOW(2*@0+(@1))
                 	LDI  R27,HIGH(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD2FN
                 	LDI  R26,LOW(2*@0+(@1))
                 	LDI  R27,HIGH(2*@0+(@1))
                 	LDI  R24,BYTE3(2*@0+(@1))
                 	LDI  R25,BYTE4(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTBRM
                 	LDI  R@0,LOW(@1)
                 	.ENDM
                 
                 	.MACRO __POINTWRM
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __POINTBRMN
                 	LDI  R@0,LOW(@1+(@2))
                 	.ENDM
                 
                 	.MACRO __POINTWRMN
                 	LDI  R@0,LOW(@2+(@3))
                 	LDI  R@1,HIGH(@2+(@3))
                 	.ENDM
                 
                 	.MACRO __POINTWRFN
                 	LDI  R@0,LOW(@2*2+(@3))
                 	LDI  R@1,HIGH(@2*2+(@3))
                 	.ENDM
                 
                 	.MACRO __GETD1N
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETD2N
                 	LDI  R26,LOW(@0)
                 	LDI  R27,HIGH(@0)
                 	LDI  R24,BYTE3(@0)
                 	LDI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETB1MN
                 	LDS  R30,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETB1HMN
                 	LDS  R31,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETW1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	.ENDM
                 
                 	.MACRO __GETD1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	LDS  R22,@0+(@1)+2
                 	LDS  R23,@0+(@1)+3
                 	.ENDM
                 
                 	.MACRO __GETBRMN
                 	LDS  R@0,@1+(@2)
                 	.ENDM
                 
                 	.MACRO __GETWRMN
                 	LDS  R@0,@2+(@3)
                 	LDS  R@1,@2+(@3)+1
                 	.ENDM
                 
                 	.MACRO __GETWRZ
                 	LDD  R@0,Z+@2
                 	LDD  R@1,Z+@2+1
                 	.ENDM
                 
                 	.MACRO __GETD2Z
                 	LDD  R26,Z+@0
                 	LDD  R27,Z+@0+1
                 	LDD  R24,Z+@0+2
                 	LDD  R25,Z+@0+3
                 	.ENDM
                 
                 	.MACRO __GETB2MN
                 	LDS  R26,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETW2MN
                 	LDS  R26,@0+(@1)
                 	LDS  R27,@0+(@1)+1
                 	.ENDM
                 
                 	.MACRO __GETD2MN
                 	LDS  R26,@0+(@1)
                 	LDS  R27,@0+(@1)+1
                 	LDS  R24,@0+(@1)+2
                 	LDS  R25,@0+(@1)+3
                 	.ENDM
                 
                 	.MACRO __PUTB1MN
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __PUTW1MN
                 	STS  @0+(@1),R30
                 	STS  @0+(@1)+1,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1MN
                 	STS  @0+(@1),R30
                 	STS  @0+(@1)+1,R31
                 	STS  @0+(@1)+2,R22
                 	STS  @0+(@1)+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTB1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMWRB
                 	.ENDM
                 
                 	.MACRO __PUTW1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMWRW
                 	.ENDM
                 
                 	.MACRO __PUTD1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMWRD
                 	.ENDM
                 
                 	.MACRO __PUTBR0MN
                 	STS  @0+(@1),R0
                 	.ENDM
                 
                 	.MACRO __PUTBMRN
                 	STS  @0+(@1),R@2
                 	.ENDM
                 
                 	.MACRO __PUTWMRN
                 	STS  @0+(@1),R@2
                 	STS  @0+(@1)+1,R@3
                 	.ENDM
                 
                 	.MACRO __PUTBZR
                 	STD  Z+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWZR
                 	STD  Z+@2,R@0
                 	STD  Z+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __GETW1R
                 	MOV  R30,R@0
                 	MOV  R31,R@1
                 	.ENDM
                 
                 	.MACRO __GETW2R
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	.ENDM
                 
                 	.MACRO __GETWRN
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __PUTW1R
                 	MOV  R@0,R30
                 	MOV  R@1,R31
                 	.ENDM
                 
                 	.MACRO __PUTW2R
                 	MOV  R@0,R26
                 	MOV  R@1,R27
                 	.ENDM
                 
                 	.MACRO __ADDWRN
                 	SUBI R@0,LOW(-@2)
                 	SBCI R@1,HIGH(-@2)
                 	.ENDM
                 
                 	.MACRO __ADDWRR
                 	ADD  R@0,R@2
                 	ADC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __SUBWRN
                 	SUBI R@0,LOW(@2)
                 	SBCI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __SUBWRR
                 	SUB  R@0,R@2
                 	SBC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ANDWRN
                 	ANDI R@0,LOW(@2)
                 	ANDI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ANDWRR
                 	AND  R@0,R@2
                 	AND  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ORWRN
                 	ORI  R@0,LOW(@2)
                 	ORI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ORWRR
                 	OR   R@0,R@2
                 	OR   R@1,R@3
                 	.ENDM
                 
                 	.MACRO __EORWRR
                 	EOR  R@0,R@2
                 	EOR  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __GETWRS
                 	LDD  R@0,Y+@2
                 	LDD  R@1,Y+@2+1
                 	.ENDM
                 
                 	.MACRO __PUTBSR
                 	STD  Y+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWSR
                 	STD  Y+@2,R@0
                 	STD  Y+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __MOVEWRR
                 	MOV  R@0,R@2
                 	MOV  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __INWR
                 	IN   R@0,@2
                 	IN   R@1,@2+1
                 	.ENDM
                 
                 	.MACRO __OUTWR
                 	OUT  @2+1,R@1
                 	OUT  @2,R@0
                 	.ENDM
                 
                 	.MACRO __GETBRPF
                 	OUT  RAMPZ,R22
                 	ELPM R@0,Z
                 	.ENDM
                 
                 	.MACRO __GETBRPF_INC
                 	OUT  RAMPZ,R22
                 	ELPM R@0,Z+
                 	.ENDM
                 
                 	.MACRO __CALL1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	CALL __GETW1PF
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL2EN
                 	PUSH R26
                 	PUSH R27
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMRDW
                 	POP  R27
                 	POP  R26
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL2EX
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	CALL __EEPROMRDD
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __GETW1STACK
                 	IN   R30,SPL
                 	IN   R31,SPH
                 	ADIW R30,@0+1
                 	LD   R0,Z+
                 	LD   R31,Z
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __GETD1STACK
                 	IN   R30,SPL
                 	IN   R31,SPH
                 	ADIW R30,@0+1
                 	LD   R0,Z+
                 	LD   R1,Z+
                 	LD   R22,Z
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __NBST
                 	BST  R@0,@1
                 	IN   R30,SREG
                 	LDI  R31,0x40
                 	EOR  R30,R31
                 	OUT  SREG,R30
                 	.ENDM
                 
                 
                 	.MACRO __PUTB1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	CALL __PUTDP1
                 	.ENDM
                 
                 
                 	.MACRO __GETB1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R30,Z
                 	.ENDM
                 
                 	.MACRO __GETB1HSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	.ENDM
                 
                 	.MACRO __GETW1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R31,Z
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __GETD1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R1,Z+
                 	LD   R22,Z+
                 	LD   R23,Z
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __GETB2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R26,X
                 	.ENDM
                 
                 	.MACRO __GETW2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	.ENDM
                 
                 	.MACRO __GETD2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R1,X+
                 	LD   R24,X+
                 	LD   R25,X
                 	MOVW R26,R0
                 	.ENDM
                 
                 	.MACRO __GETBRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	LD   R@0,Z
                 	.ENDM
                 
                 	.MACRO __GETWRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	LD   R@0,Z+
                 	LD   R@1,Z
                 	.ENDM
                 
                 	.MACRO __GETBRSX2
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	LD   R@0,X
                 	.ENDM
                 
                 	.MACRO __GETWRSX2
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	LD   R@0,X+
                 	LD   R@1,X
                 	.ENDM
                 
                 	.MACRO __LSLW8SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	CLR  R30
                 	.ENDM
                 
                 	.MACRO __PUTB1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __CLRW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __CLRD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R30
                 	ST   X+,R30
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTB2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z,R26
                 	.ENDM
                 
                 	.MACRO __PUTW2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z,R27
                 	.ENDM
                 
                 	.MACRO __PUTD2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z+,R27
                 	ST   Z+,R24
                 	ST   Z,R25
                 	.ENDM
                 
                 	.MACRO __PUTBSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	ST   Z,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	ST   Z+,R@0
                 	ST   Z,R@1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __MULBRR
                 	MULS R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRRU
                 	MUL  R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRR0
                 	MULS R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBRRU0
                 	MUL  R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBNWRU
                 	LDI  R26,@2
                 	MUL  R26,R@0
                 	MOVW R30,R0
                 	MUL  R26,R@1
                 	ADD  R31,R0
                 	.ENDM
                 
                 ;NAME DEFINITIONS FOR GLOBAL VARIABLES ALLOCATED TO REGISTERS
                 	.DEF _retry=R4
                 	.DEF _retry_msb=R5
                 	.DEF _res=R7
                 	.DEF _nbytes=R8
                 	.DEF _nbytes_msb=R9
                 	.DEF ___AddrToZ24WordToR1R0ByteToSPMCR_SPM_F=R10
                 	.DEF ___AddrToZ24WordToR1R0ByteToSPMCR_SPM_F_msb=R11
                 	.DEF ___AddrToZ24ByteToSPMCR_SPM_W=R12
                 	.DEF ___AddrToZ24ByteToSPMCR_SPM_W_msb=R13
                 	.DEF __lcd_x=R6
                 
                 	.CSEG
                 	.ORG 0x00
                 
                 ;START OF CODE MARKER
                 __START_OF_CODE:
                 
                 ;INTERRUPT VECTORS
000000 940c 0207 	JMP  __RESET
000002 940c 0000 	JMP  0x00
000004 940c 0000 	JMP  0x00
000006 940c 0000 	JMP  0x00
000008 940c 0000 	JMP  0x00
00000a 940c 0000 	JMP  0x00
00000c 940c 0000 	JMP  0x00
00000e 940c 0000 	JMP  0x00
000010 940c 0000 	JMP  0x00
000012 940c 0000 	JMP  0x00
000014 940c 0000 	JMP  0x00
000016 940c 0000 	JMP  0x00
000018 940c 0000 	JMP  0x00
00001a 940c 0000 	JMP  0x00
00001c 940c 0000 	JMP  0x00
00001e 940c 0000 	JMP  0x00
000020 940c 0000 	JMP  0x00
000022 940c 0000 	JMP  0x00
000024 940c 0000 	JMP  0x00
000026 940c 0000 	JMP  0x00
000028 940c 0000 	JMP  0x00
00002a 940c 0000 	JMP  0x00
00002c 940c 0000 	JMP  0x00
00002e 940c 0000 	JMP  0x00
000030 940c 0000 	JMP  0x00
000032 940c 0000 	JMP  0x00
000034 940c 0000 	JMP  0x00
000036 940c 0000 	JMP  0x00
000038 940c 0000 	JMP  0x00
00003a 940c 0000 	JMP  0x00
00003c 940c 0000 	JMP  0x00
00003e 940c 0000 	JMP  0x00
000040 940c 0000 	JMP  0x00
000042 940c 0000 	JMP  0x00
000044 940c 0000 	JMP  0x00
                 
                 _error_msg:
000046 017c
000047 0000
000048 017d
000049 0000      	.DB  LOW(_0x0*2),HIGH(_0x0*2),BYTE3(_0x0*2),BYTE4(_0x0*2),LOW(_0x0*2+1),HIGH(_0x0*2+1),BYTE3(_0x0*2+1),BYTE4(_0x0*2+1)
00004a 0189
00004b 0000
00004c 0189
00004d 0000      	.DB  LOW(_0x0*2+13),HIGH(_0x0*2+13),BYTE3(_0x0*2+13),BYTE4(_0x0*2+13),LOW(_0x0*2+13),HIGH(_0x0*2+13),BYTE3(_0x0*2+13),BYTE4(_0x0*2+13)
00004e 0194
00004f 0000
000050 01a1
000051 0000      	.DB  LOW(_0x0*2+24),HIGH(_0x0*2+24),BYTE3(_0x0*2+24),BYTE4(_0x0*2+24),LOW(_0x0*2+37),HIGH(_0x0*2+37),BYTE3(_0x0*2+37),BYTE4(_0x0*2+37)
000052 01ac
000053 0000
000054 01b7
000055 0000      	.DB  LOW(_0x0*2+48),HIGH(_0x0*2+48),BYTE3(_0x0*2+48),BYTE4(_0x0*2+48),LOW(_0x0*2+59),HIGH(_0x0*2+59),BYTE3(_0x0*2+59),BYTE4(_0x0*2+59)
000056 01c7
000057 0000
000058 01d1
000059 0000      	.DB  LOW(_0x0*2+75),HIGH(_0x0*2+75),BYTE3(_0x0*2+75),BYTE4(_0x0*2+75),LOW(_0x0*2+85),HIGH(_0x0*2+85),BYTE3(_0x0*2+85),BYTE4(_0x0*2+85)
00005a 01da
00005b 0000
00005c 01ec
00005d 0000      	.DB  LOW(_0x0*2+94),HIGH(_0x0*2+94),BYTE3(_0x0*2+94),BYTE4(_0x0*2+94),LOW(_0x0*2+112),HIGH(_0x0*2+112),BYTE3(_0x0*2+112),BYTE4(_0x0*2+112)
00005e 01ff
00005f 0000
000060 0210
000061 0000      	.DB  LOW(_0x0*2+131),HIGH(_0x0*2+131),BYTE3(_0x0*2+131),BYTE4(_0x0*2+131),LOW(_0x0*2+148),HIGH(_0x0*2+148),BYTE3(_0x0*2+148),BYTE4(_0x0*2+148)
000062 021f
000063 0000
000064 0230
000065 0000      	.DB  LOW(_0x0*2+163),HIGH(_0x0*2+163),BYTE3(_0x0*2+163),BYTE4(_0x0*2+163),LOW(_0x0*2+180),HIGH(_0x0*2+180),BYTE3(_0x0*2+180),BYTE4(_0x0*2+180)
000066 0240
000067 0000      	.DB  LOW(_0x0*2+196),HIGH(_0x0*2+196),BYTE3(_0x0*2+196),BYTE4(_0x0*2+196)
                 _cvt_G003:
000068 9a80
000069 4190
00006a 418e
00006b 808f      	.DB  0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80
00006c 4545
00006d 4945
00006e 4949
00006f 8f8e      	.DB  0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F
000070 9290
000071 4f92
000072 4f99
000073 5555      	.DB  0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55
000074 9959
000075 9b9a
000076 9d9c
000077 9f9e      	.DB  0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F
000078 4941
000079 554f
00007a a5a5
00007b a7a6      	.DB  0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7
00007c a9a8
00007d abaa
00007e 21ac
00007f afae      	.DB  0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF
000080 b1b0
000081 b3b2
000082 b5b4
000083 b7b6      	.DB  0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7
000084 b9b8
000085 bbba
000086 bdbc
000087 bfbe      	.DB  0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF
000088 c1c0
000089 c3c2
00008a c5c4
00008b c7c6      	.DB  0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7
00008c c9c8
00008d cbca
00008e cdcc
00008f cfce      	.DB  0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF
000090 d1d0
000091 d3d2
000092 d5d4
000093 d7d6      	.DB  0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7
000094 d9d8
000095 dbda
000096 dddc
000097 dfde      	.DB  0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF
000098 e1e0
000099 e3e2
00009a e5e4
00009b e7e6      	.DB  0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7
00009c e9e8
00009d ebea
00009e edec
00009f efee      	.DB  0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF
0000a0 f1f0
0000a1 f3f2
0000a2 f5f4
0000a3 f7f6      	.DB  0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7
0000a4 f9f8
0000a5 fbfa
0000a6 fdfc
0000a7 fffe      	.DB  0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF
                 _tbl10_G100:
0000a8 2710
0000a9 03e8
0000aa 0064
0000ab 000a      	.DB  0x10,0x27,0xE8,0x3,0x64,0x0,0xA,0x0
0000ac 0001      	.DB  0x1,0x0
                 _tbl16_G100:
0000ad 1000
0000ae 0100
0000af 0010
0000b0 0001      	.DB  0x0,0x10,0x0,0x1,0x10,0x0,0x1,0x0
                 
                 ;GLOBAL REGISTER VARIABLES INITIALIZATION
                 __REG_VARS:
0000b1 f9db
0000b2 f9eb      	.DB  0xDB,0xF9,0xEB,0xF9
                 
                 _0x3:
0000b3 6e55
0000b4 7469
0000b5 5420
0000b6 7365      	.DB  0x55,0x6E,0x69,0x74,0x20,0x54,0x65,0x73
0000b7 2074
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1193): warning: .cseg .db misalignment - padding zero byte
0000b8 0031      	.DB  0x74,0x20,0x31
                 _0x22:
0000b9 3535
0000ba 4141
0000bb 3636
0000bc 4242      	.DB  0x35,0x35,0x41,0x41,0x36,0x36,0x42,0x42
0000bd 4343      	.DB  0x43,0x43
                 _0x0:
0000be 4600
0000bf 5f52
0000c0 4944
0000c1 4b53      	.DB  0x0,0x46,0x52,0x5F,0x44,0x49,0x53,0x4B
0000c2 455f
0000c3 5252
0000c4 4600
0000c5 5f52      	.DB  0x5F,0x45,0x52,0x52,0x0,0x46,0x52,0x5F
0000c6 4e49
0000c7 5f54
0000c8 5245
0000c9 0052      	.DB  0x49,0x4E,0x54,0x5F,0x45,0x52,0x52,0x0
0000ca 5246
0000cb 4e5f
0000cc 544f
0000cd 525f      	.DB  0x46,0x52,0x5F,0x4E,0x4F,0x54,0x5F,0x52
0000ce 4145
0000cf 5944
0000d0 4600
0000d1 5f52      	.DB  0x45,0x41,0x44,0x59,0x0,0x46,0x52,0x5F
0000d2 4f4e
0000d3 465f
0000d4 4c49
0000d5 0045      	.DB  0x4E,0x4F,0x5F,0x46,0x49,0x4C,0x45,0x0
0000d6 5246
0000d7 4e5f
0000d8 5f4f
0000d9 4150      	.DB  0x46,0x52,0x5F,0x4E,0x4F,0x5F,0x50,0x41
0000da 4854
0000db 4600
0000dc 5f52
0000dd 4e49      	.DB  0x54,0x48,0x0,0x46,0x52,0x5F,0x49,0x4E
0000de 4156
0000df 494c
0000e0 5f44
0000e1 414e      	.DB  0x56,0x41,0x4C,0x49,0x44,0x5F,0x4E,0x41
0000e2 454d
0000e3 4600
0000e4 5f52
0000e5 4544      	.DB  0x4D,0x45,0x0,0x46,0x52,0x5F,0x44,0x45
0000e6 494e
0000e7 4445
0000e8 4600
0000e9 5f52      	.DB  0x4E,0x49,0x45,0x44,0x0,0x46,0x52,0x5F
0000ea 5845
0000eb 5349
0000ec 0054
0000ed 5246      	.DB  0x45,0x58,0x49,0x53,0x54,0x0,0x46,0x52
0000ee 495f
0000ef 564e
0000f0 4c41
0000f1 4449      	.DB  0x5F,0x49,0x4E,0x56,0x41,0x4C,0x49,0x44
0000f2 4f5f
0000f3 4a42
0000f4 4345
0000f5 0054      	.DB  0x5F,0x4F,0x42,0x4A,0x45,0x43,0x54,0x0
0000f6 5246
0000f7 575f
0000f8 4952
0000f9 4554      	.DB  0x46,0x52,0x5F,0x57,0x52,0x49,0x54,0x45
0000fa 505f
0000fb 4f52
0000fc 4554
0000fd 5443      	.DB  0x5F,0x50,0x52,0x4F,0x54,0x45,0x43,0x54
0000fe 4445
0000ff 4600
000100 5f52
000101 4e49      	.DB  0x45,0x44,0x0,0x46,0x52,0x5F,0x49,0x4E
000102 4156
000103 494c
000104 5f44
000105 5244      	.DB  0x56,0x41,0x4C,0x49,0x44,0x5F,0x44,0x52
000106 5649
000107 0045
000108 5246
000109 4e5f      	.DB  0x49,0x56,0x45,0x0,0x46,0x52,0x5F,0x4E
00010a 544f
00010b 455f
00010c 414e
00010d 4c42      	.DB  0x4F,0x54,0x5F,0x45,0x4E,0x41,0x42,0x4C
00010e 4445
00010f 4600
000110 5f52
000111 4f4e      	.DB  0x45,0x44,0x0,0x46,0x52,0x5F,0x4E,0x4F
000112 465f
000113 4c49
000114 5345
000115 5359      	.DB  0x5F,0x46,0x49,0x4C,0x45,0x53,0x59,0x53
000116 4554
000117 004d
000118 5246
000119 4d5f      	.DB  0x54,0x45,0x4D,0x0,0x46,0x52,0x5F,0x4D
00011a 464b
00011b 5f53
00011c 4241
00011d 524f      	.DB  0x4B,0x46,0x53,0x5F,0x41,0x42,0x4F,0x52
00011e 4554
00011f 0044
000120 5246
000121 545f      	.DB  0x54,0x45,0x44,0x0,0x46,0x52,0x5F,0x54
000122 4d49
000123 4f45
000124 5455
000125 4500      	.DB  0x49,0x4D,0x45,0x4F,0x55,0x54,0x0,0x45
000126 5252
000127 524f
000128 203a
000129 7025      	.DB  0x52,0x52,0x4F,0x52,0x3A,0x20,0x25,0x70
00012a 0a0d
00012b 5300
00012c 2044
00012d 4b4f      	.DB  0xD,0xA,0x0,0x53,0x44,0x20,0x4F,0x4B
00012e 203a
00012f 5300
000130 2044
000131 5245      	.DB  0x3A,0x20,0x0,0x53,0x44,0x20,0x45,0x52
000132 4f52
000133 3a52
000134 0020
000135 002c      	.DB  0x52,0x4F,0x52,0x3A,0x20,0x0,0x2C,0x0
000136 302f
000137 752f
000138 696e
000139 7474      	.DB  0x2F,0x30,0x2F,0x75,0x6E,0x69,0x74,0x74
00013a 7365
00013b 2e74
00013c 7874
00013d 0074      	.DB  0x65,0x73,0x74,0x2E,0x74,0x78,0x74,0x0
00013e 302f
00013f 552f
000140 4450
000141 5441      	.DB  0x2F,0x30,0x2F,0x55,0x50,0x44,0x41,0x54
000142 3345
000143 442e
000144 5441
000145 4c00      	.DB  0x45,0x33,0x2E,0x44,0x41,0x54,0x0,0x4C
000146 676f
000147 6369
000148 6c61
000149 6420      	.DB  0x6F,0x67,0x69,0x63,0x61,0x6C,0x20,0x64
00014a 6972
00014b 6576
00014c 3020
00014d 203a      	.DB  0x72,0x69,0x76,0x65,0x20,0x30,0x3A,0x20
00014e 6f6d
00014f 6e75
000150 6574
000151 2064      	.DB  0x6D,0x6F,0x75,0x6E,0x74,0x65,0x64,0x20
000152 4b4f
000153 0a0d
000154 5500
000155 494e      	.DB  0x4F,0x4B,0xD,0xA,0x0,0x55,0x4E,0x49
000156 0054
000157 5554
000158 594e
000159 2020      	.DB  0x54,0x0,0x54,0x55,0x4E,0x59,0x20,0x20
00015a 2020
00015b 5854
00015c 2f00
00015d 0030      	.DB  0x20,0x20,0x54,0x58,0x0,0x2F,0x30,0x0
00015e 5055
00015f 4144
000160 4554
000161 4400      	.DB  0x55,0x50,0x44,0x41,0x54,0x45,0x0,0x44
000162 4e4f
000163 3045
000164 3030
000165 4400      	.DB  0x4F,0x4E,0x45,0x30,0x30,0x30,0x0,0x44
000166 4e4f
000167 0045
000168 5055
000169 4144      	.DB  0x4F,0x4E,0x45,0x0,0x55,0x50,0x44,0x41
00016a 4554
00016b 2031
00016c 4144
00016d 0054      	.DB  0x54,0x45,0x31,0x20,0x44,0x41,0x54,0x0
00016e 6164
00016f 6174
000170 4b34
000171 622e      	.DB  0x64,0x61,0x74,0x61,0x34,0x4B,0x2E,0x62
000172 6e69
000173 4600
000174 6c69
000175 2065      	.DB  0x69,0x6E,0x0,0x46,0x69,0x6C,0x65,0x20
000176 7325
000177 6320
000178 6572
000179 7461      	.DB  0x25,0x73,0x20,0x63,0x72,0x65,0x61,0x74
00017a 6465
00017b 4f20
00017c 0d4b
00017d 000a      	.DB  0x65,0x64,0x20,0x4F,0x4B,0xD,0xA,0x0
00017e 7525
00017f 6220
000180 7479
000181 7365      	.DB  0x25,0x75,0x20,0x62,0x79,0x74,0x65,0x73
000182 7720
000183 6972
000184 7474
000185 6e65      	.DB  0x20,0x77,0x72,0x69,0x74,0x74,0x65,0x6E
000186 6f20
000187 2066
000188 7525
000189 0a0d      	.DB  0x20,0x6F,0x66,0x20,0x25,0x75,0xD,0xA
00018a 4600
00018b 6c69
00018c 2065
00018d 7325      	.DB  0x0,0x46,0x69,0x6C,0x65,0x20,0x25,0x73
00018e 6f20
00018f 6570
000190 656e
000191 2064      	.DB  0x20,0x6F,0x70,0x65,0x6E,0x65,0x64,0x20
000192 4b4f
000193 0a0d
000194 2500
000195 2075      	.DB  0x4F,0x4B,0xD,0xA,0x0,0x25,0x75,0x20
000196 7962
000197 6574
000198 2073
000199 6572      	.DB  0x62,0x79,0x74,0x65,0x73,0x20,0x72,0x65
00019a 6461
00019b 0a0d
00019c 5200
00019d 6165      	.DB  0x61,0x64,0xD,0xA,0x0,0x52,0x65,0x61
00019e 2064
00019f 6574
0001a0 7478
0001a1 203a      	.DB  0x64,0x20,0x74,0x65,0x78,0x74,0x3A,0x20
0001a2 2522
0001a3 2273
0001a4 0a0d
0001a5 7000      	.DB  0x22,0x25,0x73,0x22,0xD,0xA,0x0,0x70
0001a6 6666
0001a7 5420
0001a8 7365
0001a9 3374      	.DB  0x66,0x66,0x20,0x54,0x65,0x73,0x74,0x33
0001aa 002e
0001ab 6554
0001ac 7473
0001ad 2033      	.DB  0x2E,0x0,0x54,0x65,0x73,0x74,0x33,0x20
0001ae 6f64
0001af 656e
0001b0 002e      	.DB  0x64,0x6F,0x6E,0x65,0x2E,0x0
                 _0x20003:
0001b1 fa0b      	.DB  0xB,0xFA
                 _0x20004:
0001b2 fa2b      	.DB  0x2B,0xFA
                 _0x2020060:
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1264): warning: .cseg .db misalignment - padding zero byte
0001b3 0001      	.DB  0x1
                 _0x2020000:
0001b4 4e2d
0001b5 4e41
0001b6 4900
0001b7 464e      	.DB  0x2D,0x4E,0x41,0x4E,0x0,0x49,0x4E,0x46
F:\MyProjects\My_AVR_Programmer\AVRbootSD\AVR106 AppBoot_m128_v02\AVR-Boot-SD-m128\AVR106 App1\Debug\List\Self_programming.asm(1267): warning: .cseg .db misalignment - padding zero byte
0001b8 0000      	.DB  0x0
                 _0x2060003:
0001b9 c080      	.DB  0x80,0xC0
                 
                 __GLOBAL_INI_TBL:
0001ba 0004      	.DW  0x04
0001bb 000a      	.DW  0x0A
0001bc 0162 0000 	.DD  __REG_VARS*2
                 
0001be 000b      	.DW  0x0B
0001bf 09fd      	.DW  _text
0001c0 0166 0000 	.DD  _0x3*2
                 
0001c2 0010      	.DW  0x10
0001c3 0920      	.DW  _0x15
0001c4 026c 0000 	.DD  _0x0*2+240
                 
0001c6 0010      	.DW  0x10
0001c7 0930      	.DW  _0x16
0001c8 026c 0000 	.DD  _0x0*2+240
                 
0001ca 000f      	.DW  0x0F
0001cb 0940      	.DW  _0x23
0001cc 027c 0000 	.DD  _0x0*2+256
                 
0001ce 0001      	.DW  0x01
0001cf 094f      	.DW  _0x23+15
0001d0 017c 0000 	.DD  _0x0*2
                 
0001d2 0005      	.DW  0x05
0001d3 0950      	.DW  _0x23+16
0001d4 02a9 0000 	.DD  _0x0*2+301
                 
0001d6 000b      	.DW  0x0B
0001d7 0955      	.DW  _0x23+21
0001d8 02ae 0000 	.DD  _0x0*2+306
                 
0001da 0003      	.DW  0x03
0001db 0960      	.DW  _0x23+32
0001dc 02b9 0000 	.DD  _0x0*2+317
                 
0001de 0007      	.DW  0x07
0001df 0963      	.DW  _0x23+35
0001e0 02bc 0000 	.DD  _0x0*2+320
                 
0001e2 0008      	.DW  0x08
0001e3 096a      	.DW  _0x23+42
0001e4 02c3 0000 	.DD  _0x0*2+327
                 
0001e6 0003      	.DW  0x03
0001e7 0972      	.DW  _0x23+50
0001e8 02b9 0000 	.DD  _0x0*2+317
                 
0001ea 0005      	.DW  0x05
0001eb 0975      	.DW  _0x23+53
0001ec 02cb 0000 	.DD  _0x0*2+335
                 
0001ee 000c      	.DW  0x0C
0001ef 097a      	.DW  _0x23+58
0001f0 02d0 0000 	.DD  _0x0*2+340
                 
0001f2 000b      	.DW  0x0B
0001f3 0986      	.DW  _0x23+70
0001f4 02dc 0000 	.DD  _0x0*2+352
                 
0001f6 0002      	.DW  0x02
0001f7 0b0a      	.DW  ___AddrToZ24ByteToSPMCR_SPM_E
0001f8 0362 0000 	.DD  _0x20003*2
                 
0001fa 0002      	.DW  0x02
0001fb 0b0c      	.DW  ___AddrToZ24ByteToSPMCR_SPM_EW
0001fc 0364 0000 	.DD  _0x20004*2
                 
0001fe 0001      	.DW  0x01
0001ff 0b13      	.DW  __seed_G101
000200 0366 0000 	.DD  _0x2020060*2
                 
000202 0002      	.DW  0x02
000203 0b17      	.DW  __base_y_G103
000204 0372 0000 	.DD  _0x2060003*2
                 
                 _0xFFFFFFFF:
000206 0000      	.DW  0
                 
                 #define __GLOBAL_INI_TBL_PRESENT 1
                 
                 __RESET:
000207 94f8      	CLI
000208 27ee      	CLR  R30
000209 bbec      	OUT  EECR,R30
                 
                 ;INTERRUPT VECTORS ARE PLACED
                 ;AT THE START OF FLASH
00020a e0f1      	LDI  R31,1
00020b bff5      	OUT  MCUCR,R31
00020c bfe5      	OUT  MCUCR,R30
00020d 93e0 006c 	STS  XMCRB,R30
                 
                 ;CLEAR R2-R14
00020f e08d      	LDI  R24,(14-2)+1
000210 e0a2      	LDI  R26,2
000211 27bb      	CLR  R27
                 __CLEAR_REG:
000212 93ed      	ST   X+,R30
000213 958a      	DEC  R24
000214 f7e9      	BRNE __CLEAR_REG
                 
                 ;CLEAR SRAM
000215 e080      	LDI  R24,LOW(__CLEAR_SRAM_SIZE)
000216 e190      	LDI  R25,HIGH(__CLEAR_SRAM_SIZE)
000217 e0a0      	LDI  R26,LOW(__SRAM_START)
000218 e0b1      	LDI  R27,HIGH(__SRAM_START)
                 __CLEAR_SRAM:
000219 93ed      	ST   X+,R30
00021a 9701      	SBIW R24,1
00021b f7e9      	BRNE __CLEAR_SRAM
                 
                 ;GLOBAL VARIABLES INITIALIZATION
00021c e7e4      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
00021d e0f3      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
00021e e0d0      	LDI  R29,BYTE3(__GLOBAL_INI_TBL*2)
                 __GLOBAL_INI_NEXT:
00021f bfdb      	OUT  RAMPZ,R29
000220 9187      	ELPM R24,Z+
000221 9197      	ELPM R25,Z+
000222 9700      	SBIW R24,0
000223 f081      	BREQ __GLOBAL_INI_END
000224 91a7      	ELPM R26,Z+
000225 91b7      	ELPM R27,Z+
000226 9007      	ELPM R0,Z+
000227 9017      	ELPM R1,Z+
000228 91c7      	ELPM R28,Z+
000229 91d7      	ELPM R29,Z+
00022a 01bf      	MOVW R22,R30
00022b b7db      	IN   R29,RAMPZ
00022c 01f0      	MOVW R30,R0
00022d bfcb      	OUT  RAMPZ,R28
                 __GLOBAL_INI_LOOP:
00022e 9007      	ELPM R0,Z+
00022f 920d      	ST   X+,R0
000230 9701      	SBIW R24,1
000231 f7e1      	BRNE __GLOBAL_INI_LOOP
000232 01fb      	MOVW R30,R22
000233 cfeb      	RJMP __GLOBAL_INI_NEXT
                 __GLOBAL_INI_END:
                 
                 ;HARDWARE STACK POINTER INITIALIZATION
000234 efef      	LDI  R30,LOW(__SRAM_END-__HEAP_SIZE)
000235 bfed      	OUT  SPL,R30
000236 e1e0      	LDI  R30,HIGH(__SRAM_END-__HEAP_SIZE)
000237 bfee      	OUT  SPH,R30
                 
                 ;DATA STACK POINTER INITIALIZATION
000238 e2c0      	LDI  R28,LOW(__SRAM_START+__DSTACK_SIZE)
000239 e0d9      	LDI  R29,HIGH(__SRAM_START+__DSTACK_SIZE)
                 
00023a 940c 039f 	JMP  _main
                 
                 	.ESEG
                 	.ORG 0
                 
                 	.DSEG
                 	.ORG 0x920
                 
                 	.CSEG
                 ;// This file has been prepared for Doxygen automatic documentation generation.
                 ;/*! \file ********************************************************************
                 ;*
                 ;* Atmel Corporation
                 ;*
                 ;* - File              : Self_programming_main.c
                 ;* - Compiler          : IAR EWAVR 2.28a / 3.10c and newer
                 ;*
                 ;* - Support mail      : avr@atmel.com
                 ;*
                 ;* - Supported devices : This example is written for ATmega128.
                 ;*
                 ;* - AppNote           : AVR106 - C functions for reading and writing
                 ;*                       to flash memory.
                 ;*
                 ;* - Description       : The file contains an example program using the Flash R/W
                 ;*                       functions provided with the files Self_programming.h /
                 ;*                       Self_programming.c . The program should be compiled using
                 ;*                       a linker file (*.xcl) that is configured to place the
                 ;*                       entire program code into the Boot section of the Flash memory.
                 ;*                       Please refer to the application note document for more
                 ;*                       information.
                 ;*
                 ;* $Revision: 2.0 $
                 ;* $Date: Wednesday, January 18, 2006 15:18:52 UTC $
                 ;*
                 ;*****************************************************************************/
                 ;#include <io.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#define __SLEEP_DEFINED__
                 	.EQU __se_bit=0x20
                 	.EQU __sm_mask=0x1C
                 	.EQU __sm_powerdown=0x10
                 	.EQU __sm_powersave=0x18
                 	.EQU __sm_standby=0x14
                 	.EQU __sm_ext_standby=0x1C
                 	.EQU __sm_adc_noise_red=0x08
                 	.SET power_ctrl_reg=mcucr
                 	#endif
                 ;#include <delay.h>
                 ;#include "Self_programming.h"
                 ;/* FAT on MMC/SD/SD HC card support */
                 ;//Petit fat api
                 ;#include <pff_rn.h>
                 ;#include "diskio.h"		/* Declarations of low level disk I/O functions */
                 ;/* printf */
                 ;#include <stdio.h>
                 ;#include <stdlib.h>
                 ;/* string functions */
                 ;#include <string.h>
                 ;#include <alcd.h>
                 ;
                 ;/*Globals*/
                 ;int retry;
                 ;/* FAT function result */
                 ;FRESULT res;
                 ;/* number of bytes written/read to the file */
                 ;unsigned int nbytes;
                 ;/* will hold the information for logical drive 0: */
                 ;FATFS fat;
                 ;/* will hold the file information */
                 ;//FIL file;
                 ;/* will hold file attributes, time stamp information */
                 ;FILINFO finfo;
                 ;/* root directory path */
                 ;char path[64];//="/0/unittest.txt";
                 ;/* text to be written to the file */
                 ;char text[]="Unit Test 1";
                 
                 	.DSEG
                 ;/* file read buffer */
                 ;char buffer[256];
                 ;
                 ;/* error message list */
                 ;flash char * flash error_msg[]=
                 ;{
                 ;"", /* not used */
                 ;"FR_DISK_ERR",
                 ;"FR_INT_ERR",
                 ;"FR_INT_ERR",
                 ;"FR_NOT_READY",
                 ;"FR_NO_FILE",
                 ;"FR_NO_PATH",
                 ;"FR_INVALID_NAME",
                 ;"FR_DENIED",
                 ;"FR_EXIST",
                 ;"FR_INVALID_OBJECT",
                 ;"FR_WRITE_PROTECTED",
                 ;"FR_INVALID_DRIVE",
                 ;"FR_NOT_ENABLED",
                 ;"FR_NO_FILESYSTEM",
                 ;"FR_MKFS_ABORTED",
                 ;"FR_TIMEOUT"
                 ;};
                 ;/* display error message and stop */
                 ;void error(FRESULT res, unsigned char num)
                 ; 0000 0054 {
                 
                 	.CSEG
                 _error:
                 ; .FSTART _error
                 ; 0000 0055     char strnum[5];
                 ; 0000 0056     if(num>100){
00023c 93aa      	ST   -Y,R26
00023d 9725      	SBIW R28,5
                 ;	res -> Y+6
                 ;	num -> Y+5
                 ;	strnum -> Y+0
00023e 81ad      	LDD  R26,Y+5
00023f 36a5      	CPI  R26,LOW(0x65)
000240 f010      	BRLO _0x4
                 ; 0000 0057        num=100;
000241 e6e4      	LDI  R30,LOW(100)
000242 83ed      	STD  Y+5,R30
                 ; 0000 0058     }
                 ; 0000 0059     itoa(num,strnum);
                 _0x4:
000243 81ed      	LDD  R30,Y+5
000244 940e 144a 	CALL SUBOPT_0x0
                 ; 0000 005A     do{
                 _0x6:
                 ; 0000 005B     if ((res>=0) && (res<=FR_NO_FILESYSTEM)){//FR_NO_FILESYSTEM  FR_TIMEOUT
000246 81ae      	LDD  R26,Y+6
000247 30a0      	CPI  R26,0
000248 f010      	BRLO _0x9
000249 30a8      	CPI  R26,LOW(0x8)
00024a f008      	BRLO _0xA
                 _0x9:
00024b c03f      	RJMP _0x8
                 _0xA:
                 ; 0000 005C        lcd_gotoxy(0,0);
00024c e0e0      	LDI  R30,LOW(0)
00024d 93ea      	ST   -Y,R30
00024e e0a0      	LDI  R26,LOW(0)
00024f 940e 13c2 	CALL _lcd_gotoxy
                 ; 0000 005D        printf("ERROR: %p\r\n",error_msg[res]);
                +
000251 e4eb     +LDI R30 , LOW ( 2 * _0x0 + ( 207 ) )
000252 e0f2     +LDI R31 , HIGH ( 2 * _0x0 + ( 207 ) )
000253 e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 207 ) )
000254 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 207 ) )
                 	__POINTD1FN _0x0,207
000255 940e 1893 	CALL __PUTPARD1
000257 85ea      	LDD  R30,Y+10
000258 940e 1451 	CALL SUBOPT_0x1
00025a 940e 187c 	CALL __GETD1PF
00025c 940e 145e 	CALL SUBOPT_0x2
                 ; 0000 005E        if(res==0){
00025e 81ee      	LDD  R30,Y+6
00025f 30e0      	CPI  R30,0
000260 f429      	BRNE _0xB
                 ; 0000 005F         lcd_putsf("SD OK: ");
                +
000261 e5a7     +LDI R26 , LOW ( 2 * _0x0 + ( 219 ) )
000262 e0b2     +LDI R27 , HIGH ( 2 * _0x0 + ( 219 ) )
000263 e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 219 ) )
000264 e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 219 ) )
                 	__POINTD2FN _0x0,219
000265 c004      	RJMP _0x60
                 ; 0000 0060        }
                 ; 0000 0061        else{
                 _0xB:
                 ; 0000 0062         lcd_putsf("SD ERROR: ");
                +
000266 e5af     +LDI R26 , LOW ( 2 * _0x0 + ( 227 ) )
000267 e0b2     +LDI R27 , HIGH ( 2 * _0x0 + ( 227 ) )
000268 e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 227 ) )
000269 e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 227 ) )
                 	__POINTD2FN _0x0,227
                 _0x60:
00026a 940e 1409 	CALL _lcd_putsf
                 ; 0000 0063        }
                 ; 0000 0064        delay_ms(100);
00026c e6a4      	LDI  R26,LOW(100)
00026d e0b0      	LDI  R27,0
00026e 940e 179b 	CALL _delay_ms
                 ; 0000 0065        lcd_puts(strnum);
000270 01de      	MOVW R26,R28
000271 940e 13f8 	CALL _lcd_puts
                 ; 0000 0066        lcd_putsf(",");
                +
000273 e6aa     +LDI R26 , LOW ( 2 * _0x0 + ( 238 ) )
000274 e0b2     +LDI R27 , HIGH ( 2 * _0x0 + ( 238 ) )
000275 e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 238 ) )
000276 e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 238 ) )
                 	__POINTD2FN _0x0,238
000277 940e 1409 	CALL _lcd_putsf
                 ; 0000 0067        itoa(res,strnum);
000279 81ee      	LDD  R30,Y+6
00027a 940e 144a 	CALL SUBOPT_0x0
                 ; 0000 0068        lcd_puts(strnum);
00027c 01de      	MOVW R26,R28
00027d 940e 13f8 	CALL _lcd_puts
                 ; 0000 0069        lcd_gotoxy(0,1);
00027f e0e0      	LDI  R30,LOW(0)
000280 93ea      	ST   -Y,R30
000281 e0a1      	LDI  R26,LOW(1)
000282 940e 13c2 	CALL _lcd_gotoxy
                 ; 0000 006A        lcd_putsf(error_msg[res]);
000284 81ee      	LDD  R30,Y+6
000285 940e 1451 	CALL SUBOPT_0x1
000287 940e 1883 	CALL __GETD2PF
000289 940e 1409 	CALL _lcd_putsf
                 ; 0000 006B     }
                 ; 0000 006C     /* stop here */
                 ; 0000 006D     //do
                 ; 0000 006E         //{
                 ; 0000 006F           PORTC.0=0;
                 _0x8:
00028b 98a8      	CBI  0x15,0
                 ; 0000 0070           PORTC.1=0;
00028c 98a9      	CBI  0x15,1
                 ; 0000 0071           delay_ms(150);
00028d e9a6      	LDI  R26,LOW(150)
00028e e0b0      	LDI  R27,0
00028f 940e 179b 	CALL _delay_ms
                 ; 0000 0072           PORTC.1=1;
000291 9aa9      	SBI  0x15,1
                 ; 0000 0073           PORTC.0=1;
000292 9aa8      	SBI  0x15,0
                 ; 0000 0074           delay_ms(150);
000293 e9a6      	LDI  R26,LOW(150)
000294 e0b0      	LDI  R27,0
000295 940e 179b 	CALL _delay_ms
                 ; 0000 0075           PORTC=0xFC;
000297 efec      	LDI  R30,LOW(252)
000298 bbe5      	OUT  0x15,R30
                 ; 0000 0076         }
                 ; 0000 0077       while(1);
000299 cfac      	RJMP _0x6
                 ; 0000 0078 }
                 ; .FEND
                 ;unsigned char rn(char *newname, char *oldname){
                 ; 0000 0079 unsigned char rn(char *newname, char *oldname){
                 ; 0000 007A     strcpy(path,"/0/unittest.txt");
                 ;	*newname -> Y+2
                 ;	*oldname -> Y+0
                 ; 0000 007B 
                 ; 0000 007C }
                 
                 	.DSEG
                 _0x15:
000920           	.BYTE 0x10
                 ;unsigned char RenameTest(){
                 ; 0000 007D unsigned char RenameTest(){
                 
                 	.CSEG
                 ; 0000 007E    int retry;
                 ; 0000 007F    strcpy(path,"/0/unittest.txt");
                 ;	retry -> R16,R17
                 ; 0000 0080 
                 ; 0000 0081 }
                 
                 	.DSEG
                 _0x16:
000930           	.BYTE 0x10
                 ;
                 ;FRESULT rename (const char* dirname, const char* oldname, char* newname)
                 ; 0000 0084 {
                 
                 	.CSEG
                 ; 0000 0085     FRESULT res;
                 ; 0000 0086     FILINFO fno;
                 ; 0000 0087     DIR dir;
                 ; 0000 0088     int i;
                 ; 0000 0089     BYTE rwbuf[512];
                 ; 0000 008A 
                 ; 0000 008B     res = pf_opendir(&dir, path);
                 ;	*dirname -> Y+558
                 ;	*oldname -> Y+556
                 ;	*newname -> Y+554
                 ;	res -> R17
                 ;	fno -> Y+532
                 ;	dir -> Y+516
                 ;	i -> R18,R19
                 ;	rwbuf -> Y+4
                 ; 0000 008C     if (res == FR_OK) {
                 ; 0000 008D         i = strlen(path);
                 ; 0000 008E         for (;;) {
                 ; 0000 008F             res = pf_readdir(&dir, &fno);
                 ; 0000 0090             if (res != FR_OK || fno.fname[0] == 0) break;
                 ; 0000 0091             if(fno.fname[0] == 'U'){
                 ; 0000 0092                res = disk_readp(rwbuf,dir.sect,0,512);
                 ; 0000 0093                if (res != FR_OK) break;
                 ; 0000 0094                rwbuf[((dir.index-1)*32)+6]='5';
                 ; 0000 0095                res = disk_writep(0,dir.sect);
                 ; 0000 0096                if (res != FR_OK) break;
                 ; 0000 0097                res = disk_writep(rwbuf,512);
                 ; 0000 0098                if (res != FR_OK) break;
                 ; 0000 0099                res = disk_writep(0,0);
                 ; 0000 009A                break;
                 ; 0000 009B             }
                 ; 0000 009C             /*
                 ; 0000 009D             if (fno.fattrib & AM_DIR) {
                 ; 0000 009E                 sprintf(&path[i], "/%s", fno.fname);
                 ; 0000 009F                 res = scan_files(path);
                 ; 0000 00A0                 if (res != FR_OK) break;
                 ; 0000 00A1                 path[i] = 0;
                 ; 0000 00A2             } else {
                 ; 0000 00A3                 printf("%s/%s\n", path, fno.fname);
                 ; 0000 00A4             }
                 ; 0000 00A5             */
                 ; 0000 00A6         }
                 ; 0000 00A7     }
                 ; 0000 00A8 
                 ; 0000 00A9     return res;
                 ; 0000 00AA }
                 ;
                 ;unsigned char UnitTest1(){
                 ; 0000 00AC unsigned char UnitTest1(){
                 _UnitTest1:
                 ; .FSTART _UnitTest1
                 ; 0000 00AD 
                 ; 0000 00AE     BYTE testbuf[10]={'5','5','A','A','6','6','B','B','C','C'};
                 ; 0000 00AF     strcpy(path,"/0/UPDATE3.DAT");
00029a 972a      	SBIW R28,10
00029b e08a      	LDI  R24,10
00029c e0a0      	LDI  R26,LOW(0)
00029d e0b0      	LDI  R27,HIGH(0)
00029e e7e2      	LDI  R30,LOW(_0x22*2)
00029f e0f1      	LDI  R31,HIGH(_0x22*2)
0002a0 e060      	LDI  R22,BYTE3(_0x22*2)
0002a1 940e 18fd 	CALL __INITLOCB
                 ;	testbuf -> Y+0
0002a3 ebed      	LDI  R30,LOW(_path)
0002a4 e0f9      	LDI  R31,HIGH(_path)
0002a5 93fa      	ST   -Y,R31
0002a6 93ea      	ST   -Y,R30
                +
0002a7 e4a0     +LDI R26 , LOW ( _0x23 + ( 0 ) )
0002a8 e0b9     +LDI R27 , HIGH ( _0x23 + ( 0 ) )
                 	__POINTW2MN _0x23,0
0002a9 940e 1379 	CALL _strcpy
                 ; 0000 00B0     /* mount logical drive 0: */
                 ; 0000 00B1     //if ((res=f_mount(0,&fat))==FR_OK)
                 ; 0000 00B2     /*
                 ; 0000 00B3     for(retry=0;retry<5;retry++){
                 ; 0000 00B4         res=pf_mount(&fat);
                 ; 0000 00B5         if (res==FR_OK){
                 ; 0000 00B6             break;
                 ; 0000 00B7         }
                 ; 0000 00B8         else{
                 ; 0000 00B9           delay_ms(500);
                 ; 0000 00BA         }
                 ; 0000 00BB     }
                 ; 0000 00BC     */
                 ; 0000 00BD     res=pf_mount(&fat);
0002ab e9a1      	LDI  R26,LOW(_fat)
0002ac e0b9      	LDI  R27,HIGH(_fat)
0002ad 940e 0be6 	CALL _pf_mount
0002af 2e7e      	MOV  R7,R30
                 ; 0000 00BE     if (res==FR_OK)
0002b0 2077      	TST  R7
0002b1 f459      	BRNE _0x24
                 ; 0000 00BF        printf("Logical drive 0: mounted OK\r\n");
                +
0002b2 e8eb     +LDI R30 , LOW ( 2 * _0x0 + ( 271 ) )
0002b3 e0f2     +LDI R31 , HIGH ( 2 * _0x0 + ( 271 ) )
0002b4 e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 271 ) )
0002b5 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 271 ) )
                 	__POINTD1FN _0x0,271
0002b6 940e 1893 	CALL __PUTPARD1
0002b8 e080      	LDI  R24,0
0002b9 940e 1326 	CALL _printf
0002bb 9624      	ADIW R28,4
                 ; 0000 00C0     else
0002bc c003      	RJMP _0x25
                 _0x24:
                 ; 0000 00C1        /* an error occured, display it and stop */
                 ; 0000 00C2        error(res,1);
0002bd 927a      	ST   -Y,R7
0002be e0a1      	LDI  R26,LOW(1)
0002bf df7c      	RCALL _error
                 ; 0000 00C3     //scan_files("/0");
                 ; 0000 00C4     res=pf_rename11("","UNIT","TUNY    TX");
                 _0x25:
                +
0002c0 e4ef     +LDI R30 , LOW ( _0x23 + ( 15 ) )
0002c1 e0f9     +LDI R31 , HIGH ( _0x23 + ( 15 ) )
                 	__POINTW1MN _0x23,15
0002c2 93fa      	ST   -Y,R31
0002c3 93ea      	ST   -Y,R30
                +
0002c4 e5e0     +LDI R30 , LOW ( _0x23 + ( 16 ) )
0002c5 e0f9     +LDI R31 , HIGH ( _0x23 + ( 16 ) )
                 	__POINTW1MN _0x23,16
0002c6 93fa      	ST   -Y,R31
0002c7 93ea      	ST   -Y,R30
                +
0002c8 e5a5     +LDI R26 , LOW ( _0x23 + ( 21 ) )
0002c9 e0b9     +LDI R27 , HIGH ( _0x23 + ( 21 ) )
                 	__POINTW2MN _0x23,21
0002ca 940e 1116 	CALL _pf_rename11
0002cc 2e7e      	MOV  R7,R30
                 ; 0000 00C5     res=pf_rename11("/0","UPDATE","DONE000");
                +
0002cd e6e0     +LDI R30 , LOW ( _0x23 + ( 32 ) )
0002ce e0f9     +LDI R31 , HIGH ( _0x23 + ( 32 ) )
                 	__POINTW1MN _0x23,32
0002cf 93fa      	ST   -Y,R31
0002d0 93ea      	ST   -Y,R30
                +
0002d1 e6e3     +LDI R30 , LOW ( _0x23 + ( 35 ) )
0002d2 e0f9     +LDI R31 , HIGH ( _0x23 + ( 35 ) )
                 	__POINTW1MN _0x23,35
0002d3 93fa      	ST   -Y,R31
0002d4 93ea      	ST   -Y,R30
                +
0002d5 e6aa     +LDI R26 , LOW ( _0x23 + ( 42 ) )
0002d6 e0b9     +LDI R27 , HIGH ( _0x23 + ( 42 ) )
                 	__POINTW2MN _0x23,42
0002d7 940e 1116 	CALL _pf_rename11
0002d9 2e7e      	MOV  R7,R30
                 ; 0000 00C6     res=pf_rename11("/0","DONE","UPDATE1 DAT");
                +
0002da e7e2     +LDI R30 , LOW ( _0x23 + ( 50 ) )
0002db e0f9     +LDI R31 , HIGH ( _0x23 + ( 50 ) )
                 	__POINTW1MN _0x23,50
0002dc 93fa      	ST   -Y,R31
0002dd 93ea      	ST   -Y,R30
                +
0002de e7e5     +LDI R30 , LOW ( _0x23 + ( 53 ) )
0002df e0f9     +LDI R31 , HIGH ( _0x23 + ( 53 ) )
                 	__POINTW1MN _0x23,53
0002e0 93fa      	ST   -Y,R31
0002e1 93ea      	ST   -Y,R30
                +
0002e2 e7aa     +LDI R26 , LOW ( _0x23 + ( 58 ) )
0002e3 e0b9     +LDI R27 , HIGH ( _0x23 + ( 58 ) )
                 	__POINTW2MN _0x23,58
0002e4 940e 1116 	CALL _pf_rename11
0002e6 2e7e      	MOV  R7,R30
                 ; 0000 00C7     if(res)
0002e7 2077      	TST  R7
0002e8 f019      	BREQ _0x26
                 ; 0000 00C8         error(res,22);
0002e9 927a      	ST   -Y,R7
0002ea e1a6      	LDI  R26,LOW(22)
0002eb df50      	RCALL _error
                 ; 0000 00C9 
                 ; 0000 00CA 
                 ; 0000 00CB 
                 ; 0000 00CC 
                 ; 0000 00CD 
                 ; 0000 00CE     /*this line will remove READ_ONLY attribute*/
                 ; 0000 00CF     //f_chmod(path, AM_ARC, AM_ARC|AM_RDO);
                 ; 0000 00D0     /* create a new file in the root of drive 0:
                 ; 0000 00D1        and set write access mode */
                 ; 0000 00D2     //if ((res=f_open(&file,path,FA_CREATE_ALWAYS | FA_WRITE))==FR_OK)
                 ; 0000 00D3     if ((res=pf_open("data4K.bin"))==FR_OK)
                 _0x26:
                +
0002ec e8a6     +LDI R26 , LOW ( _0x23 + ( 70 ) )
0002ed e0b9     +LDI R27 , HIGH ( _0x23 + ( 70 ) )
                 	__POINTW2MN _0x23,70
0002ee 940e 0d09 	CALL _pf_open
0002f0 2e7e      	MOV  R7,R30
0002f1 30e0      	CPI  R30,0
0002f2 f439      	BRNE _0x27
                 ; 0000 00D4        printf("File %s created OK\r\n",path);
                +
0002f3 eee7     +LDI R30 , LOW ( 2 * _0x0 + ( 363 ) )
0002f4 e0f2     +LDI R31 , HIGH ( 2 * _0x0 + ( 363 ) )
0002f5 e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 363 ) )
0002f6 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 363 ) )
                 	__POINTD1FN _0x0,363
0002f7 940e 1465 	CALL SUBOPT_0x3
                 ; 0000 00D5     else{
0002f9 c006      	RJMP _0x28
                 _0x27:
                 ; 0000 00D6        /* an error occured, display it and stop */
                 ; 0000 00D7        if(res!=3)
0002fa e0e3      	LDI  R30,LOW(3)
0002fb 15e7      	CP   R30,R7
0002fc f019      	BREQ _0x29
                 ; 0000 00D8             error(res,2);
0002fd 927a      	ST   -Y,R7
0002fe e0a2      	LDI  R26,LOW(2)
0002ff df3c      	RCALL _error
                 ; 0000 00D9     }
                 _0x29:
                 _0x28:
                 ; 0000 00DA 
                 ; 0000 00DB     /* write some text to the file,
                 ; 0000 00DC        without the NULL string terminator sizeof(data)-1 */
                 ; 0000 00DD     //if ((res=f_write(&file,text,sizeof(text)-1,&nbytes))==FR_OK)
                 ; 0000 00DE     if ((res=pf_write512(testbuf,0,sizeof(testbuf),&nbytes))==FR_OK)
000300 940e 146c 	CALL SUBOPT_0x4
000302 940e 1470 	CALL SUBOPT_0x5
000304 940e 1475 	CALL SUBOPT_0x6
000306 f419      	BRNE _0x2A
                 ; 0000 00DF        printf("%u bytes written of %u\r\n",nbytes,sizeof(text)-1);
000307 940e 1480 	CALL SUBOPT_0x7
                 ; 0000 00E0     else
000309 c002      	RJMP _0x2B
                 _0x2A:
                 ; 0000 00E1        ///* an error occured, display it and stop */
                 ; 0000 00E2        error(res,93);
00030a 940e 1496 	CALL SUBOPT_0x8
                 ; 0000 00E3     if ((res=pf_write512(testbuf,20,sizeof(testbuf),&nbytes))==FR_OK)
                 _0x2B:
00030c 940e 146c 	CALL SUBOPT_0x4
00030e e1e4      	LDI  R30,LOW(20)
00030f e0f0      	LDI  R31,HIGH(20)
000310 940e 149a 	CALL SUBOPT_0x9
000312 f419      	BRNE _0x2C
                 ; 0000 00E4        printf("%u bytes written of %u\r\n",nbytes,sizeof(text)-1);
000313 940e 1480 	CALL SUBOPT_0x7
                 ; 0000 00E5     else
000315 c002      	RJMP _0x2D
                 _0x2C:
                 ; 0000 00E6        ///* an error occured, display it and stop */
                 ; 0000 00E7        error(res,93);
000316 940e 1496 	CALL SUBOPT_0x8
                 ; 0000 00E8     if ((res=pf_write512(testbuf,510,sizeof(testbuf),&nbytes))==FR_OK)
                 _0x2D:
000318 940e 146c 	CALL SUBOPT_0x4
00031a efee      	LDI  R30,LOW(510)
00031b e0f1      	LDI  R31,HIGH(510)
00031c 940e 149a 	CALL SUBOPT_0x9
00031e f419      	BRNE _0x2E
                 ; 0000 00E9        printf("%u bytes written of %u\r\n",nbytes,sizeof(text)-1);
00031f 940e 1480 	CALL SUBOPT_0x7
                 ; 0000 00EA     else
000321 c002      	RJMP _0x2F
                 _0x2E:
                 ; 0000 00EB        ///* an error occured, display it and stop */
                 ; 0000 00EC        error(res,93);
000322 940e 1496 	CALL SUBOPT_0x8
                 ; 0000 00ED     if ((res=pf_write512(testbuf,521,sizeof(testbuf),&nbytes))==FR_OK)
                 _0x2F:
000324 940e 146c 	CALL SUBOPT_0x4
000326 e0e9      	LDI  R30,LOW(521)
000327 e0f2      	LDI  R31,HIGH(521)
000328 940e 149a 	CALL SUBOPT_0x9
00032a f419      	BRNE _0x30
                 ; 0000 00EE        printf("%u bytes written of %u\r\n",nbytes,sizeof(text)-1);
00032b 940e 1480 	CALL SUBOPT_0x7
                 ; 0000 00EF     else
00032d c002      	RJMP _0x31
                 _0x30:
                 ; 0000 00F0        ///* an error occured, display it and stop */
                 ; 0000 00F1        error(res,93);
00032e 940e 1496 	CALL SUBOPT_0x8
                 ; 0000 00F2     if ((res=pf_write512(testbuf,1020,sizeof(testbuf),&nbytes))==FR_OK)
                 _0x31:
000330 940e 146c 	CALL SUBOPT_0x4
000332 efec      	LDI  R30,LOW(1020)
000333 e0f3      	LDI  R31,HIGH(1020)
000334 940e 149a 	CALL SUBOPT_0x9
000336 f419      	BRNE _0x32
                 ; 0000 00F3        printf("%u bytes written of %u\r\n",nbytes,sizeof(text)-1);
000337 940e 1480 	CALL SUBOPT_0x7
                 ; 0000 00F4     else
000339 c002      	RJMP _0x33
                 _0x32:
                 ; 0000 00F5        ///* an error occured, display it and stop */
                 ; 0000 00F6        error(res,93);
00033a 940e 1496 	CALL SUBOPT_0x8
                 ; 0000 00F7     if ((res=pf_write512(testbuf,1031,sizeof(testbuf),&nbytes))==FR_OK)
                 _0x33:
00033c 940e 146c 	CALL SUBOPT_0x4
00033e e0e7      	LDI  R30,LOW(1031)
00033f e0f4      	LDI  R31,HIGH(1031)
000340 940e 149a 	CALL SUBOPT_0x9
000342 f419      	BRNE _0x34
                 ; 0000 00F8        printf("%u bytes written of %u\r\n",nbytes,sizeof(text)-1);
000343 940e 1480 	CALL SUBOPT_0x7
                 ; 0000 00F9     else
000345 c002      	RJMP _0x35
                 _0x34:
                 ; 0000 00FA        ///* an error occured, display it and stop */
                 ; 0000 00FB        error(res,93);
000346 940e 1496 	CALL SUBOPT_0x8
                 ; 0000 00FC     if ((res=pf_write(text,sizeof(text)-1,&nbytes))==FR_OK)
                 _0x35:
000348 efed      	LDI  R30,LOW(_text)
000349 e0f9      	LDI  R31,HIGH(_text)
00034a 93fa      	ST   -Y,R31
00034b 93ea      	ST   -Y,R30
00034c e0eb      	LDI  R30,LOW(11)
00034d e0f0      	LDI  R31,HIGH(11)
00034e 93fa      	ST   -Y,R31
00034f 93ea      	ST   -Y,R30
000350 e0a8      	LDI  R26,LOW(8)
000351 e0b0      	LDI  R27,HIGH(8)
000352 940e 0e3d 	CALL _pf_write
000354 2e7e      	MOV  R7,R30
000355 30e0      	CPI  R30,0
000356 f419      	BRNE _0x36
                 ; 0000 00FD        printf("%u bytes written of %u\r\n",nbytes,sizeof(text)-1);
000357 940e 1480 	CALL SUBOPT_0x7
                 ; 0000 00FE     else
000359 c003      	RJMP _0x37
                 _0x36:
                 ; 0000 00FF        ///* an error occured, display it and stop */
                 ; 0000 0100        error(res,3);
00035a 927a      	ST   -Y,R7
00035b e0a3      	LDI  R26,LOW(3)
00035c dedf      	RCALL _error
                 ; 0000 0101 
                 ; 0000 0102         /* close the file */
                 ; 0000 0103     /*
                 ; 0000 0104     if ((res=f_close(&file))==FR_OK)
                 ; 0000 0105        printf("File %s closed OK\r\n",path);
                 ; 0000 0106     else
                 ; 0000 0107        // an error occured, display it and stop
                 ; 0000 0108        error(res,4);
                 ; 0000 0109     */
                 ; 0000 010A 
                 ; 0000 010B     /* open the file in read mode */
                 ; 0000 010C 
                 ; 0000 010D     //if ((res=f_open(&file,path,FA_READ|FA_WRITE))==FR_OK)
                 ; 0000 010E     if ((res=pf_open(path))==FR_OK)
                 _0x37:
00035d ebad      	LDI  R26,LOW(_path)
00035e e0b9      	LDI  R27,HIGH(_path)
00035f 940e 0d09 	CALL _pf_open
000361 2e7e      	MOV  R7,R30
000362 30e0      	CPI  R30,0
000363 f439      	BRNE _0x38
                 ; 0000 010F        printf("File %s opened OK\r\n",path);
                +
000364 e1e5     +LDI R30 , LOW ( 2 * _0x0 + ( 409 ) )
000365 e0f3     +LDI R31 , HIGH ( 2 * _0x0 + ( 409 ) )
000366 e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 409 ) )
000367 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 409 ) )
                 	__POINTD1FN _0x0,409
000368 940e 1465 	CALL SUBOPT_0x3
                 ; 0000 0110     else
00036a c003      	RJMP _0x39
                 _0x38:
                 ; 0000 0111        ///* an error occured, display it and stop */
                 ; 0000 0112        error(res,7);
00036b 927a      	ST   -Y,R7
00036c e0a7      	LDI  R26,LOW(7)
00036d dece      	RCALL _error
                 ; 0000 0113 
                 ; 0000 0114 
                 ; 0000 0115 
                 ; 0000 0116     /* read and display the file's content.
                 ; 0000 0117        make sure to leave space for a NULL terminator
                 ; 0000 0118        in the buffer, so maximum sizeof(buffer)-1 bytes can be read */
                 ; 0000 0119     //if ((res=f_read(&file,buffer,sizeof(buffer)-1,&nbytes))==FR_OK)
                 ; 0000 011A     if ((res=pf_read(buffer,sizeof(buffer)-1,&nbytes))==FR_OK)
                 _0x39:
00036e e0e9      	LDI  R30,LOW(_buffer)
00036f e0fa      	LDI  R31,HIGH(_buffer)
000370 93fa      	ST   -Y,R31
000371 93ea      	ST   -Y,R30
000372 efef      	LDI  R30,LOW(255)
000373 e0f0      	LDI  R31,HIGH(255)
000374 93fa      	ST   -Y,R31
000375 93ea      	ST   -Y,R30
000376 e0a8      	LDI  R26,LOW(8)
000377 e0b0      	LDI  R27,HIGH(8)
000378 940e 0d4e 	CALL _pf_read
00037a 2e7e      	MOV  R7,R30
00037b 30e0      	CPI  R30,0
00037c f4e9      	BRNE _0x3A
                 ; 0000 011B        {
                 ; 0000 011C        printf("%u bytes read\r\n",nbytes);
                +
00037d e2e9     +LDI R30 , LOW ( 2 * _0x0 + ( 429 ) )
00037e e0f3     +LDI R31 , HIGH ( 2 * _0x0 + ( 429 ) )
00037f e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 429 ) )
000380 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 429 ) )
                 	__POINTD1FN _0x0,429
000381 940e 1893 	CALL __PUTPARD1
000383 01f4      	MOVW R30,R8
000384 2766      	CLR  R22
000385 2777      	CLR  R23
000386 940e 145e 	CALL SUBOPT_0x2
                 ; 0000 011D        /* NULL terminate the char string in the buffer */
                 ; 0000 011E        buffer[nbytes+1]=NULL;
000388 01f4      	MOVW R30,R8
                +
000389 5fe6     +SUBI R30 , LOW ( - _buffer - ( 1 ) )
00038a 4ff5     +SBCI R31 , HIGH ( - _buffer - ( 1 ) )
                 	__ADDW1MN _buffer,1
00038b e0a0      	LDI  R26,LOW(0)
00038c 83a0      	STD  Z+0,R26
                 ; 0000 011F        /* display the buffer contents */
                 ; 0000 0120        printf("Read text: \"%s\"\r\n",buffer);
                +
00038d e3e9     +LDI R30 , LOW ( 2 * _0x0 + ( 445 ) )
00038e e0f3     +LDI R31 , HIGH ( 2 * _0x0 + ( 445 ) )
00038f e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 445 ) )
000390 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 445 ) )
                 	__POINTD1FN _0x0,445
000391 940e 1893 	CALL __PUTPARD1
000393 e0e9      	LDI  R30,LOW(_buffer)
000394 e0fa      	LDI  R31,HIGH(_buffer)
000395 2766      	CLR  R22
000396 2777      	CLR  R23
000397 940e 145e 	CALL SUBOPT_0x2
                 ; 0000 0121        }
                 ; 0000 0122     else
000399 c003      	RJMP _0x3B
                 _0x3A:
                 ; 0000 0123        /* an error occured, display it and stop */
                 ; 0000 0124        error(res,6);
00039a 927a      	ST   -Y,R7
00039b e0a6      	LDI  R26,LOW(6)
00039c de9f      	RCALL _error
                 ; 0000 0125 
                 ; 0000 0126 
                 ; 0000 0127     /* close the file */
                 ; 0000 0128     /*
                 ; 0000 0129     if ((res=f_close(&file))==FR_OK)
                 ; 0000 012A        printf("File %s closed OK\r\n",path);
                 ; 0000 012B     else
                 ; 0000 012C        // an error occured, display it and stop
                 ; 0000 012D        error(res,6);
                 ; 0000 012E     */
                 ; 0000 012F 
                 ; 0000 0130     /* display file's attribute, size and time stamp */
                 ; 0000 0131     //display_status(path);
                 ; 0000 0132 
                 ; 0000 0133 
                 ; 0000 0134     /* change file's attributes, set the file to be Read-Only */
                 ; 0000 0135     /*
                 ; 0000 0136     if ((res=f_chmod(path,AM_RDO,AM_RDO))==FR_OK)
                 ; 0000 0137        printf("Read-Only attribute set OK\r\n",path);
                 ; 0000 0138     else
                 ; 0000 0139        // an error occured, display it and stop
                 ; 0000 013A        error(res,7);
                 ; 0000 013B     */
                 ; 0000 013C   return 1;
                 _0x3B:
00039d e0e1      	LDI  R30,LOW(1)
00039e c0cd      	RJMP _0x20C0019
                 ; 0000 013D }
                 ; .FEND
                 
                 	.DSEG
                 _0x23:
000940           	.BYTE 0x51
                 ;void main( void ){
                 ; 0000 013E void main( void ){
                 
                 	.CSEG
                 _main:
                 ; .FSTART _main
                 ; 0000 013F   unsigned char testBuffer1[PAGESIZE];      // Declares variables for testing
                 ; 0000 0140   //unsigned char testBuffer2[PAGESIZE];      // Note. Each array uses PAGESIZE bytes of
                 ; 0000 0141                                             // code stack
                 ; 0000 0142   static unsigned char testChar; // A warning will come saying that this var is set but never used. Ignore it.
                 ; 0000 0143   int index;
                 ; 0000 0144 
                 ; 0000 0145   /* globally enable interrupts */
                 ; 0000 0146     #asm("sei")
00039f 50d1      	SUBI R29,1
                 ;	testBuffer1 -> Y+0
                 ;	index -> R16,R17
0003a0 9478      	sei
                 ; 0000 0147 
                 ; 0000 0148   DDRC=0xFF;
0003a1 efef      	LDI  R30,LOW(255)
0003a2 bbe4      	OUT  0x14,R30
                 ; 0000 0149   PORTC=0xFF;
0003a3 bbe5      	OUT  0x15,R30
                 ; 0000 014A   /* initialize the LCD for 2 lines & 16 columns */
                 ; 0000 014B     lcd_init(16);
0003a4 e1a0      	LDI  R26,LOW(16)
0003a5 940e 141b 	CALL _lcd_init
                 ; 0000 014C   /* switch to writing in Display RAM */
                 ; 0000 014D     //lcd_gotoxy(0,0);
                 ; 0000 014E     lcd_clear();
0003a7 940e 13d1 	CALL _lcd_clear
                 ; 0000 014F     //lcd_putsf("User char 0:");
                 ; 0000 0150 
                 ; 0000 0151   //disk_timerproc();
                 ; 0000 0152   lcd_clear();
0003a9 940e 13d1 	CALL _lcd_clear
                 ; 0000 0153   lcd_putsf("pff Test3.");
                +
0003ab e4ab     +LDI R26 , LOW ( 2 * _0x0 + ( 463 ) )
0003ac e0b3     +LDI R27 , HIGH ( 2 * _0x0 + ( 463 ) )
0003ad e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 463 ) )
0003ae e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 463 ) )
                 	__POINTD2FN _0x0,463
0003af 940e 1409 	CALL _lcd_putsf
                 ; 0000 0154   delay_ms(200);
0003b1 eca8      	LDI  R26,LOW(200)
0003b2 e0b0      	LDI  R27,0
0003b3 940e 179b 	CALL _delay_ms
                 ; 0000 0155   UnitTest1();
0003b5 dee4      	RCALL _UnitTest1
                 ; 0000 0156 
                 ; 0000 0157   //RenameTest();
                 ; 0000 0158   //UpdateTest();
                 ; 0000 0159   //WriteDataTest();
                 ; 0000 015A   //ReadDataTest();
                 ; 0000 015B 
                 ; 0000 015C   /* switch to writing in Display RAM */
                 ; 0000 015D     lcd_gotoxy(0,0);
0003b6 e0e0      	LDI  R30,LOW(0)
0003b7 93ea      	ST   -Y,R30
0003b8 e0a0      	LDI  R26,LOW(0)
0003b9 940e 13c2 	CALL _lcd_gotoxy
                 ; 0000 015E     lcd_putsf("Test3 done.");
                +
0003bb e5a6     +LDI R26 , LOW ( 2 * _0x0 + ( 474 ) )
0003bc e0b3     +LDI R27 , HIGH ( 2 * _0x0 + ( 474 ) )
0003bd e080     +LDI R24 , BYTE3 ( 2 * _0x0 + ( 474 ) )
0003be e090     +LDI R25 , BYTE4 ( 2 * _0x0 + ( 474 ) )
                 	__POINTD2FN _0x0,474
0003bf 940e 1409 	CALL _lcd_putsf
                 ; 0000 015F   do
                 _0x3D:
                 ; 0000 0160     {
                 ; 0000 0161       PORTC.0=0;
0003c1 98a8      	CBI  0x15,0
                 ; 0000 0162       PORTC.1=0;
0003c2 940e 149d 	CALL SUBOPT_0xA
                 ; 0000 0163       delay_ms(500);
                 ; 0000 0164       PORTC.1=1;
                 ; 0000 0165       PORTC.0=1;
0003c4 9aa8      	SBI  0x15,0
                 ; 0000 0166       delay_ms(500);
0003c5 940e 14a4 	CALL SUBOPT_0xB
                 ; 0000 0167       PORTC=0xFC;
0003c7 efec      	LDI  R30,LOW(252)
0003c8 bbe5      	OUT  0x15,R30
                 ; 0000 0168     }
                 ; 0000 0169   while(1);
0003c9 cff7      	RJMP _0x3D
                 ; 0000 016A   for(index=0; index<PAGESIZE; index++){
                 _0x48:
                +
0003ca 3000     +CPI R16 , LOW ( 256 )
0003cb e0e1     +LDI R30 , HIGH ( 256 )
0003cc 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
0003cd f444      	BRGE _0x49
                 ; 0000 016B     testBuffer1[index]=index;//(unsigned char)0xFF; // Fills testBuffer1 with values FF
0003ce 01f8      	MOVW R30,R16
0003cf 01de      	MOVW R26,R28
0003d0 0fea      	ADD  R30,R26
0003d1 1ffb      	ADC  R31,R27
0003d2 8300      	ST   Z,R16
                 ; 0000 016C   }
                +
0003d3 5f0f     +SUBI R16 , LOW ( - 1 )
0003d4 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
0003d5 cff4      	RJMP _0x48
                 _0x49:
                 ; 0000 016D   if(WriteFlashBytes(0x2, testBuffer1,PAGESIZE)){     // Writes testbuffer1 to Flash page 2
0003d6 940e 14a8 	CALL SUBOPT_0xC
0003d8 01fe      	MOVW R30,R28
0003d9 9634      	ADIW R30,4
0003da 93fa      	ST   -Y,R31
0003db 93ea      	ST   -Y,R30
0003dc e0a0      	LDI  R26,LOW(256)
0003dd e0b1      	LDI  R27,HIGH(256)
0003de d0b8      	RCALL _WriteFlashBytes
0003df 30e0      	CPI  R30,0
0003e0 f009      	BREQ _0x4A
                 ; 0000 016E     PORTC.2=0;
0003e1 98aa      	CBI  0x15,2
                 ; 0000 016F   }                                            // Same as byte 4 on page 2
                 ; 0000 0170   //MCUCR &= ~(1<<IVSEL);
                 ; 0000 0171   ReadFlashBytes(0x2,&testChar,1);        // Reads back value from address 0x204
                 _0x4A:
0003e2 940e 14a8 	CALL SUBOPT_0xC
0003e4 940e 14af 	CALL SUBOPT_0xD
                 ; 0000 0172   if(testChar==0x00)
0003e6 91e0 0b09 	LDS  R30,_testChar_S0000005000
0003e8 30e0      	CPI  R30,0
0003e9 f529      	BRNE _0x4D
                 ; 0000 0173   {
                 ; 0000 0174       ReadFlashBytes(0x3,&testChar,1);        // Reads back value from address 0x204
                +
0003ea e0e3     +LDI R30 , LOW ( 0x3 )
0003eb e0f0     +LDI R31 , HIGH ( 0x3 )
0003ec e060     +LDI R22 , BYTE3 ( 0x3 )
0003ed e070     +LDI R23 , BYTE4 ( 0x3 )
                 	__GETD1N 0x3
0003ee 940e 14b7 	CALL SUBOPT_0xE
                 ; 0000 0175       if(testChar==0x01)
0003f0 91a0 0b09 	LDS  R26,_testChar_S0000005000
0003f2 30a1      	CPI  R26,LOW(0x1)
0003f3 f431      	BRNE _0x4E
                 ; 0000 0176         ReadFlashBytes(0x100,&testChar,1);        // Reads back value from address 0x204
                +
0003f4 e0e0     +LDI R30 , LOW ( 0x100 )
0003f5 e0f1     +LDI R31 , HIGH ( 0x100 )
0003f6 e060     +LDI R22 , BYTE3 ( 0x100 )
0003f7 e070     +LDI R23 , BYTE4 ( 0x100 )
                 	__GETD1N 0x100
0003f8 940e 14b7 	CALL SUBOPT_0xE
                 ; 0000 0177         if(testChar==0xFE)
                 _0x4E:
0003fa 91a0 0b09 	LDS  R26,_testChar_S0000005000
0003fc 3fae      	CPI  R26,LOW(0xFE)
0003fd f431      	BRNE _0x4F
                 ; 0000 0178             ReadFlashBytes(0x101,&testChar,1);        // Reads back value from address 0x204
                +
0003fe e0e1     +LDI R30 , LOW ( 0x101 )
0003ff e0f1     +LDI R31 , HIGH ( 0x101 )
000400 e060     +LDI R22 , BYTE3 ( 0x101 )
000401 e070     +LDI R23 , BYTE4 ( 0x101 )
                 	__GETD1N 0x101
000402 940e 14b7 	CALL SUBOPT_0xE
                 ; 0000 0179             if(testChar==0xFF)
                 _0x4F:
000404 91a0 0b09 	LDS  R26,_testChar_S0000005000
000406 3faf      	CPI  R26,LOW(0xFF)
000407 f439      	BRNE _0x50
                 ; 0000 017A               while(1)
                 _0x51:
                 ; 0000 017B               {
                 ; 0000 017C                   PORTC.0=0;
000408 98a8      	CBI  0x15,0
                 ; 0000 017D                   delay_ms(500);
000409 940e 14a4 	CALL SUBOPT_0xB
                 ; 0000 017E                   PORTC.0=1;
00040b 9aa8      	SBI  0x15,0
                 ; 0000 017F                   delay_ms(500);
00040c 940e 14a4 	CALL SUBOPT_0xB
                 ; 0000 0180               }
00040e cff9      	RJMP _0x51
                 ; 0000 0181   }
                 _0x50:
                 ; 0000 0182 
                 ; 0000 0183   while(1)
                 _0x4D:
                 _0x58:
                 ; 0000 0184   {
                 ; 0000 0185       PORTC.1=0;
00040f 940e 149d 	CALL SUBOPT_0xA
                 ; 0000 0186       delay_ms(500);
                 ; 0000 0187       PORTC.1=1;
                 ; 0000 0188       delay_ms(500);
000411 940e 14a4 	CALL SUBOPT_0xB
                 ; 0000 0189   }
000413 cffb      	RJMP _0x58
                 ; 0000 018A   //}
                 ; 0000 018B }
                 _0x5F:
000414 cfff      	RJMP _0x5F
                 ; .FEND
                 ;// This file has been prepared for Doxygen automatic documentation generation.
                 ;/*! \file ********************************************************************
                 ;*
                 ;* Atmel Corporation
                 ;*
                 ;* - File              : Self_programming.c
                 ;* - Compiler          : IAR EWAVR 2.28a / 3.10c and newer
                 ;*
                 ;* - Support mail      : avr@atmel.com
                 ;*
                 ;* - Supported devices : All devices with bootloaders support.
                 ;*
                 ;* - AppNote           : AVR106 - C functions for reading and writing
                 ;*                       to flash memory.
                 ;*
                 ;* - Description       : The file contains functions for easy reading and writing
                 ;*                       of Flash memory on parts having the "Self-programming"
                 ;*                       feature. The user functions are as follows:
                 ;*
                 ;*                       ReadFlashByte()
                 ;*                       ReadFlashPage()
                 ;*                       WriteFlashByte()
                 ;*                       WriteFlashPage()
                 ;*                       RecoverFlash()
                 ;*
                 ;*                       The remaining functions contained in this file are used
                 ;*                       by the functions listet above.
                 ;*
                 ;* $Revision: 2.0 $
                 ;* $Date: Wednesday, January 18, 2006 15:18:52 UTC $
                 ;*
                 ;****************************************************************************/
                 ;#include <io.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 ;//#include <inavr.h>
                 ;#include "Self_programming.h"
                 ;//#include "flash.h"
                 ;
                 ;void (*__AddrToZ24WordToR1R0ByteToSPMCR_SPM_F)(void flash * addr, unsigned int data)= (void(*)(void flash *, unsigned in ...
                 ;void (*__AddrToZ24ByteToSPMCR_SPM_W)(void flash * addr)= (void(*)(void flash *)) 0x0F9EB;
                 ;void (*__AddrToZ24ByteToSPMCR_SPM_E)(void flash * addr)= (void(*)(void flash *)) 0x0FA0B;
                 
                 	.DSEG
                 ;void (*__AddrToZ24ByteToSPMCR_SPM_EW)(void flash * addr)= (void(*)(void flash *)) 0x0FA2B;
                 ;
                 ;/*!
                 ;* Declare global struct variable in EEPROM if Flash recovery enabled.
                 ;* FlashBackup pageNumber holds Flash pageaddress (/PAGESIZE) the data in Flash
                 ;* recovery buffer should be written to if data need to be recovered.
                 ;* FlashBackup.status tells if data need to be recovered.
                 ;**/
                 ;#ifdef __FLASH_RECOVER
                 ;__eeprom struct {
                 ;  unsigned int  pageNumber;
                 ;  unsigned char status;
                 ;}FlashBackup = {0};
                 ;#endif
                 ;
                 ;__eeprom struct {
                 ;  unsigned long  flashStartAdr;
                 ;  unsigned int length;
                 ;  unsigned char status;//0=already moved to flash, 1=not moved to flash yet
                 ;  unsigned char data[PAGESIZE];
                 ;}_EepromBackup @10;
                 ;
                 ;/*!
                 ;* The function Returns one byte located on Flash address given by ucFlashStartAdr.
                 ;**/
                 ;unsigned char ReadFlashByte(MyAddressType flashStartAdr){
                 ; 0001 0042 unsigned char ReadFlashByte(MyAddressType flashStartAdr){
                 
                 	.CSEG
                 _ReadFlashByte:
                 ; .FSTART _ReadFlashByte
                 ; 0001 0043 //#pragma diag_suppress=Pe1053 // Suppress warning for conversion from long-type address to flash ptr.
                 ; 0001 0044   flashStartAdr;//+=ADR_LIMIT_LOW;
000415 940e 1898 	CALL __PUTPARD2
                 ;	flashStartAdr -> Y+0
000417 940e 14ba 	CALL SUBOPT_0xF
                 ; 0001 0045   return (unsigned char)*((MyFlashCharPointer)flashStartAdr);
000419 940e 14ba 	CALL SUBOPT_0xF
                +
00041b bf6b     +OUT RAMPZ , R22
00041c 91e6     +ELPM R30 , Z
                 	__GETBRPF 30
00041d c1e9      	RJMP _0x20C0016
                 ; 0001 0046 //#pragma diag_default=Pe1053 // Back to default.
                 ; 0001 0047 } // Returns data from Flash
                 ; .FEND
                 ;
                 ;/*!
                 ;* The function reads one Flash page from address flashStartAdr and stores data
                 ;* in array dataPage[]. The number of bytes stored is depending upon the
                 ;* Flash page size. The function returns FALSE if input address is not a Flash
                 ;* page address, else TRUE.
                 ;**/
                 ;unsigned char ReadFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage){
                 ; 0001 004F unsigned char ReadFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage){
                 _ReadFlashPage:
                 ; .FSTART _ReadFlashPage
                 ; 0001 0050   unsigned int index;
                 ; 0001 0051   flashStartAdr;//+=ADR_LIMIT_LOW;
00041e 940e 14bd 	CALL SUBOPT_0x10
                 ;	flashStartAdr -> Y+4
                 ;	*dataPage -> Y+2
                 ;	index -> R16,R17
000420 940e 14c2 	CALL SUBOPT_0x11
                 ; 0001 0052   if(!(flashStartAdr & (PAGESIZE-1))){      // If input address is a page address
000422 940e 14c2 	CALL SUBOPT_0x11
000424 30e0      	CPI  R30,0
000425 f4c9      	BRNE _0x20005
                 ; 0001 0053     for(index = 0; index < PAGESIZE; index++){
                +
000426 e000     +LDI R16 , LOW ( 0 )
000427 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x20007:
                +
000428 3000     +CPI R16 , LOW ( 256 )
000429 e0e1     +LDI R30 , HIGH ( 256 )
00042a 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
00042b f478      	BRSH _0x20008
                 ; 0001 0054       dataPage[index] = ReadFlashByte(flashStartAdr + index);
00042c 01f8      	MOVW R30,R16
00042d 81aa      	LDD  R26,Y+2
00042e 81bb      	LDD  R27,Y+2+1
00042f 0fea      	ADD  R30,R26
000430 1ffb      	ADC  R31,R27
000431 93ff      	PUSH R31
000432 93ef      	PUSH R30
000433 940e 14c7 	CALL SUBOPT_0x12
000435 91af      	POP  R26
000436 91bf      	POP  R27
000437 93ec      	ST   X,R30
                 ; 0001 0055     }
                +
000438 5f0f     +SUBI R16 , LOW ( - 1 )
000439 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
00043a cfed      	RJMP _0x20007
                 _0x20008:
                 ; 0001 0056     return TRUE;                            // Return TRUE if valid page address
00043b e0e1      	LDI  R30,LOW(1)
00043c 8119      	LDD  R17,Y+1
00043d 8108      	LDD  R16,Y+0
00043e c1aa      	RJMP _0x20C0017
                 ; 0001 0057   }
                 ; 0001 0058   else{
                 _0x20005:
                 ; 0001 0059     return FALSE;                           // Return FALSE if not valid page address
00043f e0e0      	LDI  R30,LOW(0)
000440 8119      	LDD  R17,Y+1
000441 8108      	LDD  R16,Y+0
000442 c1a6      	RJMP _0x20C0017
                 ; 0001 005A   }
                 ; 0001 005B }
                 ; .FEND
                 ;unsigned char ReadFlashBytes(MyAddressType flashStartAdr, unsigned char *dataPage, unsigned int length){
                 ; 0001 005C unsigned char ReadFlashBytes(MyAddressType flashStartAdr, unsigned char *dataPage, unsigned int length){
                 _ReadFlashBytes:
                 ; .FSTART _ReadFlashBytes
                 ; 0001 005D   	unsigned int index;
                 ; 0001 005E   	flashStartAdr+=ADR_LIMIT_LOW;
000443 940e 14bd 	CALL SUBOPT_0x10
                 ;	flashStartAdr -> Y+6
                 ;	*dataPage -> Y+4
                 ;	length -> Y+2
                 ;	index -> R16,R17
000445 940e 14d2 	CALL SUBOPT_0x13
                +
000447 50e0     +SUBI R30 , LOW ( - 57344 )
000448 42f0     +SBCI R31 , HIGH ( - 57344 )
000449 4f6f     +SBCI R22 , BYTE3 ( - 57344 )
00044a 4f7f     +SBCI R23 , BYTE4 ( - 57344 )
                 	__ADDD1N 57344
00044b 940e 14d7 	CALL SUBOPT_0x14
                 ; 0001 005F     for(index = 0; index < length; index++){
                +
00044d e000     +LDI R16 , LOW ( 0 )
00044e e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x2000B:
00044f 81ea      	LDD  R30,Y+2
000450 81fb      	LDD  R31,Y+2+1
000451 170e      	CP   R16,R30
000452 071f      	CPC  R17,R31
000453 f4a8      	BRSH _0x2000C
                 ; 0001 0060       dataPage[index] = ReadFlashByte(flashStartAdr + index);
000454 01f8      	MOVW R30,R16
000455 81ac      	LDD  R26,Y+4
000456 81bd      	LDD  R27,Y+4+1
000457 0fea      	ADD  R30,R26
000458 1ffb      	ADC  R31,R27
000459 93ff      	PUSH R31
00045a 93ef      	PUSH R30
00045b 01f8      	MOVW R30,R16
00045c 940e 14dc 	CALL SUBOPT_0x15
00045e 2766      	CLR  R22
00045f 2777      	CLR  R23
000460 940e 17ae 	CALL __ADDD21
000462 dfb2      	RCALL _ReadFlashByte
000463 91af      	POP  R26
000464 91bf      	POP  R27
000465 93ec      	ST   X,R30
                 ; 0001 0061     }
                +
000466 5f0f     +SUBI R16 , LOW ( - 1 )
000467 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000468 cfe6      	RJMP _0x2000B
                 _0x2000C:
                 ; 0001 0062     return TRUE;                            // Return TRUE if valid page address
000469 e0e1      	LDI  R30,LOW(1)
00046a 8119      	LDD  R17,Y+1
00046b 8108      	LDD  R16,Y+0
                 _0x20C0019:
00046c 962a      	ADIW R28,10
00046d 9508      	RET
                 ; 0001 0063 }
                 ; .FEND
                 ;unsigned char VerifyFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage){
                 ; 0001 0064 unsigned char VerifyFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage){
                 _VerifyFlashPage:
                 ; .FSTART _VerifyFlashPage
                 ; 0001 0065   unsigned int index;
                 ; 0001 0066   if(!(flashStartAdr & (PAGESIZE-1))){      // If input address is a page address
00046e 940e 14bd 	CALL SUBOPT_0x10
                 ;	flashStartAdr -> Y+4
                 ;	*dataPage -> Y+2
                 ;	index -> R16,R17
000470 940e 14c2 	CALL SUBOPT_0x11
000472 30e0      	CPI  R30,0
000473 f4f1      	BRNE _0x2000D
                 ; 0001 0067     for(index = 0; index < PAGESIZE; index++){
                +
000474 e000     +LDI R16 , LOW ( 0 )
000475 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x2000F:
                +
000476 3000     +CPI R16 , LOW ( 256 )
000477 e0e1     +LDI R30 , HIGH ( 256 )
000478 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
000479 f4a0      	BRSH _0x20010
                 ; 0001 0068       if(dataPage[index] != ReadFlashByte(flashStartAdr + index))
00047a 01f8      	MOVW R30,R16
00047b 81aa      	LDD  R26,Y+2
00047c 81bb      	LDD  R27,Y+2+1
00047d 0fae      	ADD  R26,R30
00047e 1fbf      	ADC  R27,R31
00047f 91ec      	LD   R30,X
000480 93ef      	PUSH R30
000481 940e 14c7 	CALL SUBOPT_0x12
000483 91af      	POP  R26
000484 17ea      	CP   R30,R26
000485 f029      	BREQ _0x20011
                 ; 0001 0069       {
                 ; 0001 006A         PORTC.6=0;
000486 98ae      	CBI  0x15,6
                 ; 0001 006B         return FALSE;
000487 e0e0      	LDI  R30,LOW(0)
000488 8119      	LDD  R17,Y+1
000489 8108      	LDD  R16,Y+0
00048a c15e      	RJMP _0x20C0017
                 ; 0001 006C       }
                 ; 0001 006D     }
                 _0x20011:
                +
00048b 5f0f     +SUBI R16 , LOW ( - 1 )
00048c 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
00048d cfe8      	RJMP _0x2000F
                 _0x20010:
                 ; 0001 006E     return TRUE;                            // Return TRUE if valid page address
00048e e0e1      	LDI  R30,LOW(1)
00048f 8119      	LDD  R17,Y+1
000490 8108      	LDD  R16,Y+0
000491 c157      	RJMP _0x20C0017
                 ; 0001 006F   }
                 ; 0001 0070   else{
                 _0x2000D:
                 ; 0001 0071     PORTC.7=0;
000492 98af      	CBI  0x15,7
                 ; 0001 0072     return FALSE;                           // Return FALSE if not valid page address
000493 e0e0      	LDI  R30,LOW(0)
000494 8119      	LDD  R17,Y+1
000495 8108      	LDD  R16,Y+0
000496 c152      	RJMP _0x20C0017
                 ; 0001 0073   }
                 ; 0001 0074 }
                 ; .FEND
                 ;unsigned char WriteFlashBytes(MyAddressType flashAdr, unsigned char *data, unsigned int length)
                 ; 0001 0076 {
                 _WriteFlashBytes:
                 ; .FSTART _WriteFlashBytes
                 ; 0001 0077     unsigned char tempBuffer[PAGESIZE];
                 ; 0001 0078     MyAddressType flashAdrStart,flashAdrNext;
                 ; 0001 0079     unsigned int lengthStart,lengthIndex;                //length=0x20
                 ; 0001 007A     while(length)
000497 93ba      	ST   -Y,R27
000498 93aa      	ST   -Y,R26
000499 9728      	SBIW R28,8
00049a 50d1      	SUBI R29,1
00049b 940e 18f1 	CALL __SAVELOCR4
                 ;	flashAdr -> Y+272
                 ;	*data -> Y+270
                 ;	length -> Y+268
                 ;	tempBuffer -> Y+12
                 ;	flashAdrStart -> Y+8
                 ;	flashAdrNext -> Y+4
                 ;	lengthStart -> R16,R17
                 ;	lengthIndex -> R18,R19
                 _0x20017:
00049d 940e 14e1 	CALL SUBOPT_0x16
00049f 9730      	SBIW R30,0
0004a0 f409      	BRNE PC+2
0004a1 c091      	RJMP _0x20019
                 ; 0001 007B     {
                 ; 0001 007C         flashAdrStart= flashAdr-(flashAdr%PAGESIZE);//0x1F0-(0x1F0%0x100)=0x0100                        //
0004a2 940e 14e8 	CALL SUBOPT_0x17
0004a4 940e 14f5 	CALL SUBOPT_0x18
0004a6 940e 17b8 	CALL __SUBD21
                +
0004a8 87a8     +STD Y + 8 , R26
0004a9 87b9     +STD Y + 8 + 1 , R27
0004aa 878a     +STD Y + 8 + 2 , R24
0004ab 879b     +STD Y + 8 + 3 , R25
                 	__PUTD2S 8
                 ; 0001 007D         flashAdrNext = flashAdrStart+PAGESIZE;          //0x0100+0x100=0x200
0004ac 940e 14fe 	CALL SUBOPT_0x19
                +
0004ae 50e0     +SUBI R30 , LOW ( - 256 )
0004af 4fff     +SBCI R31 , HIGH ( - 256 )
0004b0 4f6f     +SBCI R22 , BYTE3 ( - 256 )
0004b1 4f7f     +SBCI R23 , BYTE4 ( - 256 )
                 	__ADDD1N 256
0004b2 940e 1503 	CALL SUBOPT_0x1A
                 ; 0001 007E         if((flashAdrNext - flashAdr) >= length)    //enough space case
0004b4 940e 14f5 	CALL SUBOPT_0x18
0004b6 940e 14c2 	CALL SUBOPT_0x11
0004b8 940e 17b3 	CALL __SUBD12
0004ba 01df      	MOVW R26,R30
0004bb 01cb      	MOVW R24,R22
0004bc 940e 14e1 	CALL SUBOPT_0x16
0004be 2766      	CLR  R22
0004bf 2777      	CLR  R23
0004c0 940e 18ea 	CALL __CPD21
0004c2 f060      	BRLO _0x2001A
                 ; 0001 007F         {
                 ; 0001 0080            lengthStart=length;
                +
0004c3 01fe     +MOVW R30 , R28
0004c4 5fe4     +SUBI R30 , LOW ( - 268 )
0004c5 4ffe     +SBCI R31 , HIGH ( - 268 )
0004c6 9101     +LD R16 , Z +
0004c7 8110     +LD R17 , Z
                 	__GETWRSX 16,17,268
                 ; 0001 0081            length=0;
0004c8 e0e0      	LDI  R30,LOW(0)
                +
0004c9 01de     +MOVW R26 , R28
0004ca 5fa4     +SUBI R26 , LOW ( - 268 )
0004cb 4fbe     +SBCI R27 , HIGH ( - 268 )
0004cc 93ed     +ST X + , R30
0004cd 93ec     +ST X , R30
                 	__CLRW1SX 268
                 ; 0001 0082         }
                 ; 0001 0083         else                                   //(0x200-0x1F0)<0x20
0004ce c014      	RJMP _0x2001B
                 _0x2001A:
                 ; 0001 0084         {
                 ; 0001 0085            lengthStart=(flashAdrNext - flashAdr);        //len1=0x200-0x1F0=0x10
                +
0004cf 01de     +MOVW R26 , R28
0004d0 5fa0     +SUBI R26 , LOW ( - 272 )
0004d1 4fbe     +SBCI R27 , HIGH ( - 272 )
0004d2 900d     +LD R0 , X +
0004d3 91bc     +LD R27 , X
0004d4 2da0     +MOV R26 , R0
                 	__GETW2SX 272
0004d5 81ec      	LDD  R30,Y+4
0004d6 81fd      	LDD  R31,Y+4+1
0004d7 1bea      	SUB  R30,R26
0004d8 0bfb      	SBC  R31,R27
0004d9 018f      	MOVW R16,R30
                 ; 0001 0086            length-=lengthStart;                         //len2=0x20-0x10=0x10
0004da 940e 14e1 	CALL SUBOPT_0x16
0004dc 1be0      	SUB  R30,R16
0004dd 0bf1      	SBC  R31,R17
                +
0004de 01de     +MOVW R26 , R28
0004df 5fa4     +SUBI R26 , LOW ( - 268 )
0004e0 4fbe     +SBCI R27 , HIGH ( - 268 )
0004e1 93ed     +ST X + , R30
0004e2 93fc     +ST X , R31
                 	__PUTW1SX 268
                 ; 0001 0087         }
                 _0x2001B:
                 ; 0001 0088         if(ReadFlashPage(flashAdrStart,tempBuffer)==FALSE) //read flash page to tempBuffer
0004e3 940e 14fe 	CALL SUBOPT_0x19
0004e5 940e 1893 	CALL __PUTPARD1
0004e7 01de      	MOVW R26,R28
0004e8 9650      	ADIW R26,16
0004e9 df34      	RCALL _ReadFlashPage
0004ea 30e0      	CPI  R30,0
0004eb f419      	BRNE _0x2001C
                 ; 0001 0089         {
                 ; 0001 008A             PORTC.3=0;
0004ec 98ab      	CBI  0x15,3
                 ; 0001 008B             return FALSE;
0004ed e0e0      	LDI  R30,LOW(0)
0004ee c045      	RJMP _0x20C0018
                 ; 0001 008C         }
                 ; 0001 008D         for(lengthIndex=(flashAdr%PAGESIZE);lengthIndex<((flashAdr%PAGESIZE)+lengthStart);lengthIndex++)
                 _0x2001C:
                +
0004ef 01fe     +MOVW R30 , R28
0004f0 5fe0     +SUBI R30 , LOW ( - 272 )
0004f1 4ffe     +SBCI R31 , HIGH ( - 272 )
0004f2 9001     +LD R0 , Z +
0004f3 81f0     +LD R31 , Z
0004f4 2de0     +MOV R30 , R0
                 	__GETW1SX 272
0004f5 70f0      	ANDI R31,HIGH(0xFF)
0004f6 019f      	MOVW R18,R30
                 _0x20020:
0004f7 940e 14e8 	CALL SUBOPT_0x17
0004f9 01df      	MOVW R26,R30
0004fa 01cb      	MOVW R24,R22
0004fb 01f8      	MOVW R30,R16
0004fc 940e 1508 	CALL SUBOPT_0x1B
0004fe 01d9      	MOVW R26,R18
0004ff 2788      	CLR  R24
000500 2799      	CLR  R25
000501 940e 18ea 	CALL __CPD21
000503 f4a8      	BRSH _0x20021
                 ; 0001 008E         {
                 ; 0001 008F             tempBuffer[lengthIndex]=*data++;
000504 01f9      	MOVW R30,R18
000505 01de      	MOVW R26,R28
000506 961c      	ADIW R26,12
000507 0fea      	ADD  R30,R26
000508 1ffb      	ADC  R31,R27
000509 010f      	MOVW R0,R30
00050a 01de      	MOVW R26,R28
00050b 5fa2      	SUBI R26,LOW(-(270))
00050c 4fbe      	SBCI R27,HIGH(-(270))
00050d 91ed      	LD   R30,X+
00050e 91fd      	LD   R31,X+
00050f 9631      	ADIW R30,1
000510 93fe      	ST   -X,R31
000511 93ee      	ST   -X,R30
000512 9731      	SBIW R30,1
000513 81e0      	LD   R30,Z
000514 01d0      	MOVW R26,R0
000515 93ec      	ST   X,R30
                 ; 0001 0090         }
                +
000516 5f2f     +SUBI R18 , LOW ( - 1 )
000517 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
000518 cfde      	RJMP _0x20020
                 _0x20021:
                 ; 0001 0091         flashAdr=flashAdrNext;
000519 940e 14c2 	CALL SUBOPT_0x11
                +
00051b 01de     +MOVW R26 , R28
00051c 5fa0     +SUBI R26 , LOW ( - 272 )
00051d 4fbe     +SBCI R27 , HIGH ( - 272 )
00051e 93ed     +ST X + , R30
00051f 93fd     +ST X + , R31
000520 936d     +ST X + , R22
000521 937c     +ST X , R23
                 	__PUTD1SX 272
                 ; 0001 0092         if(WriteFlashPage(flashAdrStart+ADR_LIMIT_LOW,tempBuffer)==FALSE) //write tempBuffer to flash page
000522 940e 14fe 	CALL SUBOPT_0x19
                +
000524 50e0     +SUBI R30 , LOW ( - 57344 )
000525 42f0     +SBCI R31 , HIGH ( - 57344 )
000526 4f6f     +SBCI R22 , BYTE3 ( - 57344 )
000527 4f7f     +SBCI R23 , BYTE4 ( - 57344 )
                 	__ADDD1N 57344
000528 940e 1893 	CALL __PUTPARD1
00052a 01de      	MOVW R26,R28
00052b 9650      	ADIW R26,16
00052c d00c      	RCALL _WriteFlashPage
00052d 30e0      	CPI  R30,0
00052e f419      	BRNE _0x20022
                 ; 0001 0093         {
                 ; 0001 0094             PORTC.4=0;
00052f 98ac      	CBI  0x15,4
                 ; 0001 0095             return FALSE;
000530 e0e0      	LDI  R30,LOW(0)
000531 c002      	RJMP _0x20C0018
                 ; 0001 0096         }
                 ; 0001 0097     }
                 _0x20022:
000532 cf6a      	RJMP _0x20017
                 _0x20019:
                 ; 0001 0098     return TRUE;
000533 e0e1      	LDI  R30,LOW(1)
                 _0x20C0018:
000534 940e 18f8 	CALL __LOADLOCR4
000536 9664      	ADIW R28,20
000537 5fdf      	SUBI R29,-1
000538 9508      	RET
                 ; 0001 0099 }
                 ; .FEND
                 ;
                 ;/*!
                 ;* The function writes byte data to Flash address flashAddr. Returns FALSE if
                 ;* input address is not valid Flash byte address for writing, else TRUE.
                 ;**/
                 ;unsigned char WriteFlashByte(MyAddressType flashAddr, unsigned char data){
                 ; 0001 009F unsigned char WriteFlashByte(MyAddressType flashAddr, unsigned char data){
                 ; 0001 00A0   MyAddressType  pageAdr;
                 ; 0001 00A1   unsigned char eepromInterruptSettings,saveSREG;
                 ; 0001 00A2   flashAddr+=ADR_LIMIT_LOW;
                 ;	flashAddr -> Y+7
                 ;	data -> Y+6
                 ;	pageAdr -> Y+2
                 ;	eepromInterruptSettings -> R17
                 ;	saveSREG -> R16
                 ; 0001 00A3   if( AddressCheck( flashAddr & ~(PAGESIZE-1) )){
                 ; 0001 00A4 
                 ; 0001 00A5     if(ReadFlashByte(flashAddr)==data)
                 ; 0001 00A6     {
                 ; 0001 00A7         PORTC.4=0;
                 ; 0001 00A8         return TRUE;
                 ; 0001 00A9     }
                 ; 0001 00AA     eepromInterruptSettings= EECR & (1<<EERIE); // Stores EEPROM interrupt mask
                 ; 0001 00AB     EECR &= ~(1<<EERIE);                    // Disable EEPROM interrupt
                 ; 0001 00AC     while(EECR & (1<<EEWE));                // Wait if ongoing EEPROM write
                 ; 0001 00AD     saveSREG=SREG;
                 ; 0001 00AE     #asm("cli")
                 ; 0001 00AF     pageAdr=flashAddr & ~(PAGESIZE-1);      // Gets Flash page address from byte address
                 ; 0001 00B0 
                 ; 0001 00B1     #ifdef __FLASH_RECOVER
                 ; 0001 00B2     FlashBackup.status=0;                   // Inicate that Flash buffer does
                 ; 0001 00B3                                             // not contain data for writing
                 ; 0001 00B4     while(EECR & (1<<EEWE));
                 ; 0001 00B5     LpmReplaceSpm(flashAddr, data);         // Fills Flash write buffer
                 ; 0001 00B6     WriteBufToFlash(ADR_FLASH_BUFFER);      // Writes to Flash recovery buffer
                 ; 0001 00B7     FlashBackup.pageNumber = (unsigned int) (pageAdr/PAGESIZE); // Stores page address
                 ; 0001 00B8                                                        // data should be written to
                 ; 0001 00B9     FlashBackup.status = FLASH_BUFFER_FULL_ID; // Indicates that Flash recovery buffer
                 ; 0001 00BA                                                // contains unwritten data
                 ; 0001 00BB     while(EECR & (1<<EEWE));
                 ; 0001 00BC     #endif
                 ; 0001 00BD 
                 ; 0001 00BE     if(LpmReplaceSpm(flashAddr, data)!=0)         // Fills Flash write buffer
                 ; 0001 00BF     {
                 ; 0001 00C0         _PAGE_WRITE(pageAdr);
                 ; 0001 00C1         PORTC.1=0;
                 ; 0001 00C2     }
                 ; 0001 00C3     else
                 ; 0001 00C4     {
                 ; 0001 00C5         _PAGE_EW(pageAdr);
                 ; 0001 00C6         PORTC.2=0;
                 ; 0001 00C7     }
                 ; 0001 00C8 
                 ; 0001 00C9     #ifdef __FLASH_RECOVER
                 ; 0001 00CA     FlashBackup.status = 0;                 // Indicates that Flash recovery buffer
                 ; 0001 00CB                                             // does not contain unwritten data
                 ; 0001 00CC     while(EECR & (1<<EEWE));
                 ; 0001 00CD     #endif
                 ; 0001 00CE 
                 ; 0001 00CF     EECR |= eepromInterruptSettings;        // Restore EEPROM interrupt mask
                 ; 0001 00D0     SREG=saveSREG;
                 ; 0001 00D1     return TRUE;                            // Return TRUE if address
                 ; 0001 00D2                                             // valid for writing
                 ; 0001 00D3   }
                 ; 0001 00D4   else
                 ; 0001 00D5     return FALSE;                           // Return FALSE if address not
                 ; 0001 00D6                                             // valid for writing
                 ; 0001 00D7 }
                 ;
                 ;/*!
                 ;* The function writes data from array dataPage[] to Flash page address
                 ;* flashStartAdr. The Number of bytes written is depending upon the Flash page
                 ;* size. Returns FALSE if input argument ucFlashStartAdr is not a valid Flash
                 ;* page address for writing, else TRUE.
                 ;**/
                 ;unsigned char WriteFlashPage(MyAddressType flashStartAdr, unsigned char *dataPage)
                 ; 0001 00E0 {
                 _WriteFlashPage:
                 ; .FSTART _WriteFlashPage
                 ; 0001 00E1   unsigned int index;
                 ; 0001 00E2   unsigned char eepromInterruptSettings,saveSREG;
                 ; 0001 00E3   MyAddressType  pageAdr;
                 ; 0001 00E4   flashStartAdr;//+=ADR_LIMIT_LOW;
000539 93ba      	ST   -Y,R27
00053a 93aa      	ST   -Y,R26
00053b 9724      	SBIW R28,4
00053c 940e 18f1 	CALL __SAVELOCR4
                 ;	flashStartAdr -> Y+10
                 ;	*dataPage -> Y+8
                 ;	index -> R16,R17
                 ;	eepromInterruptSettings -> R19
                 ;	saveSREG -> R18
                 ;	pageAdr -> Y+4
00053e 940e 150d 	CALL SUBOPT_0x1C
                 ; 0001 00E5   if( AddressCheck(flashStartAdr) ){
000540 940e 1512 	CALL SUBOPT_0x1D
000542 d0a8      	RCALL _AddressCheck
000543 30e0      	CPI  R30,0
000544 f409      	BRNE PC+2
000545 c063      	RJMP _0x20033
                 ; 0001 00E6     if(eepromBackup(flashStartAdr,PAGESIZE,dataPage)==0)
000546 940e 150d 	CALL SUBOPT_0x1C
000548 940e 1893 	CALL __PUTPARD1
00054a e0e0      	LDI  R30,LOW(256)
00054b e0f1      	LDI  R31,HIGH(256)
00054c 93fa      	ST   -Y,R31
00054d 93ea      	ST   -Y,R30
00054e 85ae      	LDD  R26,Y+14
00054f 85bf      	LDD  R27,Y+14+1
000550 d05d      	RCALL _eepromBackup
000551 30e0      	CPI  R30,0
000552 f429      	BRNE _0x20034
                 ; 0001 00E7     {
                 ; 0001 00E8         return FALSE;
000553 e0e0      	LDI  R30,LOW(0)
000554 940e 18f8 	CALL __LOADLOCR4
000556 962e      	ADIW R28,14
000557 9508      	RET
                 ; 0001 00E9     }
                 ; 0001 00EA     eepromInterruptSettings = EECR & (1<<EERIE); // Stoes EEPROM interrupt mask
                 _0x20034:
000558 b3ec      	IN   R30,0x1C
000559 70e8      	ANDI R30,LOW(0x8)
00055a 2f3e      	MOV  R19,R30
                 ; 0001 00EB     EECR &= ~(1<<EERIE);                    // Disable EEPROM interrupt
00055b 98e3      	CBI  0x1C,3
                 ; 0001 00EC     while(EECR & (1<<EEWE));                // Wait if ongoing EEPROM write
                 _0x20035:
00055c 99e1      	SBIC 0x1C,1
00055d cffe      	RJMP _0x20035
                 ; 0001 00ED     saveSREG=SREG;                          // Save SREG
00055e b72f      	IN   R18,63
                 ; 0001 00EE     #asm("cli")
00055f 94f8      	cli
                 ; 0001 00EF 
                 ; 0001 00F0     #ifdef __FLASH_RECOVER
                 ; 0001 00F1     FlashBackup.status=0;                   // Inicate that Flash buffer does
                 ; 0001 00F2                                             // not contain data for writing
                 ; 0001 00F3     while(EECR & (1<<EEWE));
                 ; 0001 00F4 
                 ; 0001 00F5     for(index = 0; index < PAGESIZE; index+=2){ // Fills Flash write buffer
                 ; 0001 00F6       _WAIT_FOR_SPM();
                 ; 0001 00F7       _FILL_TEMP_WORD(index, (unsigned int)dataPage[index]+((unsigned int)dataPage[index+1] << 8));
                 ; 0001 00F8     }
                 ; 0001 00F9 
                 ; 0001 00FA     WriteBufToFlash(ADR_FLASH_BUFFER);      // Writes to Flash recovery buffer
                 ; 0001 00FB     FlashBackup.pageNumber=(unsigned int)(flashStartAdr/PAGESIZE);
                 ; 0001 00FC     FlashBackup.status = FLASH_BUFFER_FULL_ID; // Indicates that Flash recovery buffer
                 ; 0001 00FD                                            // contains unwritten data
                 ; 0001 00FE     while(EECR & (1<<EEWE));
                 ; 0001 00FF     #endif
                 ; 0001 0100 
                 ; 0001 0101     //debug
                 ; 0001 0102     _PAGE_ERASE(flashStartAdr);
000560 940e 1512 	CALL SUBOPT_0x1D
                +
000562 91e0 0b0a+LDS R30 , ___AddrToZ24ByteToSPMCR_SPM_E + ( 0 )
000564 91f0 0b0b+LDS R31 , ___AddrToZ24ByteToSPMCR_SPM_E + ( 0 ) + 1
000566 9509     +ICALL
                 	__CALL1MN ___AddrToZ24ByteToSPMCR_SPM_E,0
                 ; 0001 0103 
                 ; 0001 0104     for(index = 0; index < PAGESIZE; index+=2){ // Fills Flash write buffer
                +
000567 e000     +LDI R16 , LOW ( 0 )
000568 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x20039:
                +
000569 3000     +CPI R16 , LOW ( 256 )
00056a e0e1     +LDI R30 , HIGH ( 256 )
00056b 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
00056c f4e0      	BRSH _0x2003A
                 ; 0001 0105       _FILL_TEMP_WORD(index, (unsigned int)dataPage[index]+((unsigned int)dataPage[index+1] << 8));
00056d 01f8      	MOVW R30,R16
00056e 2766      	CLR  R22
00056f 2777      	CLR  R23
000570 940e 1893 	CALL __PUTPARD1
000572 01f8      	MOVW R30,R16
000573 85ac      	LDD  R26,Y+12
000574 85bd      	LDD  R27,Y+12+1
000575 0fae      	ADD  R26,R30
000576 1fbf      	ADC  R27,R31
000577 900c      	LD   R0,X
000578 2411      	CLR  R1
000579 9631      	ADIW R30,1
00057a 85ac      	LDD  R26,Y+12
00057b 85bd      	LDD  R27,Y+12+1
00057c 0fae      	ADD  R26,R30
00057d 1fbf      	ADC  R27,R31
00057e 91ec      	LD   R30,X
00057f 2ffe      	MOV  R31,R30
000580 e0e0      	LDI  R30,0
000581 01d0      	MOVW R26,R0
000582 0fae      	ADD  R26,R30
000583 1fbf      	ADC  R27,R31
000584 01f5      	MOVW R30,R10
000585 9509      	ICALL
                 ; 0001 0106     }
                +
000586 5f0e     +SUBI R16 , LOW ( - 2 )
000587 4f1f     +SBCI R17 , HIGH ( - 2 )
                 	__ADDWRN 16,17,2
000588 cfe0      	RJMP _0x20039
                 _0x2003A:
                 ; 0001 0107     _PAGE_WRITE(flashStartAdr);
000589 940e 1512 	CALL SUBOPT_0x1D
00058b 01f6      	MOVW R30,R12
00058c 9509      	ICALL
                 ; 0001 0108     if(VerifyFlashPage(flashStartAdr,dataPage)==FALSE)
00058d 940e 150d 	CALL SUBOPT_0x1C
00058f 940e 1893 	CALL __PUTPARD1
000591 85ac      	LDD  R26,Y+12
000592 85bd      	LDD  R27,Y+12+1
000593 deda      	RCALL _VerifyFlashPage
000594 30e0      	CPI  R30,0
000595 f429      	BRNE _0x2003B
                 ; 0001 0109     {
                 ; 0001 010A       //PORTC.6=0;
                 ; 0001 010B       return FALSE;
000596 e0e0      	LDI  R30,LOW(0)
000597 940e 18f8 	CALL __LOADLOCR4
000599 940c 0add 	JMP  _0x20C0011
                 ; 0001 010C     }
                 ; 0001 010D     #ifdef __FLASH_RECOVER
                 ; 0001 010E       FlashBackup.status=0;                 // Inicate that Flash buffer does
                 ; 0001 010F                                             // not contain data for writing
                 ; 0001 0110       while(EECR & (1<<EEWE));
                 ; 0001 0111     #endif
                 ; 0001 0112 
                 ; 0001 0113     EECR |= eepromInterruptSettings;        // Restore EEPROM interrupt mask
                 _0x2003B:
00059b b3ec      	IN   R30,0x1C
00059c 2be3      	OR   R30,R19
00059d bbec      	OUT  0x1C,R30
                 ; 0001 0114     SREG=saveSREG;                          // Restore interrupts to SREG
00059e bf2f      	OUT  0x3F,R18
                 ; 0001 0115     _EepromBackup.status=0;
                +
00059f e1a0     +LDI R26 , LOW ( __EepromBackup + ( 6 ) )
0005a0 e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 6 ) )
                 	__POINTW2MN __EepromBackup,6
0005a1 e0e0      	LDI  R30,LOW(0)
0005a2 940e 18c6 	CALL __EEPROMWRB
                 ; 0001 0116     return TRUE;                            // Return TRUE if address                                            // vali ...
0005a4 e0e1      	LDI  R30,LOW(1)
0005a5 940e 18f8 	CALL __LOADLOCR4
0005a7 940c 0add 	JMP  _0x20C0011
                 ; 0001 0117   }
                 ; 0001 0118   else
                 _0x20033:
                 ; 0001 0119     return FALSE;                           // Return FALSE if not address not
0005a9 e0e0      	LDI  R30,LOW(0)
0005aa 940e 18f8 	CALL __LOADLOCR4
0005ac 940c 0add 	JMP  _0x20C0011
                 ; 0001 011A                                             // valid for writing
                 ; 0001 011B }
                 ; .FEND
                 ;
                 ;unsigned char eepromBackup(unsigned long flashStartAdr, unsigned int length, unsigned char *data)
                 ; 0001 011E {
                 _eepromBackup:
                 ; .FSTART _eepromBackup
                 ; 0001 011F     _EepromBackup.flashStartAdr=flashStartAdr;
0005ae 93ba      	ST   -Y,R27
0005af 93aa      	ST   -Y,R26
                 ;	flashStartAdr -> Y+4
                 ;	length -> Y+2
                 ;	*data -> Y+0
0005b0 940e 14c2 	CALL SUBOPT_0x11
0005b2 e0aa      	LDI  R26,LOW(__EepromBackup)
0005b3 e0b0      	LDI  R27,HIGH(__EepromBackup)
0005b4 940e 18b6 	CALL __EEPROMWRD
                 ; 0001 0120     _EepromBackup.length=length;
                +
0005b6 e0ae     +LDI R26 , LOW ( __EepromBackup + ( 4 ) )
0005b7 e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 4 ) )
                 	__POINTW2MN __EepromBackup,4
0005b8 81ea      	LDD  R30,Y+2
0005b9 81fb      	LDD  R31,Y+2+1
0005ba 940e 18be 	CALL __EEPROMWRW
                 ; 0001 0121     for(;length>0;length--)
                 _0x2003E:
0005bc 81aa      	LDD  R26,Y+2
0005bd 81bb      	LDD  R27,Y+2+1
0005be 940e 18db 	CALL __CPW02
0005c0 f518      	BRSH _0x2003F
                 ; 0001 0122     {
                 ; 0001 0123          _EepromBackup.data[length-1]=data[length-1];
                +
0005c1 e1a1     +LDI R26 , LOW ( __EepromBackup + ( 7 ) )
0005c2 e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 7 ) )
                 	__POINTW2MN __EepromBackup,7
0005c3 81ea      	LDD  R30,Y+2
0005c4 81fb      	LDD  R31,Y+2+1
0005c5 9731      	SBIW R30,1
0005c6 0fea      	ADD  R30,R26
0005c7 1ffb      	ADC  R31,R27
0005c8 010f      	MOVW R0,R30
0005c9 940e 1517 	CALL SUBOPT_0x1E
0005cb 01d0      	MOVW R26,R0
0005cc 940e 18c6 	CALL __EEPROMWRB
                 ; 0001 0124          if(_EepromBackup.data[length-1]!=data[length-1])
                +
0005ce e1a1     +LDI R26 , LOW ( __EepromBackup + ( 7 ) )
0005cf e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 7 ) )
                 	__POINTW2MN __EepromBackup,7
0005d0 81ea      	LDD  R30,Y+2
0005d1 81fb      	LDD  R31,Y+2+1
0005d2 9731      	SBIW R30,1
0005d3 0fae      	ADD  R26,R30
0005d4 1fbf      	ADC  R27,R31
0005d5 940e 18aa 	CALL __EEPROMRDB
0005d7 2e0e      	MOV  R0,R30
0005d8 940e 1517 	CALL SUBOPT_0x1E
0005da 15e0      	CP   R30,R0
0005db f011      	BREQ _0x20040
                 ; 0001 0125          {
                 ; 0001 0126             return FALSE;//error during backup on eeprom
0005dc e0e0      	LDI  R30,LOW(0)
0005dd c00b      	RJMP _0x20C0017
                 ; 0001 0127          }
                 ; 0001 0128     }
                 _0x20040:
0005de 81ea      	LDD  R30,Y+2
0005df 81fb      	LDD  R31,Y+2+1
0005e0 9731      	SBIW R30,1
0005e1 83ea      	STD  Y+2,R30
0005e2 83fb      	STD  Y+2+1,R31
0005e3 cfd8      	RJMP _0x2003E
                 _0x2003F:
                 ; 0001 0129     _EepromBackup.status=1;//1=ready to move to flash
                +
0005e4 e1a0     +LDI R26 , LOW ( __EepromBackup + ( 6 ) )
0005e5 e0b0     +LDI R27 , HIGH ( __EepromBackup + ( 6 ) )
                 	__POINTW2MN __EepromBackup,6
0005e6 e0e1      	LDI  R30,LOW(1)
0005e7 940e 18c6 	CALL __EEPROMWRB
                 ; 0001 012A     return TRUE;
                 _0x20C0017:
0005e9 9628      	ADIW R28,8
0005ea 9508      	RET
                 ; 0001 012B }
                 ; .FEND
                 ;
                 ;/*!
                 ;* The function checks if global variable FlashBackup.status indicates that Flash recovery
                 ;* buffer contains data that needs to be written to Flash. Writes data from
                 ;* Flash recovery buffer to Flash page address given by FLASH_recovery.pageAdr.
                 ;* This function should be called at program startup if FLASH recovery option
                 ;* is enabeled.
                 ;**/
                 ;unsigned char RecoverFlash(){
                 ; 0001 0134 unsigned char RecoverFlash(){
                 ; 0001 0135 #ifdef __FLASH_RECOVER
                 ; 0001 0136   unsigned int index;
                 ; 0001 0137   unsigned long flashStartAdr = (MyAddressType)FlashBackup.pageNumber * PAGESIZE;
                 ; 0001 0138   if(FlashBackup.status == FLASH_BUFFER_FULL_ID){ // Checks if Flash recovery
                 ; 0001 0139                                                   //  buffer contains data
                 ; 0001 013A 
                 ; 0001 013B     for(index=0; index < PAGESIZE; index+=2){     // Writes to Flash write buffer
                 ; 0001 013C         _WAIT_FOR_SPM();
                 ; 0001 013D         _FILL_TEMP_WORD( index, *((MyFlashIntPointer)(ADR_FLASH_BUFFER+index)) );
                 ; 0001 013E     }
                 ; 0001 013F 
                 ; 0001 0140 
                 ; 0001 0141     //WriteBufToFlash((MyAddressType)FlashBackup.pageNumber * PAGESIZE);
                 ; 0001 0142     _WAIT_FOR_SPM();
                 ; 0001 0143     _PAGE_ERASE( flashStartAdr );
                 ; 0001 0144     _WAIT_FOR_SPM();
                 ; 0001 0145     _PAGE_WRITE( flashStartAdr );
                 ; 0001 0146     _WAIT_FOR_SPM();
                 ; 0001 0147     _ENABLE_RWW_SECTION();
                 ; 0001 0148     FlashBackup.status=0;                   // Inicate that Flash buffer does
                 ; 0001 0149                                             // not contain data for writing
                 ; 0001 014A     while(EECR & (1<<EEWE));
                 ; 0001 014B     return TRUE;                            // Returns TRUE if recovery has
                 ; 0001 014C                                             // taken place
                 ; 0001 014D   }
                 ; 0001 014E #endif
                 ; 0001 014F   return FALSE;
                 ; 0001 0150 }
                 ;
                 ;
                 ;/*!
                 ;* The function checks if input argument is a valid Flash page address for
                 ;* writing. Returns TRUE only if:
                 ;* - Address points to the beginning of a Flash page
                 ;* - Address is within the limits defined in Self_programming.h
                 ;* - Address is not equal to page address used for buffring by the Flash recovery
                 ;*   functions (if enabled).
                 ;* Returns FALSE else.
                 ;**/
                 ;unsigned char AddressCheck(MyAddressType flashAdr){
                 ; 0001 015C unsigned char AddressCheck(MyAddressType flashAdr){
                 _AddressCheck:
                 ; .FSTART _AddressCheck
                 ; 0001 015D   #ifdef __FLASH_RECOVER
                 ; 0001 015E   // The next line gives a warning 'pointless comparison with zero' if ADR_LIMIT_LOW is 0. Ignore it.
                 ; 0001 015F   if( (flashAdr >= ADR_LIMIT_LOW) && (flashAdr <= ADR_LIMIT_HIGH) &&
                 ; 0001 0160       (flashAdr != ADR_FLASH_BUFFER) && !(flashAdr & (PAGESIZE-1)) )
                 ; 0001 0161     return TRUE;                            // Address is a valid page address
                 ; 0001 0162   else
                 ; 0001 0163     return FALSE;                           // Address is not a valid page address
                 ; 0001 0164   #else
                 ; 0001 0165   if((flashAdr >= ADR_LIMIT_LOW) && (flashAdr <= ADR_LIMIT_HIGH) && !(flashAdr & (PAGESIZE-1) ) )
0005eb 940e 1898 	CALL __PUTPARD2
                 ;	flashAdr -> Y+0
0005ed 940e 188e 	CALL __GETD2S0
                +
0005ef 30a0     +CPI R26 , LOW ( 0xE000 )
0005f0 eee0     +LDI R30 , HIGH ( 0xE000 )
0005f1 07be     +CPC R27 , R30
0005f2 e0e0     +LDI R30 , BYTE3 ( 0xE000 )
0005f3 078e     +CPC R24 , R30
0005f4 e0e0     +LDI R30 , BYTE4 ( 0xE000 )
0005f5 079e     +CPC R25 , R30
                 	__CPD2N 0xE000
0005f6 f060      	BRLO _0x20042
                +
0005f7 30a0     +CPI R26 , LOW ( 0x1E000 )
0005f8 eee0     +LDI R30 , HIGH ( 0x1E000 )
0005f9 07be     +CPC R27 , R30
0005fa e0e1     +LDI R30 , BYTE3 ( 0x1E000 )
0005fb 078e     +CPC R24 , R30
0005fc e0e0     +LDI R30 , BYTE4 ( 0x1E000 )
0005fd 079e     +CPC R25 , R30
                 	__CPD2N 0x1E000
0005fe f420      	BRSH _0x20042
0005ff 940e 14ba 	CALL SUBOPT_0xF
000601 30e0      	CPI  R30,0
000602 f009      	BREQ _0x20043
                 _0x20042:
000603 c002      	RJMP _0x20041
                 _0x20043:
                 ; 0001 0166     return TRUE;                            // Address is a valid page address
000604 e0e1      	LDI  R30,LOW(1)
000605 c001      	RJMP _0x20C0016
                 ; 0001 0167   else
                 _0x20041:
                 ; 0001 0168     return FALSE;                           // Address is not a valid page address
000606 e0e0      	LDI  R30,LOW(0)
                 ; 0001 0169   #endif
                 ; 0001 016A }
                 _0x20C0016:
000607 9624      	ADIW R28,4
000608 9508      	RET
                 ; .FEND
                 ;
                 ;
                 ;/*!
                 ;* The function reads Flash page given by flashAddr, replaces one byte given by
                 ;* flashAddr with data, and stores entire page in Flash temporary buffer.
                 ;**/
                 ;unsigned char LpmReplaceSpm(MyAddressType flashAddr, unsigned char data){
                 ; 0001 0171 unsigned char LpmReplaceSpm(MyAddressType flashAddr, unsigned char data){
                 ; 0001 0172 //#pragma diag_suppress=Pe1053 // Suppress warning for conversion from long-type address to flash ptr.
                 ; 0001 0173     unsigned int index, oddByte, pcWord;
                 ; 0001 0174     unsigned char onlyWrite=1;
                 ; 0001 0175     MyAddressType  pageAdr;
                 ; 0001 0176     oddByte=(unsigned char)flashAddr & 1;
                 ;	flashAddr -> Y+12
                 ;	data -> Y+11
                 ;	index -> R16,R17
                 ;	oddByte -> R18,R19
                 ;	pcWord -> R20,R21
                 ;	onlyWrite -> Y+10
                 ;	pageAdr -> Y+6
                 ; 0001 0177     pcWord=(unsigned int)flashAddr & (PAGESIZE-2); // Used when writing FLASH temp buffer
                 ; 0001 0178     pageAdr=flashAddr & ~(PAGESIZE-1);        // Get FLASH page address from byte address
                 ; 0001 0179     //_FILL_TEMP_WORD(index, (unsigned int)dataPage[index]+((unsigned int)dataPage[index+1] << 8));
                 ; 0001 017A     for(index=0; index < PAGESIZE; index+=2){
                 ; 0001 017B         if(index==pcWord){
                 ; 0001 017C           if(oddByte){
                 ; 0001 017D             _FILL_TEMP_WORD( index, (*(MyFlashCharPointer)(flashAddr & ~1) | ((unsigned int)data<<8)) );
                 ; 0001 017E           }                                     // Write odd byte in temporary buffer
                 ; 0001 017F           else{
                 ; 0001 0180             _FILL_TEMP_WORD( index, ( (*( (MyFlashCharPointer)flashAddr+1)<<8)  | data ) );
                 ; 0001 0181           }                                     // Write even byte in temporary buffer
                 ; 0001 0182           if(((*((MyFlashCharPointer)flashAddr))&0xFF)!=0xFF)
                 ; 0001 0183                 onlyWrite=0;
                 ; 0001 0184         }
                 ; 0001 0185         else{
                 ; 0001 0186           _FILL_TEMP_WORD(index, *( (MyFlashIntPointer)(pageAdr+index) ) );
                 ; 0001 0187           //if(*((MyFlashIntPointer)(pageAdr+index)) != 0xFFFF)
                 ; 0001 0188                 //onlyWrite=0;
                 ; 0001 0189         }                                       // Write Flash word directly to temporary buffer
                 ; 0001 018A     }
                 ; 0001 018B     return onlyWrite;
                 ; 0001 018C //#pragma diag_default=Pe1053 // Back to default.
                 ; 0001 018D }
                 ;//-----------------------------------------------------------------------
                 ;// PFF - Low level disk control module for ATmega32
                 ;//-----------------------------------------------------------------------
                 ;#define _WRITE_FUNC	1			//allow write operations
                 ;
                 ;//#include "common.h"
                 ;#include "diskio.h"
                 ;#include "mmc.h"
                 ;#include <mega128.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 ;#include <delay.h>
                 ;
                 ;// Definitions for MMC/SDC connection
                 ;
                 ;//#define SD_INS  6
                 ;//#define SD_WP   7
                 ;
                 ;// Definitions for MMC/SDC command
                 ;#define CMD0	(0x40+0)	// GO_IDLE_STATE
                 ;#define CMD1	(0x40+1)	// SEND_OP_COND (MMC)
                 ;#define	ACMD41	(0xC0+41)	// SEND_OP_COND (SDC)
                 ;#define CMD8	(0x40+8)	// SEND_IF_COND
                 ;#define CMD16	(0x40+16)	// SET_BLOCKLEN
                 ;#define CMD17	(0x40+17)	// READ_SINGLE_BLOCK
                 ;#define CMD24	(0x40+24)	// WRITE_BLOCK
                 ;#define CMD55	(0x40+55)	// APP_CMD
                 ;#define CMD58	(0x40+58)	// READ_OCR
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// SPI functions
                 ;//-----------------------------------------------------------------------
                 ;#define hardware_spi //  ,  spi 
                 ;
                 ;#define SPI_PORTX PORTB
                 ;#define SPI_DDRX DDRB
                 ;
                 ;#define SPI_MISO SD_DO
                 ;#define SPI_MOSI SD_DI
                 ;#define SPI_SCK SD_CLK
                 ;#define SPI_SS SD_CS
                 ;
                 ;void INIT_SPI(void) {
                 ; 0002 0029 void INIT_SPI(void) {
                 
                 	.CSEG
                 _INIT_SPI:
                 ; .FSTART _INIT_SPI
                 ; 0002 002A #ifdef hardware_spi
                 ; 0002 002B 	/*  -
                 ; 0002 002C 	  ,  MISO */
                 ; 0002 002D 	SPI_DDRX |= (1 << SPI_MOSI) | (1 << SPI_SCK) | (1 << SPI_SS) | (0 << SPI_MISO);
000609 b3e7      	IN   R30,0x17
00060a 60e7      	ORI  R30,LOW(0x7)
00060b bbe7      	OUT  0x17,R30
                 ; 0002 002E 	SPI_PORTX |= (1 << SPI_MOSI) | (1 << SPI_SCK) | (1 << SPI_SS) | (1 << SPI_MISO);
00060c b3e8      	IN   R30,0x18
00060d 60ef      	ORI  R30,LOW(0xF)
00060e bbe8      	OUT  0x18,R30
                 ; 0002 002F 
                 ; 0002 0030 	/* spi,  ,,  0*/
                 ; 0002 0031 	SPCR = (1 << SPE) | (0 << DORD) | (1 << MSTR) | (0 << CPOL) | (0 << CPHA) | (0 << SPR1) | (0 << SPR0);
00060f e5e0      	LDI  R30,LOW(80)
000610 b9ed      	OUT  0xD,R30
                 ; 0002 0032     SPSR = (1 << SPI2X);
000611 e0e1      	LDI  R30,LOW(1)
000612 b9ee      	OUT  0xE,R30
                 ; 0002 0033     //SPCR |= (1 << SPR1) | (1 << SPR0);
                 ; 0002 0034     //SPSR &= ~(1 << SPI2X);
                 ; 0002 0035 #else
                 ; 0002 0036 	PORTB |= (1<<SD_CS) | (1<<SD_DO) | (1<<SD_DI)/* | (1<<SD_WP) | (1<<SD_INS)*/;
                 ; 0002 0037 	DDRB |=(1<<SD_CS) | (1<<SD_DI) | (1<<SD_CLK);
                 ; 0002 0038 #endif
                 ; 0002 0039 }
000613 9508      	RET
                 ; .FEND
                 ;
                 ;void xmit_spi(BYTE data) {		// Send a byte
                 ; 0002 003B void xmit_spi(BYTE data) {
                 _xmit_spi:
                 ; .FSTART _xmit_spi
                 ; 0002 003C #ifdef hardware_spi
                 ; 0002 003D 	SPDR = data;
000614 93aa      	ST   -Y,R26
                 ;	data -> Y+0
000615 81e8      	LD   R30,Y
000616 b9ef      	OUT  0xF,R30
                 ; 0002 003E 	while (!(SPSR & (1 << SPIF)));
                 _0x40003:
000617 9b77      	SBIS 0xE,7
000618 cffe      	RJMP _0x40003
                 ; 0002 003F #else
                 ; 0002 0040 	BYTE i;
                 ; 0002 0041 
                 ; 0002 0042 	for (i = 0; i < 8; i++) {
                 ; 0002 0043 		if ((data & 0x80) == 0x00)
                 ; 0002 0044 			PORTB &= ~(1<<SD_DI);
                 ; 0002 0045 		else
                 ; 0002 0046 			PORTB |= (1<<SD_DI);
                 ; 0002 0047 		data = data << 1;
                 ; 0002 0048 		PORTB |= (1<<SD_CLK);
                 ; 0002 0049 		#asm("nop")
                 ; 0002 004A 		PORTB &= ~(1<<SD_CLK);
                 ; 0002 004B 	}
                 ; 0002 004C #endif
                 ; 0002 004D }
000619 9621      	ADIW R28,1
00061a 9508      	RET
                 ; .FEND
                 ;
                 ;BYTE rcv_spi(void) {				// Send 0xFF and receive a byte
                 ; 0002 004F BYTE rcv_spi(void) {
                 _rcv_spi:
                 ; .FSTART _rcv_spi
                 ; 0002 0050 #ifdef hardware_spi
                 ; 0002 0051 	unsigned char data;
                 ; 0002 0052 	SPDR = 0xFF;
00061b 931a      	ST   -Y,R17
                 ;	data -> R17
00061c efef      	LDI  R30,LOW(255)
00061d b9ef      	OUT  0xF,R30
                 ; 0002 0053 	while (!(SPSR & (1 << SPIF)));
                 _0x40006:
00061e 9b77      	SBIS 0xE,7
00061f cffe      	RJMP _0x40006
                 ; 0002 0054 	data = SPDR;
000620 b11f      	IN   R17,15
                 ; 0002 0055 	return data;
000621 2fe1      	MOV  R30,R17
000622 9119      	LD   R17,Y+
000623 9508      	RET
                 ; 0002 0056 #else
                 ; 0002 0057 	BYTE i, res = 0;
                 ; 0002 0058 
                 ; 0002 0059 	PORTB |= (1<<SD_DI);
                 ; 0002 005A 
                 ; 0002 005B 	for (i = 0; i < 8; i++) {
                 ; 0002 005C 		PORTB |= (1<<SD_CLK);
                 ; 0002 005D 		res = res << 1;
                 ; 0002 005E 		if ((PINB & (1<<SD_DO))!=0x00)
                 ; 0002 005F 		res = res | 0x01;
                 ; 0002 0060 		PORTB &= ~(1<<SD_CLK);
                 ; 0002 0061 		#asm("nop")
                 ; 0002 0062 	}
                 ; 0002 0063 	return res;
                 ; 0002 0064 #endif
                 ; 0002 0065 } /* Send 0xFF and receive a byte */
                 ; .FEND
                 ;//-----------------------------------------------------------------------
                 ;
                 ;
                 ;
                 ;//-----------------------------------------------------------------------
                 ;//   Module Private Function
                 ;//-----------------------------------------------------------------------
                 ;static BYTE CardType;
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// Deselect the card and release SPI bus
                 ;//-----------------------------------------------------------------------
                 ;static
                 ;void release_spi (void)
                 ; 0002 0074 {
                 _release_spi_G002:
                 ; .FSTART _release_spi_G002
                 ; 0002 0075 	rcv_spi();
000624 dff6      	RCALL _rcv_spi
                 ; 0002 0076 }
000625 9508      	RET
                 ; .FEND
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// Send a command packet to MMC
                 ;//-----------------------------------------------------------------------
                 ;static
                 ;BYTE send_cmd (
                 ; 0002 007D 	BYTE cmd,		// Command byte
                 ; 0002 007E 	DWORD arg		// Argument
                 ; 0002 007F )
                 ; 0002 0080 {
                 _send_cmd_G002:
                 ; .FSTART _send_cmd_G002
                 ; 0002 0081 	BYTE n, res;
                 ; 0002 0082 
                 ; 0002 0083 
                 ; 0002 0084 	if (cmd & 0x80) {	// ACMD<n> is the command sequense of CMD55-CMD<n>
000626 940e 1898 	CALL __PUTPARD2
000628 931a      	ST   -Y,R17
000629 930a      	ST   -Y,R16
                 ;	cmd -> Y+6
                 ;	arg -> Y+2
                 ;	n -> R17
                 ;	res -> R16
00062a 81ee      	LDD  R30,Y+6
00062b 78e0      	ANDI R30,LOW(0x80)
00062c f049      	BREQ _0x40009
                 ; 0002 0085 		cmd &= 0x7F;
00062d 81ee      	LDD  R30,Y+6
00062e 77ef      	ANDI R30,0x7F
00062f 83ee      	STD  Y+6,R30
                 ; 0002 0086 		res = send_cmd(CMD55, 0);
000630 e7e7      	LDI  R30,LOW(119)
000631 940e 1520 	CALL SUBOPT_0x1F
000633 2f0e      	MOV  R16,R30
                 ; 0002 0087 		if (res > 1) return res;
000634 3002      	CPI  R16,2
000635 f570      	BRSH _0x20C0014
                 ; 0002 0088 	}
                 ; 0002 0089 
                 ; 0002 008A 	// Select the card
                 ; 0002 008B 	DESELECT();
                 _0x40009:
000636 9ac0      	SBI  0x18,0
                 ; 0002 008C 	rcv_spi();
000637 dfe3      	RCALL _rcv_spi
                 ; 0002 008D 	SELECT();
000638 98c0      	CBI  0x18,0
                 ; 0002 008E 	rcv_spi();
000639 dfe1      	RCALL _rcv_spi
                 ; 0002 008F 
                 ; 0002 0090 	// Send a command packet
                 ; 0002 0091 	xmit_spi(cmd);						// Start + Command index
00063a 81ae      	LDD  R26,Y+6
00063b 940e 1527 	CALL SUBOPT_0x20
                 ; 0002 0092 	xmit_spi((BYTE)(arg >> 24));		// Argument[31..24]
00063d e1e8      	LDI  R30,LOW(24)
00063e 940e 17cb 	CALL __LSRD12
000640 2fae      	MOV  R26,R30
000641 dfd2      	RCALL _xmit_spi
                 ; 0002 0093 	xmit_spi((BYTE)(arg >> 16));		// Argument[23..16]
000642 940e 152e 	CALL SUBOPT_0x21
000644 940e 17ee 	CALL __LSRD16
000646 2fae      	MOV  R26,R30
000647 940e 1527 	CALL SUBOPT_0x20
                 ; 0002 0094 	xmit_spi((BYTE)(arg >> 8));			// Argument[15..8]
000649 e0e8      	LDI  R30,LOW(8)
00064a 940e 17cb 	CALL __LSRD12
00064c 2fae      	MOV  R26,R30
00064d dfc6      	RCALL _xmit_spi
                 ; 0002 0095 	xmit_spi((BYTE)arg);				// Argument[7..0]
00064e 81aa      	LDD  R26,Y+2
00064f dfc4      	RCALL _xmit_spi
                 ; 0002 0096 	n = 0x01;							// Dummy CRC + Stop
000650 e011      	LDI  R17,LOW(1)
                 ; 0002 0097 	if (cmd == CMD0) n = 0x95;			// Valid CRC for CMD0(0)
000651 81ae      	LDD  R26,Y+6
000652 34a0      	CPI  R26,LOW(0x40)
000653 f409      	BRNE _0x4000B
000654 e915      	LDI  R17,LOW(149)
                 ; 0002 0098 	if (cmd == CMD8) n = 0x87;			// Valid CRC for CMD8(0x1AA)
                 _0x4000B:
000655 81ae      	LDD  R26,Y+6
000656 34a8      	CPI  R26,LOW(0x48)
000657 f409      	BRNE _0x4000C
000658 e817      	LDI  R17,LOW(135)
                 ; 0002 0099 	xmit_spi(n);
                 _0x4000C:
000659 2fa1      	MOV  R26,R17
00065a dfb9      	RCALL _xmit_spi
                 ; 0002 009A 
                 ; 0002 009B 	// Receive a command response
                 ; 0002 009C 	n = 10;								// Wait for a valid response in timeout of 10 attempts
00065b e01a      	LDI  R17,LOW(10)
                 ; 0002 009D 	do {
                 _0x4000E:
                 ; 0002 009E 		res = rcv_spi();
00065c dfbe      	RCALL _rcv_spi
00065d 2f0e      	MOV  R16,R30
                 ; 0002 009F 	} while ((res & 0x80) && --n);
00065e ff07      	SBRS R16,7
00065f c002      	RJMP _0x40010
000660 5011      	SUBI R17,LOW(1)
000661 f409      	BRNE _0x40011
                 _0x40010:
000662 c001      	RJMP _0x4000F
                 _0x40011:
000663 cff8      	RJMP _0x4000E
                 _0x4000F:
                 ; 0002 00A0 
                 ; 0002 00A1 	return res;			// Return with the response value
                 _0x20C0014:
000664 2fe0      	MOV  R30,R16
000665 8119      	LDD  R17,Y+1
000666 8108      	LDD  R16,Y+0
                 _0x20C0015:
000667 9627      	ADIW R28,7
000668 9508      	RET
                 ; 0002 00A2 }
                 ; .FEND
                 ;
                 ;//--------------------------------------------------------------------------
                 ;//
                 ;//   Public Functions
                 ;//
                 ;//--------------------------------------------------------------------------
                 ;
                 ;//--------------------------------------------------------------------------
                 ;// Initialize Disk Drive
                 ;//--------------------------------------------------------------------------
                 ;DSTATUS disk_initialize (void)
                 ; 0002 00AE {
                 _disk_initialize:
                 ; .FSTART _disk_initialize
                 ; 0002 00AF 	BYTE n, cmd, ty, ocr[4];
                 ; 0002 00B0 	WORD tmr;
                 ; 0002 00B1     BYTE retry=0;
                 ; 0002 00B2     while(retry<5){
000669 9724      	SBIW R28,4
00066a 940e 18ef 	CALL __SAVELOCR6
                 ;	n -> R17
                 ;	cmd -> R16
                 ;	ty -> R19
                 ;	ocr -> Y+6
                 ;	tmr -> R20,R21
                 ;	retry -> R18
00066c e020      	LDI  R18,0
                 _0x40012:
00066d 3025      	CPI  R18,5
00066e f008      	BRLO PC+2
00066f c08b      	RJMP _0x40014
                 ; 0002 00B3         INIT_SPI();
000670 df98      	RCALL _INIT_SPI
                 ; 0002 00B4 
                 ; 0002 00B5     //	if ((PINB&_BV(SD_INS))!=0x00) return STA_NOINIT;
                 ; 0002 00B6 
                 ; 0002 00B7     #if _WRITE_FUNC
                 ; 0002 00B8         //if (MMC_SEL) disk_writep(0, 0);		// Finalize write process if it is in progress
                 ; 0002 00B9     #endif
                 ; 0002 00BA         for (n = 100; n; n--) rcv_spi();	// Dummy clocks
000671 e614      	LDI  R17,LOW(100)
                 _0x40016:
000672 3010      	CPI  R17,0
000673 f019      	BREQ _0x40017
000674 dfa6      	RCALL _rcv_spi
000675 5011      	SUBI R17,1
000676 cffb      	RJMP _0x40016
                 _0x40017:
                 ; 0002 00BC ty = 0;
000677 e030      	LDI  R19,LOW(0)
                 ; 0002 00BD         if (send_cmd(CMD0, 0) == 1) {			// Enter Idle state
000678 e4e0      	LDI  R30,LOW(64)
000679 940e 1520 	CALL SUBOPT_0x1F
00067b 30e1      	CPI  R30,LOW(0x1)
00067c f009      	BREQ PC+2
00067d c072      	RJMP _0x40018
                 ; 0002 00BE             if (send_cmd(CMD8, 0x1AA) == 1) {	// SDv2
00067e e4e8      	LDI  R30,LOW(72)
00067f 93ea      	ST   -Y,R30
                +
000680 eaaa     +LDI R26 , LOW ( 0x1AA )
000681 e0b1     +LDI R27 , HIGH ( 0x1AA )
000682 e080     +LDI R24 , BYTE3 ( 0x1AA )
000683 e090     +LDI R25 , BYTE4 ( 0x1AA )
                 	__GETD2N 0x1AA
000684 dfa1      	RCALL _send_cmd_G002
000685 30e1      	CPI  R30,LOW(0x1)
000686 f009      	BREQ PC+2
000687 c044      	RJMP _0x40019
                 ; 0002 00BF                 for (n = 0; n < 4; n++) ocr[n] = rcv_spi();		// Get trailing return value of R7 resp
000688 e010      	LDI  R17,LOW(0)
                 _0x4001B:
000689 3014      	CPI  R17,4
00068a f450      	BRSH _0x4001C
00068b 940e 1533 	CALL SUBOPT_0x22
00068d 93ff      	PUSH R31
00068e 93ef      	PUSH R30
00068f df8b      	RCALL _rcv_spi
000690 91af      	POP  R26
000691 91bf      	POP  R27
000692 93ec      	ST   X,R30
000693 5f1f      	SUBI R17,-1
000694 cff4      	RJMP _0x4001B
                 _0x4001C:
                 ; 0002 00C0 if (ocr[2] == 0x01 && ocr[3] == 0xAA) {
000695 85a8      	LDD  R26,Y+8
000696 30a1      	CPI  R26,LOW(0x1)
000697 f419      	BRNE _0x4001E
000698 85a9      	LDD  R26,Y+9
000699 3aaa      	CPI  R26,LOW(0xAA)
00069a f009      	BREQ _0x4001F
                 _0x4001E:
00069b c02f      	RJMP _0x4001D
                 _0x4001F:
                 ; 0002 00C1                     for (tmr = 12000; tmr && send_cmd(ACMD41, 1UL << 30); tmr--) ;	// Wait for leaving idle state (ACMD4 ...
                +
00069c ee40     +LDI R20 , LOW ( 12000 )
00069d e25e     +LDI R21 , HIGH ( 12000 )
                 	__GETWRN 20,21,12000
                 _0x40021:
00069e 2e04      	MOV  R0,R20
00069f 2a05      	OR   R0,R21
0006a0 f049      	BREQ _0x40023
0006a1 eee9      	LDI  R30,LOW(233)
0006a2 93ea      	ST   -Y,R30
                +
0006a3 e0a0     +LDI R26 , LOW ( 0x40000000 )
0006a4 e0b0     +LDI R27 , HIGH ( 0x40000000 )
0006a5 e080     +LDI R24 , BYTE3 ( 0x40000000 )
0006a6 e490     +LDI R25 , BYTE4 ( 0x40000000 )
                 	__GETD2N 0x40000000
0006a7 df7e      	RCALL _send_cmd_G002
0006a8 30e0      	CPI  R30,0
0006a9 f409      	BRNE _0x40024
                 _0x40023:
0006aa c003      	RJMP _0x40022
                 _0x40024:
                +
0006ab 5041     +SUBI R20 , LOW ( 1 )
0006ac 4050     +SBCI R21 , HIGH ( 1 )
                 	__SUBWRN 20,21,1
0006ad cff0      	RJMP _0x40021
                 _0x40022:
                 ; 0002 00C2                     if (tmr && send_cmd(CMD58, 0) == 0) {		// Check CCS bit in the OCR
0006ae 2e04      	MOV  R0,R20
0006af 2a05      	OR   R0,R21
0006b0 f029      	BREQ _0x40026
0006b1 e7ea      	LDI  R30,LOW(122)
0006b2 940e 1520 	CALL SUBOPT_0x1F
0006b4 30e0      	CPI  R30,0
0006b5 f009      	BREQ _0x40027
                 _0x40026:
0006b6 c014      	RJMP _0x40025
                 _0x40027:
                 ; 0002 00C3                         for (n = 0; n < 4; n++) ocr[n] = rcv_spi();
0006b7 e010      	LDI  R17,LOW(0)
                 _0x40029:
0006b8 3014      	CPI  R17,4
0006b9 f450      	BRSH _0x4002A
0006ba 940e 1533 	CALL SUBOPT_0x22
0006bc 93ff      	PUSH R31
0006bd 93ef      	PUSH R30
0006be df5c      	RCALL _rcv_spi
0006bf 91af      	POP  R26
0006c0 91bf      	POP  R27
0006c1 93ec      	ST   X,R30
0006c2 5f1f      	SUBI R17,-1
0006c3 cff4      	RJMP _0x40029
                 _0x4002A:
                 ; 0002 00C4 ty = (ocr[0] & 0x40) ? 0x04	 | 0x08	 : 0x04	;
0006c4 81ee      	LDD  R30,Y+6
0006c5 74e0      	ANDI R30,LOW(0x40)
0006c6 f011      	BREQ _0x4002B
0006c7 e0ec      	LDI  R30,LOW(12)
0006c8 c001      	RJMP _0x4002C
                 _0x4002B:
0006c9 e0e4      	LDI  R30,LOW(4)
                 _0x4002C:
0006ca 2f3e      	MOV  R19,R30
                 ; 0002 00C5                     }
                 ; 0002 00C6                 }
                 _0x40025:
                 ; 0002 00C7             } else {							// SDv1 or MMCv3
                 _0x4001D:
0006cb c024      	RJMP _0x4002E
                 _0x40019:
                 ; 0002 00C8                 if (send_cmd(ACMD41, 0) <= 1) 	{
0006cc eee9      	LDI  R30,LOW(233)
0006cd 940e 1520 	CALL SUBOPT_0x1F
0006cf 30e2      	CPI  R30,LOW(0x2)
0006d0 f418      	BRSH _0x4002F
                 ; 0002 00C9                     ty = CT_SD1; cmd = ACMD41;	// SDv1
0006d1 e032      	LDI  R19,LOW(2)
0006d2 ee09      	LDI  R16,LOW(233)
                 ; 0002 00CA                 } else {
0006d3 c002      	RJMP _0x40030
                 _0x4002F:
                 ; 0002 00CB                     ty = CT_MMC; cmd = CMD1;	// MMCv3
0006d4 e031      	LDI  R19,LOW(1)
0006d5 e401      	LDI  R16,LOW(65)
                 ; 0002 00CC                 }
                 _0x40030:
                 ; 0002 00CD                 for (tmr = 25000; tmr && send_cmd(cmd, 0); tmr--) ;	// Wait for leaving idle state
                +
0006d6 ea48     +LDI R20 , LOW ( 25000 )
0006d7 e651     +LDI R21 , HIGH ( 25000 )
                 	__GETWRN 20,21,25000
                 _0x40032:
0006d8 2e04      	MOV  R0,R20
0006d9 2a05      	OR   R0,R21
0006da f031      	BREQ _0x40034
0006db 930a      	ST   -Y,R16
0006dc 940e 153a 	CALL SUBOPT_0x23
0006de df47      	RCALL _send_cmd_G002
0006df 30e0      	CPI  R30,0
0006e0 f409      	BRNE _0x40035
                 _0x40034:
0006e1 c003      	RJMP _0x40033
                 _0x40035:
                +
0006e2 5041     +SUBI R20 , LOW ( 1 )
0006e3 4050     +SBCI R21 , HIGH ( 1 )
                 	__SUBWRN 20,21,1
0006e4 cff3      	RJMP _0x40032
                 _0x40033:
                 ; 0002 00CE                 if (!tmr || send_cmd(CMD16, 512) != 0)			// Set R/W block length to 512
0006e5 2e04      	MOV  R0,R20
0006e6 2a05      	OR   R0,R21
0006e7 f039      	BREQ _0x40037
0006e8 e5e0      	LDI  R30,LOW(80)
0006e9 93ea      	ST   -Y,R30
0006ea 940e 153f 	CALL SUBOPT_0x24
0006ec df39      	RCALL _send_cmd_G002
0006ed 30e0      	CPI  R30,0
0006ee f009      	BREQ _0x40036
                 _0x40037:
                 ; 0002 00CF                     ty = 0;
0006ef e030      	LDI  R19,LOW(0)
                 ; 0002 00D0             }
                 _0x40036:
                 _0x4002E:
                 ; 0002 00D1         }
                 ; 0002 00D2         CardType = ty;
                 _0x40018:
0006f0 9330 0b0e 	STS  _CardType_G002,R19
                 ; 0002 00D3         release_spi();
0006f2 df31      	RCALL _release_spi_G002
                 ; 0002 00D4         if(ty){
0006f3 3030      	CPI  R19,0
0006f4 f431      	BRNE _0x40014
                 ; 0002 00D5            break;
                 ; 0002 00D6         }
                 ; 0002 00D7         retry++;
0006f5 5f2f      	SUBI R18,-1
                 ; 0002 00D8         delay_ms(200);
0006f6 eca8      	LDI  R26,LOW(200)
0006f7 e0b0      	LDI  R27,0
0006f8 940e 179b 	CALL _delay_ms
                 ; 0002 00D9     }
0006fa cf72      	RJMP _0x40012
                 _0x40014:
                 ; 0002 00DA #ifdef hardware_spi
                 ; 0002 00DB 	//  SPI!!!--------------------------------------------
                 ; 0002 00DC     //INIT_SPI();
                 ; 0002 00DD     //SPCR &= ~((1 << SPR1) | (1 << SPR0)); //  
                 ; 0002 00DE 	//SPSR |= (1 << SPI2X); //  
                 ; 0002 00DF 
                 ; 0002 00E0 #else
                 ; 0002 00E1     //------------------------------------------------------------------
                 ; 0002 00E2 #endif
                 ; 0002 00E3 
                 ; 0002 00E4 	return ty ? 0 : STA_NOINIT;
0006fb 3030      	CPI  R19,0
0006fc f011      	BREQ _0x4003A
0006fd e0e0      	LDI  R30,LOW(0)
0006fe c001      	RJMP _0x4003B
                 _0x4003A:
0006ff e0e1      	LDI  R30,LOW(1)
                 _0x4003B:
000700 c43b      	RJMP _0x20C0010
                 ; 0002 00E5 }
                 ; .FEND
                 ;//-----------------------------------------------------------------------
                 ;// Read partial sector
                 ;//-----------------------------------------------------------------------
                 ;
                 ;DRESULT disk_readp (
                 ; 0002 00EB 	BYTE *buff,		// Pointer to the read buffer (NULL:Read bytes are forwarded to the stream)
                 ; 0002 00EC 	DWORD lba,		// Sector number (LBA)
                 ; 0002 00ED 	WORD ofs,		// Byte offset to read from (0..511)
                 ; 0002 00EE 	WORD cnt		// Number of bytes to read (ofs + cnt mus be <= 512)
                 ; 0002 00EF )
                 ; 0002 00F0 {
                 _disk_readp:
                 ; .FSTART _disk_readp
                 ; 0002 00F1 	DRESULT res;
                 ; 0002 00F2 	BYTE rc;
                 ; 0002 00F3 	WORD bc;
                 ; 0002 00F4 
                 ; 0002 00F5 //	if ((PINB&_BV(SD_INS))!=0x00) return RES_ERROR;
                 ; 0002 00F6 
                 ; 0002 00F7 	if (!(CardType & CT_BLOCK)) lba *= 512;		// Convert to byte address if needed
000701 940e 1544 	CALL SUBOPT_0x25
                 ;	*buff -> Y+12
                 ;	lba -> Y+8
                 ;	ofs -> Y+6
                 ;	cnt -> Y+4
                 ;	res -> R17
                 ;	rc -> R16
                 ;	bc -> R18,R19
000703 91e0 0b0e 	LDS  R30,_CardType_G002
000705 70e8      	ANDI R30,LOW(0x8)
000706 f441      	BRNE _0x4003D
000707 940e 14fe 	CALL SUBOPT_0x19
000709 940e 1549 	CALL SUBOPT_0x26
                +
00070b 87e8     +STD Y + 8 , R30
00070c 87f9     +STD Y + 8 + 1 , R31
00070d 876a     +STD Y + 8 + 2 , R22
00070e 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
                 ; 0002 00F8 
                 ; 0002 00F9 	res = RES_ERROR;
                 _0x4003D:
00070f e011      	LDI  R17,LOW(1)
                 ; 0002 00FA 	if (send_cmd(CMD17, lba) == 0) {		// READ_SINGLE_BLOCK
000710 e5e1      	LDI  R30,LOW(81)
000711 93ea      	ST   -Y,R30
000712 940e 154d 	CALL SUBOPT_0x27
000714 df11      	RCALL _send_cmd_G002
000715 30e0      	CPI  R30,0
000716 f009      	BREQ PC+2
000717 c047      	RJMP _0x4003E
                 ; 0002 00FB 
                 ; 0002 00FC 		bc = 30000;
                +
000718 e320     +LDI R18 , LOW ( 30000 )
000719 e735     +LDI R19 , HIGH ( 30000 )
                 	__GETWRN 18,19,30000
                 ; 0002 00FD 		do {							// Wait for data packet in timeout of 100ms
                 _0x40040:
                 ; 0002 00FE 			rc = rcv_spi();
00071a df00      	RCALL _rcv_spi
00071b 2f0e      	MOV  R16,R30
                 ; 0002 00FF 		} while (rc == 0xFF && --bc);
00071c 3f0f      	CPI  R16,255
00071d f419      	BRNE _0x40042
                +
00071e 5021     +SUBI R18 , LOW ( 1 )
00071f 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
000720 f409      	BRNE _0x40043
                 _0x40042:
000721 c001      	RJMP _0x40041
                 _0x40043:
000722 cff7      	RJMP _0x40040
                 _0x40041:
                 ; 0002 0100 
                 ; 0002 0101 		if (rc == 0xFE) {				// A data packet arrived
000723 3f0e      	CPI  R16,254
000724 f5d1      	BRNE _0x40044
                 ; 0002 0102 			bc = 514 - ofs - cnt;
000725 81ae      	LDD  R26,Y+6
000726 81bf      	LDD  R27,Y+6+1
000727 e0e2      	LDI  R30,LOW(514)
000728 e0f2      	LDI  R31,HIGH(514)
000729 1bea      	SUB  R30,R26
00072a 0bfb      	SBC  R31,R27
00072b 01df      	MOVW R26,R30
00072c 81ec      	LDD  R30,Y+4
00072d 81fd      	LDD  R31,Y+4+1
00072e 1bae      	SUB  R26,R30
00072f 0bbf      	SBC  R27,R31
000730 019d      	MOVW R18,R26
                 ; 0002 0103 
                 ; 0002 0104 			// Skip leading bytes
                 ; 0002 0105 			if (ofs) {
000731 81ee      	LDD  R30,Y+6
000732 81ff      	LDD  R31,Y+6+1
000733 9730      	SBIW R30,0
000734 f039      	BREQ _0x40045
                 ; 0002 0106 				do rcv_spi(); while (--ofs);
                 _0x40047:
000735 dee5      	RCALL _rcv_spi
000736 81ee      	LDD  R30,Y+6
000737 81ff      	LDD  R31,Y+6+1
000738 9731      	SBIW R30,1
000739 83ee      	STD  Y+6,R30
00073a 83ff      	STD  Y+6+1,R31
00073b f7c9      	BRNE _0x40047
                 ; 0002 0107 			}
                 ; 0002 0108 
                 ; 0002 0109 			// Receive a part of the sector
                 ; 0002 010A 			if (buff) {	// Store data to the memory
                 _0x40045:
00073c 85ec      	LDD  R30,Y+12
00073d 85fd      	LDD  R31,Y+12+1
00073e 9730      	SBIW R30,0
00073f f099      	BREQ _0x40049
                 ; 0002 010B 				do
                 _0x4004B:
                 ; 0002 010C 					*buff++ = rcv_spi();
000740 85ec      	LDD  R30,Y+12
000741 85fd      	LDD  R31,Y+12+1
000742 9631      	ADIW R30,1
000743 87ec      	STD  Y+12,R30
000744 87fd      	STD  Y+12+1,R31
000745 9731      	SBIW R30,1
000746 93ff      	PUSH R31
000747 93ef      	PUSH R30
000748 ded2      	RCALL _rcv_spi
000749 91af      	POP  R26
00074a 91bf      	POP  R27
00074b 93ec      	ST   X,R30
                 ; 0002 010D 				while (--cnt);
00074c 81ec      	LDD  R30,Y+4
00074d 81fd      	LDD  R31,Y+4+1
00074e 9731      	SBIW R30,1
00074f 83ec      	STD  Y+4,R30
000750 83fd      	STD  Y+4+1,R31
000751 f771      	BRNE _0x4004B
                 ; 0002 010E 			} else {	// Forward data to the outgoing stream (depends on the project)
000752 c006      	RJMP _0x4004D
                 _0x40049:
                 ; 0002 010F 				do
                 _0x4004F:
                 ; 0002 0110                 ;//uart_transmit(rcv_spi());		// (Console output)
                 ; 0002 0111 				while (--cnt);
000753 81ec      	LDD  R30,Y+4
000754 81fd      	LDD  R31,Y+4+1
000755 9731      	SBIW R30,1
000756 83ec      	STD  Y+4,R30
000757 83fd      	STD  Y+4+1,R31
000758 f7d1      	BRNE _0x4004F
                 ; 0002 0112 			}
                 _0x4004D:
                 ; 0002 0113 
                 ; 0002 0114 			// Skip trailing bytes and CRC
                 ; 0002 0115 			do rcv_spi(); while (--bc);
                 _0x40052:
000759 dec1      	RCALL _rcv_spi
00075a 01f9      	MOVW R30,R18
00075b 9731      	SBIW R30,1
00075c 019f      	MOVW R18,R30
00075d f7d9      	BRNE _0x40052
                 ; 0002 0116 
                 ; 0002 0117 			res = RES_OK;
00075e e010      	LDI  R17,LOW(0)
                 ; 0002 0118 		}
                 ; 0002 0119 	}
                 _0x40044:
                 ; 0002 011A 
                 ; 0002 011B 	release_spi();
                 _0x4003E:
00075f dec4      	RCALL _release_spi_G002
                 ; 0002 011C 
                 ; 0002 011D 	return res;
000760 2fe1      	MOV  R30,R17
000761 940e 18f8 	CALL __LOADLOCR4
000763 c379      	RJMP _0x20C0011
                 ; 0002 011E }
                 ; .FEND
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// Write partial sector
                 ;//-----------------------------------------------------------------------
                 ;#if _WRITE_FUNC
                 ;
                 ;DRESULT disk_writep (
                 ; 0002 0126 	const BYTE *buff,	// Pointer to the bytes to be written (NULL:Initiate/Finalize sector write)
                 ; 0002 0127 	DWORD sa			// Number of bytes to send, Sector number (LBA) or zero
                 ; 0002 0128 )
                 ; 0002 0129 {
                 _disk_writep:
                 ; .FSTART _disk_writep
                 ; 0002 012A 	DRESULT res;
                 ; 0002 012B 	WORD bc;
                 ; 0002 012C 	static WORD wc;
                 ; 0002 012D 
                 ; 0002 012E //	if ((PINB&_BV(SD_INS))!=0x00) return RES_ERROR;
                 ; 0002 012F //	if ((PINB&_BV(SD_WP))!=0x00) return RES_ERROR;
                 ; 0002 0130 
                 ; 0002 0131 	res = RES_ERROR;
000764 940e 1898 	CALL __PUTPARD2
000766 940e 18f1 	CALL __SAVELOCR4
                 ;	*buff -> Y+8
                 ;	sa -> Y+4
                 ;	res -> R17
                 ;	bc -> R18,R19
000768 e011      	LDI  R17,LOW(1)
                 ; 0002 0132 
                 ; 0002 0133 	if (buff) {		// Send data bytes
000769 85e8      	LDD  R30,Y+8
00076a 85f9      	LDD  R31,Y+8+1
00076b 9730      	SBIW R30,0
00076c f0f9      	BREQ _0x40054
                 ; 0002 0134 		bc = (WORD)sa;
                +
00076d 812c     +LDD R18 , Y + 4
00076e 813d     +LDD R19 , Y + 4 + 1
                 	__GETWRS 18,19,4
                 ; 0002 0135 		while (bc && wc) {		// Send data bytes to the card
                 _0x40055:
00076f 2e02      	MOV  R0,R18
000770 2a03      	OR   R0,R19
000771 f031      	BREQ _0x40058
000772 91e0 0b0f 	LDS  R30,_wc_S0020007000
000774 91f0 0b10 	LDS  R31,_wc_S0020007000+1
000776 9730      	SBIW R30,0
000777 f409      	BRNE _0x40059
                 _0x40058:
000778 c011      	RJMP _0x40057
                 _0x40059:
                 ; 0002 0136 			xmit_spi(*buff++);
000779 85a8      	LDD  R26,Y+8
00077a 85b9      	LDD  R27,Y+8+1
00077b 91ed      	LD   R30,X+
00077c 87a8      	STD  Y+8,R26
00077d 87b9      	STD  Y+8+1,R27
00077e 2fae      	MOV  R26,R30
00077f de94      	RCALL _xmit_spi
                 ; 0002 0137 			wc--; bc--;
000780 e0af      	LDI  R26,LOW(_wc_S0020007000)
000781 e0bb      	LDI  R27,HIGH(_wc_S0020007000)
000782 91ed      	LD   R30,X+
000783 91fd      	LD   R31,X+
000784 9731      	SBIW R30,1
000785 93fe      	ST   -X,R31
000786 93ee      	ST   -X,R30
                +
000787 5021     +SUBI R18 , LOW ( 1 )
000788 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
                 ; 0002 0138 		}
000789 cfe5      	RJMP _0x40055
                 _0x40057:
                 ; 0002 0139 		res = RES_OK;
00078a e010      	LDI  R17,LOW(0)
                 ; 0002 013A 	} else {
00078b c047      	RJMP _0x4005A
                 _0x40054:
                 ; 0002 013B 		if (sa) {	// Initiate sector write process
00078c 940e 14c2 	CALL SUBOPT_0x11
00078e 940e 18d7 	CALL __CPD10
000790 f0f9      	BREQ _0x4005B
                 ; 0002 013C 			if (!(CardType & CT_BLOCK)) sa *= 512;	// Convert to byte address if needed
000791 91e0 0b0e 	LDS  R30,_CardType_G002
000793 70e8      	ANDI R30,LOW(0x8)
000794 f431      	BRNE _0x4005C
000795 940e 14c2 	CALL SUBOPT_0x11
000797 940e 1549 	CALL SUBOPT_0x26
000799 940e 1503 	CALL SUBOPT_0x1A
                 ; 0002 013D 			if (send_cmd(CMD24, sa) == 0) {			// WRITE_SINGLE_BLOCK
                 _0x4005C:
00079b e5e8      	LDI  R30,LOW(88)
00079c 93ea      	ST   -Y,R30
                +
00079d 81ad     +LDD R26 , Y + 5
00079e 81be     +LDD R27 , Y + 5 + 1
00079f 818f     +LDD R24 , Y + 5 + 2
0007a0 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
0007a1 de84      	RCALL _send_cmd_G002
0007a2 30e0      	CPI  R30,0
0007a3 f459      	BRNE _0x4005D
                 ; 0002 013E 				xmit_spi(0xFF); xmit_spi(0xFE);		// Data block header
0007a4 efaf      	LDI  R26,LOW(255)
0007a5 de6e      	RCALL _xmit_spi
0007a6 efae      	LDI  R26,LOW(254)
0007a7 de6c      	RCALL _xmit_spi
                 ; 0002 013F 				wc = 512;							// Set byte counter
0007a8 e0e0      	LDI  R30,LOW(512)
0007a9 e0f2      	LDI  R31,HIGH(512)
0007aa 93e0 0b0f 	STS  _wc_S0020007000,R30
0007ac 93f0 0b10 	STS  _wc_S0020007000+1,R31
                 ; 0002 0140 				res = RES_OK;
0007ae e010      	LDI  R17,LOW(0)
                 ; 0002 0141 			}
                 ; 0002 0142 		} else {	// Finalize sector write process
                 _0x4005D:
0007af c023      	RJMP _0x4005E
                 _0x4005B:
                 ; 0002 0143 			bc = wc + 2;
0007b0 91e0 0b0f 	LDS  R30,_wc_S0020007000
0007b2 91f0 0b10 	LDS  R31,_wc_S0020007000+1
0007b4 9632      	ADIW R30,2
0007b5 019f      	MOVW R18,R30
                 ; 0002 0144 			while (bc--) xmit_spi(0);	// Fill left bytes and CRC with zeros
                 _0x4005F:
0007b6 01f9      	MOVW R30,R18
                +
0007b7 5021     +SUBI R18 , LOW ( 1 )
0007b8 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
0007b9 9730      	SBIW R30,0
0007ba f019      	BREQ _0x40061
0007bb e0a0      	LDI  R26,LOW(0)
0007bc de57      	RCALL _xmit_spi
0007bd cff8      	RJMP _0x4005F
                 _0x40061:
                 ; 0002 0145 if ((rcv_spi() & 0x1F) == 0x05) {
0007be de5c      	RCALL _rcv_spi
0007bf 71ef      	ANDI R30,LOW(0x1F)
0007c0 30e5      	CPI  R30,LOW(0x5)
0007c1 f481      	BRNE _0x40062
                 ; 0002 0146 				for (bc = 65000; rcv_spi() != 0xFF && bc; bc--) ;	// Wait ready
                +
0007c2 ee28     +LDI R18 , LOW ( - 536 )
0007c3 ef3d     +LDI R19 , HIGH ( - 536 )
                 	__GETWRN 18,19,-536
                 _0x40064:
0007c4 de56      	RCALL _rcv_spi
0007c5 3fef      	CPI  R30,LOW(0xFF)
0007c6 f019      	BREQ _0x40066
0007c7 2e02      	MOV  R0,R18
0007c8 2a03      	OR   R0,R19
0007c9 f409      	BRNE _0x40067
                 _0x40066:
0007ca c003      	RJMP _0x40065
                 _0x40067:
                +
0007cb 5021     +SUBI R18 , LOW ( 1 )
0007cc 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
0007cd cff6      	RJMP _0x40064
                 _0x40065:
                 ; 0002 0147 				if (bc) res = RES_OK;
0007ce 2e02      	MOV  R0,R18
0007cf 2a03      	OR   R0,R19
0007d0 f009      	BREQ _0x40068
0007d1 e010      	LDI  R17,LOW(0)
                 ; 0002 0148 			}
                 _0x40068:
                 ; 0002 0149 			release_spi();
                 _0x40062:
0007d2 de51      	RCALL _release_spi_G002
                 ; 0002 014A 		}
                 _0x4005E:
                 ; 0002 014B 	}
                 _0x4005A:
                 ; 0002 014C 
                 ; 0002 014D 	return res;
0007d3 2fe1      	MOV  R30,R17
0007d4 940e 18f8 	CALL __LOADLOCR4
0007d6 c367      	RJMP _0x20C000F
                 ; 0002 014E }
                 ; .FEND
                 ;#endif
                 ;/*----------------------------------------------------------------------------/
                 ;/  Petit FatFs - FAT file system module  R0.02                 (C)ChaN, 2009
                 ;/-----------------------------------------------------------------------------/
                 ;/ Petit FatFs module is an open source software to implement FAT file system to
                 ;/ small embedded systems. This is a free software and is opened for education,
                 ;/ research and commercial developments under license policy of following trems.
                 ;/
                 ;/  Copyright (C) 2009, ChaN, all right reserved.
                 ;/
                 ;/ * The Petit FatFs module is a free software and there is NO WARRANTY.
                 ;/ * No restriction on use. You can use, modify and redistribute it for
                 ;/   personal, non-profit or commercial use UNDER YOUR RESPONSIBILITY.
                 ;/ * Redistributions of source code must retain the above copyright notice.
                 ;/
                 ;/-----------------------------------------------------------------------------/
                 ;/ Jun 15,'09  R0.01a  First release. (Branched from FatFs R0.07b.)
                 ;/
                 ;/ Dec 14,'09  R0.02   Added multiple code page support.
                 ;/                     Added write funciton.
                 ;/                     Changed stream read mode interface.
                 ;/----------------------------------------------------------------------------*/
                 ;
                 ;#include "pff_rn.h"		/* Petit FatFs configurations and declarations */
                 ;#include "diskio.h"		/* Declarations of low level disk I/O functions */
                 ;#include <string.h>
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Private Functions
                 ;
                 ;---------------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FATFS *FatFs;	/* Pointer to the file system object (logical drive) */
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* String functions                                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;/* Fill memory */
                 ;static
                 ;void mem_set (void* dst, int val, int cnt) {
                 ; 0003 002C void mem_set (void* dst, int val, int cnt) {
                 
                 	.CSEG
                 _mem_set_G003:
                 ; .FSTART _mem_set_G003
                 ; 0003 002D 	char *d = (char*)dst;
                 ; 0003 002E 	while (cnt--) *d++ = (char)val;
0007d7 940e 14bd 	CALL SUBOPT_0x10
                 ;	*dst -> Y+6
                 ;	val -> Y+4
                 ;	cnt -> Y+2
                 ;	*d -> R16,R17
                +
0007d9 810e     +LDD R16 , Y + 6
0007da 811f     +LDD R17 , Y + 6 + 1
                 	__GETWRS 16,17,6
                 _0x60003:
0007db 81ea      	LDD  R30,Y+2
0007dc 81fb      	LDD  R31,Y+2+1
0007dd 9731      	SBIW R30,1
0007de 83ea      	STD  Y+2,R30
0007df 83fb      	STD  Y+2+1,R31
0007e0 9631      	ADIW R30,1
0007e1 f049      	BREQ _0x60005
0007e2 931f      	PUSH R17
0007e3 930f      	PUSH R16
                +
0007e4 5f0f     +SUBI R16 , LOW ( - 1 )
0007e5 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
0007e6 81ec      	LDD  R30,Y+4
0007e7 91af      	POP  R26
0007e8 91bf      	POP  R27
0007e9 93ec      	ST   X,R30
0007ea cff0      	RJMP _0x60003
                 _0x60005:
                 ; 0003 002F }
0007eb 8119      	LDD  R17,Y+1
0007ec 8108      	LDD  R16,Y+0
0007ed c3c0      	RJMP _0x20C000E
                 ; .FEND
                 ;
                 ;/* Compare memory to memory */
                 ;static
                 ;int mem_cmp (const void* dst, const void* src, int cnt) {
                 ; 0003 0033 int mem_cmp (const void* dst, const void* src, int cnt) {
                 _mem_cmp_G003:
                 ; .FSTART _mem_cmp_G003
                 ; 0003 0034 	const char *d = (const char *)dst, *s = (const char *)src;
                 ; 0003 0035 	int r = 0;
                 ; 0003 0036 	while (cnt-- && (r = *d++ - *s++) == 0) ;
0007ee 940e 1552 	CALL SUBOPT_0x28
                 ;	*dst -> Y+10
                 ;	*src -> Y+8
                 ;	cnt -> Y+6
                 ;	*d -> R16,R17
                 ;	*s -> R18,R19
                 ;	r -> R20,R21
                +
0007f0 850a     +LDD R16 , Y + 10
0007f1 851b     +LDD R17 , Y + 10 + 1
                 	__GETWRS 16,17,10
                +
0007f2 8528     +LDD R18 , Y + 8
0007f3 8539     +LDD R19 , Y + 8 + 1
                 	__GETWRS 18,19,8
                +
0007f4 e040     +LDI R20 , LOW ( 0 )
0007f5 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x60006:
0007f6 81ee      	LDD  R30,Y+6
0007f7 81ff      	LDD  R31,Y+6+1
0007f8 9731      	SBIW R30,1
0007f9 83ee      	STD  Y+6,R30
0007fa 83ff      	STD  Y+6+1,R31
0007fb 9631      	ADIW R30,1
0007fc f081      	BREQ _0x60009
0007fd 01d8      	MOVW R26,R16
                +
0007fe 5f0f     +SUBI R16 , LOW ( - 1 )
0007ff 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000800 900c      	LD   R0,X
000801 2411      	CLR  R1
000802 01d9      	MOVW R26,R18
                +
000803 5f2f     +SUBI R18 , LOW ( - 1 )
000804 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
000805 91ac      	LD   R26,X
000806 27bb      	CLR  R27
000807 01f0      	MOVW R30,R0
000808 1bea      	SUB  R30,R26
000809 0bfb      	SBC  R31,R27
00080a 01af      	MOVW R20,R30
00080b 9730      	SBIW R30,0
00080c f009      	BREQ _0x6000A
                 _0x60009:
00080d c001      	RJMP _0x60008
                 _0x6000A:
00080e cfe7      	RJMP _0x60006
                 _0x60008:
                 ; 0003 0037 	return r;
00080f 01fa      	MOVW R30,R20
000810 940e 18f6 	CALL __LOADLOCR6
000812 962c      	ADIW R28,12
000813 9508      	RET
                 ; 0003 0038 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* FAT access - Read value of a FAT entry                                */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;CLUST get_fat (	/* 1:IO error, Else:Cluster status */
                 ; 0003 0042 	CLUST clst	/* Cluster# to get the link information */
                 ; 0003 0043 )
                 ; 0003 0044 {
                 _get_fat_G003:
                 ; .FSTART _get_fat_G003
                 ; 0003 0045 	WORD wc, bc, ofs;
                 ; 0003 0046 	BYTE buf[4];
                 ; 0003 0047 	FATFS *fs = FatFs;
                 ; 0003 0048 
                 ; 0003 0049 
                 ; 0003 004A 	if (clst < 2 || clst >= fs->max_clust)	/* Range check */
000814 940e 1898 	CALL __PUTPARD2
000816 9726      	SBIW R28,6
000817 940e 18ef 	CALL __SAVELOCR6
                 ;	clst -> Y+12
                 ;	wc -> R16,R17
                 ;	bc -> R18,R19
                 ;	ofs -> R20,R21
                 ;	buf -> Y+8
                 ;	*fs -> Y+6
000819 940e 1557 	CALL SUBOPT_0x29
00081b 83ee      	STD  Y+6,R30
00081c 83ff      	STD  Y+6+1,R31
00081d 940e 155c 	CALL SUBOPT_0x2A
00081f 940e 1561 	CALL SUBOPT_0x2B
000821 f050      	BRLO _0x6000C
000822 81ae      	LDD  R26,Y+6
000823 81bf      	LDD  R27,Y+6+1
000824 9618      	ADIW R26,8
000825 940e 1862 	CALL __GETD1P
000827 940e 155c 	CALL SUBOPT_0x2A
000829 940e 18ea 	CALL __CPD21
00082b f008      	BRLO _0x6000B
                 _0x6000C:
                 ; 0003 004B 		return 1;
00082c c0a6      	RJMP _0x20C0013
                 ; 0003 004C 
                 ; 0003 004D 	switch (fs->fs_type) {
                 _0x6000B:
00082d 81ae      	LDD  R26,Y+6
00082e 81bf      	LDD  R27,Y+6+1
00082f 91ec      	LD   R30,X
000830 e0f0      	LDI  R31,0
                 ; 0003 004E 	case FS_FAT12 :
000831 30e1      	CPI  R30,LOW(0x1)
000832 e0a0      	LDI  R26,HIGH(0x1)
000833 07fa      	CPC  R31,R26
000834 f009      	BREQ PC+2
000835 c04d      	RJMP _0x60011
                 ; 0003 004F 		bc = (WORD)clst; bc += bc / 2;
                +
000836 852c     +LDD R18 , Y + 12
000837 853d     +LDD R19 , Y + 12 + 1
                 	__GETWRS 18,19,12
000838 01f9      	MOVW R30,R18
000839 95f6      	LSR  R31
00083a 95e7      	ROR  R30
                +
00083b 0f2e     +ADD R18 , R30
00083c 1f3f     +ADC R19 , R31
                 	__ADDWRR 18,19,30,31
                 ; 0003 0050 		ofs = bc % 512; bc /= 512;
00083d 01f9      	MOVW R30,R18
00083e 70f1      	ANDI R31,HIGH(0x1FF)
00083f 01af      	MOVW R20,R30
000840 01d9      	MOVW R26,R18
000841 e0e0      	LDI  R30,LOW(512)
000842 e0f2      	LDI  R31,HIGH(512)
000843 940e 1822 	CALL __DIVW21U
000845 019f      	MOVW R18,R30
                 ; 0003 0051 		if (ofs != 511) {
000846 efef      	LDI  R30,LOW(511)
000847 e0f1      	LDI  R31,HIGH(511)
000848 17e4      	CP   R30,R20
000849 07f5      	CPC  R31,R21
00084a f059      	BREQ _0x60012
                 ; 0003 0052 			if (disk_readp(buf, fs->fatbase + bc, ofs, 2)) break;
00084b 940e 1569 	CALL SUBOPT_0x2C
00084d 940e 1893 	CALL __PUTPARD1
00084f 935a      	ST   -Y,R21
000850 934a      	ST   -Y,R20
000851 940e 1575 	CALL SUBOPT_0x2D
000853 f009      	BREQ _0x60013
000854 c07e      	RJMP _0x60010
                 ; 0003 0053 		} else {
                 _0x60013:
000855 c01f      	RJMP _0x60014
                 _0x60012:
                 ; 0003 0054 			if (disk_readp(buf, fs->fatbase + bc, 511, 1)) break;
000856 940e 1569 	CALL SUBOPT_0x2C
000858 940e 1893 	CALL __PUTPARD1
00085a efef      	LDI  R30,LOW(511)
00085b e0f1      	LDI  R31,HIGH(511)
00085c 93fa      	ST   -Y,R31
00085d 93ea      	ST   -Y,R30
00085e e0a1      	LDI  R26,LOW(1)
00085f 940e 157b 	CALL SUBOPT_0x2E
000861 f009      	BREQ _0x60015
000862 c070      	RJMP _0x60010
                 ; 0003 0055 			if (disk_readp(buf+1, fs->fatbase + bc + 1, 0, 1)) break;
                 _0x60015:
000863 01fe      	MOVW R30,R28
000864 9639      	ADIW R30,9
000865 940e 1580 	CALL SUBOPT_0x2F
000867 01f9      	MOVW R30,R18
000868 940e 1508 	CALL SUBOPT_0x1B
00086a 940e 1589 	CALL SUBOPT_0x30
00086c 940e 1893 	CALL __PUTPARD1
00086e 940e 1470 	CALL SUBOPT_0x5
000870 e0a1      	LDI  R26,LOW(1)
000871 940e 157b 	CALL SUBOPT_0x2E
000873 f009      	BREQ _0x60016
000874 c05e      	RJMP _0x60010
                 ; 0003 0056 		}
                 _0x60016:
                 _0x60014:
                 ; 0003 0057 		wc = LD_WORD(buf);
                +
000875 8508     +LDD R16 , Y + 8
000876 8519     +LDD R17 , Y + 8 + 1
                 	__GETWRS 16,17,8
                 ; 0003 0058 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
000877 85ec      	LDD  R30,Y+12
000878 70e1      	ANDI R30,LOW(0x1)
000879 f021      	BREQ _0x60017
00087a 01f8      	MOVW R30,R16
00087b 940e 17e0 	CALL __LSRW4
00087d c002      	RJMP _0x60114
                 _0x60017:
00087e 01f8      	MOVW R30,R16
00087f 70ff      	ANDI R31,HIGH(0xFFF)
                 _0x60114:
000880 2766      	CLR  R22
000881 2777      	CLR  R23
000882 c054      	RJMP _0x20C0012
                 ; 0003 0059 
                 ; 0003 005A 	case FS_FAT16 :
                 _0x60011:
000883 30e2      	CPI  R30,LOW(0x2)
000884 e0a0      	LDI  R26,HIGH(0x2)
000885 07fa      	CPC  R31,R26
000886 f509      	BRNE _0x6001A
                 ; 0003 005B 		if (disk_readp(buf, fs->fatbase + clst / 256, (WORD)(((WORD)clst % 256) * 2), 2)) break;
000887 01fe      	MOVW R30,R28
000888 9638      	ADIW R30,8
000889 940e 1580 	CALL SUBOPT_0x2F
00088b 939f      	PUSH R25
00088c 938f      	PUSH R24
00088d 93bf      	PUSH R27
00088e 93af      	PUSH R26
00088f 940e 158e 	CALL SUBOPT_0x31
                +
000891 e0e0     +LDI R30 , LOW ( 0x100 )
000892 e0f1     +LDI R31 , HIGH ( 0x100 )
000893 e060     +LDI R22 , BYTE3 ( 0x100 )
000894 e070     +LDI R23 , BYTE4 ( 0x100 )
                 	__GETD1N 0x100
000895 940e 1835 	CALL __DIVD21U
000897 91af      	POP  R26
000898 91bf      	POP  R27
000899 918f      	POP  R24
00089a 919f      	POP  R25
00089b 940e 1593 	CALL SUBOPT_0x32
00089d 70f0      	ANDI R31,HIGH(0xFF)
00089e 0fee      	LSL  R30
00089f 1fff      	ROL  R31
0008a0 940e 159a 	CALL SUBOPT_0x33
0008a2 f581      	BRNE _0x60010
                 ; 0003 005C 		return LD_WORD(buf);
0008a3 85e8      	LDD  R30,Y+8
0008a4 85f9      	LDD  R31,Y+8+1
0008a5 2766      	CLR  R22
0008a6 2777      	CLR  R23
0008a7 c02f      	RJMP _0x20C0012
                 ; 0003 005D #if _FS_FAT32
                 ; 0003 005E 	case FS_FAT32 :
                 _0x6001A:
0008a8 30e3      	CPI  R30,LOW(0x3)
0008a9 e0a0      	LDI  R26,HIGH(0x3)
0008aa 07fa      	CPC  R31,R26
0008ab f539      	BRNE _0x60010
                 ; 0003 005F 		if (disk_readp(buf, fs->fatbase + clst / 128, (WORD)(((WORD)clst % 128) * 4), 4)) break;
0008ac 01fe      	MOVW R30,R28
0008ad 9638      	ADIW R30,8
0008ae 940e 1580 	CALL SUBOPT_0x2F
0008b0 939f      	PUSH R25
0008b1 938f      	PUSH R24
0008b2 93bf      	PUSH R27
0008b3 93af      	PUSH R26
0008b4 940e 158e 	CALL SUBOPT_0x31
                +
0008b6 e8e0     +LDI R30 , LOW ( 0x80 )
0008b7 e0f0     +LDI R31 , HIGH ( 0x80 )
0008b8 e060     +LDI R22 , BYTE3 ( 0x80 )
0008b9 e070     +LDI R23 , BYTE4 ( 0x80 )
                 	__GETD1N 0x80
0008ba 940e 1835 	CALL __DIVD21U
0008bc 91af      	POP  R26
0008bd 91bf      	POP  R27
0008be 918f      	POP  R24
0008bf 919f      	POP  R25
0008c0 940e 1593 	CALL SUBOPT_0x32
0008c2 77ef      	ANDI R30,LOW(0x7F)
0008c3 70f0      	ANDI R31,HIGH(0x7F)
0008c4 940e 17db 	CALL __LSLW2
0008c6 93fa      	ST   -Y,R31
0008c7 93ea      	ST   -Y,R30
0008c8 e0a4      	LDI  R26,LOW(4)
0008c9 940e 157b 	CALL SUBOPT_0x2E
0008cb f439      	BRNE _0x60010
                 ; 0003 0060 		return LD_DWORD(buf) & 0x0FFFFFFF;
0008cc 940e 14fe 	CALL SUBOPT_0x19
                +
0008ce 7fef     +ANDI R30 , LOW ( 0xFFFFFFF )
0008cf 7fff     +ANDI R31 , HIGH ( 0xFFFFFFF )
0008d0 7f6f     +ANDI R22 , BYTE3 ( 0xFFFFFFF )
0008d1 707f     +ANDI R23 , BYTE4 ( 0xFFFFFFF )
                 	__ANDD1N 0xFFFFFFF
0008d2 c004      	RJMP _0x20C0012
                 ; 0003 0061 #endif
                 ; 0003 0062 	}
                 _0x60010:
                 ; 0003 0063 
                 ; 0003 0064 	return 1;	/* An error occured at the disk I/O layer */
                 _0x20C0013:
                +
0008d3 e0e1     +LDI R30 , LOW ( 0x1 )
0008d4 e0f0     +LDI R31 , HIGH ( 0x1 )
0008d5 e060     +LDI R22 , BYTE3 ( 0x1 )
0008d6 e070     +LDI R23 , BYTE4 ( 0x1 )
                 	__GETD1N 0x1
                 _0x20C0012:
0008d7 940e 18f6 	CALL __LOADLOCR6
0008d9 9660      	ADIW R28,16
0008da 9508      	RET
                 ; 0003 0065 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get sector# from cluster#                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
                 ; 0003 0070 	CLUST clst		/* Cluster# to be converted */
                 ; 0003 0071 )
                 ; 0003 0072 {
                 _clust2sect_G003:
                 ; .FSTART _clust2sect_G003
                 ; 0003 0073 	FATFS *fs = FatFs;
                 ; 0003 0074 
                 ; 0003 0075 
                 ; 0003 0076 	clst -= 2;
0008db 940e 1898 	CALL __PUTPARD2
0008dd 940e 159d 	CALL SUBOPT_0x34
                 ;	clst -> Y+2
                 ;	*fs -> R16,R17
0008df 940e 152e 	CALL SUBOPT_0x21
                +
0008e1 50e2     +SUBI R30 , LOW ( 2 )
0008e2 40f0     +SBCI R31 , HIGH ( 2 )
0008e3 4060     +SBCI R22 , BYTE3 ( 2 )
0008e4 4070     +SBCI R23 , BYTE4 ( 2 )
                 	__SUBD1N 2
0008e5 940e 15a4 	CALL SUBOPT_0x35
                 ; 0003 0077 	if (clst >= (fs->max_clust - 2)) return 0;		/* Invalid cluster# */
0008e7 01f8      	MOVW R30,R16
                +
0008e8 85a0     +LDD R26 , Z + 8
0008e9 85b1     +LDD R27 , Z + 8 + 1
0008ea 8582     +LDD R24 , Z + 8 + 2
0008eb 8593     +LDD R25 , Z + 8 + 3
                 	__GETD2Z 8
                +
0008ec e0e2     +LDI R30 , LOW ( 0x2 )
0008ed e0f0     +LDI R31 , HIGH ( 0x2 )
0008ee e060     +LDI R22 , BYTE3 ( 0x2 )
0008ef e070     +LDI R23 , BYTE4 ( 0x2 )
                 	__GETD1N 0x2
0008f0 940e 189d 	CALL __SWAPD12
0008f2 940e 17b3 	CALL __SUBD12
0008f4 940e 15a9 	CALL SUBOPT_0x36
0008f6 940e 18ea 	CALL __CPD21
0008f8 f028      	BRLO _0x6001E
0008f9 940e 15ae 	CALL SUBOPT_0x37
0008fb 8119      	LDD  R17,Y+1
0008fc 8108      	LDD  R16,Y+0
0008fd c2e6      	RJMP _0x20C000D
                 ; 0003 0078 	return (DWORD)clst * fs->csize + fs->database;
                 _0x6001E:
0008fe 01f8      	MOVW R30,R16
0008ff 81e1      	LDD  R30,Z+1
000900 e0f0      	LDI  R31,0
000901 940e 15a9 	CALL SUBOPT_0x36
000903 940e 17f8 	CALL __CWD1
000905 940e 1802 	CALL __MULD12U
000907 937f      	PUSH R23
000908 936f      	PUSH R22
000909 93ff      	PUSH R31
00090a 93ef      	PUSH R30
00090b 01d8      	MOVW R26,R16
00090c 9654      	ADIW R26,20
00090d 940e 1862 	CALL __GETD1P
00090f 91af      	POP  R26
000910 91bf      	POP  R27
000911 918f      	POP  R24
000912 919f      	POP  R25
000913 940e 17a9 	CALL __ADDD12
000915 8119      	LDD  R17,Y+1
000916 8108      	LDD  R16,Y+0
000917 c2cc      	RJMP _0x20C000D
                 ; 0003 0079 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Rewind directory index                           */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_rewind (
                 ; 0003 0084 	DIR *dj			/* Pointer to directory object */
                 ; 0003 0085 )
                 ; 0003 0086 {
                 _dir_rewind_G003:
                 ; .FSTART _dir_rewind_G003
                 ; 0003 0087 	CLUST clst;
                 ; 0003 0088 	FATFS *fs = FatFs;
                 ; 0003 0089 
                 ; 0003 008A 
                 ; 0003 008B 	dj->index = 0;
000918 93ba      	ST   -Y,R27
000919 93aa      	ST   -Y,R26
00091a 9724      	SBIW R28,4
00091b 940e 159d 	CALL SUBOPT_0x34
                 ;	*dj -> Y+6
                 ;	clst -> Y+2
                 ;	*fs -> R16,R17
00091d 81ae      	LDD  R26,Y+6
00091e 81bf      	LDD  R27,Y+6+1
00091f 940e 15b3 	CALL SUBOPT_0x38
                 ; 0003 008C 	clst = dj->sclust;
000921 81ae      	LDD  R26,Y+6
000922 81bf      	LDD  R27,Y+6+1
000923 9614      	ADIW R26,4
000924 940e 15b8 	CALL SUBOPT_0x39
                 ; 0003 008D 	if (clst == 1 || clst >= fs->max_clust)	/* Check start cluster range */
000926 940e 15a9 	CALL SUBOPT_0x36
                +
000928 30a1     +CPI R26 , LOW ( 0x1 )
000929 e0e0     +LDI R30 , HIGH ( 0x1 )
00092a 07be     +CPC R27 , R30
00092b e0e0     +LDI R30 , BYTE3 ( 0x1 )
00092c 078e     +CPC R24 , R30
00092d e0e0     +LDI R30 , BYTE4 ( 0x1 )
00092e 079e     +CPC R25 , R30
                 	__CPD2N 0x1
00092f f049      	BREQ _0x60020
000930 01d8      	MOVW R26,R16
000931 9618      	ADIW R26,8
000932 940e 1862 	CALL __GETD1P
000934 940e 15a9 	CALL SUBOPT_0x36
000936 940e 18ea 	CALL __CPD21
000938 f020      	BRLO _0x6001F
                 _0x60020:
                 ; 0003 008E 		return FR_DISK_ERR;
000939 e0e1      	LDI  R30,LOW(1)
00093a 8119      	LDD  R17,Y+1
00093b 8108      	LDD  R16,Y+0
00093c c271      	RJMP _0x20C000E
                 ; 0003 008F #if _FS_FAT32
                 ; 0003 0090 	if (!clst && fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
                 _0x6001F:
00093d 940e 152e 	CALL SUBOPT_0x21
00093f 940e 18d7 	CALL __CPD10
000941 f421      	BRNE _0x60023
000942 01d8      	MOVW R26,R16
000943 91ac      	LD   R26,X
000944 30a3      	CPI  R26,LOW(0x3)
000945 f009      	BREQ _0x60024
                 _0x60023:
000946 c004      	RJMP _0x60022
                 _0x60024:
                 ; 0003 0091 		clst = fs->dirbase;
000947 01d8      	MOVW R26,R16
000948 9650      	ADIW R26,16
000949 940e 15b8 	CALL SUBOPT_0x39
                 ; 0003 0092 #endif
                 ; 0003 0093 	dj->clust = clst;						/* Current cluster */
                 _0x60022:
00094b 940e 152e 	CALL SUBOPT_0x21
                +
00094d 81ae     +LDD R26 , Y + 6
00094e 81bf     +LDD R27 , Y + 6 + 1
00094f 9618     +ADIW R26 , 8
000950 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 6,8
                 ; 0003 0094 	dj->sect = clst ? clust2sect(clst) : fs->dirbase;	/* Current sector */
000952 940e 152e 	CALL SUBOPT_0x21
000954 940e 18d7 	CALL __CPD10
000956 f021      	BREQ _0x60025
000957 940e 15a9 	CALL SUBOPT_0x36
000959 df81      	RCALL _clust2sect_G003
00095a c004      	RJMP _0x60026
                 _0x60025:
00095b 01d8      	MOVW R26,R16
00095c 9650      	ADIW R26,16
00095d 940e 1862 	CALL __GETD1P
                 _0x60026:
                +
00095f 81ae     +LDD R26 , Y + 6
000960 81bf     +LDD R27 , Y + 6 + 1
000961 961c     +ADIW R26 , 12
000962 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 6,12
                 ; 0003 0095 
                 ; 0003 0096 	return FR_OK;	/* Seek succeeded */
000964 e0e0      	LDI  R30,LOW(0)
000965 8119      	LDD  R17,Y+1
000966 8108      	LDD  R16,Y+0
000967 c246      	RJMP _0x20C000E
                 ; 0003 0097 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Move directory index next                        */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table */
                 ; 0003 00A2 	DIR *dj			/* Pointer to directory object */
                 ; 0003 00A3 )
                 ; 0003 00A4 {
                 _dir_next_G003:
                 ; .FSTART _dir_next_G003
                 ; 0003 00A5 	CLUST clst;
                 ; 0003 00A6 	WORD i;
                 ; 0003 00A7 	FATFS *fs = FatFs;
                 ; 0003 00A8 
                 ; 0003 00A9 
                 ; 0003 00AA 	i = dj->index + 1;
000968 93ba      	ST   -Y,R27
000969 93aa      	ST   -Y,R26
00096a 9724      	SBIW R28,4
00096b 940e 15bb 	CALL SUBOPT_0x3A
                 ;	*dj -> Y+8
                 ;	clst -> Y+4
                 ;	i -> R16,R17
                 ;	*fs -> R18,R19
00096d 85a8      	LDD  R26,Y+8
00096e 85b9      	LDD  R27,Y+8+1
00096f 940e 185e 	CALL __GETW1P
000971 9631      	ADIW R30,1
000972 018f      	MOVW R16,R30
                 ; 0003 00AB 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
000973 2e00      	MOV  R0,R16
000974 2a01      	OR   R0,R17
000975 f019      	BREQ _0x60029
000976 940e 15c2 	CALL SUBOPT_0x3B
000978 f421      	BRNE _0x60028
                 _0x60029:
                 ; 0003 00AC 		return FR_NO_FILE;
000979 e0e3      	LDI  R30,LOW(3)
00097a 940e 18f8 	CALL __LOADLOCR4
00097c c1c1      	RJMP _0x20C000F
                 ; 0003 00AD 
                 ; 0003 00AE 	if (!(i & (16-1))) {	/* Sector changed? */
                 _0x60028:
00097d 01f8      	MOVW R30,R16
00097e 70ef      	ANDI R30,LOW(0xF)
00097f f009      	BREQ PC+2
000980 c059      	RJMP _0x6002B
                 ; 0003 00AF 		dj->sect++;			/* Next sector */
000981 85a8      	LDD  R26,Y+8
000982 85b9      	LDD  R27,Y+8+1
000983 961c      	ADIW R26,12
000984 940e 1868 	CALL __GETD1P_INC
                +
000986 5fef     +SUBI R30 , LOW ( - 1 )
000987 4fff     +SBCI R31 , HIGH ( - 1 )
000988 4f6f     +SBCI R22 , BYTE3 ( - 1 )
000989 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__SUBD1N -1
00098a 940e 1872 	CALL __PUTDP1_DEC
                 ; 0003 00B0 
                 ; 0003 00B1 		if (dj->clust == 0) {	/* Static table */
00098c 85a8      	LDD  R26,Y+8
00098d 85b9      	LDD  R27,Y+8+1
00098e 9618      	ADIW R26,8
00098f 940e 1862 	CALL __GETD1P
000991 940e 18d7 	CALL __CPD10
000993 f461      	BRNE _0x6002C
                 ; 0003 00B2 			if (i >= fs->n_rootdir)	/* Report EOT when end of table */
000994 01d9      	MOVW R26,R18
000995 9614      	ADIW R26,4
000996 940e 185e 	CALL __GETW1P
000998 170e      	CP   R16,R30
000999 071f      	CPC  R17,R31
00099a f020      	BRLO _0x6002D
                 ; 0003 00B3 				return FR_NO_FILE;
00099b e0e3      	LDI  R30,LOW(3)
00099c 940e 18f8 	CALL __LOADLOCR4
00099e c19f      	RJMP _0x20C000F
                 ; 0003 00B4 		}
                 _0x6002D:
                 ; 0003 00B5 		else {					/* Dynamic table */
00099f c03a      	RJMP _0x6002E
                 _0x6002C:
                 ; 0003 00B6 			if (((i / 16) & (fs->csize-1)) == 0) {	/* Cluster changed? */
0009a0 01f8      	MOVW R30,R16
0009a1 940e 17e0 	CALL __LSRW4
0009a3 01df      	MOVW R26,R30
0009a4 01f9      	MOVW R30,R18
0009a5 81e1      	LDD  R30,Z+1
0009a6 e0f0      	LDI  R31,0
0009a7 9731      	SBIW R30,1
0009a8 23ea      	AND  R30,R26
0009a9 23fb      	AND  R31,R27
0009aa 9730      	SBIW R30,0
0009ab f571      	BRNE _0x6002F
                 ; 0003 00B7 				clst = get_fat(dj->clust);		/* Get next cluster */
0009ac 85e8      	LDD  R30,Y+8
0009ad 85f9      	LDD  R31,Y+8+1
                +
0009ae 85a0     +LDD R26 , Z + 8
0009af 85b1     +LDD R27 , Z + 8 + 1
0009b0 8582     +LDD R24 , Z + 8 + 2
0009b1 8593     +LDD R25 , Z + 8 + 3
                 	__GETD2Z 8
0009b2 de61      	RCALL _get_fat_G003
0009b3 940e 1503 	CALL SUBOPT_0x1A
                 ; 0003 00B8 				if (clst <= 1) return FR_DISK_ERR;
0009b5 940e 15ca 	CALL SUBOPT_0x3C
0009b7 940e 1561 	CALL SUBOPT_0x2B
0009b9 f420      	BRSH _0x60030
0009ba e0e1      	LDI  R30,LOW(1)
0009bb 940e 18f8 	CALL __LOADLOCR4
0009bd c180      	RJMP _0x20C000F
                 ; 0003 00B9 				if (clst >= fs->max_clust)		/* When it reached end of dynamic table */
                 _0x60030:
0009be 01d9      	MOVW R26,R18
0009bf 9618      	ADIW R26,8
0009c0 940e 1862 	CALL __GETD1P
0009c2 940e 15ca 	CALL SUBOPT_0x3C
0009c4 940e 18ea 	CALL __CPD21
0009c6 f020      	BRLO _0x60031
                 ; 0003 00BA 					return FR_NO_FILE;			/* Report EOT */
0009c7 e0e3      	LDI  R30,LOW(3)
0009c8 940e 18f8 	CALL __LOADLOCR4
0009ca c173      	RJMP _0x20C000F
                 ; 0003 00BB 				dj->clust = clst;				/* Initialize data for new cluster */
                 _0x60031:
0009cb 940e 14c2 	CALL SUBOPT_0x11
                +
0009cd 85a8     +LDD R26 , Y + 8
0009ce 85b9     +LDD R27 , Y + 8 + 1
0009cf 9618     +ADIW R26 , 8
0009d0 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 8,8
                 ; 0003 00BC 				dj->sect = clust2sect(clst);
0009d2 940e 15ca 	CALL SUBOPT_0x3C
0009d4 df06      	RCALL _clust2sect_G003
                +
0009d5 85a8     +LDD R26 , Y + 8
0009d6 85b9     +LDD R27 , Y + 8 + 1
0009d7 961c     +ADIW R26 , 12
0009d8 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 8,12
                 ; 0003 00BD 			}
                 ; 0003 00BE 		}
                 _0x6002F:
                 _0x6002E:
                 ; 0003 00BF 	}
                 ; 0003 00C0 
                 ; 0003 00C1 	dj->index = i;
                 _0x6002B:
0009da 85a8      	LDD  R26,Y+8
0009db 85b9      	LDD  R27,Y+8+1
0009dc 930d      	ST   X+,R16
0009dd 931c      	ST   X,R17
                 ; 0003 00C2 
                 ; 0003 00C3 	return FR_OK;
0009de e0e0      	LDI  R30,LOW(0)
0009df 940e 18f8 	CALL __LOADLOCR4
0009e1 c15c      	RJMP _0x20C000F
                 ; 0003 00C4 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Find an object in the directory                  */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_find (
                 ; 0003 00CF 	DIR *dj			/* Pointer to the directory object linked to the file name */
                 ; 0003 00D0 )
                 ; 0003 00D1 {
                 _dir_find_G003:
                 ; .FSTART _dir_find_G003
                 ; 0003 00D2 	FRESULT res;
                 ; 0003 00D3 	BYTE c, *dir;
                 ; 0003 00D4 
                 ; 0003 00D5 
                 ; 0003 00D6 	res = dir_rewind(dj);			/* Rewind directory object */
0009e2 940e 1544 	CALL SUBOPT_0x25
                 ;	*dj -> Y+4
                 ;	res -> R17
                 ;	c -> R16
                 ;	*dir -> R18,R19
0009e4 81ac      	LDD  R26,Y+4
0009e5 81bd      	LDD  R27,Y+4+1
0009e6 df31      	RCALL _dir_rewind_G003
0009e7 2f1e      	MOV  R17,R30
                 ; 0003 00D7 	if (res != FR_OK) return res;
0009e8 3010      	CPI  R17,0
0009e9 f019      	BREQ _0x60032
0009ea 940e 18f8 	CALL __LOADLOCR4
0009ec c1f7      	RJMP _0x20C000D
                 ; 0003 00D8 
                 ; 0003 00D9 	dir = FatFs->buf;
                 _0x60032:
0009ed 940e 15cf 	CALL SUBOPT_0x3D
0009ef 912d      	LD   R18,X+
0009f0 913c      	LD   R19,X
                 ; 0003 00DA 	do {
                 _0x60034:
                 ; 0003 00DB 		res = disk_readp(dir, dj->sect, (WORD)((dj->index % 16) * 32), 32)	/* Read an entry */
                 ; 0003 00DC 			? FR_DISK_ERR : FR_OK;
0009f1 933a      	ST   -Y,R19
0009f2 932a      	ST   -Y,R18
0009f3 81ee      	LDD  R30,Y+6
0009f4 81ff      	LDD  R31,Y+6+1
0009f5 940e 15d5 	CALL SUBOPT_0x3E
0009f7 85aa      	LDD  R26,Y+10
0009f8 85bb      	LDD  R27,Y+10+1
0009f9 940e 15dc 	CALL SUBOPT_0x3F
0009fb f011      	BREQ _0x60036
0009fc e0e1      	LDI  R30,LOW(1)
0009fd c001      	RJMP _0x60037
                 _0x60036:
0009fe e0e0      	LDI  R30,LOW(0)
                 _0x60037:
0009ff 2f1e      	MOV  R17,R30
                 ; 0003 00DD 		if (res != FR_OK) break;
000a00 3010      	CPI  R17,0
000a01 f4f9      	BRNE _0x60035
                 ; 0003 00DE 		c = dir[DIR_Name];	/* First character */
000a02 01d9      	MOVW R26,R18
000a03 910c      	LD   R16,X
                 ; 0003 00DF 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
000a04 3000      	CPI  R16,0
000a05 f411      	BRNE _0x6003A
000a06 e013      	LDI  R17,LOW(3)
000a07 c019      	RJMP _0x60035
                 ; 0003 00E0 		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dj->fn, 11)) /* Is it a valid entry? */
                 _0x6003A:
000a08 01f9      	MOVW R30,R18
000a09 85e3      	LDD  R30,Z+11
000a0a 70e8      	ANDI R30,LOW(0x8)
000a0b f469      	BRNE _0x6003C
000a0c 933a      	ST   -Y,R19
000a0d 932a      	ST   -Y,R18
000a0e 81ee      	LDD  R30,Y+6
000a0f 81ff      	LDD  R31,Y+6+1
000a10 81a2      	LDD  R26,Z+2
000a11 81b3      	LDD  R27,Z+3
000a12 93ba      	ST   -Y,R27
000a13 93aa      	ST   -Y,R26
000a14 e0ab      	LDI  R26,LOW(11)
000a15 e0b0      	LDI  R27,0
000a16 ddd7      	RCALL _mem_cmp_G003
000a17 9730      	SBIW R30,0
000a18 f009      	BREQ _0x6003D
                 _0x6003C:
000a19 c001      	RJMP _0x6003B
                 _0x6003D:
                 ; 0003 00E1 			break;
000a1a c006      	RJMP _0x60035
                 ; 0003 00E2 		res = dir_next(dj);							/* Next entry */
                 _0x6003B:
000a1b 81ac      	LDD  R26,Y+4
000a1c 81bd      	LDD  R27,Y+4+1
000a1d df4a      	RCALL _dir_next_G003
000a1e 2f1e      	MOV  R17,R30
                 ; 0003 00E3 	} while (res == FR_OK);
000a1f 3010      	CPI  R17,0
000a20 f281      	BREQ _0x60034
                 _0x60035:
                 ; 0003 00E4 
                 ; 0003 00E5 	return res;
000a21 2fe1      	MOV  R30,R17
000a22 940e 18f8 	CALL __LOADLOCR4
000a24 c1bf      	RJMP _0x20C000D
                 ; 0003 00E6 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read an object from the directory                                     */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_DIR
                 ;static
                 ;FRESULT dir_read (
                 ; 0003 00F1 	DIR *dj			/* Pointer to the directory object to store read object name */
                 ; 0003 00F2 )
                 ; 0003 00F3 {
                 _dir_read_G003:
                 ; .FSTART _dir_read_G003
                 ; 0003 00F4 	FRESULT res;
                 ; 0003 00F5 	BYTE a, c, *dir;
                 ; 0003 00F6 
                 ; 0003 00F7 
                 ; 0003 00F8 	res = FR_NO_FILE;
000a25 940e 1552 	CALL SUBOPT_0x28
                 ;	*dj -> Y+6
                 ;	res -> R17
                 ;	a -> R16
                 ;	c -> R19
                 ;	*dir -> R20,R21
000a27 e013      	LDI  R17,LOW(3)
                 ; 0003 00F9 	dir = FatFs->buf;
000a28 940e 15cf 	CALL SUBOPT_0x3D
000a2a 914d      	LD   R20,X+
000a2b 915c      	LD   R21,X
                 ; 0003 00FA 	while (dj->sect) {
                 _0x6003E:
000a2c 81ae      	LDD  R26,Y+6
000a2d 81bf      	LDD  R27,Y+6+1
000a2e 961c      	ADIW R26,12
000a2f 940e 1862 	CALL __GETD1P
000a31 940e 18d7 	CALL __CPD10
000a33 f149      	BREQ _0x60040
                 ; 0003 00FB 		res = disk_readp(dir, dj->sect, (WORD)((dj->index % 16) * 32), 32)	/* Read an entry */
                 ; 0003 00FC 			? FR_DISK_ERR : FR_OK;
000a34 935a      	ST   -Y,R21
000a35 934a      	ST   -Y,R20
000a36 85e8      	LDD  R30,Y+8
000a37 85f9      	LDD  R31,Y+8+1
000a38 940e 15d5 	CALL SUBOPT_0x3E
000a3a 85ac      	LDD  R26,Y+12
000a3b 85bd      	LDD  R27,Y+12+1
000a3c 940e 15dc 	CALL SUBOPT_0x3F
000a3e f011      	BREQ _0x60041
000a3f e0e1      	LDI  R30,LOW(1)
000a40 c001      	RJMP _0x60042
                 _0x60041:
000a41 e0e0      	LDI  R30,LOW(0)
                 _0x60042:
000a42 2f1e      	MOV  R17,R30
                 ; 0003 00FD 		if (res != FR_OK) break;
000a43 3010      	CPI  R17,0
000a44 f4c1      	BRNE _0x60040
                 ; 0003 00FE 		c = dir[DIR_Name];
000a45 01da      	MOVW R26,R20
000a46 913c      	LD   R19,X
                 ; 0003 00FF 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
000a47 3030      	CPI  R19,0
000a48 f411      	BRNE _0x60045
000a49 e013      	LDI  R17,LOW(3)
000a4a c012      	RJMP _0x60040
                 ; 0003 0100 		a = dir[DIR_Attr] & AM_MASK;
                 _0x60045:
000a4b 01fa      	MOVW R30,R20
000a4c 85e3      	LDD  R30,Z+11
000a4d 73ef      	ANDI R30,LOW(0x3F)
000a4e 2f0e      	MOV  R16,R30
                 ; 0003 0101 		if (c != 0xE5 && c != '.' && !(a & AM_VOL))	/* Is it a valid entry? */
000a4f 3e35      	CPI  R19,229
000a50 f021      	BREQ _0x60047
000a51 323e      	CPI  R19,46
000a52 f011      	BREQ _0x60047
000a53 ff03      	SBRS R16,3
000a54 c001      	RJMP _0x60048
                 _0x60047:
000a55 c001      	RJMP _0x60046
                 _0x60048:
                 ; 0003 0102 			break;
000a56 c006      	RJMP _0x60040
                 ; 0003 0103 		res = dir_next(dj);				/* Next entry */
                 _0x60046:
000a57 81ae      	LDD  R26,Y+6
000a58 81bf      	LDD  R27,Y+6+1
000a59 df0e      	RCALL _dir_next_G003
000a5a 2f1e      	MOV  R17,R30
                 ; 0003 0104 		if (res != FR_OK) break;
000a5b 3010      	CPI  R17,0
000a5c f279      	BREQ _0x6003E
                 ; 0003 0105 	}
                 _0x60040:
                 ; 0003 0106 
                 ; 0003 0107 	if (res != FR_OK) dj->sect = 0;
000a5d 3010      	CPI  R17,0
000a5e f021      	BREQ _0x6004A
000a5f 81ae      	LDD  R26,Y+6
000a60 81bf      	LDD  R27,Y+6+1
000a61 940e 15e7 	CALL SUBOPT_0x40
                 ; 0003 0108 
                 ; 0003 0109 	return res;
                 _0x6004A:
000a63 2fe1      	MOV  R30,R17
000a64 940e 18f6 	CALL __LOADLOCR6
000a66 c147      	RJMP _0x20C000E
                 ; 0003 010A }
                 ; .FEND
                 ;
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Pick a segment and create the object name in directory form           */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;#ifdef _EXCVT
                 ;	static const BYTE cvt[] = _EXCVT;
                 ;#endif
                 ;
                 ;static
                 ;FRESULT create_name (
                 ; 0003 011A 	DIR *dj,			/* Pointer to the directory object */
                 ; 0003 011B 	const char **path	/* Pointer to pointer to the segment in the path string */
                 ; 0003 011C )
                 ; 0003 011D {
                 _create_name_G003:
                 ; .FSTART _create_name_G003
                 ; 0003 011E 	BYTE c, d, ni, si, i, *sfn;
                 ; 0003 011F 	const char *p;
                 ; 0003 0120 
                 ; 0003 0121 	/* Create file name in directory form */
                 ; 0003 0122 	sfn = dj->fn;
000a67 93ba      	ST   -Y,R27
000a68 93aa      	ST   -Y,R26
000a69 9724      	SBIW R28,4
000a6a 940e 18ef 	CALL __SAVELOCR6
                 ;	*dj -> Y+12
                 ;	*path -> Y+10
                 ;	c -> R17
                 ;	d -> R16
                 ;	ni -> R19
                 ;	si -> R18
                 ;	i -> R21
                 ;	*sfn -> Y+8
                 ;	*p -> Y+6
000a6c 85ac      	LDD  R26,Y+12
000a6d 85bd      	LDD  R27,Y+12+1
000a6e 9612      	ADIW R26,2
000a6f 940e 185e 	CALL __GETW1P
000a71 87e8      	STD  Y+8,R30
000a72 87f9      	STD  Y+8+1,R31
                 ; 0003 0123 	mem_set(sfn, ' ', 11);
000a73 93fa      	ST   -Y,R31
000a74 93ea      	ST   -Y,R30
000a75 e2e0      	LDI  R30,LOW(32)
000a76 e0f0      	LDI  R31,HIGH(32)
000a77 93fa      	ST   -Y,R31
000a78 93ea      	ST   -Y,R30
000a79 e0ab      	LDI  R26,LOW(11)
000a7a e0b0      	LDI  R27,0
000a7b dd5b      	RCALL _mem_set_G003
                 ; 0003 0124 	si = i = 0; ni = 8;
000a7c e0e0      	LDI  R30,LOW(0)
000a7d 2f5e      	MOV  R21,R30
000a7e 2f2e      	MOV  R18,R30
000a7f e038      	LDI  R19,LOW(8)
                 ; 0003 0125 	p = *path;
000a80 85aa      	LDD  R26,Y+10
000a81 85bb      	LDD  R27,Y+10+1
000a82 940e 185e 	CALL __GETW1P
000a84 83ee      	STD  Y+6,R30
000a85 83ff      	STD  Y+6+1,R31
                 ; 0003 0126 	for (;;) {
                 _0x6004C:
                 ; 0003 0127 		c = p[si++];
000a86 940e 15ec 	CALL SUBOPT_0x41
000a88 911c      	LD   R17,X
                 ; 0003 0128 		if (c <= ' ' || c == '/') break;	/* Break on end of segment */
000a89 3211      	CPI  R17,33
000a8a f010      	BRLO _0x6004F
000a8b 321f      	CPI  R17,47
000a8c f409      	BRNE _0x6004E
                 _0x6004F:
000a8d c039      	RJMP _0x6004D
                 ; 0003 0129 		if (c == '.' || i >= ni) {
                 _0x6004E:
000a8e 321e      	CPI  R17,46
000a8f f011      	BREQ _0x60052
000a90 1753      	CP   R21,R19
000a91 f040      	BRLO _0x60051
                 _0x60052:
                 ; 0003 012A 			if (ni != 8 || c != '.') break;
000a92 3038      	CPI  R19,8
000a93 f411      	BRNE _0x60055
000a94 321e      	CPI  R17,46
000a95 f009      	BREQ _0x60054
                 _0x60055:
000a96 c030      	RJMP _0x6004D
                 ; 0003 012B 			i = 8; ni = 11;
                 _0x60054:
000a97 e058      	LDI  R21,LOW(8)
000a98 e03b      	LDI  R19,LOW(11)
                 ; 0003 012C 			continue;
000a99 c02c      	RJMP _0x6004B
                 ; 0003 012D 		}
                 ; 0003 012E #ifdef _EXCVT
                 ; 0003 012F 		if (c >= 0x80)					/* To upper extended char (SBCS) */
                 _0x60051:
000a9a 3810      	CPI  R17,128
000a9b f058      	BRLO _0x60057
                 ; 0003 0130 			c = cvt[c - 0x80];
000a9c 2fe1      	MOV  R30,R17
000a9d e0f0      	LDI  R31,0
000a9e 58e0      	SUBI R30,LOW(128)
000a9f 40f0      	SBCI R31,HIGH(128)
000aa0 2766      	CLR  R22
000aa1 2777      	CLR  R23
000aa2 53e0      	SUBI R30,LOW(-_cvt_G003*2)
000aa3 4fff      	SBCI R31,HIGH(-_cvt_G003*2)
000aa4 4f6f      	SBCI R22,BYTE3(-_cvt_G003*2)
                +
000aa5 bf6b     +OUT RAMPZ , R22
000aa6 9116     +ELPM R17 , Z
                 	__GETBRPF 17
                 ; 0003 0131 #endif
                 ; 0003 0132 		if (IsDBCS1(c) && i >= ni - 1) {	/* DBC 1st byte? */
                 _0x60057:
000aa7 e0e0      	LDI  R30,LOW(0)
000aa8 30e0      	CPI  R30,0
000aa9 f041      	BREQ _0x60059
000aaa 2fe3      	MOV  R30,R19
000aab e0f0      	LDI  R31,0
000aac 9731      	SBIW R30,1
000aad 2fa5      	MOV  R26,R21
000aae e0b0      	LDI  R27,0
000aaf 17ae      	CP   R26,R30
000ab0 07bf      	CPC  R27,R31
000ab1 f40c      	BRGE _0x6005A
                 _0x60059:
000ab2 c00a      	RJMP _0x60058
                 _0x6005A:
                 ; 0003 0133 			d = p[si++];					/* Get 2nd byte */
000ab3 940e 15ec 	CALL SUBOPT_0x41
000ab5 910c      	LD   R16,X
                 ; 0003 0134 			sfn[i++] = c;
000ab6 940e 15f4 	CALL SUBOPT_0x42
000ab8 8310      	ST   Z,R17
                 ; 0003 0135 			sfn[i++] = d;
000ab9 940e 15f4 	CALL SUBOPT_0x42
000abb 8300      	ST   Z,R16
                 ; 0003 0136 		} else {						/* Single byte code */
000abc c009      	RJMP _0x6005B
                 _0x60058:
                 ; 0003 0137 			if (IsLower(c)) c -= 0x20;	/* toupper */
000abd 3611      	CPI  R17,97
000abe f010      	BRLO _0x6005D
000abf 371b      	CPI  R17,123
000ac0 f008      	BRLO _0x6005E
                 _0x6005D:
000ac1 c001      	RJMP _0x6005C
                 _0x6005E:
000ac2 5210      	SUBI R17,LOW(32)
                 ; 0003 0138 			sfn[i++] = c;
                 _0x6005C:
000ac3 940e 15f4 	CALL SUBOPT_0x42
000ac5 8310      	ST   Z,R17
                 ; 0003 0139 		}
                 _0x6005B:
                 ; 0003 013A 	}
                 _0x6004B:
000ac6 cfbf      	RJMP _0x6004C
                 _0x6004D:
                 ; 0003 013B 	*path = &p[si];						/* Rerurn pointer to the next segment */
000ac7 2fe2      	MOV  R30,R18
000ac8 81ae      	LDD  R26,Y+6
000ac9 81bf      	LDD  R27,Y+6+1
000aca e0f0      	LDI  R31,0
000acb 0fea      	ADD  R30,R26
000acc 1ffb      	ADC  R31,R27
000acd 85aa      	LDD  R26,Y+10
000ace 85bb      	LDD  R27,Y+10+1
000acf 93ed      	ST   X+,R30
000ad0 93fc      	ST   X,R31
                 ; 0003 013C 
                 ; 0003 013D 	sfn[11] = (c <= ' ') ? 1 : 0;		/* Set last segment flag if end of path */
000ad1 3211      	CPI  R17,33
000ad2 f410      	BRSH _0x6005F
000ad3 e0e1      	LDI  R30,LOW(1)
000ad4 c001      	RJMP _0x60060
                 _0x6005F:
000ad5 e0e0      	LDI  R30,LOW(0)
                 _0x60060:
                +
000ad6 85a8     +LDD R26 , Y + 8
000ad7 85b9     +LDD R27 , Y + 8 + 1
000ad8 961b     +ADIW R26 , 11
000ad9 93ec     +ST X , R30
                 	__PUTB1SNS 8,11
                 ; 0003 013E 
                 ; 0003 013F 	return FR_OK;
000ada e0e0      	LDI  R30,LOW(0)
000adb 940e 18f6 	CALL __LOADLOCR6
                 _0x20C0011:
000add 962e      	ADIW R28,14
000ade 9508      	RET
                 ; 0003 0140 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get file information from directory entry                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_DIR
                 ;static
                 ;void get_fileinfo (		/* No return code */
                 ; 0003 014B 	DIR *dj,			/* Pointer to the directory object */
                 ; 0003 014C 	FILINFO *fno	 	/* Pointer to store the file information */
                 ; 0003 014D )
                 ; 0003 014E {
                 _get_fileinfo_G003:
                 ; .FSTART _get_fileinfo_G003
                 ; 0003 014F 	BYTE i, c, *dir;
                 ; 0003 0150 	char *p;
                 ; 0003 0151 
                 ; 0003 0152 
                 ; 0003 0153 	p = fno->fname;
000adf 940e 1552 	CALL SUBOPT_0x28
                 ;	*dj -> Y+8
                 ;	*fno -> Y+6
                 ;	i -> R17
                 ;	c -> R16
                 ;	*dir -> R18,R19
                 ;	*p -> R20,R21
000ae1 81ee      	LDD  R30,Y+6
000ae2 81ff      	LDD  R31,Y+6+1
000ae3 9639      	ADIW R30,9
000ae4 01af      	MOVW R20,R30
                 ; 0003 0154 	if (dj->sect) {
000ae5 940e 15c2 	CALL SUBOPT_0x3B
000ae7 f409      	BRNE PC+2
000ae8 c050      	RJMP _0x60062
                 ; 0003 0155 		dir = FatFs->buf;
000ae9 940e 15cf 	CALL SUBOPT_0x3D
000aeb 912d      	LD   R18,X+
000aec 913c      	LD   R19,X
                 ; 0003 0156 		for (i = 0; i < 8; i++) {	/* Copy file name body */
000aed e010      	LDI  R17,LOW(0)
                 _0x60064:
000aee 3018      	CPI  R17,8
000aef f480      	BRSH _0x60065
                 ; 0003 0157 			c = dir[i];
000af0 940e 15fc 	CALL SUBOPT_0x43
                 ; 0003 0158 			if (c == ' ') break;
000af2 f069      	BREQ _0x60065
                 ; 0003 0159 			if (c == 0x05) c = 0xE5;
000af3 3005      	CPI  R16,5
000af4 f409      	BRNE _0x60067
000af5 ee05      	LDI  R16,LOW(229)
                 ; 0003 015A 			*p++ = c;
                 _0x60067:
000af6 935f      	PUSH R21
000af7 934f      	PUSH R20
                +
000af8 5f4f     +SUBI R20 , LOW ( - 1 )
000af9 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000afa 2fe0      	MOV  R30,R16
000afb 91af      	POP  R26
000afc 91bf      	POP  R27
000afd 93ec      	ST   X,R30
                 ; 0003 015B 		}
000afe 5f1f      	SUBI R17,-1
000aff cfee      	RJMP _0x60064
                 _0x60065:
                 ; 0003 015C 		if (dir[8] != ' ') {		/* Copy file name extension */
000b00 01f9      	MOVW R30,R18
000b01 85a0      	LDD  R26,Z+8
000b02 32a0      	CPI  R26,LOW(0x20)
000b03 f0a9      	BREQ _0x60068
                 ; 0003 015D 			*p++ = '.';
000b04 01da      	MOVW R26,R20
                +
000b05 5f4f     +SUBI R20 , LOW ( - 1 )
000b06 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000b07 e2ee      	LDI  R30,LOW(46)
000b08 93ec      	ST   X,R30
                 ; 0003 015E 			for (i = 8; i < 11; i++) {
000b09 e018      	LDI  R17,LOW(8)
                 _0x6006A:
000b0a 301b      	CPI  R17,11
000b0b f468      	BRSH _0x6006B
                 ; 0003 015F 				c = dir[i];
000b0c 940e 15fc 	CALL SUBOPT_0x43
                 ; 0003 0160 				if (c == ' ') break;
000b0e f051      	BREQ _0x6006B
                 ; 0003 0161 				*p++ = c;
000b0f 935f      	PUSH R21
000b10 934f      	PUSH R20
                +
000b11 5f4f     +SUBI R20 , LOW ( - 1 )
000b12 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000b13 2fe0      	MOV  R30,R16
000b14 91af      	POP  R26
000b15 91bf      	POP  R27
000b16 93ec      	ST   X,R30
                 ; 0003 0162 			}
000b17 5f1f      	SUBI R17,-1
000b18 cff1      	RJMP _0x6006A
                 _0x6006B:
                 ; 0003 0163 		}
                 ; 0003 0164 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
                 _0x60068:
000b19 01f9      	MOVW R30,R18
000b1a 85e3      	LDD  R30,Z+11
                +
000b1b 81ae     +LDD R26 , Y + 6
000b1c 81bf     +LDD R27 , Y + 6 + 1
000b1d 9618     +ADIW R26 , 8
000b1e 93ec     +ST X , R30
                 	__PUTB1SNS 6,8
                 ; 0003 0165 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
000b1f 01d9      	MOVW R26,R18
000b20 965c      	ADIW R26,28
000b21 940e 1862 	CALL __GETD1P
000b23 81ae      	LDD  R26,Y+6
000b24 81bf      	LDD  R27,Y+6+1
000b25 940e 186d 	CALL __PUTDP1
                 ; 0003 0166 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
000b27 01d9      	MOVW R26,R18
000b28 9658      	ADIW R26,24
000b29 940e 185e 	CALL __GETW1P
                +
000b2b 81ae     +LDD R26 , Y + 6
000b2c 81bf     +LDD R27 , Y + 6 + 1
000b2d 9614     +ADIW R26 , 4
000b2e 93ed     +ST X + , R30
000b2f 93fc     +ST X , R31
                 	__PUTW1SNS 6,4
                 ; 0003 0167 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
000b30 01d9      	MOVW R26,R18
000b31 9656      	ADIW R26,22
000b32 940e 185e 	CALL __GETW1P
                +
000b34 81ae     +LDD R26 , Y + 6
000b35 81bf     +LDD R27 , Y + 6 + 1
000b36 9616     +ADIW R26 , 6
000b37 93ed     +ST X + , R30
000b38 93fc     +ST X , R31
                 	__PUTW1SNS 6,6
                 ; 0003 0168 	}
                 ; 0003 0169 	*p = 0;
                 _0x60062:
000b39 01da      	MOVW R26,R20
000b3a e0e0      	LDI  R30,LOW(0)
000b3b 93ec      	ST   X,R30
                 ; 0003 016A }
                 _0x20C0010:
000b3c 940e 18f6 	CALL __LOADLOCR6
                 _0x20C000F:
000b3e 962a      	ADIW R28,10
000b3f 9508      	RET
                 ; .FEND
                 ;
                 ;
                 ;#endif /* _USE_DIR */
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Follow a file path                                                    */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
                 ; 0003 0177 	DIR *dj,			/* Directory object to return last directory and found object */
                 ; 0003 0178 	const char *path	/* Full-path string to find a file or directory */
                 ; 0003 0179 )
                 ; 0003 017A {
                 _follow_path_G003:
                 ; .FSTART _follow_path_G003
                 ; 0003 017B 	FRESULT res;
                 ; 0003 017C 	BYTE *dir;
                 ; 0003 017D 
                 ; 0003 017E 
                 ; 0003 017F 	while (*path == ' ') path++;		/* Skip leading spaces */
000b40 940e 1544 	CALL SUBOPT_0x25
                 ;	*dj -> Y+6
                 ;	*path -> Y+4
                 ;	res -> R17
                 ;	*dir -> R18,R19
                 _0x6006D:
000b42 81ac      	LDD  R26,Y+4
000b43 81bd      	LDD  R27,Y+4+1
000b44 91ac      	LD   R26,X
000b45 32a0      	CPI  R26,LOW(0x20)
000b46 f431      	BRNE _0x6006F
000b47 81ec      	LDD  R30,Y+4
000b48 81fd      	LDD  R31,Y+4+1
000b49 9631      	ADIW R30,1
000b4a 83ec      	STD  Y+4,R30
000b4b 83fd      	STD  Y+4+1,R31
000b4c cff5      	RJMP _0x6006D
                 _0x6006F:
                 ; 0003 0180 if (*path == '/') path++;
000b4d 81ac      	LDD  R26,Y+4
000b4e 81bd      	LDD  R27,Y+4+1
000b4f 91ac      	LD   R26,X
000b50 32af      	CPI  R26,LOW(0x2F)
000b51 f429      	BRNE _0x60070
000b52 81ec      	LDD  R30,Y+4
000b53 81fd      	LDD  R31,Y+4+1
000b54 9631      	ADIW R30,1
000b55 83ec      	STD  Y+4,R30
000b56 83fd      	STD  Y+4+1,R31
                 ; 0003 0181 	dj->sclust = 0;						/* Set start directory (always root dir) */
                 _0x60070:
000b57 81ae      	LDD  R26,Y+6
000b58 81bf      	LDD  R27,Y+6+1
000b59 9614      	ADIW R26,4
000b5a 940e 1603 	CALL SUBOPT_0x44
                 ; 0003 0182 
                 ; 0003 0183 	if ((BYTE)*path <= ' ') {			/* Null path means the root directory */
000b5c 81ac      	LDD  R26,Y+4
000b5d 81bd      	LDD  R27,Y+4+1
000b5e 91ac      	LD   R26,X
000b5f 32a1      	CPI  R26,LOW(0x21)
000b60 f458      	BRSH _0x60071
                 ; 0003 0184 		res = dir_rewind(dj);
000b61 81ae      	LDD  R26,Y+6
000b62 81bf      	LDD  R27,Y+6+1
000b63 ddb4      	RCALL _dir_rewind_G003
000b64 2f1e      	MOV  R17,R30
                 ; 0003 0185 		FatFs->buf[0] = 0;
000b65 940e 1557 	CALL SUBOPT_0x29
000b67 81a6      	LDD  R26,Z+6
000b68 81b7      	LDD  R27,Z+7
000b69 e0e0      	LDI  R30,LOW(0)
000b6a 93ec      	ST   X,R30
                 ; 0003 0186 
                 ; 0003 0187 	} else {							/* Follow path */
000b6b c03f      	RJMP _0x60072
                 _0x60071:
                 ; 0003 0188 		for (;;) {
                 _0x60074:
                 ; 0003 0189 			res = create_name(dj, &path);	/* Get a segment */
000b6c 81ee      	LDD  R30,Y+6
000b6d 81ff      	LDD  R31,Y+6+1
000b6e 93fa      	ST   -Y,R31
000b6f 93ea      	ST   -Y,R30
000b70 01de      	MOVW R26,R28
000b71 9616      	ADIW R26,6
000b72 def4      	RCALL _create_name_G003
000b73 2f1e      	MOV  R17,R30
                 ; 0003 018A 			if (res != FR_OK) break;
000b74 3010      	CPI  R17,0
000b75 f5a9      	BRNE _0x60075
                 ; 0003 018B 			res = dir_find(dj);				/* Find it */
000b76 81ae      	LDD  R26,Y+6
000b77 81bf      	LDD  R27,Y+6+1
000b78 de69      	RCALL _dir_find_G003
000b79 2f1e      	MOV  R17,R30
                 ; 0003 018C 			if (res != FR_OK) {				/* Could not find the object */
000b7a 3010      	CPI  R17,0
000b7b f041      	BREQ _0x60077
                 ; 0003 018D 				if (res == FR_NO_FILE && !*(dj->fn+11))
000b7c 3013      	CPI  R17,3
000b7d f419      	BRNE _0x60079
000b7e 940e 1607 	CALL SUBOPT_0x45
000b80 f009      	BREQ _0x6007A
                 _0x60079:
000b81 c001      	RJMP _0x60078
                 _0x6007A:
                 ; 0003 018E 					res = FR_NO_PATH;
000b82 e014      	LDI  R17,LOW(4)
                 ; 0003 018F 				break;
                 _0x60078:
000b83 c027      	RJMP _0x60075
                 ; 0003 0190 			}
                 ; 0003 0191 			if (*(dj->fn+11)) break;		/* Last segment match. Function completed. */
                 _0x60077:
000b84 940e 1607 	CALL SUBOPT_0x45
000b86 f521      	BRNE _0x60075
                 ; 0003 0192 			dir = FatFs->buf;				/* There is next segment. Follow the sub directory */
000b87 940e 15cf 	CALL SUBOPT_0x3D
000b89 912d      	LD   R18,X+
000b8a 913c      	LD   R19,X
                 ; 0003 0193 			if (!(dir[DIR_Attr] & AM_DIR)) { /* Cannot follow because it is a file */
000b8b 01f9      	MOVW R30,R18
000b8c 85e3      	LDD  R30,Z+11
000b8d 71e0      	ANDI R30,LOW(0x10)
000b8e f411      	BRNE _0x6007C
                 ; 0003 0194 				res = FR_NO_PATH; break;
000b8f e014      	LDI  R17,LOW(4)
000b90 c01a      	RJMP _0x60075
                 ; 0003 0195 			}
                 ; 0003 0196 			dj->sclust =
                 _0x6007C:
                 ; 0003 0197 #if _FS_FAT32
                 ; 0003 0198 				((DWORD)LD_WORD(dir+DIR_FstClusHI) << 16) |
                 ; 0003 0199 #endif
                 ; 0003 019A 				LD_WORD(dir+DIR_FstClusLO);
000b91 01d9      	MOVW R26,R18
000b92 9654      	ADIW R26,20
000b93 940e 160f 	CALL SUBOPT_0x46
000b95 940e 17f3 	CALL __LSLD16
000b97 937f      	PUSH R23
000b98 936f      	PUSH R22
000b99 93ff      	PUSH R31
000b9a 93ef      	PUSH R30
000b9b 01d9      	MOVW R26,R18
000b9c 965a      	ADIW R26,26
000b9d 940e 185e 	CALL __GETW1P
000b9f 91af      	POP  R26
000ba0 91bf      	POP  R27
000ba1 918f      	POP  R24
000ba2 919f      	POP  R25
000ba3 940e 1614 	CALL SUBOPT_0x47
                +
000ba5 81ae     +LDD R26 , Y + 6
000ba6 81bf     +LDD R27 , Y + 6 + 1
000ba7 9614     +ADIW R26 , 4
000ba8 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 6,4
                 ; 0003 019B 		}
000baa cfc1      	RJMP _0x60074
                 _0x60075:
                 ; 0003 019C 	}
                 _0x60072:
                 ; 0003 019D 
                 ; 0003 019E 	return res;
000bab 2fe1      	MOV  R30,R17
000bac 940e 18f8 	CALL __LOADLOCR4
                 _0x20C000E:
000bae 9628      	ADIW R28,8
000baf 9508      	RET
                 ; 0003 019F }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Check a sector if it is an FAT boot record                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;BYTE check_fs (	/* 0:The FAT boot record, 1:Valid boot record but not an FAT, 2:Not a boot record, 3:Error */
                 ; 0003 01AA 	BYTE *buf,	/* Working buffer */
                 ; 0003 01AB 	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
                 ; 0003 01AC )
                 ; 0003 01AD {
                 _check_fs_G003:
                 ; .FSTART _check_fs_G003
                 ; 0003 01AE     if (disk_readp(buf, sect, 510, 2))		/* Read the boot sector */
000bb0 940e 1898 	CALL __PUTPARD2
                 ;	*buf -> Y+4
                 ;	sect -> Y+0
000bb2 940e 1619 	CALL SUBOPT_0x48
000bb4 efee      	LDI  R30,LOW(510)
000bb5 e0f1      	LDI  R31,HIGH(510)
000bb6 940e 159a 	CALL SUBOPT_0x33
000bb8 f011      	BREQ _0x6007D
                 ; 0003 01AF 		return 3;
000bb9 e0e3      	LDI  R30,LOW(3)
000bba c029      	RJMP _0x20C000D
                 ; 0003 01B0 	if (LD_WORD(buf) != 0xAA55)				/* Check record signature */
                 _0x6007D:
000bbb 940e 1621 	CALL SUBOPT_0x49
000bbd 35e5      	CPI  R30,LOW(0xAA55)
000bbe eaaa      	LDI  R26,HIGH(0xAA55)
000bbf 07fa      	CPC  R31,R26
000bc0 f011      	BREQ _0x6007E
                 ; 0003 01B1 		return 2;
000bc1 e0e2      	LDI  R30,LOW(2)
000bc2 c021      	RJMP _0x20C000D
                 ; 0003 01B2 
                 ; 0003 01B3 	if (!disk_readp(buf, sect, BS_FilSysType, 2) && LD_WORD(buf) == 0x4146)	/* Check FAT12/16 */
                 _0x6007E:
000bc3 940e 1619 	CALL SUBOPT_0x48
000bc5 e3e6      	LDI  R30,LOW(54)
000bc6 e0f0      	LDI  R31,HIGH(54)
000bc7 940e 159a 	CALL SUBOPT_0x33
000bc9 f431      	BRNE _0x60080
000bca 940e 1621 	CALL SUBOPT_0x49
000bcc 34e6      	CPI  R30,LOW(0x4146)
000bcd e4a1      	LDI  R26,HIGH(0x4146)
000bce 07fa      	CPC  R31,R26
000bcf f009      	BREQ _0x60081
                 _0x60080:
000bd0 c002      	RJMP _0x6007F
                 _0x60081:
                 ; 0003 01B4 		return 0;
000bd1 e0e0      	LDI  R30,LOW(0)
000bd2 c011      	RJMP _0x20C000D
                 ; 0003 01B5 #if _FS_FAT32
                 ; 0003 01B6 	if (!disk_readp(buf, sect, BS_FilSysType32, 2) && LD_WORD(buf) == 0x4146)	/* Check FAT32 */
                 _0x6007F:
000bd3 940e 1619 	CALL SUBOPT_0x48
000bd5 e5e2      	LDI  R30,LOW(82)
000bd6 e0f0      	LDI  R31,HIGH(82)
000bd7 940e 159a 	CALL SUBOPT_0x33
000bd9 f431      	BRNE _0x60083
000bda 940e 1621 	CALL SUBOPT_0x49
000bdc 34e6      	CPI  R30,LOW(0x4146)
000bdd e4a1      	LDI  R26,HIGH(0x4146)
000bde 07fa      	CPC  R31,R26
000bdf f009      	BREQ _0x60084
                 _0x60083:
000be0 c002      	RJMP _0x60082
                 _0x60084:
                 ; 0003 01B7 		return 0;
000be1 e0e0      	LDI  R30,LOW(0)
000be2 c001      	RJMP _0x20C000D
                 ; 0003 01B8 #endif
                 ; 0003 01B9 	return 1;
                 _0x60082:
000be3 e0e1      	LDI  R30,LOW(1)
                 _0x20C000D:
000be4 9626      	ADIW R28,6
000be5 9508      	RET
                 ; 0003 01BA }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Public Functions
                 ;
                 ;--------------------------------------------------------------------------*/
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Mount/Unmount a Locical Drive                                         */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT pf_mount (
                 ; 0003 01CC 	FATFS *fs		/* Pointer to new file system object (NULL: Unmount) */
                 ; 0003 01CD )
                 ; 0003 01CE {
                 _pf_mount:
                 ; .FSTART _pf_mount
                 ; 0003 01CF 	BYTE fmt, buf[36];
                 ; 0003 01D0 	DWORD bsect, fsize, tsect, mclst;
                 ; 0003 01D1 
                 ; 0003 01D2 
                 ; 0003 01D3 	FatFs = 0;
000be6 93ba      	ST   -Y,R27
000be7 93aa      	ST   -Y,R26
000be8 97e4      	SBIW R28,52
000be9 931a      	ST   -Y,R17
                 ;	*fs -> Y+53
                 ;	fmt -> R17
                 ;	buf -> Y+17
                 ;	bsect -> Y+13
                 ;	fsize -> Y+9
                 ;	tsect -> Y+5
                 ;	mclst -> Y+1
000bea e0e0      	LDI  R30,LOW(0)
000beb 93e0 0b11 	STS  _FatFs_G003,R30
000bed 93e0 0b12 	STS  _FatFs_G003+1,R30
                 ; 0003 01D4 	if (!fs) return FR_OK;				/* Unregister fs object */
000bef a9ed      	LDD  R30,Y+53
000bf0 a9fe      	LDD  R31,Y+53+1
000bf1 9730      	SBIW R30,0
000bf2 f409      	BRNE _0x60085
000bf3 c111      	RJMP _0x20C000C
                 ; 0003 01D5 
                 ; 0003 01D6 
                 ; 0003 01D7 	if (disk_initialize() & STA_NOINIT)	/* Check if the drive is ready or not */
                 _0x60085:
000bf4 da74      	RCALL _disk_initialize
000bf5 70e1      	ANDI R30,LOW(0x1)
000bf6 f011      	BREQ _0x60086
                 ; 0003 01D8 		return FR_NOT_READY;
000bf7 e0e2      	LDI  R30,LOW(2)
000bf8 c10d      	RJMP _0x20C000B
                 ; 0003 01D9 
                 ; 0003 01DA 	/* Search FAT partition on the drive */
                 ; 0003 01DB 	bsect = 0;
                 _0x60086:
000bf9 e0e0      	LDI  R30,LOW(0)
                +
000bfa 87ed     +STD Y + 13 , R30
000bfb 87ee     +STD Y + 13 + 1 , R30
000bfc 87ef     +STD Y + 13 + 2 , R30
000bfd 8be8     +STD Y + 13 + 3 , R30
                 	__CLRD1S 13
                 ; 0003 01DC 	fmt = check_fs(buf, bsect);			/* Check sector 0 as an SFD format */
000bfe 940e 1626 	CALL SUBOPT_0x4A
000c00 940e 162b 	CALL SUBOPT_0x4B
                 ; 0003 01DD 	if (fmt == 1) {						/* Not an FAT boot record, it may be FDISK format */
000c02 3011      	CPI  R17,1
000c03 f4e9      	BRNE _0x60087
                 ; 0003 01DE 		/* Check a partition listed in top of the partition table */
                 ; 0003 01DF 		if (disk_readp(buf, bsect, MBR_Table, 16)) {	/* 1st partition entry */
000c04 940e 1626 	CALL SUBOPT_0x4A
000c06 940e 1633 	CALL SUBOPT_0x4C
000c08 ebee      	LDI  R30,LOW(446)
000c09 e0f1      	LDI  R31,HIGH(446)
000c0a 93fa      	ST   -Y,R31
000c0b 93ea      	ST   -Y,R30
000c0c e1a0      	LDI  R26,LOW(16)
000c0d 940e 157b 	CALL SUBOPT_0x2E
000c0f f011      	BREQ _0x60088
                 ; 0003 01E0 			fmt = 3;
000c10 e013      	LDI  R17,LOW(3)
                 ; 0003 01E1 		} else {
000c11 c00f      	RJMP _0x60089
                 _0x60088:
                 ; 0003 01E2 			if (buf[4]) {					/* Is the partition existing? */
000c12 89ed      	LDD  R30,Y+21
000c13 30e0      	CPI  R30,0
000c14 f061      	BREQ _0x6008A
                 ; 0003 01E3 				bsect = LD_DWORD(&buf[8]);	/* Partition offset in LBA */
                +
000c15 8de9     +LDD R30 , Y + 25
000c16 8dfa     +LDD R31 , Y + 25 + 1
000c17 8d6b     +LDD R22 , Y + 25 + 2
000c18 8d7c     +LDD R23 , Y + 25 + 3
                 	__GETD1S 25
                +
000c19 87ed     +STD Y + 13 , R30
000c1a 87fe     +STD Y + 13 + 1 , R31
000c1b 876f     +STD Y + 13 + 2 , R22
000c1c 8b78     +STD Y + 13 + 3 , R23
                 	__PUTD1S 13
                 ; 0003 01E4 				fmt = check_fs(buf, bsect);	/* Check the partition */
000c1d 940e 1626 	CALL SUBOPT_0x4A
000c1f 940e 162b 	CALL SUBOPT_0x4B
                 ; 0003 01E5 			}
                 ; 0003 01E6 		}
                 _0x6008A:
                 _0x60089:
                 ; 0003 01E7 	}
                 ; 0003 01E8 	if (fmt == 3) return FR_DISK_ERR;
                 _0x60087:
000c21 3013      	CPI  R17,3
000c22 f411      	BRNE _0x6008B
000c23 e0e1      	LDI  R30,LOW(1)
000c24 c0e1      	RJMP _0x20C000B
                 ; 0003 01E9 	if (fmt) return FR_NO_FILESYSTEM;	/* No valid FAT patition is found */
                 _0x6008B:
000c25 3010      	CPI  R17,0
000c26 f011      	BREQ _0x6008C
000c27 e0e7      	LDI  R30,LOW(7)
000c28 c0dd      	RJMP _0x20C000B
                 ; 0003 01EA 
                 ; 0003 01EB 	/* Initialize the file system object */
                 ; 0003 01EC 	if (disk_readp(buf, bsect, 13, sizeof(buf))) return FR_DISK_ERR;
                 _0x6008C:
000c29 940e 1626 	CALL SUBOPT_0x4A
000c2b 940e 1633 	CALL SUBOPT_0x4C
000c2d e0ed      	LDI  R30,LOW(13)
000c2e e0f0      	LDI  R31,HIGH(13)
000c2f 93fa      	ST   -Y,R31
000c30 93ea      	ST   -Y,R30
000c31 e2a4      	LDI  R26,LOW(36)
000c32 940e 157b 	CALL SUBOPT_0x2E
000c34 f011      	BREQ _0x6008D
000c35 e0e1      	LDI  R30,LOW(1)
000c36 c0cf      	RJMP _0x20C000B
                 ; 0003 01ED 
                 ; 0003 01EE 	fsize = LD_WORD(buf+BPB_FATSz16-13);				/* Number of sectors per FAT */
                 _0x6008D:
000c37 01fe      	MOVW R30,R28
000c38 96b7      	ADIW R30,39
000c39 973d      	SBIW R30,13
000c3a 01df      	MOVW R26,R30
000c3b 940e 160f 	CALL SUBOPT_0x46
000c3d 940e 163a 	CALL SUBOPT_0x4D
                 ; 0003 01EF 	if (!fsize) fsize = LD_DWORD(buf+BPB_FATSz32-13);
000c3f 940e 163f 	CALL SUBOPT_0x4E
000c41 940e 18d7 	CALL __CPD10
000c43 f441      	BRNE _0x6008E
000c44 01fe      	MOVW R30,R28
000c45 96f5      	ADIW R30,53
000c46 973d      	SBIW R30,13
000c47 01df      	MOVW R26,R30
000c48 940e 1862 	CALL __GETD1P
000c4a 940e 163a 	CALL SUBOPT_0x4D
                 ; 0003 01F0 
                 ; 0003 01F1 	fsize *= buf[BPB_NumFATs-13];						/* Number of sectors in FAT area */
                 _0x6008E:
000c4c 89ec      	LDD  R30,Y+20
000c4d e0f0      	LDI  R31,0
000c4e 940e 154d 	CALL SUBOPT_0x27
000c50 940e 17f8 	CALL __CWD1
000c52 940e 1802 	CALL __MULD12U
000c54 940e 163a 	CALL SUBOPT_0x4D
                 ; 0003 01F2 	fs->fatbase = bsect + LD_WORD(buf+BPB_RsvdSecCnt-13); /* FAT start sector (lba) */
000c56 940e 1644 	CALL SUBOPT_0x4F
                +
000c58 85ad     +LDD R26 , Y + 13
000c59 85be     +LDD R27 , Y + 13 + 1
000c5a 858f     +LDD R24 , Y + 13 + 2
000c5b 8998     +LDD R25 , Y + 13 + 3
                 	__GETD2S 13
000c5c 940e 1508 	CALL SUBOPT_0x1B
                +
000c5e a9ad     +LDD R26 , Y + 53
000c5f a9be     +LDD R27 , Y + 53 + 1
000c60 961c     +ADIW R26 , 12
000c61 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 53,12
                 ; 0003 01F3 	fs->csize = buf[BPB_SecPerClus-13];					/* Number of sectors per cluster */
000c63 89e9      	LDD  R30,Y+17
                +
000c64 a9ad     +LDD R26 , Y + 53
000c65 a9be     +LDD R27 , Y + 53 + 1
000c66 9611     +ADIW R26 , 1
000c67 93ec     +ST X , R30
                 	__PUTB1SNS 53,1
                 ; 0003 01F4 	fs->n_rootdir = LD_WORD(buf+BPB_RootEntCnt-13);		/* Nmuber of root directory entries */
000c68 01fe      	MOVW R30,R28
000c69 96b2      	ADIW R30,34
000c6a 973d      	SBIW R30,13
000c6b 01df      	MOVW R26,R30
000c6c 940e 185e 	CALL __GETW1P
                +
000c6e a9ad     +LDD R26 , Y + 53
000c6f a9be     +LDD R27 , Y + 53 + 1
000c70 9614     +ADIW R26 , 4
000c71 93ed     +ST X + , R30
000c72 93fc     +ST X , R31
                 	__PUTW1SNS 53,4
                 ; 0003 01F5 	tsect = LD_WORD(buf+BPB_TotSec16-13);				/* Number of sectors on the file system */
000c73 01fe      	MOVW R30,R28
000c74 96b4      	ADIW R30,36
000c75 973d      	SBIW R30,13
000c76 01df      	MOVW R26,R30
000c77 940e 160f 	CALL SUBOPT_0x46
                +
000c79 83ed     +STD Y + 5 , R30
000c7a 83fe     +STD Y + 5 + 1 , R31
000c7b 836f     +STD Y + 5 + 2 , R22
000c7c 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
                 ; 0003 01F6 	if (!tsect) tsect = LD_DWORD(buf+BPB_TotSec32-13);
000c7d 940e 18d7 	CALL __CPD10
000c7f f451      	BRNE _0x6008F
000c80 01fe      	MOVW R30,R28
000c81 96f1      	ADIW R30,49
000c82 973d      	SBIW R30,13
000c83 01df      	MOVW R26,R30
000c84 940e 1862 	CALL __GETD1P
                +
000c86 83ed     +STD Y + 5 , R30
000c87 83fe     +STD Y + 5 + 1 , R31
000c88 836f     +STD Y + 5 + 2 , R22
000c89 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
                 ; 0003 01F7 	mclst = (tsect						/* Last cluster# + 1 */
                 _0x6008F:
                 ; 0003 01F8 		- LD_WORD(buf+BPB_RsvdSecCnt-13) - fsize - fs->n_rootdir / 16
                 ; 0003 01F9 		) / fs->csize + 2;
000c8a 940e 1644 	CALL SUBOPT_0x4F
                +
000c8c 81ad     +LDD R26 , Y + 5
000c8d 81be     +LDD R27 , Y + 5 + 1
000c8e 818f     +LDD R24 , Y + 5 + 2
000c8f 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
000c90 2766      	CLR  R22
000c91 2777      	CLR  R23
000c92 940e 189d 	CALL __SWAPD12
000c94 940e 17b3 	CALL __SUBD12
000c96 940e 154d 	CALL SUBOPT_0x27
000c98 940e 17b3 	CALL __SUBD12
000c9a 937f      	PUSH R23
000c9b 936f      	PUSH R22
000c9c 93ff      	PUSH R31
000c9d 93ef      	PUSH R30
000c9e 940e 164b 	CALL SUBOPT_0x50
000ca0 91af      	POP  R26
000ca1 91bf      	POP  R27
000ca2 918f      	POP  R24
000ca3 919f      	POP  R25
000ca4 2766      	CLR  R22
000ca5 2777      	CLR  R23
000ca6 940e 17b8 	CALL __SUBD21
000ca8 a9ed      	LDD  R30,Y+53
000ca9 a9fe      	LDD  R31,Y+53+1
000caa 940e 1653 	CALL SUBOPT_0x51
000cac 940e 1835 	CALL __DIVD21U
                +
000cae 5fee     +SUBI R30 , LOW ( - 2 )
000caf 4fff     +SBCI R31 , HIGH ( - 2 )
000cb0 4f6f     +SBCI R22 , BYTE3 ( - 2 )
000cb1 4f7f     +SBCI R23 , BYTE4 ( - 2 )
                 	__ADDD1N 2
                +
000cb2 83e9     +STD Y + 1 , R30
000cb3 83fa     +STD Y + 1 + 1 , R31
000cb4 836b     +STD Y + 1 + 2 , R22
000cb5 837c     +STD Y + 1 + 3 , R23
                 	__PUTD1S 1
                 ; 0003 01FA 	fs->max_clust = (CLUST)mclst;
                +
000cb6 a9ad     +LDD R26 , Y + 53
000cb7 a9be     +LDD R27 , Y + 53 + 1
000cb8 9618     +ADIW R26 , 8
000cb9 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 53,8
                 ; 0003 01FB 
                 ; 0003 01FC 	fmt = FS_FAT12;							/* Determine the FAT sub type */
000cbb e011      	LDI  R17,LOW(1)
                 ; 0003 01FD 	if (mclst >= 0xFF7) fmt = FS_FAT16;		/* Number of clusters >= 0xFF5 */
                +
000cbc 81a9     +LDD R26 , Y + 1
000cbd 81ba     +LDD R27 , Y + 1 + 1
000cbe 818b     +LDD R24 , Y + 1 + 2
000cbf 819c     +LDD R25 , Y + 1 + 3
                 	__GETD2S 1
                +
000cc0 3fa7     +CPI R26 , LOW ( 0xFF7 )
000cc1 e0ef     +LDI R30 , HIGH ( 0xFF7 )
000cc2 07be     +CPC R27 , R30
000cc3 e0e0     +LDI R30 , BYTE3 ( 0xFF7 )
000cc4 078e     +CPC R24 , R30
000cc5 e0e0     +LDI R30 , BYTE4 ( 0xFF7 )
000cc6 079e     +CPC R25 , R30
                 	__CPD2N 0xFF7
000cc7 f008      	BRLO _0x60090
000cc8 e012      	LDI  R17,LOW(2)
                 ; 0003 01FE 	if (mclst >= 0xFFF7)					/* Number of clusters >= 0xFFF5 */
                 _0x60090:
                +
000cc9 81a9     +LDD R26 , Y + 1
000cca 81ba     +LDD R27 , Y + 1 + 1
000ccb 818b     +LDD R24 , Y + 1 + 2
000ccc 819c     +LDD R25 , Y + 1 + 3
                 	__GETD2S 1
                +
000ccd 3fa7     +CPI R26 , LOW ( 0xFFF7 )
000cce efef     +LDI R30 , HIGH ( 0xFFF7 )
000ccf 07be     +CPC R27 , R30
000cd0 e0e0     +LDI R30 , BYTE3 ( 0xFFF7 )
000cd1 078e     +CPC R24 , R30
000cd2 e0e0     +LDI R30 , BYTE4 ( 0xFFF7 )
000cd3 079e     +CPC R25 , R30
                 	__CPD2N 0xFFF7
000cd4 f008      	BRLO _0x60091
                 ; 0003 01FF #if _FS_FAT32
                 ; 0003 0200 		fmt = FS_FAT32;
000cd5 e013      	LDI  R17,LOW(3)
                 ; 0003 0201 #else
                 ; 0003 0202 		return FR_NO_FILESYSTEM;
                 ; 0003 0203 #endif
                 ; 0003 0204 
                 ; 0003 0205 	fs->fs_type = fmt;		/* FAT sub-type */
                 _0x60091:
000cd6 a9ad      	LDD  R26,Y+53
000cd7 a9be      	LDD  R27,Y+53+1
000cd8 931c      	ST   X,R17
                 ; 0003 0206 #if _FS_FAT32
                 ; 0003 0207 	if (fmt == FS_FAT32)
000cd9 3013      	CPI  R17,3
000cda f429      	BRNE _0x60092
                 ; 0003 0208 		fs->dirbase = LD_DWORD(buf+(BPB_RootClus-13));	/* Root directory start cluster */
                +
000cdb a9e8     +LDD R30 , Y + 48
000cdc a9f9     +LDD R31 , Y + 48 + 1
000cdd a96a     +LDD R22 , Y + 48 + 2
000cde a97b     +LDD R23 , Y + 48 + 3
                 	__GETD1S 48
000cdf c002      	RJMP _0x60115
                 ; 0003 0209 	else
                 _0x60092:
                 ; 0003 020A #endif
                 ; 0003 020B 		fs->dirbase = fs->fatbase + fsize;				/* Root directory start sector (lba) */
000ce0 940e 1658 	CALL SUBOPT_0x52
                 _0x60115:
                +
000ce2 a9ad     +LDD R26 , Y + 53
000ce3 a9be     +LDD R27 , Y + 53 + 1
000ce4 9650     +ADIW R26 , 16
000ce5 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 53,16
                 ; 0003 020C 	fs->database = fs->fatbase + fsize + fs->n_rootdir / 16;	/* Data start sector (lba) */
000ce7 940e 1658 	CALL SUBOPT_0x52
000ce9 937f      	PUSH R23
000cea 936f      	PUSH R22
000ceb 93ff      	PUSH R31
000cec 93ef      	PUSH R30
000ced 940e 164b 	CALL SUBOPT_0x50
000cef 91af      	POP  R26
000cf0 91bf      	POP  R27
000cf1 918f      	POP  R24
000cf2 919f      	POP  R25
000cf3 940e 1508 	CALL SUBOPT_0x1B
                +
000cf5 a9ad     +LDD R26 , Y + 53
000cf6 a9be     +LDD R27 , Y + 53 + 1
000cf7 9654     +ADIW R26 , 20
000cf8 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 53,20
                 ; 0003 020D 
                 ; 0003 020E 	fs->flag = 0;
000cfa a9ad      	LDD  R26,Y+53
000cfb a9be      	LDD  R27,Y+53+1
000cfc 9612      	ADIW R26,2
000cfd e0e0      	LDI  R30,LOW(0)
000cfe 93ec      	ST   X,R30
                 ; 0003 020F 	FatFs = fs;
000cff a9ed      	LDD  R30,Y+53
000d00 a9fe      	LDD  R31,Y+53+1
000d01 93e0 0b11 	STS  _FatFs_G003,R30
000d03 93f0 0b12 	STS  _FatFs_G003+1,R31
                 ; 0003 0210 
                 ; 0003 0211 	return FR_OK;
                 _0x20C000C:
000d05 e0e0      	LDI  R30,LOW(0)
                 _0x20C000B:
000d06 8118      	LDD  R17,Y+0
000d07 96e7      	ADIW R28,55
000d08 9508      	RET
                 ; 0003 0212 }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Open or Create a File                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT pf_open (
                 ; 0003 021C 	const char *path	/* Pointer to the file name */
                 ; 0003 021D )
                 ; 0003 021E {
                 _pf_open:
                 ; .FSTART _pf_open
                 ; 0003 021F 	FRESULT res;
                 ; 0003 0220 	DIR dj;
                 ; 0003 0221 	BYTE sp[12], dir[32];
                 ; 0003 0222 	FATFS *fs = FatFs;
                 ; 0003 0223 
                 ; 0003 0224 
                 ; 0003 0225 	if (!fs)						/* Check file system */
000d09 93ba      	ST   -Y,R27
000d0a 93aa      	ST   -Y,R26
000d0b 97ec      	SBIW R28,60
000d0c 940e 15bb 	CALL SUBOPT_0x3A
                 ;	*path -> Y+64
                 ;	res -> R17
                 ;	dj -> Y+48
                 ;	sp -> Y+36
                 ;	dir -> Y+4
                 ;	*fs -> R18,R19
000d0e 2e02      	MOV  R0,R18
000d0f 2a03      	OR   R0,R19
000d10 f411      	BRNE _0x60094
                 ; 0003 0226 		return FR_NOT_ENABLED;
000d11 e0e6      	LDI  R30,LOW(6)
000d12 c036      	RJMP _0x20C000A
                 ; 0003 0227 
                 ; 0003 0228 	fs->flag = 0;
                 _0x60094:
000d13 01d9      	MOVW R26,R18
000d14 9612      	ADIW R26,2
000d15 e0e0      	LDI  R30,LOW(0)
000d16 93ec      	ST   X,R30
                 ; 0003 0229 	fs->buf = dir;
000d17 940e 1662 	CALL SUBOPT_0x53
                 ; 0003 022A 	dj.fn = sp;
000d19 abea      	STD  Y+50,R30
000d1a abfb      	STD  Y+50+1,R31
                 ; 0003 022B 	res = follow_path(&dj, path);	/* Follow the file path */
000d1b 01fe      	MOVW R30,R28
000d1c 96f0      	ADIW R30,48
000d1d 93fa      	ST   -Y,R31
000d1e 93ea      	ST   -Y,R30
                +
000d1f 01de     +MOVW R26 , R28
000d20 5bae     +SUBI R26 , LOW ( - 66 )
000d21 4fbf     +SBCI R27 , HIGH ( - 66 )
000d22 900d     +LD R0 , X +
000d23 91bc     +LD R27 , X
000d24 2da0     +MOV R26 , R0
                 	__GETW2SX 66
000d25 de1a      	RCALL _follow_path_G003
000d26 2f1e      	MOV  R17,R30
                 ; 0003 022C 	if (res != FR_OK) return res;	/* Follow failed */
000d27 3010      	CPI  R17,0
000d28 f009      	BREQ _0x60095
000d29 c01f      	RJMP _0x20C000A
                 ; 0003 022D 	if (!dir[0] || (dir[DIR_Attr] & AM_DIR))	/* It is a directory */
                 _0x60095:
000d2a 81ec      	LDD  R30,Y+4
000d2b 30e0      	CPI  R30,0
000d2c f019      	BREQ _0x60097
000d2d 85ef      	LDD  R30,Y+15
000d2e 71e0      	ANDI R30,LOW(0x10)
000d2f f011      	BREQ _0x60096
                 _0x60097:
                 ; 0003 022E 		return FR_NO_FILE;
000d30 e0e3      	LDI  R30,LOW(3)
000d31 c017      	RJMP _0x20C000A
                 ; 0003 022F 
                 ; 0003 0230 	fs->org_clust =						/* File start cluster */
                 _0x60096:
                 ; 0003 0231 #if _FS_FAT32
                 ; 0003 0232 		((DWORD)LD_WORD(dir+DIR_FstClusHI) << 16) |
                 ; 0003 0233 #endif
                 ; 0003 0234 		LD_WORD(dir+DIR_FstClusLO);
000d32 940e 166b 	CALL SUBOPT_0x54
                +
000d34 01d9     +MOVW R26 , R18
000d35 9690     +ADIW R26 , 32
000d36 940e 186d+CALL __PUTDP1
                 	__PUTD1RNS 18,32
                 ; 0003 0235 	fs->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
                +
000d38 a1e8     +LDD R30 , Y + 32
000d39 a1f9     +LDD R31 , Y + 32 + 1
000d3a a16a     +LDD R22 , Y + 32 + 2
000d3b a17b     +LDD R23 , Y + 32 + 3
                 	__GETD1S 32
                +
000d3c 01d9     +MOVW R26 , R18
000d3d 965c     +ADIW R26 , 28
000d3e 940e 186d+CALL __PUTDP1
                 	__PUTD1RNS 18,28
                 ; 0003 0236 	fs->fptr = 0;						/* File pointer */
000d40 01d9      	MOVW R26,R18
000d41 9658      	ADIW R26,24
000d42 940e 1603 	CALL SUBOPT_0x44
                 ; 0003 0237 	fs->flag = FA_OPENED;
000d44 01d9      	MOVW R26,R18
000d45 9612      	ADIW R26,2
000d46 e0e1      	LDI  R30,LOW(1)
000d47 93ec      	ST   X,R30
                 ; 0003 0238 
                 ; 0003 0239 	return FR_OK;
000d48 e0e0      	LDI  R30,LOW(0)
                 _0x20C000A:
000d49 940e 18f8 	CALL __LOADLOCR4
000d4b 96ef      	ADIW R28,63
000d4c 9623      	ADIW R28,3
000d4d 9508      	RET
                 ; 0003 023A }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read File                                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_READ
                 ;
                 ;FRESULT pf_read (
                 ; 0003 0245 	void* buff,		/* Pointer to the read buffer (NULL:Forward data to the stream)*/
                 ; 0003 0246 	WORD btr,		/* Number of bytes to read */
                 ; 0003 0247 	WORD* br		/* Pointer to number of bytes read */
                 ; 0003 0248 )
                 ; 0003 0249 {
                 _pf_read:
                 ; .FSTART _pf_read
                 ; 0003 024A 	DRESULT dr;
                 ; 0003 024B 	CLUST clst;
                 ; 0003 024C 	DWORD sect, remain;
                 ; 0003 024D 	BYTE *rbuff = buff;
                 ; 0003 024E 	WORD rcnt;
                 ; 0003 024F 	FATFS *fs = FatFs;
                 ; 0003 0250 
                 ; 0003 0251 
                 ; 0003 0252 	*br = 0;
000d4e 93ba      	ST   -Y,R27
000d4f 93aa      	ST   -Y,R26
000d50 972e      	SBIW R28,14
000d51 940e 18ef 	CALL __SAVELOCR6
                 ;	*buff -> Y+24
                 ;	btr -> Y+22
                 ;	*br -> Y+20
                 ;	dr -> R17
                 ;	clst -> Y+16
                 ;	sect -> Y+12
                 ;	remain -> Y+8
                 ;	*rbuff -> R18,R19
                 ;	rcnt -> R20,R21
                 ;	*fs -> Y+6
                +
000d53 8d28     +LDD R18 , Y + 24
000d54 8d39     +LDD R19 , Y + 24 + 1
                 	__GETWRS 18,19,24
000d55 940e 1557 	CALL SUBOPT_0x29
000d57 83ee      	STD  Y+6,R30
000d58 83ff      	STD  Y+6+1,R31
000d59 89ac      	LDD  R26,Y+20
000d5a 89bd      	LDD  R27,Y+20+1
000d5b 940e 15b3 	CALL SUBOPT_0x38
                 ; 0003 0253 	if (!fs) return FR_NOT_ENABLED;		/* Check file system */
000d5d 81ee      	LDD  R30,Y+6
000d5e 81ff      	LDD  R31,Y+6+1
000d5f 9730      	SBIW R30,0
000d60 f411      	BRNE _0x60099
000d61 e0e6      	LDI  R30,LOW(6)
000d62 c0d6      	RJMP _0x20C0009
                 ; 0003 0254 	if (!(fs->flag & FA_OPENED))		/* Check if opened */
                 _0x60099:
000d63 81ee      	LDD  R30,Y+6
000d64 81ff      	LDD  R31,Y+6+1
000d65 81a2      	LDD  R26,Z+2
000d66 70a1      	ANDI R26,LOW(0x1)
000d67 f411      	BRNE _0x6009A
                 ; 0003 0255 		return FR_NOT_OPENED;
000d68 e0e5      	LDI  R30,LOW(5)
000d69 c0cf      	RJMP _0x20C0009
                 ; 0003 0256 
                 ; 0003 0257 	remain = fs->fsize - fs->fptr;
                 _0x6009A:
000d6a 81ee      	LDD  R30,Y+6
000d6b 81ff      	LDD  R31,Y+6+1
                +
000d6c 8da4     +LDD R26 , Z + 28
000d6d 8db5     +LDD R27 , Z + 28 + 1
000d6e 8d86     +LDD R24 , Z + 28 + 2
000d6f 8d97     +LDD R25 , Z + 28 + 3
                 	__GETD2Z 28
000d70 939f      	PUSH R25
000d71 938f      	PUSH R24
000d72 93bf      	PUSH R27
000d73 93af      	PUSH R26
000d74 940e 1676 	CALL SUBOPT_0x55
000d76 91ef      	POP  R30
000d77 91ff      	POP  R31
000d78 916f      	POP  R22
000d79 917f      	POP  R23
000d7a 940e 17b3 	CALL __SUBD12
                +
000d7c 87e8     +STD Y + 8 , R30
000d7d 87f9     +STD Y + 8 + 1 , R31
000d7e 876a     +STD Y + 8 + 2 , R22
000d7f 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
                 ; 0003 0258 	if (btr > remain) btr = (WORD)remain;			/* Truncate btr by remaining bytes */
000d80 940e 14fe 	CALL SUBOPT_0x19
000d82 89ae      	LDD  R26,Y+22
000d83 89bf      	LDD  R27,Y+22+1
000d84 2788      	CLR  R24
000d85 2799      	CLR  R25
000d86 940e 18e5 	CALL __CPD12
000d88 f420      	BRSH _0x6009B
000d89 85e8      	LDD  R30,Y+8
000d8a 85f9      	LDD  R31,Y+8+1
000d8b 8bee      	STD  Y+22,R30
000d8c 8bff      	STD  Y+22+1,R31
                 ; 0003 0259 
                 ; 0003 025A 	while (btr)	{									/* Repeat until all data transferred */
                 _0x6009B:
                 _0x6009C:
000d8d 89ee      	LDD  R30,Y+22
000d8e 89ff      	LDD  R31,Y+22+1
000d8f 9730      	SBIW R30,0
000d90 f409      	BRNE PC+2
000d91 c0a1      	RJMP _0x6009E
                 ; 0003 025B 		if ((fs->fptr % 512) == 0) {				/* On the sector boundary? */
000d92 940e 1676 	CALL SUBOPT_0x55
000d94 01fd      	MOVW R30,R26
000d95 01bc      	MOVW R22,R24
000d96 70f1      	ANDI R31,HIGH(0x1FF)
000d97 9730      	SBIW R30,0
000d98 f009      	BREQ PC+2
000d99 c04d      	RJMP _0x6009F
                 ; 0003 025C 			if ((fs->fptr / 512 % fs->csize) == 0) {	/* On the cluster boundary? */
000d9a 940e 1676 	CALL SUBOPT_0x55
000d9c 940e 167d 	CALL SUBOPT_0x56
000d9e 81ee      	LDD  R30,Y+6
000d9f 81ff      	LDD  R31,Y+6+1
000da0 940e 1653 	CALL SUBOPT_0x51
000da2 940e 185a 	CALL __MODD21U
000da4 940e 18d7 	CALL __CPD10
000da6 f541      	BRNE _0x600A0
                 ; 0003 025D 				clst = (fs->fptr == 0) ?			/* On the top of the file? */
                 ; 0003 025E 					fs->org_clust : get_fat(fs->curr_clust);
000da7 940e 1676 	CALL SUBOPT_0x55
000da9 940e 18df 	CALL __CPD02
000dab f431      	BRNE _0x600A1
000dac 81ae      	LDD  R26,Y+6
000dad 81bf      	LDD  R27,Y+6+1
000dae 9690      	ADIW R26,32
000daf 940e 1862 	CALL __GETD1P
000db1 c003      	RJMP _0x600A2
                 _0x600A1:
000db2 940e 1686 	CALL SUBOPT_0x57
000db4 da5f      	RCALL _get_fat_G003
                 _0x600A2:
                +
000db5 8be8     +STD Y + 16 , R30
000db6 8bf9     +STD Y + 16 + 1 , R31
000db7 8b6a     +STD Y + 16 + 2 , R22
000db8 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
                 ; 0003 025F 				if (clst <= 1) goto fr_abort;
                +
000db9 89a8     +LDD R26 , Y + 16
000dba 89b9     +LDD R27 , Y + 16 + 1
000dbb 898a     +LDD R24 , Y + 16 + 2
000dbc 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
000dbd 940e 1561 	CALL SUBOPT_0x2B
000dbf f408      	BRSH _0x600A4
000dc0 c074      	RJMP _0x600A5
                 ; 0003 0260 				fs->curr_clust = clst;				/* Update current cluster */
                 _0x600A4:
                +
000dc1 89e8     +LDD R30 , Y + 16
000dc2 89f9     +LDD R31 , Y + 16 + 1
000dc3 896a     +LDD R22 , Y + 16 + 2
000dc4 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
                +
000dc5 81ae     +LDD R26 , Y + 6
000dc6 81bf     +LDD R27 , Y + 6 + 1
000dc7 9694     +ADIW R26 , 36
000dc8 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 6,36
                 ; 0003 0261 				fs->csect = 0;						/* Reset sector offset in the cluster */
000dca 81ae      	LDD  R26,Y+6
000dcb 81bf      	LDD  R27,Y+6+1
000dcc 9613      	ADIW R26,3
000dcd e0e0      	LDI  R30,LOW(0)
000dce 93ec      	ST   X,R30
                 ; 0003 0262 			}
                 ; 0003 0263 			sect = clust2sect(fs->curr_clust);		/* Get current sector */
                 _0x600A0:
000dcf 940e 1686 	CALL SUBOPT_0x57
000dd1 db09      	RCALL _clust2sect_G003
                +
000dd2 87ec     +STD Y + 12 , R30
000dd3 87fd     +STD Y + 12 + 1 , R31
000dd4 876e     +STD Y + 12 + 2 , R22
000dd5 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ; 0003 0264 			if (!sect) goto fr_abort;
000dd6 940e 18d7 	CALL __CPD10
000dd8 f409      	BRNE _0x600A6
000dd9 c05b      	RJMP _0x600A5
                 ; 0003 0265 			fs->dsect = sect + fs->csect++;
                 _0x600A6:
000dda 81ae      	LDD  R26,Y+6
000ddb 81bf      	LDD  R27,Y+6+1
000ddc 940e 168d 	CALL SUBOPT_0x58
000dde 940e 155c 	CALL SUBOPT_0x2A
000de0 940e 1694 	CALL SUBOPT_0x59
                +
000de2 81ae     +LDD R26 , Y + 6
000de3 81bf     +LDD R27 , Y + 6 + 1
000de4 9698     +ADIW R26 , 40
000de5 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 6,40
                 ; 0003 0266 		}
                 ; 0003 0267 		rcnt = 512 - ((WORD)fs->fptr % 512);		/* Get partial sector data from sector buffer */
                 _0x6009F:
000de7 81ee      	LDD  R30,Y+6
000de8 81ff      	LDD  R31,Y+6+1
000de9 940e 1699 	CALL SUBOPT_0x5A
000deb e0a0      	LDI  R26,LOW(512)
000dec e0b2      	LDI  R27,HIGH(512)
000ded 1bae      	SUB  R26,R30
000dee 0bbf      	SBC  R27,R31
000def 01ad      	MOVW R20,R26
                 ; 0003 0268 		if (rcnt > btr) rcnt = btr;
000df0 89ee      	LDD  R30,Y+22
000df1 89ff      	LDD  R31,Y+22+1
000df2 17e4      	CP   R30,R20
000df3 07f5      	CPC  R31,R21
000df4 f410      	BRSH _0x600A7
                +
000df5 894e     +LDD R20 , Y + 22
000df6 895f     +LDD R21 , Y + 22 + 1
                 	__GETWRS 20,21,22
                 ; 0003 0269 		dr = disk_readp(!buff ? 0 : rbuff, fs->dsect, (WORD)(fs->fptr % 512), rcnt);
                 _0x600A7:
000df7 8de8      	LDD  R30,Y+24
000df8 8df9      	LDD  R31,Y+24+1
000df9 9730      	SBIW R30,0
000dfa f419      	BRNE _0x600A8
000dfb e0e0      	LDI  R30,LOW(0)
000dfc e0f0      	LDI  R31,HIGH(0)
000dfd c001      	RJMP _0x600A9
                 _0x600A8:
000dfe 01f9      	MOVW R30,R18
                 _0x600A9:
000dff 93fa      	ST   -Y,R31
000e00 93ea      	ST   -Y,R30
000e01 85e8      	LDD  R30,Y+8
000e02 85f9      	LDD  R31,Y+8+1
                +
000e03 a5a0     +LDD R26 , Z + 40
000e04 a5b1     +LDD R27 , Z + 40 + 1
000e05 a582     +LDD R24 , Z + 40 + 2
000e06 a593     +LDD R25 , Z + 40 + 3
                 	__GETD2Z 40
000e07 940e 1898 	CALL __PUTPARD2
000e09 85ac      	LDD  R26,Y+12
000e0a 85bd      	LDD  R27,Y+12+1
000e0b 9658      	ADIW R26,24
000e0c 940e 185e 	CALL __GETW1P
000e0e 70f1      	ANDI R31,HIGH(0x1FF)
000e0f 93fa      	ST   -Y,R31
000e10 93ea      	ST   -Y,R30
000e11 01da      	MOVW R26,R20
000e12 d8ee      	RCALL _disk_readp
000e13 2f1e      	MOV  R17,R30
                 ; 0003 026A 		if (dr) goto fr_abort;
000e14 3010      	CPI  R17,0
000e15 f4f9      	BRNE _0x600A5
                 ; 0003 026B 		fs->fptr += rcnt; rbuff += rcnt;			/* Update pointers and counters */
000e16 81ee      	LDD  R30,Y+6
000e17 81ff      	LDD  R31,Y+6+1
000e18 940e 169e 	CALL SUBOPT_0x5B
000e1a 01df      	MOVW R26,R30
000e1b 01cb      	MOVW R24,R22
000e1c 01fa      	MOVW R30,R20
000e1d 940e 1508 	CALL SUBOPT_0x1B
000e1f 01d0      	MOVW R26,R0
000e20 940e 186d 	CALL __PUTDP1
                +
000e22 0f24     +ADD R18 , R20
000e23 1f35     +ADC R19 , R21
                 	__ADDWRR 18,19,20,21
                 ; 0003 026C 		btr -= rcnt; *br += rcnt;
000e24 89ee      	LDD  R30,Y+22
000e25 89ff      	LDD  R31,Y+22+1
000e26 1be4      	SUB  R30,R20
000e27 0bf5      	SBC  R31,R21
000e28 8bee      	STD  Y+22,R30
000e29 8bff      	STD  Y+22+1,R31
000e2a 89ac      	LDD  R26,Y+20
000e2b 89bd      	LDD  R27,Y+20+1
000e2c 91ed      	LD   R30,X+
000e2d 91fd      	LD   R31,X+
000e2e 0fe4      	ADD  R30,R20
000e2f 1ff5      	ADC  R31,R21
000e30 93fe      	ST   -X,R31
000e31 93ee      	ST   -X,R30
                 ; 0003 026D 	}
000e32 cf5a      	RJMP _0x6009C
                 _0x6009E:
                 ; 0003 026E 
                 ; 0003 026F 	return FR_OK;
000e33 e0e0      	LDI  R30,LOW(0)
000e34 c004      	RJMP _0x20C0009
                 ; 0003 0270 
                 ; 0003 0271 fr_abort:
                 _0x600A5:
                 ; 0003 0272 	fs->flag = 0;
000e35 81ae      	LDD  R26,Y+6
000e36 81bf      	LDD  R27,Y+6+1
000e37 940e 16a4 	CALL SUBOPT_0x5C
                 ; 0003 0273 	return FR_DISK_ERR;
                 _0x20C0009:
000e39 940e 18f6 	CALL __LOADLOCR6
000e3b 966a      	ADIW R28,26
000e3c 9508      	RET
                 ; 0003 0274 }
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Write File                                                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_WRITE
                 ;
                 ;FRESULT pf_write (
                 ; 0003 027F 	const void* buff,	/* Pointer to the data to be written */
                 ; 0003 0280 	WORD btw,			/* Number of bytes to write (0:Finalize the current write operation) */
                 ; 0003 0281 	WORD* bw			/* Pointer to number of bytes written */
                 ; 0003 0282 )
                 ; 0003 0283 {
                 _pf_write:
                 ; .FSTART _pf_write
                 ; 0003 0284 	CLUST clst;
                 ; 0003 0285 	DWORD sect, remain;
                 ; 0003 0286 	const BYTE *p = buff;
                 ; 0003 0287 	WORD wcnt;
                 ; 0003 0288 	FATFS *fs = FatFs;
                 ; 0003 0289 
                 ; 0003 028A 
                 ; 0003 028B 	*bw = 0;
000e3d 93ba      	ST   -Y,R27
000e3e 93aa      	ST   -Y,R26
000e3f 972c      	SBIW R28,12
000e40 940e 18ef 	CALL __SAVELOCR6
                 ;	*buff -> Y+22
                 ;	btw -> Y+20
                 ;	*bw -> Y+18
                 ;	clst -> Y+14
                 ;	sect -> Y+10
                 ;	remain -> Y+6
                 ;	*p -> R16,R17
                 ;	wcnt -> R18,R19
                 ;	*fs -> R20,R21
                +
000e42 890e     +LDD R16 , Y + 22
000e43 891f     +LDD R17 , Y + 22 + 1
                 	__GETWRS 16,17,22
                +
000e44 9140 0b11+LDS R20 , 0 + ( _FatFs_G003 )
000e46 9150 0b12+LDS R21 , 0 + ( _FatFs_G003 ) + 1
                 	__GETWRMN 20,21,0,_FatFs_G003
000e48 89aa      	LDD  R26,Y+18
000e49 89bb      	LDD  R27,Y+18+1
000e4a 940e 15b3 	CALL SUBOPT_0x38
                 ; 0003 028C 	if (!fs) return FR_NOT_ENABLED;		/* Check file system */
000e4c 2e04      	MOV  R0,R20
000e4d 2a05      	OR   R0,R21
000e4e f411      	BRNE _0x600AC
000e4f e0e6      	LDI  R30,LOW(6)
000e50 c005      	RJMP _0x20C0008
                 ; 0003 028D 	if (!(fs->flag & FA_OPENED))		/* Check if opened */
                 _0x600AC:
000e51 01fa      	MOVW R30,R20
000e52 81a2      	LDD  R26,Z+2
000e53 70a1      	ANDI R26,LOW(0x1)
000e54 f429      	BRNE _0x600AD
                 ; 0003 028E 		return FR_NOT_OPENED;
000e55 e0e5      	LDI  R30,LOW(5)
                 _0x20C0008:
000e56 940e 18f6 	CALL __LOADLOCR6
000e58 9668      	ADIW R28,24
000e59 9508      	RET
                 ; 0003 028F 
                 ; 0003 0290 	if (!btw) {		/* Finalize request */
                 _0x600AD:
000e5a 89ec      	LDD  R30,Y+20
000e5b 89fd      	LDD  R31,Y+20+1
000e5c 9730      	SBIW R30,0
000e5d f4a9      	BRNE _0x600AE
                 ; 0003 0291 		if ((fs->flag & FA__WIP) && disk_writep(0, 0)) goto fw_abort;
000e5e 01fa      	MOVW R30,R20
000e5f 81a2      	LDD  R26,Z+2
000e60 74a0      	ANDI R26,LOW(0x40)
000e61 f039      	BREQ _0x600B0
000e62 940e 1470 	CALL SUBOPT_0x5
000e64 940e 153a 	CALL SUBOPT_0x23
000e66 d8fd      	RCALL _disk_writep
000e67 30e0      	CPI  R30,0
000e68 f409      	BRNE _0x600B1
                 _0x600B0:
000e69 c001      	RJMP _0x600AF
                 _0x600B1:
000e6a c0df      	RJMP _0x600B2
                 ; 0003 0292 		fs->flag &= ~FA__WIP;
                 _0x600AF:
000e6b 01da      	MOVW R26,R20
000e6c 9612      	ADIW R26,2
000e6d 91ec      	LD   R30,X
000e6e 7bef      	ANDI R30,0xBF
000e6f 93ec      	ST   X,R30
                 ; 0003 0293 		return FR_OK;
000e70 e0e0      	LDI  R30,LOW(0)
000e71 940c 1322 	JMP  _0x20C0003
                 ; 0003 0294 	} else {		/* Write data request */
                 _0x600AE:
                 ; 0003 0295 		if (!(fs->flag & FA__WIP))		/* Round down fptr to the sector boundary */
000e73 01fa      	MOVW R30,R20
000e74 81a2      	LDD  R26,Z+2
000e75 74a0      	ANDI R26,LOW(0x40)
000e76 f441      	BRNE _0x600B4
                 ; 0003 0296 			fs->fptr &= 0xFFFFFE00;
000e77 01da      	MOVW R26,R20
000e78 9658      	ADIW R26,24
000e79 91ed      	LD   R30,X+
000e7a 91fd      	LD   R31,X+
000e7b 70e0      	ANDI R30,LOW(0xFFFFFE00)
000e7c 7ffe      	ANDI R31,HIGH(0xFFFFFE00)
000e7d 93fe      	ST   -X,R31
000e7e 93ee      	ST   -X,R30
                 ; 0003 0297 	}
                 _0x600B4:
                 ; 0003 0298 	remain = fs->fsize - fs->fptr;
000e7f 01fa      	MOVW R30,R20
                +
000e80 8da4     +LDD R26 , Z + 28
000e81 8db5     +LDD R27 , Z + 28 + 1
000e82 8d86     +LDD R24 , Z + 28 + 2
000e83 8d97     +LDD R25 , Z + 28 + 3
                 	__GETD2Z 28
000e84 939f      	PUSH R25
000e85 938f      	PUSH R24
000e86 93bf      	PUSH R27
000e87 93af      	PUSH R26
000e88 940e 16a9 	CALL SUBOPT_0x5D
000e8a 91ef      	POP  R30
000e8b 91ff      	POP  R31
000e8c 916f      	POP  R22
000e8d 917f      	POP  R23
000e8e 940e 17b3 	CALL __SUBD12
000e90 940e 14d7 	CALL SUBOPT_0x14
                 ; 0003 0299 	if (btw > remain) btw = (WORD)remain;			/* Truncate btw by remaining bytes */
000e92 940e 14d2 	CALL SUBOPT_0x13
000e94 89ac      	LDD  R26,Y+20
000e95 89bd      	LDD  R27,Y+20+1
000e96 2788      	CLR  R24
000e97 2799      	CLR  R25
000e98 940e 18e5 	CALL __CPD12
000e9a f420      	BRSH _0x600B5
000e9b 81ee      	LDD  R30,Y+6
000e9c 81ff      	LDD  R31,Y+6+1
000e9d 8bec      	STD  Y+20,R30
000e9e 8bfd      	STD  Y+20+1,R31
                 ; 0003 029A 
                 ; 0003 029B 	while (btw)	{									/* Repeat until all data transferred */
                 _0x600B5:
                 _0x600B6:
000e9f 89ec      	LDD  R30,Y+20
000ea0 89fd      	LDD  R31,Y+20+1
000ea1 9730      	SBIW R30,0
000ea2 f409      	BRNE PC+2
000ea3 c0a3      	RJMP _0x600B8
                 ; 0003 029C 		if (((WORD)fs->fptr % 512) == 0) {				/* On the sector boundary? */
000ea4 01fa      	MOVW R30,R20
000ea5 940e 1699 	CALL SUBOPT_0x5A
000ea7 9730      	SBIW R30,0
000ea8 f009      	BREQ PC+2
000ea9 c059      	RJMP _0x600B9
                 ; 0003 029D 			if ((fs->fptr / 512 % fs->csize) == 0) {	/* On the cluster boundary? */
000eaa 940e 16a9 	CALL SUBOPT_0x5D
000eac 940e 167d 	CALL SUBOPT_0x56
000eae 01fa      	MOVW R30,R20
000eaf 940e 1653 	CALL SUBOPT_0x51
000eb1 940e 185a 	CALL __MODD21U
000eb3 940e 18d7 	CALL __CPD10
000eb5 f511      	BRNE _0x600BA
                 ; 0003 029E 				clst = (fs->fptr == 0) ?			/* On the top of the file? */
                 ; 0003 029F 					fs->org_clust : get_fat(fs->curr_clust);
000eb6 940e 16a9 	CALL SUBOPT_0x5D
000eb8 940e 18df 	CALL __CPD02
000eba f429      	BRNE _0x600BB
000ebb 01da      	MOVW R26,R20
000ebc 9690      	ADIW R26,32
000ebd 940e 1862 	CALL __GETD1P
000ebf c006      	RJMP _0x600BC
                 _0x600BB:
000ec0 01fa      	MOVW R30,R20
                +
000ec1 a1a4     +LDD R26 , Z + 36
000ec2 a1b5     +LDD R27 , Z + 36 + 1
000ec3 a186     +LDD R24 , Z + 36 + 2
000ec4 a197     +LDD R25 , Z + 36 + 3
                 	__GETD2Z 36
000ec5 d94e      	RCALL _get_fat_G003
                 _0x600BC:
000ec6 940e 16af 	CALL SUBOPT_0x5E
                 ; 0003 02A0 				if (clst <= 1) goto fw_abort;
000ec8 940e 158e 	CALL SUBOPT_0x31
000eca 940e 1561 	CALL SUBOPT_0x2B
000ecc f408      	BRSH _0x600BE
000ecd c07c      	RJMP _0x600B2
                 ; 0003 02A1 				fs->curr_clust = clst;				/* Update current cluster */
                 _0x600BE:
000ece 940e 16b4 	CALL SUBOPT_0x5F
                +
000ed0 01da     +MOVW R26 , R20
000ed1 9694     +ADIW R26 , 36
000ed2 940e 186d+CALL __PUTDP1
                 	__PUTD1RNS 20,36
                 ; 0003 02A2 				fs->csect = 0;						/* Reset sector offset in the cluster */
000ed4 01da      	MOVW R26,R20
000ed5 9613      	ADIW R26,3
000ed6 e0e0      	LDI  R30,LOW(0)
000ed7 93ec      	ST   X,R30
                 ; 0003 02A3 			}
                 ; 0003 02A4 			sect = clust2sect(fs->curr_clust);		/* Get current sector */
                 _0x600BA:
000ed8 01fa      	MOVW R30,R20
                +
000ed9 a1a4     +LDD R26 , Z + 36
000eda a1b5     +LDD R27 , Z + 36 + 1
000edb a186     +LDD R24 , Z + 36 + 2
000edc a197     +LDD R25 , Z + 36 + 3
                 	__GETD2Z 36
000edd d9fd      	RCALL _clust2sect_G003
                +
000ede 87ea     +STD Y + 10 , R30
000edf 87fb     +STD Y + 10 + 1 , R31
000ee0 876c     +STD Y + 10 + 2 , R22
000ee1 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
                 ; 0003 02A5 			if (!sect) goto fw_abort;
000ee2 940e 150d 	CALL SUBOPT_0x1C
000ee4 940e 18d7 	CALL __CPD10
000ee6 f409      	BRNE _0x600BF
000ee7 c062      	RJMP _0x600B2
                 ; 0003 02A6 			fs->dsect = sect + fs->csect++;
                 _0x600BF:
000ee8 01da      	MOVW R26,R20
000ee9 940e 168d 	CALL SUBOPT_0x58
000eeb 940e 1512 	CALL SUBOPT_0x1D
000eed 940e 1694 	CALL SUBOPT_0x59
                +
000eef 01da     +MOVW R26 , R20
000ef0 9698     +ADIW R26 , 40
000ef1 940e 186d+CALL __PUTDP1
                 	__PUTD1RNS 20,40
                 ; 0003 02A7 			if (disk_writep(0, fs->dsect)) goto fw_abort;	/* Initiate a sector write operation */
000ef3 940e 1470 	CALL SUBOPT_0x5
000ef5 01fa      	MOVW R30,R20
                +
000ef6 a5a0     +LDD R26 , Z + 40
000ef7 a5b1     +LDD R27 , Z + 40 + 1
000ef8 a582     +LDD R24 , Z + 40 + 2
000ef9 a593     +LDD R25 , Z + 40 + 3
                 	__GETD2Z 40
000efa d869      	RCALL _disk_writep
000efb 30e0      	CPI  R30,0
000efc f009      	BREQ _0x600C0
000efd c04c      	RJMP _0x600B2
                 ; 0003 02A8 			fs->flag |= FA__WIP;
                 _0x600C0:
000efe 01da      	MOVW R26,R20
000eff 9612      	ADIW R26,2
000f00 91ec      	LD   R30,X
000f01 64e0      	ORI  R30,0x40
000f02 93ec      	ST   X,R30
                 ; 0003 02A9 		}
                 ; 0003 02AA 		wcnt = 512 - ((WORD)fs->fptr % 512);		/* Number of bytes to write to the sector */
                 _0x600B9:
000f03 01fa      	MOVW R30,R20
000f04 940e 1699 	CALL SUBOPT_0x5A
000f06 e0a0      	LDI  R26,LOW(512)
000f07 e0b2      	LDI  R27,HIGH(512)
000f08 1bae      	SUB  R26,R30
000f09 0bbf      	SBC  R27,R31
000f0a 019d      	MOVW R18,R26
                 ; 0003 02AB 		if (wcnt > btw) wcnt = btw;
000f0b 89ec      	LDD  R30,Y+20
000f0c 89fd      	LDD  R31,Y+20+1
000f0d 17e2      	CP   R30,R18
000f0e 07f3      	CPC  R31,R19
000f0f f410      	BRSH _0x600C1
                +
000f10 892c     +LDD R18 , Y + 20
000f11 893d     +LDD R19 , Y + 20 + 1
                 	__GETWRS 18,19,20
                 ; 0003 02AC 		if (disk_writep(p, wcnt)) goto fw_abort;	/* Send data to the sector */
                 _0x600C1:
000f12 931a      	ST   -Y,R17
000f13 930a      	ST   -Y,R16
000f14 01d9      	MOVW R26,R18
000f15 2788      	CLR  R24
000f16 2799      	CLR  R25
000f17 d84c      	RCALL _disk_writep
000f18 30e0      	CPI  R30,0
000f19 f581      	BRNE _0x600B2
                 ; 0003 02AD 		fs->fptr += wcnt; p += wcnt;				/* Update pointers and counters */
000f1a 01fa      	MOVW R30,R20
000f1b 940e 169e 	CALL SUBOPT_0x5B
000f1d 01df      	MOVW R26,R30
000f1e 01cb      	MOVW R24,R22
000f1f 01f9      	MOVW R30,R18
000f20 940e 1508 	CALL SUBOPT_0x1B
000f22 01d0      	MOVW R26,R0
000f23 940e 186d 	CALL __PUTDP1
                +
000f25 0f02     +ADD R16 , R18
000f26 1f13     +ADC R17 , R19
                 	__ADDWRR 16,17,18,19
                 ; 0003 02AE 		btw -= wcnt; *bw += wcnt;
000f27 89ec      	LDD  R30,Y+20
000f28 89fd      	LDD  R31,Y+20+1
000f29 1be2      	SUB  R30,R18
000f2a 0bf3      	SBC  R31,R19
000f2b 8bec      	STD  Y+20,R30
000f2c 8bfd      	STD  Y+20+1,R31
000f2d 89aa      	LDD  R26,Y+18
000f2e 89bb      	LDD  R27,Y+18+1
000f2f 91ed      	LD   R30,X+
000f30 91fd      	LD   R31,X+
000f31 0fe2      	ADD  R30,R18
000f32 1ff3      	ADC  R31,R19
000f33 93fe      	ST   -X,R31
000f34 93ee      	ST   -X,R30
                 ; 0003 02AF 		if (((WORD)fs->fptr % 512) == 0) {
000f35 01fa      	MOVW R30,R20
000f36 940e 1699 	CALL SUBOPT_0x5A
000f38 9730      	SBIW R30,0
000f39 f461      	BRNE _0x600C3
                 ; 0003 02B0 			if (disk_writep(0, 0)) goto fw_abort;	/* Finalize the currtent secter write operation */
000f3a 940e 1470 	CALL SUBOPT_0x5
000f3c 940e 153a 	CALL SUBOPT_0x23
000f3e d825      	RCALL _disk_writep
000f3f 30e0      	CPI  R30,0
000f40 f449      	BRNE _0x600B2
                 ; 0003 02B1 			fs->flag &= ~FA__WIP;
000f41 01da      	MOVW R26,R20
000f42 9612      	ADIW R26,2
000f43 91ec      	LD   R30,X
000f44 7bef      	ANDI R30,0xBF
000f45 93ec      	ST   X,R30
                 ; 0003 02B2 		}
                 ; 0003 02B3 	}
                 _0x600C3:
000f46 cf58      	RJMP _0x600B6
                 _0x600B8:
                 ; 0003 02B4 
                 ; 0003 02B5 	return FR_OK;
000f47 e0e0      	LDI  R30,LOW(0)
000f48 940c 1322 	JMP  _0x20C0003
                 ; 0003 02B6 
                 ; 0003 02B7 fw_abort:
                 _0x600B2:
                 ; 0003 02B8 	fs->flag = 0;
000f4a 01da      	MOVW R26,R20
000f4b 940e 16a4 	CALL SUBOPT_0x5C
                 ; 0003 02B9 	return FR_DISK_ERR;
000f4d 940c 1322 	JMP  _0x20C0003
                 ; 0003 02BA }
                 ; .FEND
                 ;
                 ;FRESULT pf_write512 (
                 ; 0003 02BD 	BYTE* buff,	/* Pointer to the data to be written */
                 ; 0003 02BE 	WORD ofs,			//offset to fill data
                 ; 0003 02BF 	WORD btw,           /* Number of bytes to write */
                 ; 0003 02C0     WORD* bw			/* Pointer to number of bytes written */
                 ; 0003 02C1 )
                 ; 0003 02C2 {
                 _pf_write512:
                 ; .FSTART _pf_write512
                 ; 0003 02C3      BYTE res;
                 ; 0003 02C4      WORD i=ofs%512,j=0;
                 ; 0003 02C5      BYTE buf512[512];
                 ; 0003 02C6      FATFS *fs = FatFs;
                 ; 0003 02C7 
                 ; 0003 02C8      //WORD nbytes=0;
                 ; 0003 02C9      if((btw)>512){
000f4f 93ba      	ST   -Y,R27
000f50 93aa      	ST   -Y,R26
000f51 9722      	SBIW R28,2
000f52 50d2      	SUBI R29,2
000f53 940e 18ef 	CALL __SAVELOCR6
                 ;	*buff -> Y+526
                 ;	ofs -> Y+524
                 ;	btw -> Y+522
                 ;	*bw -> Y+520
                 ;	res -> R17
                 ;	i -> R18,R19
                 ;	j -> R20,R21
                 ;	buf512 -> Y+8
                 ;	*fs -> Y+6
000f55 940e 16b9 	CALL SUBOPT_0x60
000f57 019f      	MOVW R18,R30
                +
000f58 e040     +LDI R20 , LOW ( 0 )
000f59 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
000f5a 940e 1557 	CALL SUBOPT_0x29
000f5c 83ee      	STD  Y+6,R30
000f5d 83ff      	STD  Y+6+1,R31
000f5e 940e 16c1 	CALL SUBOPT_0x61
000f60 30a1      	CPI  R26,LOW(0x201)
000f61 e0e2      	LDI  R30,HIGH(0x201)
000f62 07be      	CPC  R27,R30
000f63 f010      	BRLO _0x600C5
                 ; 0003 02CA          return FR_DISK_ERR; //write bytes great than 512
000f64 e0e1      	LDI  R30,LOW(1)
000f65 c05b      	RJMP _0x20C0007
                 ; 0003 02CB      }
                 ; 0003 02CC      res=pf_lseek((ofs/512)*512);
                 _0x600C5:
000f66 940e 16c8 	CALL SUBOPT_0x62
000f68 e0e0      	LDI  R30,LOW(512)
000f69 e0f2      	LDI  R31,HIGH(512)
000f6a 940e 1822 	CALL __DIVW21U
000f6c 0fee      	LSL  R30
000f6d 1fff      	ROL  R31
000f6e 2ffe      	MOV  R31,R30
000f6f e0e0      	LDI  R30,0
000f70 2766      	CLR  R22
000f71 2777      	CLR  R23
000f72 01df      	MOVW R26,R30
000f73 01cb      	MOVW R24,R22
000f74 d051      	RCALL _pf_lseek
000f75 2f1e      	MOV  R17,R30
                 ; 0003 02CD      if(((ofs%512)+btw)>512){//read replace then write
000f76 940e 16b9 	CALL SUBOPT_0x60
000f78 940e 16c1 	CALL SUBOPT_0x61
000f7a 0fae      	ADD  R26,R30
000f7b 1fbf      	ADC  R27,R31
000f7c 30a1      	CPI  R26,LOW(0x201)
000f7d e0e2      	LDI  R30,HIGH(0x201)
000f7e 07be      	CPC  R27,R30
000f7f f0f8      	BRLO _0x600C6
                 ; 0003 02CE         res=pf_read(buf512, 512, bw);
000f80 940e 16cf 	CALL SUBOPT_0x63
000f82 ddcb      	RCALL _pf_read
000f83 2f1e      	MOV  R17,R30
                 ; 0003 02CF         if(res!=FR_OK){
000f84 3010      	CPI  R17,0
000f85 f009      	BREQ _0x600C7
                 ; 0003 02D0             return res;
000f86 c03a      	RJMP _0x20C0007
                 ; 0003 02D1         }
                 ; 0003 02D2         for(;i<512;i++,j++){
                 _0x600C7:
                 _0x600C9:
                +
000f87 3020     +CPI R18 , LOW ( 512 )
000f88 e0e2     +LDI R30 , HIGH ( 512 )
000f89 073e     +CPC R19 , R30
                 	__CPWRN 18,19,512
000f8a f438      	BRSH _0x600CA
                 ; 0003 02D3             buf512[i]=buff[j];
000f8b 940e 16d8 	CALL SUBOPT_0x64
                 ; 0003 02D4         }
                +
000f8d 5f2f     +SUBI R18 , LOW ( - 1 )
000f8e 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
                +
000f8f 5f4f     +SUBI R20 , LOW ( - 1 )
000f90 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000f91 cff5      	RJMP _0x600C9
                 _0x600CA:
                 ; 0003 02D5         res=pf_lseek(fs->fptr - 512);
000f92 940e 1676 	CALL SUBOPT_0x55
000f94 940e 16eb 	CALL SUBOPT_0x65
                 ; 0003 02D6         //res=pf_lseek((ofs/512)*512);
                 ; 0003 02D7         res=pf_write(buf512, 512, bw);
000f96 940e 16cf 	CALL SUBOPT_0x63
000f98 dea4      	RCALL _pf_write
000f99 2f1e      	MOV  R17,R30
                 ; 0003 02D8         if(res!=FR_OK){
000f9a 3010      	CPI  R17,0
000f9b f009      	BREQ _0x600CB
                 ; 0003 02D9             return res;
000f9c c024      	RJMP _0x20C0007
                 ; 0003 02DA         }
                 ; 0003 02DB         i=0;
                 _0x600CB:
                +
000f9d e020     +LDI R18 , LOW ( 0 )
000f9e e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
                 ; 0003 02DC          //return FR_DISK_ERR; //write bytes great than 512
                 ; 0003 02DD      }
                 ; 0003 02DE      {
                 _0x600C6:
                 ; 0003 02DF 
                 ; 0003 02E0         res=pf_read(buf512, 512, bw);
000f9f 940e 16cf 	CALL SUBOPT_0x63
000fa1 ddac      	RCALL _pf_read
000fa2 2f1e      	MOV  R17,R30
                 ; 0003 02E1         res=pf_lseek(fs->fptr - 512);
000fa3 940e 1676 	CALL SUBOPT_0x55
000fa5 940e 16eb 	CALL SUBOPT_0x65
                 ; 0003 02E2         /*
                 ; 0003 02E3         if(j>0){
                 ; 0003 02E4             res=pf_lseek(((ofs/512)+1)*512);
                 ; 0003 02E5         }
                 ; 0003 02E6         else{
                 ; 0003 02E7             res=pf_lseek((ofs/512)*512);
                 ; 0003 02E8         }
                 ; 0003 02E9         */
                 ; 0003 02EA         if(res!=FR_OK){
000fa7 3010      	CPI  R17,0
000fa8 f011      	BREQ _0x600CC
                 ; 0003 02EB             return res;
000fa9 2fe1      	MOV  R30,R17
000faa c016      	RJMP _0x20C0007
                 ; 0003 02EC         }
                 ; 0003 02ED         for(;j<btw;i++,j++){
                 _0x600CC:
                 _0x600CE:
                +
000fab 01fe     +MOVW R30 , R28
000fac 5fe6     +SUBI R30 , LOW ( - 522 )
000fad 4ffd     +SBCI R31 , HIGH ( - 522 )
000fae 9001     +LD R0 , Z +
000faf 81f0     +LD R31 , Z
000fb0 2de0     +MOV R30 , R0
                 	__GETW1SX 522
000fb1 174e      	CP   R20,R30
000fb2 075f      	CPC  R21,R31
000fb3 f438      	BRSH _0x600CF
                 ; 0003 02EE             buf512[i]=buff[j];
000fb4 940e 16d8 	CALL SUBOPT_0x64
                 ; 0003 02EF         }
                +
000fb6 5f2f     +SUBI R18 , LOW ( - 1 )
000fb7 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
                +
000fb8 5f4f     +SUBI R20 , LOW ( - 1 )
000fb9 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
000fba cff0      	RJMP _0x600CE
                 _0x600CF:
                 ; 0003 02F0 
                 ; 0003 02F1         res=pf_write(buf512, 512, bw);
000fbb 940e 16cf 	CALL SUBOPT_0x63
000fbd de7f      	RCALL _pf_write
000fbe 2f1e      	MOV  R17,R30
                 ; 0003 02F2         if(res!=FR_OK){
000fbf 3010      	CPI  R17,0
000fc0 f001      	BREQ _0x600D0
                 ; 0003 02F3             return res;
                 ; 0003 02F4         }
                 ; 0003 02F5      }
                 _0x600D0:
                 ; 0003 02F6 
                 ; 0003 02F7 }
                 _0x20C0007:
000fc1 940e 18f6 	CALL __LOADLOCR6
000fc3 9660      	ADIW R28,16
000fc4 5fde      	SUBI R29,-2
000fc5 9508      	RET
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Seek File R/W Pointer                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_LSEEK
                 ;
                 ;FRESULT pf_lseek (
                 ; 0003 0302 	DWORD ofs		/* File pointer from top of file */
                 ; 0003 0303 )
                 ; 0003 0304 {
                 _pf_lseek:
                 ; .FSTART _pf_lseek
                 ; 0003 0305 	CLUST clst;
                 ; 0003 0306 	DWORD bcs, sect, ifptr;
                 ; 0003 0307 	FATFS *fs = FatFs;
                 ; 0003 0308 
                 ; 0003 0309 
                 ; 0003 030A 	if (!fs) return FR_NOT_ENABLED;		/* Check file system */
000fc6 940e 1898 	CALL __PUTPARD2
000fc8 9760      	SBIW R28,16
000fc9 940e 159d 	CALL SUBOPT_0x34
                 ;	ofs -> Y+18
                 ;	clst -> Y+14
                 ;	bcs -> Y+10
                 ;	sect -> Y+6
                 ;	ifptr -> Y+2
                 ;	*fs -> R16,R17
000fcb 2e00      	MOV  R0,R16
000fcc 2a01      	OR   R0,R17
000fcd f411      	BRNE _0x600D1
000fce e0e6      	LDI  R30,LOW(6)
000fcf c0d7      	RJMP _0x20C0006
                 ; 0003 030B 	if (!(fs->flag & FA_OPENED))		/* Check if opened */
                 _0x600D1:
000fd0 01f8      	MOVW R30,R16
000fd1 81a2      	LDD  R26,Z+2
000fd2 70a1      	ANDI R26,LOW(0x1)
000fd3 f411      	BRNE _0x600D2
                 ; 0003 030C 			return FR_NOT_OPENED;
000fd4 e0e5      	LDI  R30,LOW(5)
000fd5 c0d1      	RJMP _0x20C0006
                 ; 0003 030D 
                 ; 0003 030E 	if (ofs > fs->fsize) ofs = fs->fsize;	/* Clip offset with the file size */
                 _0x600D2:
000fd6 01d8      	MOVW R26,R16
000fd7 965c      	ADIW R26,28
000fd8 940e 16f3 	CALL SUBOPT_0x66
000fda 940e 18e5 	CALL __CPD12
000fdc f440      	BRSH _0x600D3
000fdd 01d8      	MOVW R26,R16
000fde 965c      	ADIW R26,28
000fdf 940e 1862 	CALL __GETD1P
                +
000fe1 8bea     +STD Y + 18 , R30
000fe2 8bfb     +STD Y + 18 + 1 , R31
000fe3 8b6c     +STD Y + 18 + 2 , R22
000fe4 8b7d     +STD Y + 18 + 3 , R23
                 	__PUTD1S 18
                 ; 0003 030F 	ifptr = fs->fptr;
                 _0x600D3:
000fe5 01d8      	MOVW R26,R16
000fe6 9658      	ADIW R26,24
000fe7 940e 15b8 	CALL SUBOPT_0x39
                 ; 0003 0310 	fs->fptr = 0;
000fe9 01d8      	MOVW R26,R16
000fea 9658      	ADIW R26,24
000feb 940e 1603 	CALL SUBOPT_0x44
                 ; 0003 0311 	if (ofs > 0) {
000fed 940e 16fa 	CALL SUBOPT_0x67
000fef 940e 18df 	CALL __CPD02
000ff1 f008      	BRLO PC+2
000ff2 c0af      	RJMP _0x600D4
                 ; 0003 0312 		bcs = (DWORD)fs->csize * 512;	/* Cluster size (byte) */
000ff3 01f8      	MOVW R30,R16
000ff4 940e 1653 	CALL SUBOPT_0x51
000ff6 940e 1549 	CALL SUBOPT_0x26
                +
000ff8 87ea     +STD Y + 10 , R30
000ff9 87fb     +STD Y + 10 + 1 , R31
000ffa 876c     +STD Y + 10 + 2 , R22
000ffb 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
                 ; 0003 0313 		if (ifptr > 0 &&
                 ; 0003 0314 			(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
000ffc 940e 15a9 	CALL SUBOPT_0x36
000ffe 940e 18df 	CALL __CPD02
001000 f498      	BRSH _0x600D6
001001 940e 16ff 	CALL SUBOPT_0x68
001003 940e 1704 	CALL SUBOPT_0x69
001005 937f      	PUSH R23
001006 936f      	PUSH R22
001007 93ff      	PUSH R31
001008 93ef      	PUSH R30
001009 940e 152e 	CALL SUBOPT_0x21
00100b 940e 1704 	CALL SUBOPT_0x69
00100d 91af      	POP  R26
00100e 91bf      	POP  R27
00100f 918f      	POP  R24
001010 919f      	POP  R25
001011 940e 18ea 	CALL __CPD21
001013 f408      	BRSH _0x600D7
                 _0x600D6:
001014 c023      	RJMP _0x600D5
                 _0x600D7:
                 ; 0003 0315 			fs->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
001015 940e 152e 	CALL SUBOPT_0x21
001017 940e 170e 	CALL SUBOPT_0x6A
001019 01df      	MOVW R26,R30
00101a 01cb      	MOVW R24,R22
00101b 940e 150d 	CALL SUBOPT_0x1C
00101d 940e 170e 	CALL SUBOPT_0x6A
00101f 940e 17fd 	CALL __COMD1
001021 940e 17bd 	CALL __ANDD12
                +
001023 01d8     +MOVW R26 , R16
001024 9658     +ADIW R26 , 24
001025 940e 186d+CALL __PUTDP1
                 	__PUTD1RNS 16,24
                 ; 0003 0316 			ofs -= fs->fptr;
001027 01d8      	MOVW R26,R16
001028 9658      	ADIW R26,24
001029 940e 16f3 	CALL SUBOPT_0x66
00102b 940e 17b8 	CALL __SUBD21
                +
00102d 8baa     +STD Y + 18 , R26
00102e 8bbb     +STD Y + 18 + 1 , R27
00102f 8b8c     +STD Y + 18 + 2 , R24
001030 8b9d     +STD Y + 18 + 3 , R25
                 	__PUTD2S 18
                 ; 0003 0317 			clst = fs->curr_clust;
001031 01d8      	MOVW R26,R16
001032 9694      	ADIW R26,36
001033 940e 1862 	CALL __GETD1P
001035 940e 16af 	CALL SUBOPT_0x5E
                 ; 0003 0318 		} else {							/* When seek to back cluster, */
001037 c008      	RJMP _0x600D8
                 _0x600D5:
                 ; 0003 0319 			clst = fs->org_clust;			/* start from the first cluster */
001038 01d8      	MOVW R26,R16
001039 9690      	ADIW R26,32
00103a 940e 1862 	CALL __GETD1P
00103c 940e 16af 	CALL SUBOPT_0x5E
                 ; 0003 031A 			fs->curr_clust = clst;
00103e 940e 1713 	CALL SUBOPT_0x6B
                 ; 0003 031B 		}
                 _0x600D8:
                 ; 0003 031C 		while (ofs > bcs) {				/* Cluster following loop */
                 _0x600D9:
001040 940e 150d 	CALL SUBOPT_0x1C
001042 940e 16fa 	CALL SUBOPT_0x67
001044 940e 18e5 	CALL __CPD12
001046 f560      	BRSH _0x600DB
                 ; 0003 031D 			clst = get_fat(clst);		/* Follow cluster chain */
001047 940e 158e 	CALL SUBOPT_0x31
001049 940e 0814 	CALL _get_fat_G003
00104b 940e 16af 	CALL SUBOPT_0x5E
                 ; 0003 031E 			if (clst <= 1 || clst >= fs->max_clust) goto fe_abort;
00104d 940e 158e 	CALL SUBOPT_0x31
00104f 940e 1561 	CALL SUBOPT_0x2B
001051 f048      	BRLO _0x600DD
001052 01d8      	MOVW R26,R16
001053 9618      	ADIW R26,8
001054 940e 1862 	CALL __GETD1P
001056 940e 158e 	CALL SUBOPT_0x31
001058 940e 18ea 	CALL __CPD21
00105a f008      	BRLO _0x600DC
                 _0x600DD:
00105b c048      	RJMP _0x600DF
                 ; 0003 031F 			fs->curr_clust = clst;
                 _0x600DC:
00105c 940e 1713 	CALL SUBOPT_0x6B
                 ; 0003 0320 			fs->fptr += bcs;
00105e 01f8      	MOVW R30,R16
00105f 940e 169e 	CALL SUBOPT_0x5B
001061 940e 1512 	CALL SUBOPT_0x1D
001063 940e 17a9 	CALL __ADDD12
001065 01d0      	MOVW R26,R0
001066 940e 186d 	CALL __PUTDP1
                 ; 0003 0321 			ofs -= bcs;
001068 940e 1512 	CALL SUBOPT_0x1D
00106a 940e 16ff 	CALL SUBOPT_0x68
00106c 940e 17b3 	CALL __SUBD12
                +
00106e 8bea     +STD Y + 18 , R30
00106f 8bfb     +STD Y + 18 + 1 , R31
001070 8b6c     +STD Y + 18 + 2 , R22
001071 8b7d     +STD Y + 18 + 3 , R23
                 	__PUTD1S 18
                 ; 0003 0322 		}
001072 cfcd      	RJMP _0x600D9
                 _0x600DB:
                 ; 0003 0323 		fs->fptr += ofs;
001073 01f8      	MOVW R30,R16
001074 940e 169e 	CALL SUBOPT_0x5B
001076 940e 16fa 	CALL SUBOPT_0x67
001078 940e 17a9 	CALL __ADDD12
00107a 01d0      	MOVW R26,R0
00107b 940e 186d 	CALL __PUTDP1
                 ; 0003 0324 		sect = clust2sect(clst);		/* Current sector */
00107d 940e 158e 	CALL SUBOPT_0x31
00107f d85b      	RCALL _clust2sect_G003
001080 940e 14d7 	CALL SUBOPT_0x14
                 ; 0003 0325 		if (!sect) goto fe_abort;
001082 940e 14d2 	CALL SUBOPT_0x13
001084 940e 18d7 	CALL __CPD10
001086 f0e9      	BREQ _0x600DF
                 ; 0003 0326 		fs->csect = (BYTE)(ofs / 512);	/* Sector offset in the cluster */
001087 940e 16fa 	CALL SUBOPT_0x67
                +
001089 e0e0     +LDI R30 , LOW ( 0x200 )
00108a e0f2     +LDI R31 , HIGH ( 0x200 )
00108b e060     +LDI R22 , BYTE3 ( 0x200 )
00108c e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
00108d 940e 1835 	CALL __DIVD21U
                +
00108f 01d8     +MOVW R26 , R16
001090 9613     +ADIW R26 , 3
001091 93ec     +ST X , R30
                 	__PUTB1RNS 16,3
                 ; 0003 0327 		if (ofs % 512)
001092 940e 16ff 	CALL SUBOPT_0x68
001094 70f1      	ANDI R31,HIGH(0x1FF)
001095 9730      	SBIW R30,0
001096 f059      	BREQ _0x600E1
                 ; 0003 0328 			fs->dsect = sect + fs->csect++;
001097 01d8      	MOVW R26,R16
001098 940e 168d 	CALL SUBOPT_0x58
00109a 940e 14dc 	CALL SUBOPT_0x15
00109c 940e 1694 	CALL SUBOPT_0x59
                +
00109e 01d8     +MOVW R26 , R16
00109f 9698     +ADIW R26 , 40
0010a0 940e 186d+CALL __PUTDP1
                 	__PUTD1RNS 16,40
                 ; 0003 0329 	}
                 _0x600E1:
                 ; 0003 032A 
                 ; 0003 032B 	return FR_OK;
                 _0x600D4:
0010a2 e0e0      	LDI  R30,LOW(0)
0010a3 c003      	RJMP _0x20C0006
                 ; 0003 032C 
                 ; 0003 032D fe_abort:
                 _0x600DF:
                 ; 0003 032E 	fs->flag = 0;
0010a4 01d8      	MOVW R26,R16
0010a5 940e 16a4 	CALL SUBOPT_0x5C
                 ; 0003 032F 	return FR_DISK_ERR;
                 _0x20C0006:
0010a7 8119      	LDD  R17,Y+1
0010a8 8108      	LDD  R16,Y+0
0010a9 9666      	ADIW R28,22
0010aa 9508      	RET
                 ; 0003 0330 }
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Create a Directroy Object                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_DIR
                 ;
                 ;FRESULT pf_opendir (
                 ; 0003 033B 	DIR *dj,			/* Pointer to directory object to create */
                 ; 0003 033C 	const char *path	/* Pointer to the directory path */
                 ; 0003 033D )
                 ; 0003 033E {
                 _pf_opendir:
                 ; .FSTART _pf_opendir
                 ; 0003 033F 	FRESULT res;
                 ; 0003 0340 	BYTE sp[12], dir[32];
                 ; 0003 0341 	FATFS *fs = FatFs;
                 ; 0003 0342 
                 ; 0003 0343 
                 ; 0003 0344 	if (!fs) {				/* Check file system */
0010ab 93ba      	ST   -Y,R27
0010ac 93aa      	ST   -Y,R26
0010ad 97ac      	SBIW R28,44
0010ae 940e 15bb 	CALL SUBOPT_0x3A
                 ;	*dj -> Y+50
                 ;	*path -> Y+48
                 ;	res -> R17
                 ;	sp -> Y+36
                 ;	dir -> Y+4
                 ;	*fs -> R18,R19
0010b0 2e02      	MOV  R0,R18
0010b1 2a03      	OR   R0,R19
0010b2 f411      	BRNE _0x600E2
                 ; 0003 0345 		res = FR_NOT_ENABLED;
0010b3 e016      	LDI  R17,LOW(6)
                 ; 0003 0346 	} else {
0010b4 c025      	RJMP _0x600E3
                 _0x600E2:
                 ; 0003 0347 		fs->buf = dir;
0010b5 940e 1662 	CALL SUBOPT_0x53
                 ; 0003 0348 		dj->fn = sp;
                +
0010b7 a9aa     +LDD R26 , Y + 50
0010b8 a9bb     +LDD R27 , Y + 50 + 1
0010b9 9612     +ADIW R26 , 2
0010ba 93ed     +ST X + , R30
0010bb 93fc     +ST X , R31
                 	__PUTW1SNS 50,2
                 ; 0003 0349 		res = follow_path(dj, path);			/* Follow the path to the directory */
0010bc 940e 1719 	CALL SUBOPT_0x6C
0010be da81      	RCALL _follow_path_G003
0010bf 2f1e      	MOV  R17,R30
                 ; 0003 034A 		if (res == FR_OK) {						/* Follow completed */
0010c0 3010      	CPI  R17,0
0010c1 f4a9      	BRNE _0x600E4
                 ; 0003 034B 			if (dir[0]) {						/* It is not the root dir */
0010c2 81ec      	LDD  R30,Y+4
0010c3 30e0      	CPI  R30,0
0010c4 f061      	BREQ _0x600E5
                 ; 0003 034C 				if (dir[DIR_Attr] & AM_DIR) {	/* The object is a directory */
0010c5 85ef      	LDD  R30,Y+15
0010c6 71e0      	ANDI R30,LOW(0x10)
0010c7 f041      	BREQ _0x600E6
                 ; 0003 034D 					dj->sclust =
                 ; 0003 034E #if _FS_FAT32
                 ; 0003 034F 					((DWORD)LD_WORD(dir+DIR_FstClusHI) << 16) |
                 ; 0003 0350 #endif
                 ; 0003 0351 					LD_WORD(dir+DIR_FstClusLO);
0010c8 940e 166b 	CALL SUBOPT_0x54
                +
0010ca a9aa     +LDD R26 , Y + 50
0010cb a9bb     +LDD R27 , Y + 50 + 1
0010cc 9614     +ADIW R26 , 4
0010cd 940e 186d+CALL __PUTDP1
                 	__PUTD1SNS 50,4
                 ; 0003 0352 				} else {						/* The object is not a directory */
0010cf c001      	RJMP _0x600E7
                 _0x600E6:
                 ; 0003 0353 					res = FR_NO_PATH;
0010d0 e014      	LDI  R17,LOW(4)
                 ; 0003 0354 				}
                 _0x600E7:
                 ; 0003 0355 			}
                 ; 0003 0356 			if (res == FR_OK)
                 _0x600E5:
0010d1 3010      	CPI  R17,0
0010d2 f421      	BRNE _0x600E8
                 ; 0003 0357 				res = dir_rewind(dj);			/* Rewind dir */
0010d3 a9aa      	LDD  R26,Y+50
0010d4 a9bb      	LDD  R27,Y+50+1
0010d5 d842      	RCALL _dir_rewind_G003
0010d6 2f1e      	MOV  R17,R30
                 ; 0003 0358 		}
                 _0x600E8:
                 ; 0003 0359 		if (res == FR_NO_FILE) res = FR_NO_PATH;
                 _0x600E4:
0010d7 3013      	CPI  R17,3
0010d8 f409      	BRNE _0x600E9
0010d9 e014      	LDI  R17,LOW(4)
                 ; 0003 035A 	}
                 _0x600E9:
                 _0x600E3:
                 ; 0003 035B 
                 ; 0003 035C 	return res;
0010da c036      	RJMP _0x20C0005
                 ; 0003 035D }
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read Directory Entry in Sequense                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT pf_readdir (
                 ; 0003 0367 	DIR *dj,			/* Pointer to the open directory object */
                 ; 0003 0368 	FILINFO *fno		/* Pointer to file information to return */
                 ; 0003 0369 )
                 ; 0003 036A {
                 _pf_readdir:
                 ; .FSTART _pf_readdir
                 ; 0003 036B 	FRESULT res;
                 ; 0003 036C 	BYTE sp[12], dir[32];
                 ; 0003 036D 	FATFS *fs = FatFs;
                 ; 0003 036E 
                 ; 0003 036F 
                 ; 0003 0370 	if (!fs) {				/* Check file system */
0010db 93ba      	ST   -Y,R27
0010dc 93aa      	ST   -Y,R26
0010dd 97ac      	SBIW R28,44
0010de 940e 15bb 	CALL SUBOPT_0x3A
                 ;	*dj -> Y+50
                 ;	*fno -> Y+48
                 ;	res -> R17
                 ;	sp -> Y+36
                 ;	dir -> Y+4
                 ;	*fs -> R18,R19
0010e0 2e02      	MOV  R0,R18
0010e1 2a03      	OR   R0,R19
0010e2 f411      	BRNE _0x600EA
                 ; 0003 0371 		res = FR_NOT_ENABLED;
0010e3 e016      	LDI  R17,LOW(6)
                 ; 0003 0372 	} else {
0010e4 c02c      	RJMP _0x600EB
                 _0x600EA:
                 ; 0003 0373 		fs->buf = dir;
0010e5 940e 1662 	CALL SUBOPT_0x53
                 ; 0003 0374 		dj->fn = sp;
                +
0010e7 a9aa     +LDD R26 , Y + 50
0010e8 a9bb     +LDD R27 , Y + 50 + 1
0010e9 9612     +ADIW R26 , 2
0010ea 93ed     +ST X + , R30
0010eb 93fc     +ST X , R31
                 	__PUTW1SNS 50,2
                 ; 0003 0375 		if (!fno) {
0010ec a9e8      	LDD  R30,Y+48
0010ed a9f9      	LDD  R31,Y+48+1
0010ee 9730      	SBIW R30,0
0010ef f431      	BRNE _0x600EC
                 ; 0003 0376 			res = dir_rewind(dj);
0010f0 a9aa      	LDD  R26,Y+50
0010f1 a9bb      	LDD  R27,Y+50+1
0010f2 940e 0918 	CALL _dir_rewind_G003
0010f4 2f1e      	MOV  R17,R30
                 ; 0003 0377 		} else {
0010f5 c01b      	RJMP _0x600ED
                 _0x600EC:
                 ; 0003 0378 			res = dir_read(dj);
0010f6 a9aa      	LDD  R26,Y+50
0010f7 a9bb      	LDD  R27,Y+50+1
0010f8 d92c      	RCALL _dir_read_G003
0010f9 2f1e      	MOV  R17,R30
                 ; 0003 0379 			if (res == FR_NO_FILE) {
0010fa 3013      	CPI  R17,3
0010fb f429      	BRNE _0x600EE
                 ; 0003 037A 				dj->sect = 0;
0010fc a9aa      	LDD  R26,Y+50
0010fd a9bb      	LDD  R27,Y+50+1
0010fe 940e 15e7 	CALL SUBOPT_0x40
                 ; 0003 037B 				res = FR_OK;
001100 e010      	LDI  R17,LOW(0)
                 ; 0003 037C 			}
                 ; 0003 037D 			if (res == FR_OK) {				/* A valid entry is found */
                 _0x600EE:
001101 3010      	CPI  R17,0
001102 f471      	BRNE _0x600EF
                 ; 0003 037E 				get_fileinfo(dj, fno);		/* Get the object information */
001103 940e 1719 	CALL SUBOPT_0x6C
001105 d9d9      	RCALL _get_fileinfo_G003
                 ; 0003 037F 				res = dir_next(dj);			/* Increment index for next */
001106 a9aa      	LDD  R26,Y+50
001107 a9bb      	LDD  R27,Y+50+1
001108 d85f      	RCALL _dir_next_G003
001109 2f1e      	MOV  R17,R30
                 ; 0003 0380 				if (res == FR_NO_FILE) {
00110a 3013      	CPI  R17,3
00110b f429      	BRNE _0x600F0
                 ; 0003 0381 					dj->sect = 0;
00110c a9aa      	LDD  R26,Y+50
00110d a9bb      	LDD  R27,Y+50+1
00110e 940e 15e7 	CALL SUBOPT_0x40
                 ; 0003 0382 					res = FR_OK;
001110 e010      	LDI  R17,LOW(0)
                 ; 0003 0383 				}
                 ; 0003 0384 			}
                 _0x600F0:
                 ; 0003 0385 		}
                 _0x600EF:
                 _0x600ED:
                 ; 0003 0386 	}
                 _0x600EB:
                 ; 0003 0387 
                 ; 0003 0388 	return res;
                 _0x20C0005:
001111 2fe1      	MOV  R30,R17
001112 940e 18f8 	CALL __LOADLOCR4
001114 96e4      	ADIW R28,52
001115 9508      	RET
                 ; 0003 0389 }
                 ; .FEND
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Rename file inside provided directory to 11 chars filename 8+3.       */
                 ;/*-----------------------------------------------------------------------*/
                 ;FRESULT pf_rename11 (
                 ; 0003 0390     const char* dirname,
                 ; 0003 0391     const char* oldname,
                 ; 0003 0392     const char* newname
                 ; 0003 0393 )
                 ; 0003 0394 {
                 _pf_rename11:
                 ; .FSTART _pf_rename11
                 ; 0003 0395     FRESULT res;
                 ; 0003 0396     FILINFO fno;
                 ; 0003 0397     DIR dir;
                 ; 0003 0398     int i,j;
                 ; 0003 0399     BYTE rwbuf[512];
                 ; 0003 039A     //open directory structure
                 ; 0003 039B     res = pf_opendir(&dir, dirname);
001116 93ba      	ST   -Y,R27
001117 93aa      	ST   -Y,R26
001118 97a6      	SBIW R28,38
001119 50d2      	SUBI R29,2
00111a 940e 18ef 	CALL __SAVELOCR6
                 ;	*dirname -> Y+560
                 ;	*oldname -> Y+558
                 ;	*newname -> Y+556
                 ;	res -> R17
                 ;	fno -> Y+534
                 ;	dir -> Y+518
                 ;	i -> R18,R19
                 ;	j -> R20,R21
                 ;	rwbuf -> Y+6
00111c 940e 1720 	CALL SUBOPT_0x6D
00111e 940e 1726 	CALL SUBOPT_0x6E
                 ; 0003 039C     if (res == FR_OK) {
001120 f009      	BREQ PC+2
001121 c0a4      	RJMP _0x600F1
                 ; 0003 039D         i = strlen(oldname);//save old flename length
001122 940e 1731 	CALL SUBOPT_0x6F
001124 940e 1386 	CALL _strlen
001126 019f      	MOVW R18,R30
                 ; 0003 039E         for (;;) {
                 _0x600F3:
                 ; 0003 039F             res = pf_readdir(&dir, &fno);
001127 940e 1720 	CALL SUBOPT_0x6D
001129 940e 1738 	CALL SUBOPT_0x70
                 ; 0003 03A0             if (res != FR_OK || fno.fname[0] == 0){
00112b f431      	BRNE _0x600F6
00112c 01fe      	MOVW R30,R28
00112d 5eea      	SUBI R30,LOW(-(534))
00112e 4ffd      	SBCI R31,HIGH(-(534))
00112f 85a1      	LDD  R26,Z+9
001130 30a0      	CPI  R26,LOW(0x0)
001131 f411      	BRNE _0x600F5
                 _0x600F6:
                 ; 0003 03A1                 res=FR_NO_FILE;
001132 e013      	LDI  R17,LOW(3)
                 ; 0003 03A2                 break;
001133 c069      	RJMP _0x600F4
                 ; 0003 03A3             }
                 ; 0003 03A4             for(j=0;j<i;j++){//check compare the oldname chars to filename read from directory
                 _0x600F5:
                +
001134 e040     +LDI R20 , LOW ( 0 )
001135 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x600F9:
                +
001136 1742     +CP R20 , R18
001137 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
001138 f474      	BRGE _0x600FA
                 ; 0003 03A5                 if(fno.fname[j] != oldname[j]){
001139 940e 1740 	CALL SUBOPT_0x71
00113b 940e 1731 	CALL SUBOPT_0x6F
00113d 0fae      	ADD  R26,R30
00113e 1fbf      	ADC  R27,R31
00113f 91ec      	LD   R30,X
001140 15e1      	CP   R30,R1
001141 f011      	BREQ _0x600FB
                 ; 0003 03A6                     res=FR_NO_FILE;
001142 e013      	LDI  R17,LOW(3)
                 ; 0003 03A7                     break;//if not match -> read next filename in directory
001143 c003      	RJMP _0x600FA
                 ; 0003 03A8                 }
                 ; 0003 03A9             }
                 _0x600FB:
                +
001144 5f4f     +SUBI R20 , LOW ( - 1 )
001145 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
001146 cfef      	RJMP _0x600F9
                 _0x600FA:
                 ; 0003 03AA             //on old filename part match, read the filenames sector to buffer[512] and replace the old filename with new ...
                 ; 0003 03AB             if(i==j){
                +
001147 1742     +CP R20 , R18
001148 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
001149 f009      	BREQ PC+2
00114a c050      	RJMP _0x600FC
                 ; 0003 03AC                //read sector on found filename
                 ; 0003 03AD                res = disk_readp(rwbuf,dir.sect,0,512);
00114b 01fe      	MOVW R30,R28
00114c 9636      	ADIW R30,6
00114d 93fa      	ST   -Y,R31
00114e 93ea      	ST   -Y,R30
00114f 940e 1749 	CALL SUBOPT_0x72
001151 940e 1893 	CALL __PUTPARD1
001153 940e 1470 	CALL SUBOPT_0x5
001155 e0a0      	LDI  R26,LOW(512)
001156 e0b2      	LDI  R27,HIGH(512)
001157 940e 0701 	CALL _disk_readp
001159 2f1e      	MOV  R17,R30
                 ; 0003 03AE                if (res != FR_OK) break;
00115a 3010      	CPI  R17,0
00115b f009      	BREQ _0x600FD
00115c c040      	RJMP _0x600F4
                 ; 0003 03AF                i = strlen(newname);//save new flename length
                 _0x600FD:
00115d 940e 1751 	CALL SUBOPT_0x73
00115f 940e 1386 	CALL _strlen
001161 019f      	MOVW R18,R30
                 ; 0003 03B0                //replace the old name with new on accoding to index of filename in directory sector
                 ; 0003 03B1                for(j=0;j<11;j++){
                +
001162 e040     +LDI R20 , LOW ( 0 )
001163 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x600FF:
                +
001164 304b     +CPI R20 , LOW ( 11 )
001165 e0e0     +LDI R30 , HIGH ( 11 )
001166 075e     +CPC R21 , R30
                 	__CPWRN 20,21,11
001167 f4cc      	BRGE _0x60100
                 ; 0003 03B2                   if(j<i){
                +
001168 1742     +CP R20 , R18
001169 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
00116a f46c      	BRGE _0x60101
                 ; 0003 03B3                     rwbuf[((dir.index-1)*32)%512+j]=newname[j];
00116b 940e 1758 	CALL SUBOPT_0x74
00116d 0fea      	ADD  R30,R26
00116e 1ffb      	ADC  R31,R27
00116f 01bf      	MOVW R22,R30
001170 01fa      	MOVW R30,R20
001171 940e 1751 	CALL SUBOPT_0x73
001173 0fae      	ADD  R26,R30
001174 1fbf      	ADC  R27,R31
001175 91ec      	LD   R30,X
001176 01db      	MOVW R26,R22
001177 c005      	RJMP _0x60116
                 ; 0003 03B4                   }
                 ; 0003 03B5                   else{
                 _0x60101:
                 ; 0003 03B6                     rwbuf[((dir.index-1)*32)%512+j]=' ';//fill spaces rest of chars
001178 940e 1758 	CALL SUBOPT_0x74
00117a 0fae      	ADD  R26,R30
00117b 1fbf      	ADC  R27,R31
00117c e2e0      	LDI  R30,LOW(32)
                 _0x60116:
00117d 93ec      	ST   X,R30
                 ; 0003 03B7                   }
                 ; 0003 03B8                }
                +
00117e 5f4f     +SUBI R20 , LOW ( - 1 )
00117f 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
001180 cfe3      	RJMP _0x600FF
                 _0x60100:
                 ; 0003 03B9                //write the sector with new filename
                 ; 0003 03BA                res = disk_writep(0,dir.sect);
001181 940e 1470 	CALL SUBOPT_0x5
001183 940e 1749 	CALL SUBOPT_0x72
001185 01df      	MOVW R26,R30
001186 01cb      	MOVW R24,R22
001187 940e 1769 	CALL SUBOPT_0x75
                 ; 0003 03BB                if (res != FR_OK) break;
001189 f499      	BRNE _0x600F4
                 ; 0003 03BC                res = disk_writep(rwbuf,512);
00118a 01fe      	MOVW R30,R28
00118b 9636      	ADIW R30,6
00118c 93fa      	ST   -Y,R31
00118d 93ea      	ST   -Y,R30
00118e 940e 153f 	CALL SUBOPT_0x24
001190 940e 1769 	CALL SUBOPT_0x75
                 ; 0003 03BD                if (res != FR_OK) break;
001192 f451      	BRNE _0x600F4
                 ; 0003 03BE                res = disk_writep(0,0);
001193 940e 1470 	CALL SUBOPT_0x5
001195 940e 153a 	CALL SUBOPT_0x23
001197 940e 1769 	CALL SUBOPT_0x75
                 ; 0003 03BF                if (res != FR_OK) break;
001199 f419      	BRNE _0x600F4
                 ; 0003 03C0                break;//exit for loop
00119a c002      	RJMP _0x600F4
                 ; 0003 03C1             }
                 ; 0003 03C2             else{
                 _0x600FC:
                 ; 0003 03C3                res=FR_NO_FILE;
00119b e013      	LDI  R17,LOW(3)
                 ; 0003 03C4             }
                 ; 0003 03C5         }
00119c cf8a      	RJMP _0x600F3
                 _0x600F4:
                 ; 0003 03C6        if (res != FR_OK) return res;
00119d 3010      	CPI  R17,0
00119e f539      	BRNE _0x20C0004
                 ; 0003 03C7         //open the dir and read/check the new filename is found
                 ; 0003 03C8        res = pf_opendir(&dir, dirname);
00119f 940e 1720 	CALL SUBOPT_0x6D
0011a1 940e 1726 	CALL SUBOPT_0x6E
                 ; 0003 03C9        if (res != FR_OK) return res;//break;
0011a3 f511      	BRNE _0x20C0004
                 ; 0003 03CA        //read filenames in directory and compare to new filename
                 ; 0003 03CB        for(;;){
                 _0x6010A:
                 ; 0003 03CC            res = pf_readdir(&dir, &fno);
0011a4 940e 1720 	CALL SUBOPT_0x6D
0011a6 940e 1738 	CALL SUBOPT_0x70
                 ; 0003 03CD            if (res != FR_OK || fno.fname[0] == 0) break;
0011a8 f431      	BRNE _0x6010D
0011a9 01fe      	MOVW R30,R28
0011aa 5eea      	SUBI R30,LOW(-(534))
0011ab 4ffd      	SBCI R31,HIGH(-(534))
0011ac 85a1      	LDD  R26,Z+9
0011ad 30a0      	CPI  R26,LOW(0x0)
0011ae f409      	BRNE _0x6010C
                 _0x6010D:
0011af c016      	RJMP _0x6010B
                 ; 0003 03CE            for(j=0;j<i;j++){
                 _0x6010C:
                +
0011b0 e040     +LDI R20 , LOW ( 0 )
0011b1 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x60110:
                +
0011b2 1742     +CP R20 , R18
0011b3 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
0011b4 f474      	BRGE _0x60111
                 ; 0003 03CF                 if(fno.fname[j] != newname[j]){
0011b5 940e 1740 	CALL SUBOPT_0x71
0011b7 940e 1751 	CALL SUBOPT_0x73
0011b9 0fae      	ADD  R26,R30
0011ba 1fbf      	ADC  R27,R31
0011bb 91ec      	LD   R30,X
0011bc 15e1      	CP   R30,R1
0011bd f011      	BREQ _0x60112
                 ; 0003 03D0                     res = FR_NO_FILE;
0011be e013      	LDI  R17,LOW(3)
                 ; 0003 03D1                     break;//read next filename if not match
0011bf c003      	RJMP _0x60111
                 ; 0003 03D2                     //return FR_NO_FILE;
                 ; 0003 03D3                 }
                 ; 0003 03D4            }
                 _0x60112:
                +
0011c0 5f4f     +SUBI R20 , LOW ( - 1 )
0011c1 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
0011c2 cfef      	RJMP _0x60110
                 _0x60111:
                 ; 0003 03D5            if(i==j){
                +
0011c3 1742     +CP R20 , R18
0011c4 0753     +CPC R21 , R19
                 	__CPWRR 20,21,18,19
0011c5 f6f1      	BRNE _0x6010A
                 ; 0003 03D6               break;//exit for loop on match read new filename
                 ; 0003 03D7            }
                 ; 0003 03D8        }
                 _0x6010B:
                 ; 0003 03D9     }
                 ; 0003 03DA 
                 ; 0003 03DB     return res;
                 _0x600F1:
                 _0x20C0004:
0011c6 2fe1      	MOV  R30,R17
0011c7 940e 18f6 	CALL __LOADLOCR6
0011c9 96e2      	ADIW R28,50
0011ca 5fde      	SUBI R29,-2
0011cb 9508      	RET
                 ; 0003 03DC }
                 ; .FEND
                 ;#endif /* _USE_DIR */
                 ;
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 
                 	.CSEG
                 _putchar:
                 ; .FSTART _putchar
0011cc 93aa      	ST   -Y,R26
                 putchar0:
0011cd 9b5d           sbis usr,udre
0011ce cffe           rjmp putchar0
0011cf 81e8           ld   r30,y
0011d0 b9ec           out  udr,r30
0011d1 940c 1448 	JMP  _0x20C0001
                 ; .FEND
                 _put_usart_G100:
                 ; .FSTART _put_usart_G100
0011d3 93ba      	ST   -Y,R27
0011d4 93aa      	ST   -Y,R26
0011d5 81aa      	LDD  R26,Y+2
0011d6 dff5      	RCALL _putchar
0011d7 81a8      	LD   R26,Y
0011d8 81b9      	LDD  R27,Y+1
0011d9 91ed      	LD   R30,X+
0011da 91fd      	LD   R31,X+
0011db 9631      	ADIW R30,1
0011dc 93fe      	ST   -X,R31
0011dd 93ee      	ST   -X,R30
0011de 940c 1407 	JMP  _0x20C0002
                 ; .FEND
                 __print_G100:
                 ; .FSTART __print_G100
0011e0 93ba      	ST   -Y,R27
0011e1 93aa      	ST   -Y,R26
0011e2 9728      	SBIW R28,8
0011e3 940e 18ef 	CALL __SAVELOCR6
0011e5 e010      	LDI  R17,0
0011e6 85ae      	LDD  R26,Y+14
0011e7 85bf      	LDD  R27,Y+14+1
0011e8 940e 15b3 	CALL SUBOPT_0x38
                 _0x2000016:
0011ea 01de      	MOVW R26,R28
0011eb 9654      	ADIW R26,20
0011ec 940e 176e 	CALL SUBOPT_0x76
                +
0011ee bf6b     +OUT RAMPZ , R22
0011ef 91e6     +ELPM R30 , Z
                 	__GETBRPF 30
0011f0 2f2e      	MOV  R18,R30
0011f1 30e0      	CPI  R30,0
0011f2 f409      	BRNE PC+2
0011f3 c12a      	RJMP _0x2000018
0011f4 2fe1      	MOV  R30,R17
0011f5 30e0      	CPI  R30,0
0011f6 f439      	BRNE _0x200001C
0011f7 3225      	CPI  R18,37
0011f8 f411      	BRNE _0x200001D
0011f9 e011      	LDI  R17,LOW(1)
0011fa c002      	RJMP _0x200001E
                 _0x200001D:
0011fb 940e 1774 	CALL SUBOPT_0x77
                 _0x200001E:
0011fd c11f      	RJMP _0x200001B
                 _0x200001C:
0011fe 30e1      	CPI  R30,LOW(0x1)
0011ff f4a9      	BRNE _0x200001F
001200 3225      	CPI  R18,37
001201 f419      	BRNE _0x2000020
001202 940e 1774 	CALL SUBOPT_0x77
001204 c117      	RJMP _0x20000CC
                 _0x2000020:
001205 e012      	LDI  R17,LOW(2)
001206 e040      	LDI  R20,LOW(0)
001207 e000      	LDI  R16,LOW(0)
001208 322d      	CPI  R18,45
001209 f411      	BRNE _0x2000021
00120a e001      	LDI  R16,LOW(1)
00120b c111      	RJMP _0x200001B
                 _0x2000021:
00120c 322b      	CPI  R18,43
00120d f411      	BRNE _0x2000022
00120e e24b      	LDI  R20,LOW(43)
00120f c10d      	RJMP _0x200001B
                 _0x2000022:
001210 3220      	CPI  R18,32
001211 f411      	BRNE _0x2000023
001212 e240      	LDI  R20,LOW(32)
001213 c109      	RJMP _0x200001B
                 _0x2000023:
001214 c002      	RJMP _0x2000024
                 _0x200001F:
001215 30e2      	CPI  R30,LOW(0x2)
001216 f439      	BRNE _0x2000025
                 _0x2000024:
001217 e050      	LDI  R21,LOW(0)
001218 e013      	LDI  R17,LOW(3)
001219 3320      	CPI  R18,48
00121a f411      	BRNE _0x2000026
00121b 6800      	ORI  R16,LOW(128)
00121c c100      	RJMP _0x200001B
                 _0x2000026:
00121d c003      	RJMP _0x2000027
                 _0x2000025:
00121e 30e3      	CPI  R30,LOW(0x3)
00121f f009      	BREQ PC+2
001220 c0fc      	RJMP _0x200001B
                 _0x2000027:
001221 3320      	CPI  R18,48
001222 f010      	BRLO _0x200002A
001223 332a      	CPI  R18,58
001224 f008      	BRLO _0x200002B
                 _0x200002A:
001225 c007      	RJMP _0x2000029
                 _0x200002B:
001226 e0aa      	LDI  R26,LOW(10)
001227 9f5a      	MUL  R21,R26
001228 2d50      	MOV  R21,R0
001229 2fe2      	MOV  R30,R18
00122a 53e0      	SUBI R30,LOW(48)
00122b 0f5e      	ADD  R21,R30
00122c c0f0      	RJMP _0x200001B
                 _0x2000029:
00122d 2fe2      	MOV  R30,R18
00122e 36e3      	CPI  R30,LOW(0x63)
00122f f449      	BRNE _0x200002F
001230 940e 177b 	CALL SUBOPT_0x78
001232 89ea      	LDD  R30,Y+18
001233 89fb      	LDD  R31,Y+18+1
001234 81a4      	LDD  R26,Z+4
001235 93aa      	ST   -Y,R26
001236 940e 1781 	CALL SUBOPT_0x79
001238 c0e3      	RJMP _0x2000030
                 _0x200002F:
001239 37e3      	CPI  R30,LOW(0x73)
00123a f461      	BRNE _0x2000032
00123b 940e 177b 	CALL SUBOPT_0x78
00123d 940e 1787 	CALL SUBOPT_0x7A
00123f 83ee      	STD  Y+6,R30
001240 83ff      	STD  Y+6+1,R31
001241 81ae      	LDD  R26,Y+6
001242 81bf      	LDD  R27,Y+6+1
001243 940e 1386 	CALL _strlen
001245 2f1e      	MOV  R17,R30
001246 c011      	RJMP _0x2000033
                 _0x2000032:
001247 37e0      	CPI  R30,LOW(0x70)
001248 f499      	BRNE _0x2000035
001249 940e 177b 	CALL SUBOPT_0x78
00124b 89aa      	LDD  R26,Y+18
00124c 89bb      	LDD  R27,Y+18+1
00124d 9614      	ADIW R26,4
00124e 940e 1862 	CALL __GETD1P
001250 940e 14d7 	CALL SUBOPT_0x14
001252 940e 14dc 	CALL SUBOPT_0x15
001254 940e 1392 	CALL _strlenf
001256 2f1e      	MOV  R17,R30
001257 6008      	ORI  R16,LOW(8)
                 _0x2000033:
001258 6002      	ORI  R16,LOW(2)
001259 770f      	ANDI R16,LOW(127)
00125a e030      	LDI  R19,LOW(0)
00125b c03a      	RJMP _0x2000036
                 _0x2000035:
00125c 36e4      	CPI  R30,LOW(0x64)
00125d f011      	BREQ _0x2000039
00125e 36e9      	CPI  R30,LOW(0x69)
00125f f411      	BRNE _0x200003A
                 _0x2000039:
001260 6004      	ORI  R16,LOW(4)
001261 c002      	RJMP _0x200003B
                 _0x200003A:
001262 37e5      	CPI  R30,LOW(0x75)
001263 f441      	BRNE _0x200003C
                 _0x200003B:
                +
001264 e5e0     +LDI R30 , LOW ( 2 * _tbl10_G100 + ( 0 ) )
001265 e0f1     +LDI R31 , HIGH ( 2 * _tbl10_G100 + ( 0 ) )
001266 e060     +LDI R22 , BYTE3 ( 2 * _tbl10_G100 + ( 0 ) )
001267 e070     +LDI R23 , BYTE4 ( 2 * _tbl10_G100 + ( 0 ) )
                 	__POINTD1FN _tbl10_G100,0
001268 940e 14d7 	CALL SUBOPT_0x14
00126a e015      	LDI  R17,LOW(5)
00126b c00e      	RJMP _0x200003D
                 _0x200003C:
00126c 35e8      	CPI  R30,LOW(0x58)
00126d f411      	BRNE _0x200003F
00126e 6008      	ORI  R16,LOW(8)
00126f c003      	RJMP _0x2000040
                 _0x200003F:
001270 37e8      	CPI  R30,LOW(0x78)
001271 f009      	BREQ PC+2
001272 c0a9      	RJMP _0x2000071
                 _0x2000040:
                +
001273 e5ea     +LDI R30 , LOW ( 2 * _tbl16_G100 + ( 0 ) )
001274 e0f1     +LDI R31 , HIGH ( 2 * _tbl16_G100 + ( 0 ) )
001275 e060     +LDI R22 , BYTE3 ( 2 * _tbl16_G100 + ( 0 ) )
001276 e070     +LDI R23 , BYTE4 ( 2 * _tbl16_G100 + ( 0 ) )
                 	__POINTD1FN _tbl16_G100,0
001277 940e 14d7 	CALL SUBOPT_0x14
001279 e014      	LDI  R17,LOW(4)
                 _0x200003D:
00127a ff02      	SBRS R16,2
00127b c014      	RJMP _0x2000042
00127c 940e 177b 	CALL SUBOPT_0x78
00127e 940e 1787 	CALL SUBOPT_0x7A
001280 87ec      	STD  Y+12,R30
001281 87fd      	STD  Y+12+1,R31
001282 85ad      	LDD  R26,Y+13
001283 23aa      	TST  R26
001284 f42a      	BRPL _0x2000043
001285 940e 17c7 	CALL __ANEGW1
001287 87ec      	STD  Y+12,R30
001288 87fd      	STD  Y+12+1,R31
001289 e24d      	LDI  R20,LOW(45)
                 _0x2000043:
00128a 3040      	CPI  R20,0
00128b f011      	BREQ _0x2000044
00128c 5f1f      	SUBI R17,-LOW(1)
00128d c001      	RJMP _0x2000045
                 _0x2000044:
00128e 7f0b      	ANDI R16,LOW(251)
                 _0x2000045:
00128f c006      	RJMP _0x2000046
                 _0x2000042:
001290 940e 177b 	CALL SUBOPT_0x78
001292 940e 1787 	CALL SUBOPT_0x7A
001294 87ec      	STD  Y+12,R30
001295 87fd      	STD  Y+12+1,R31
                 _0x2000046:
                 _0x2000036:
001296 fd00      	SBRC R16,0
001297 c011      	RJMP _0x2000047
                 _0x2000048:
001298 1715      	CP   R17,R21
001299 f478      	BRSH _0x200004A
00129a ff07      	SBRS R16,7
00129b c008      	RJMP _0x200004B
00129c ff02      	SBRS R16,2
00129d c004      	RJMP _0x200004C
00129e 7f0b      	ANDI R16,LOW(251)
00129f 2f24      	MOV  R18,R20
0012a0 5011      	SUBI R17,LOW(1)
0012a1 c001      	RJMP _0x200004D
                 _0x200004C:
0012a2 e320      	LDI  R18,LOW(48)
                 _0x200004D:
0012a3 c001      	RJMP _0x200004E
                 _0x200004B:
0012a4 e220      	LDI  R18,LOW(32)
                 _0x200004E:
0012a5 940e 1774 	CALL SUBOPT_0x77
0012a7 5051      	SUBI R21,LOW(1)
0012a8 cfef      	RJMP _0x2000048
                 _0x200004A:
                 _0x2000047:
0012a9 2f31      	MOV  R19,R17
0012aa ff01      	SBRS R16,1
0012ab c018      	RJMP _0x200004F
                 _0x2000050:
0012ac 3030      	CPI  R19,0
0012ad f0a9      	BREQ _0x2000052
0012ae ff03      	SBRS R16,3
0012af c007      	RJMP _0x2000053
0012b0 01de      	MOVW R26,R28
0012b1 9616      	ADIW R26,6
0012b2 940e 176e 	CALL SUBOPT_0x76
                +
0012b4 bf6b     +OUT RAMPZ , R22
0012b5 9126     +ELPM R18 , Z
                 	__GETBRPF 18
0012b6 c005      	RJMP _0x2000054
                 _0x2000053:
0012b7 81ae      	LDD  R26,Y+6
0012b8 81bf      	LDD  R27,Y+6+1
0012b9 912d      	LD   R18,X+
0012ba 83ae      	STD  Y+6,R26
0012bb 83bf      	STD  Y+6+1,R27
                 _0x2000054:
0012bc 940e 1774 	CALL SUBOPT_0x77
0012be 3050      	CPI  R21,0
0012bf f009      	BREQ _0x2000055
0012c0 5051      	SUBI R21,LOW(1)
                 _0x2000055:
0012c1 5031      	SUBI R19,LOW(1)
0012c2 cfe9      	RJMP _0x2000050
                 _0x2000052:
0012c3 c04e      	RJMP _0x2000056
                 _0x200004F:
                 _0x2000058:
0012c4 e320      	LDI  R18,LOW(48)
0012c5 940e 14d2 	CALL SUBOPT_0x13
0012c7 940e 1877 	CALL __GETW1PF
0012c9 87ea      	STD  Y+10,R30
0012ca 87fb      	STD  Y+10+1,R31
0012cb 940e 14d2 	CALL SUBOPT_0x13
                +
0012cd 5fee     +SUBI R30 , LOW ( - 2 )
0012ce 4fff     +SBCI R31 , HIGH ( - 2 )
0012cf 4f6f     +SBCI R22 , BYTE3 ( - 2 )
0012d0 4f7f     +SBCI R23 , BYTE4 ( - 2 )
                 	__ADDD1N 2
0012d1 940e 14d7 	CALL SUBOPT_0x14
                 _0x200005A:
0012d3 85ea      	LDD  R30,Y+10
0012d4 85fb      	LDD  R31,Y+10+1
0012d5 85ac      	LDD  R26,Y+12
0012d6 85bd      	LDD  R27,Y+12+1
0012d7 17ae      	CP   R26,R30
0012d8 07bf      	CPC  R27,R31
0012d9 f050      	BRLO _0x200005C
0012da 5f2f      	SUBI R18,-LOW(1)
0012db 85aa      	LDD  R26,Y+10
0012dc 85bb      	LDD  R27,Y+10+1
0012dd 85ec      	LDD  R30,Y+12
0012de 85fd      	LDD  R31,Y+12+1
0012df 1bea      	SUB  R30,R26
0012e0 0bfb      	SBC  R31,R27
0012e1 87ec      	STD  Y+12,R30
0012e2 87fd      	STD  Y+12+1,R31
0012e3 cfef      	RJMP _0x200005A
                 _0x200005C:
0012e4 332a      	CPI  R18,58
0012e5 f028      	BRLO _0x200005D
0012e6 ff03      	SBRS R16,3
0012e7 c002      	RJMP _0x200005E
0012e8 5f29      	SUBI R18,-LOW(7)
0012e9 c001      	RJMP _0x200005F
                 _0x200005E:
0012ea 5d29      	SUBI R18,-LOW(39)
                 _0x200005F:
                 _0x200005D:
0012eb fd04      	SBRC R16,4
0012ec c01a      	RJMP _0x2000061
0012ed 3321      	CPI  R18,49
0012ee f420      	BRSH _0x2000063
0012ef 85aa      	LDD  R26,Y+10
0012f0 85bb      	LDD  R27,Y+10+1
0012f1 9711      	SBIW R26,1
0012f2 f409      	BRNE _0x2000062
                 _0x2000063:
0012f3 c009      	RJMP _0x20000CD
                 _0x2000062:
0012f4 1753      	CP   R21,R19
0012f5 f010      	BRLO _0x2000067
0012f6 ff00      	SBRS R16,0
0012f7 c001      	RJMP _0x2000068
                 _0x2000067:
0012f8 c013      	RJMP _0x2000066
                 _0x2000068:
0012f9 e220      	LDI  R18,LOW(32)
0012fa ff07      	SBRS R16,7
0012fb c00b      	RJMP _0x2000069
0012fc e320      	LDI  R18,LOW(48)
                 _0x20000CD:
0012fd 6100      	ORI  R16,LOW(16)
0012fe ff02      	SBRS R16,2
0012ff c007      	RJMP _0x200006A
001300 7f0b      	ANDI R16,LOW(251)
001301 934a      	ST   -Y,R20
001302 940e 1781 	CALL SUBOPT_0x79
001304 3050      	CPI  R21,0
001305 f009      	BREQ _0x200006B
001306 5051      	SUBI R21,LOW(1)
                 _0x200006B:
                 _0x200006A:
                 _0x2000069:
                 _0x2000061:
001307 940e 1774 	CALL SUBOPT_0x77
001309 3050      	CPI  R21,0
00130a f009      	BREQ _0x200006C
00130b 5051      	SUBI R21,LOW(1)
                 _0x200006C:
                 _0x2000066:
00130c 5031      	SUBI R19,LOW(1)
00130d 85aa      	LDD  R26,Y+10
00130e 85bb      	LDD  R27,Y+10+1
00130f 9712      	SBIW R26,2
001310 f008      	BRLO _0x2000059
001311 cfb2      	RJMP _0x2000058
                 _0x2000059:
                 _0x2000056:
001312 ff00      	SBRS R16,0
001313 c008      	RJMP _0x200006D
                 _0x200006E:
001314 3050      	CPI  R21,0
001315 f031      	BREQ _0x2000070
001316 5051      	SUBI R21,LOW(1)
001317 e2e0      	LDI  R30,LOW(32)
001318 93ea      	ST   -Y,R30
001319 940e 1781 	CALL SUBOPT_0x79
00131b cff8      	RJMP _0x200006E
                 _0x2000070:
                 _0x200006D:
                 _0x2000071:
                 _0x2000030:
                 _0x20000CC:
00131c e010      	LDI  R17,LOW(0)
                 _0x200001B:
00131d cecc      	RJMP _0x2000016
                 _0x2000018:
00131e 85ae      	LDD  R26,Y+14
00131f 85bf      	LDD  R27,Y+14+1
001320 940e 185e 	CALL __GETW1P
                 _0x20C0003:
001322 940e 18f6 	CALL __LOADLOCR6
001324 9668      	ADIW R28,24
001325 9508      	RET
                 ; .FEND
                 _printf:
                 ; .FSTART _printf
001326 92ff      	PUSH R15
001327 2ef8      	MOV  R15,R24
001328 9726      	SBIW R28,6
001329 931a      	ST   -Y,R17
00132a 930a      	ST   -Y,R16
00132b 01de      	MOVW R26,R28
00132c 9614      	ADIW R26,4
00132d 940e 17a5 	CALL __ADDW2R15
00132f 018d      	MOVW R16,R26
001330 e0e0      	LDI  R30,LOW(0)
001331 83ec      	STD  Y+4,R30
001332 83ed      	STD  Y+4+1,R30
001333 83ee      	STD  Y+6,R30
001334 83ef      	STD  Y+6+1,R30
001335 01de      	MOVW R26,R28
001336 9618      	ADIW R26,8
001337 940e 17a5 	CALL __ADDW2R15
001339 940e 1862 	CALL __GETD1P
00133b 940e 1893 	CALL __PUTPARD1
00133d 931a      	ST   -Y,R17
00133e 930a      	ST   -Y,R16
00133f ede3      	LDI  R30,LOW(_put_usart_G100)
001340 e1f1      	LDI  R31,HIGH(_put_usart_G100)
001341 93fa      	ST   -Y,R31
001342 93ea      	ST   -Y,R30
001343 01de      	MOVW R26,R28
001344 961a      	ADIW R26,10
001345 de9a      	RCALL __print_G100
001346 8119      	LDD  R17,Y+1
001347 8108      	LDD  R16,Y+0
001348 9628      	ADIW R28,8
001349 90ff      	POP  R15
00134a 9508      	RET
                 ; .FEND
                 
                 	.CSEG
                 _itoa:
                 ; .FSTART _itoa
00134b 93ba      	ST   -Y,R27
00134c 93aa      	ST   -Y,R26
00134d 91a9          ld   r26,y+
00134e 91b9          ld   r27,y+
00134f 91e9          ld   r30,y+
001350 91f9          ld   r31,y+
001351 9630          adiw r30,0
001352 f42a          brpl __itoa0
001353 95e0          com  r30
001354 95f0          com  r31
001355 9631          adiw r30,1
001356 e26d          ldi  r22,'-'
001357 936d          st   x+,r22
                 __itoa0:
001358 94e8          clt
001359 e180          ldi  r24,low(10000)
00135a e297          ldi  r25,high(10000)
00135b d00d          rcall __itoa1
00135c ee88          ldi  r24,low(1000)
00135d e093          ldi  r25,high(1000)
00135e d00a          rcall __itoa1
00135f e684          ldi  r24,100
001360 2799          clr  r25
001361 d007          rcall __itoa1
001362 e08a          ldi  r24,10
001363 d005          rcall __itoa1
001364 2f6e          mov  r22,r30
001365 d010          rcall __itoa5
001366 2766          clr  r22
001367 936c          st   x,r22
001368 9508          ret
                 
                 __itoa1:
001369 2766          clr	 r22
                 __itoa2:
00136a 17e8          cp   r30,r24
00136b 07f9          cpc  r31,r25
00136c f020          brlo __itoa3
00136d 9563          inc  r22
00136e 1be8          sub  r30,r24
00136f 0bf9          sbc  r31,r25
001370 f7c9          brne __itoa2
                 __itoa3:
001371 2366          tst  r22
001372 f411          brne __itoa4
001373 f016          brts __itoa5
001374 9508          ret
                 __itoa4:
001375 9468          set
                 __itoa5:
001376 5d60          subi r22,-0x30
001377 936d          st   x+,r22
001378 9508          ret
                 ; .FEND
                 
                 	.DSEG
                 
                 	.CSEG
                 
                 	.CSEG
                 _strcpy:
                 ; .FSTART _strcpy
001379 93ba      	ST   -Y,R27
00137a 93aa      	ST   -Y,R26
00137b 91e9          ld   r30,y+
00137c 91f9          ld   r31,y+
00137d 91a9          ld   r26,y+
00137e 91b9          ld   r27,y+
00137f 01cd          movw r24,r26
                 strcpy0:
001380 9161          ld   r22,z+
001381 936d          st   x+,r22
001382 2366          tst  r22
001383 f7e1          brne strcpy0
001384 01fc          movw r30,r24
001385 9508          ret
                 ; .FEND
                 _strlen:
                 ; .FSTART _strlen
001386 93ba      	ST   -Y,R27
001387 93aa      	ST   -Y,R26
001388 91a9          ld   r26,y+
001389 91b9          ld   r27,y+
00138a 27ee          clr  r30
00138b 27ff          clr  r31
                 strlen0:
00138c 916d          ld   r22,x+
00138d 2366          tst  r22
00138e f011          breq strlen1
00138f 9631          adiw r30,1
001390 cffb          rjmp strlen0
                 strlen1:
001391 9508          ret
                 ; .FEND
                 _strlenf:
                 ; .FSTART _strlenf
001392 940e 1898 	CALL __PUTPARD2
001394 27aa          clr  r26
001395 27bb          clr  r27
001396 91e9          ld   r30,y+
001397 91f9          ld   r31,y+
001398 9169          ld   r22,y+
001399 9179          ld   r23,y+
00139a bf6b          out  rampz,r22
                 strlenf0:
00139b 9007          elpm r0,z+
00139c 2000          tst  r0
00139d f011          breq strlenf1
00139e 9611          adiw r26,1
00139f cffb          rjmp strlenf0
                 strlenf1:
0013a0 01fd          movw r30,r26
0013a1 9508          ret
                 ; .FEND
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 
                 	.DSEG
                 
                 	.CSEG
                 __lcd_write_nibble_G103:
                 ; .FSTART __lcd_write_nibble_G103
0013a2 93aa      	ST   -Y,R26
0013a3 b3e5      	IN   R30,0x15
0013a4 70ef      	ANDI R30,LOW(0xF)
0013a5 2fae      	MOV  R26,R30
0013a6 81e8      	LD   R30,Y
0013a7 7fe0      	ANDI R30,LOW(0xF0)
0013a8 2bea      	OR   R30,R26
0013a9 bbe5      	OUT  0x15,R30
                +
0013aa e181     +LDI R24 , LOW ( 17 )
                +__DELAY_USB_LOOP :
0013ab 958a     +DEC R24
0013ac f7f1     +BRNE __DELAY_USB_LOOP
                 	__DELAY_USB 17
0013ad 9aa9      	SBI  0x15,1
                +
0013ae e181     +LDI R24 , LOW ( 17 )
                +__DELAY_USB_LOOP :
0013af 958a     +DEC R24
0013b0 f7f1     +BRNE __DELAY_USB_LOOP
                 	__DELAY_USB 17
0013b1 98a9      	CBI  0x15,1
                +
0013b2 e181     +LDI R24 , LOW ( 17 )
                +__DELAY_USB_LOOP :
0013b3 958a     +DEC R24
0013b4 f7f1     +BRNE __DELAY_USB_LOOP
                 	__DELAY_USB 17
0013b5 c092      	RJMP _0x20C0001
                 ; .FEND
                 __lcd_write_data:
                 ; .FSTART __lcd_write_data
0013b6 93aa      	ST   -Y,R26
0013b7 81a8      	LD   R26,Y
0013b8 dfe9      	RCALL __lcd_write_nibble_G103
0013b9 81e8          ld    r30,y
0013ba 95e2          swap  r30
0013bb 83e8          st    y,r30
0013bc 81a8      	LD   R26,Y
0013bd dfe4      	RCALL __lcd_write_nibble_G103
                +
0013be ea87     +LDI R24 , LOW ( 167 )
                +__DELAY_USB_LOOP :
0013bf 958a     +DEC R24
0013c0 f7f1     +BRNE __DELAY_USB_LOOP
                 	__DELAY_USB 167
0013c1 c086      	RJMP _0x20C0001
                 ; .FEND
                 _lcd_gotoxy:
                 ; .FSTART _lcd_gotoxy
0013c2 93aa      	ST   -Y,R26
0013c3 81e8      	LD   R30,Y
0013c4 e0f0      	LDI  R31,0
0013c5 5ee9      	SUBI R30,LOW(-__base_y_G103)
0013c6 4ff4      	SBCI R31,HIGH(-__base_y_G103)
0013c7 81e0      	LD   R30,Z
0013c8 81a9      	LDD  R26,Y+1
0013c9 0fae      	ADD  R26,R30
0013ca dfeb      	RCALL __lcd_write_data
0013cb 8069      	LDD  R6,Y+1
0013cc 81e8      	LD   R30,Y
0013cd 93e0 0b1b 	STS  __lcd_y,R30
0013cf 9622      	ADIW R28,2
0013d0 9508      	RET
                 ; .FEND
                 _lcd_clear:
                 ; .FSTART _lcd_clear
0013d1 e0a2      	LDI  R26,LOW(2)
0013d2 940e 178d 	CALL SUBOPT_0x7B
0013d4 e0ac      	LDI  R26,LOW(12)
0013d5 dfe0      	RCALL __lcd_write_data
0013d6 e0a1      	LDI  R26,LOW(1)
0013d7 940e 178d 	CALL SUBOPT_0x7B
0013d9 e0e0      	LDI  R30,LOW(0)
0013da 93e0 0b1b 	STS  __lcd_y,R30
0013dc 2e6e      	MOV  R6,R30
0013dd 9508      	RET
                 ; .FEND
                 _lcd_putchar:
                 ; .FSTART _lcd_putchar
0013de 93aa      	ST   -Y,R26
0013df 81a8      	LD   R26,Y
0013e0 30aa      	CPI  R26,LOW(0xA)
0013e1 f021      	BREQ _0x2060005
0013e2 91e0 0b1c 	LDS  R30,__lcd_maxx
0013e4 166e      	CP   R6,R30
0013e5 f060      	BRLO _0x2060004
                 _0x2060005:
0013e6 e0e0      	LDI  R30,LOW(0)
0013e7 93ea      	ST   -Y,R30
0013e8 91a0 0b1b 	LDS  R26,__lcd_y
0013ea 5faf      	SUBI R26,-LOW(1)
0013eb 93a0 0b1b 	STS  __lcd_y,R26
0013ed dfd4      	RCALL _lcd_gotoxy
0013ee 81a8      	LD   R26,Y
0013ef 30aa      	CPI  R26,LOW(0xA)
0013f0 f409      	BRNE _0x2060007
0013f1 c056      	RJMP _0x20C0001
                 _0x2060007:
                 _0x2060004:
0013f2 9463      	INC  R6
0013f3 9aaa      	SBI  0x15,2
0013f4 81a8      	LD   R26,Y
0013f5 dfc0      	RCALL __lcd_write_data
0013f6 98aa      	CBI  0x15,2
0013f7 c050      	RJMP _0x20C0001
                 ; .FEND
                 _lcd_puts:
                 ; .FSTART _lcd_puts
0013f8 93ba      	ST   -Y,R27
0013f9 93aa      	ST   -Y,R26
0013fa 931a      	ST   -Y,R17
                 _0x2060008:
0013fb 81a9      	LDD  R26,Y+1
0013fc 81ba      	LDD  R27,Y+1+1
0013fd 91ed      	LD   R30,X+
0013fe 83a9      	STD  Y+1,R26
0013ff 83ba      	STD  Y+1+1,R27
001400 2f1e      	MOV  R17,R30
001401 30e0      	CPI  R30,0
001402 f019      	BREQ _0x206000A
001403 2fa1      	MOV  R26,R17
001404 dfd9      	RCALL _lcd_putchar
001405 cff5      	RJMP _0x2060008
                 _0x206000A:
001406 8118      	LDD  R17,Y+0
                 _0x20C0002:
001407 9623      	ADIW R28,3
001408 9508      	RET
                 ; .FEND
                 _lcd_putsf:
                 ; .FSTART _lcd_putsf
001409 940e 1898 	CALL __PUTPARD2
00140b 931a      	ST   -Y,R17
                 _0x206000B:
00140c 01de      	MOVW R26,R28
00140d 9611      	ADIW R26,1
00140e 940e 176e 	CALL SUBOPT_0x76
                +
001410 bf6b     +OUT RAMPZ , R22
001411 91e6     +ELPM R30 , Z
                 	__GETBRPF 30
001412 2f1e      	MOV  R17,R30
001413 30e0      	CPI  R30,0
001414 f019      	BREQ _0x206000D
001415 2fa1      	MOV  R26,R17
001416 dfc7      	RCALL _lcd_putchar
001417 cff4      	RJMP _0x206000B
                 _0x206000D:
001418 8118      	LDD  R17,Y+0
001419 9625      	ADIW R28,5
00141a 9508      	RET
                 ; .FEND
                 _lcd_init:
                 ; .FSTART _lcd_init
00141b 93aa      	ST   -Y,R26
00141c b3e4      	IN   R30,0x14
00141d 6fe0      	ORI  R30,LOW(0xF0)
00141e bbe4      	OUT  0x14,R30
00141f 9aa1      	SBI  0x14,1
001420 9aa2      	SBI  0x14,2
001421 9aa3      	SBI  0x14,3
001422 98a9      	CBI  0x15,1
001423 98aa      	CBI  0x15,2
001424 98ab      	CBI  0x15,3
001425 81e8      	LD   R30,Y
001426 93e0 0b1c 	STS  __lcd_maxx,R30
001428 58e0      	SUBI R30,-LOW(128)
                +
001429 93e0 0b19+STS __base_y_G103 + ( 2 ) , R30
                 	__PUTB1MN __base_y_G103,2
00142b 81e8      	LD   R30,Y
00142c 54e0      	SUBI R30,-LOW(192)
                +
00142d 93e0 0b1a+STS __base_y_G103 + ( 3 ) , R30
                 	__PUTB1MN __base_y_G103,3
00142f e1a4      	LDI  R26,LOW(20)
001430 e0b0      	LDI  R27,0
001431 940e 179b 	CALL _delay_ms
001433 940e 1793 	CALL SUBOPT_0x7C
001435 940e 1793 	CALL SUBOPT_0x7C
001437 940e 1793 	CALL SUBOPT_0x7C
001439 e2a0      	LDI  R26,LOW(32)
00143a df67      	RCALL __lcd_write_nibble_G103
                +
00143b ef8a     +LDI R24 , LOW ( 250 )
00143c e090     +LDI R25 , HIGH ( 250 )
                +__DELAY_USW_LOOP :
00143d 9701     +SBIW R24 , 1
00143e f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 250
00143f e2a8      	LDI  R26,LOW(40)
001440 df75      	RCALL __lcd_write_data
001441 e0a4      	LDI  R26,LOW(4)
001442 df73      	RCALL __lcd_write_data
001443 e8a5      	LDI  R26,LOW(133)
001444 df71      	RCALL __lcd_write_data
001445 e0a6      	LDI  R26,LOW(6)
001446 df6f      	RCALL __lcd_write_data
001447 df89      	RCALL _lcd_clear
                 _0x20C0001:
001448 9621      	ADIW R28,1
001449 9508      	RET
                 ; .FEND
                 
                 	.CSEG
                 
                 	.CSEG
                 
                 	.DSEG
                 _fat:
000991           	.BYTE 0x2C
                 _path:
0009bd           	.BYTE 0x40
                 _text:
0009fd           	.BYTE 0xC
                 _buffer:
000a09           	.BYTE 0x100
                 _testChar_S0000005000:
000b09           	.BYTE 0x1
                 ___AddrToZ24ByteToSPMCR_SPM_E:
000b0a           	.BYTE 0x2
                 ___AddrToZ24ByteToSPMCR_SPM_EW:
000b0c           	.BYTE 0x2
                 
                 	.ESEG
                 
                 	.ORG 0xA
                 __EepromBackup:
00000a           	.BYTE 0x107
                 
                 	.ORG 0x0
                 
                 	.DSEG
                 _CardType_G002:
000b0e           	.BYTE 0x1
                 _wc_S0020007000:
000b0f           	.BYTE 0x2
                 _FatFs_G003:
000b11           	.BYTE 0x2
                 __seed_G101:
000b13           	.BYTE 0x4
                 __base_y_G103:
000b17           	.BYTE 0x4
                 __lcd_y:
000b1b           	.BYTE 0x1
                 __lcd_maxx:
000b1c           	.BYTE 0x1
                 
                 	.CSEG
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x0:
00144a e0f0      	LDI  R31,0
00144b 93fa      	ST   -Y,R31
00144c 93ea      	ST   -Y,R30
00144d 01de      	MOVW R26,R28
00144e 9612      	ADIW R26,2
00144f 940c 134b 	JMP  _itoa
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x1:
001451 e8ac      	LDI  R26,LOW(_error_msg*2)
001452 e0b0      	LDI  R27,HIGH(_error_msg*2)
001453 e080      	LDI  R24,BYTE3(_error_msg*2)
001454 27ff      	CLR  R31
001455 2766      	CLR  R22
001456 2777      	CLR  R23
001457 940e 17e9 	CALL __LSLD1
001459 940e 17e9 	CALL __LSLD1
00145b 940e 17a9 	CALL __ADDD12
00145d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x2:
00145e 940e 1893 	CALL __PUTPARD1
001460 e084      	LDI  R24,4
001461 940e 1326 	CALL _printf
001463 9628      	ADIW R28,8
001464 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x3:
001465 940e 1893 	CALL __PUTPARD1
001467 ebed      	LDI  R30,LOW(_path)
001468 e0f9      	LDI  R31,HIGH(_path)
001469 2766      	CLR  R22
00146a 2777      	CLR  R23
00146b cff2      	RJMP SUBOPT_0x2
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x4:
00146c 01fe      	MOVW R30,R28
00146d 93fa      	ST   -Y,R31
00146e 93ea      	ST   -Y,R30
00146f 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 8 TIMES, CODE SIZE REDUCTION:11 WORDS
                 SUBOPT_0x5:
001470 e0e0      	LDI  R30,LOW(0)
001471 e0f0      	LDI  R31,HIGH(0)
001472 93fa      	ST   -Y,R31
001473 93ea      	ST   -Y,R30
001474 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:37 WORDS
                 SUBOPT_0x6:
001475 e0ea      	LDI  R30,LOW(10)
001476 e0f0      	LDI  R31,HIGH(10)
001477 93fa      	ST   -Y,R31
001478 93ea      	ST   -Y,R30
001479 e0a8      	LDI  R26,LOW(8)
00147a e0b0      	LDI  R27,HIGH(8)
00147b 940e 0f4f 	CALL _pf_write512
00147d 2e7e      	MOV  R7,R30
00147e 30e0      	CPI  R30,0
00147f 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:111 WORDS
                 SUBOPT_0x7:
                +
001480 efec     +LDI R30 , LOW ( 2 * _0x0 + ( 384 ) )
001481 e0f2     +LDI R31 , HIGH ( 2 * _0x0 + ( 384 ) )
001482 e060     +LDI R22 , BYTE3 ( 2 * _0x0 + ( 384 ) )
001483 e070     +LDI R23 , BYTE4 ( 2 * _0x0 + ( 384 ) )
                 	__POINTD1FN _0x0,384
001484 940e 1893 	CALL __PUTPARD1
001486 01f4      	MOVW R30,R8
001487 2766      	CLR  R22
001488 2777      	CLR  R23
001489 940e 1893 	CALL __PUTPARD1
                +
00148b e0eb     +LDI R30 , LOW ( 0xB )
00148c e0f0     +LDI R31 , HIGH ( 0xB )
00148d e060     +LDI R22 , BYTE3 ( 0xB )
00148e e070     +LDI R23 , BYTE4 ( 0xB )
                 	__GETD1N 0xB
00148f 940e 1893 	CALL __PUTPARD1
001491 e088      	LDI  R24,8
001492 940e 1326 	CALL _printf
001494 962c      	ADIW R28,12
001495 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x8:
001496 927a      	ST   -Y,R7
001497 e5ad      	LDI  R26,LOW(93)
001498 940c 023c 	JMP  _error
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x9:
00149a 93fa      	ST   -Y,R31
00149b 93ea      	ST   -Y,R30
00149c cfd8      	RJMP SUBOPT_0x6
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0xA:
00149d 98a9      	CBI  0x15,1
00149e efa4      	LDI  R26,LOW(500)
00149f e0b1      	LDI  R27,HIGH(500)
0014a0 940e 179b 	CALL _delay_ms
0014a2 9aa9      	SBI  0x15,1
0014a3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0xB:
0014a4 efa4      	LDI  R26,LOW(500)
0014a5 e0b1      	LDI  R27,HIGH(500)
0014a6 940c 179b 	JMP  _delay_ms
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0xC:
                +
0014a8 e0e2     +LDI R30 , LOW ( 0x2 )
0014a9 e0f0     +LDI R31 , HIGH ( 0x2 )
0014aa e060     +LDI R22 , BYTE3 ( 0x2 )
0014ab e070     +LDI R23 , BYTE4 ( 0x2 )
                 	__GETD1N 0x2
0014ac 940e 1893 	CALL __PUTPARD1
0014ae 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:15 WORDS
                 SUBOPT_0xD:
0014af e0e9      	LDI  R30,LOW(_testChar_S0000005000)
0014b0 e0fb      	LDI  R31,HIGH(_testChar_S0000005000)
0014b1 93fa      	ST   -Y,R31
0014b2 93ea      	ST   -Y,R30
0014b3 e0a1      	LDI  R26,LOW(1)
0014b4 e0b0      	LDI  R27,0
0014b5 940c 0443 	JMP  _ReadFlashBytes
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0xE:
0014b7 940e 1893 	CALL __PUTPARD1
0014b9 cff5      	RJMP SUBOPT_0xD
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0xF:
0014ba 940e 1889 	CALL __GETD1S0
0014bc 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x10:
0014bd 93ba      	ST   -Y,R27
0014be 93aa      	ST   -Y,R26
0014bf 931a      	ST   -Y,R17
0014c0 930a      	ST   -Y,R16
0014c1 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 9 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x11:
                +
0014c2 81ec     +LDD R30 , Y + 4
0014c3 81fd     +LDD R31 , Y + 4 + 1
0014c4 816e     +LDD R22 , Y + 4 + 2
0014c5 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
0014c6 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x12:
0014c7 01f8      	MOVW R30,R16
                +
0014c8 81ac     +LDD R26 , Y + 4
0014c9 81bd     +LDD R27 , Y + 4 + 1
0014ca 818e     +LDD R24 , Y + 4 + 2
0014cb 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
0014cc 2766      	CLR  R22
0014cd 2777      	CLR  R23
0014ce 940e 17ae 	CALL __ADDD21
0014d0 940c 0415 	JMP  _ReadFlashByte
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x13:
                +
0014d2 81ee     +LDD R30 , Y + 6
0014d3 81ff     +LDD R31 , Y + 6 + 1
0014d4 8568     +LDD R22 , Y + 6 + 2
0014d5 8579     +LDD R23 , Y + 6 + 3
                 	__GETD1S 6
0014d6 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x14:
                +
0014d7 83ee     +STD Y + 6 , R30
0014d8 83ff     +STD Y + 6 + 1 , R31
0014d9 8768     +STD Y + 6 + 2 , R22
0014da 8779     +STD Y + 6 + 3 , R23
                 	__PUTD1S 6
0014db 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x15:
                +
0014dc 81ae     +LDD R26 , Y + 6
0014dd 81bf     +LDD R27 , Y + 6 + 1
0014de 8588     +LDD R24 , Y + 6 + 2
0014df 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
0014e0 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x16:
                +
0014e1 01fe     +MOVW R30 , R28
0014e2 5fe4     +SUBI R30 , LOW ( - 268 )
0014e3 4ffe     +SBCI R31 , HIGH ( - 268 )
0014e4 9001     +LD R0 , Z +
0014e5 81f0     +LD R31 , Z
0014e6 2de0     +MOV R30 , R0
                 	__GETW1SX 268
0014e7 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x17:
                +
0014e8 01fe     +MOVW R30 , R28
0014e9 5fe0     +SUBI R30 , LOW ( - 272 )
0014ea 4ffe     +SBCI R31 , HIGH ( - 272 )
0014eb 9001     +LD R0 , Z +
0014ec 9011     +LD R1 , Z +
0014ed 9161     +LD R22 , Z +
0014ee 8170     +LD R23 , Z
0014ef 01f0     +MOVW R30 , R0
                 	__GETD1SX 272
                +
0014f0 7fef     +ANDI R30 , LOW ( 0xFF )
0014f1 70f0     +ANDI R31 , HIGH ( 0xFF )
0014f2 7060     +ANDI R22 , BYTE3 ( 0xFF )
0014f3 7070     +ANDI R23 , BYTE4 ( 0xFF )
                 	__ANDD1N 0xFF
0014f4 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x18:
                +
0014f5 01de     +MOVW R26 , R28
0014f6 5fa0     +SUBI R26 , LOW ( - 272 )
0014f7 4fbe     +SBCI R27 , HIGH ( - 272 )
0014f8 900d     +LD R0 , X +
0014f9 901d     +LD R1 , X +
0014fa 918d     +LD R24 , X +
0014fb 919c     +LD R25 , X
0014fc 01d0     +MOVW R26 , R0
                 	__GETD2SX 272
0014fd 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x19:
                +
0014fe 85e8     +LDD R30 , Y + 8
0014ff 85f9     +LDD R31 , Y + 8 + 1
001500 856a     +LDD R22 , Y + 8 + 2
001501 857b     +LDD R23 , Y + 8 + 3
                 	__GETD1S 8
001502 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x1A:
                +
001503 83ec     +STD Y + 4 , R30
001504 83fd     +STD Y + 4 + 1 , R31
001505 836e     +STD Y + 4 + 2 , R22
001506 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
001507 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 8 TIMES, CODE SIZE REDUCTION:11 WORDS
                 SUBOPT_0x1B:
001508 2766      	CLR  R22
001509 2777      	CLR  R23
00150a 940e 17a9 	CALL __ADDD12
00150c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 8 TIMES, CODE SIZE REDUCTION:11 WORDS
                 SUBOPT_0x1C:
                +
00150d 85ea     +LDD R30 , Y + 10
00150e 85fb     +LDD R31 , Y + 10 + 1
00150f 856c     +LDD R22 , Y + 10 + 2
001510 857d     +LDD R23 , Y + 10 + 3
                 	__GETD1S 10
001511 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x1D:
                +
001512 85aa     +LDD R26 , Y + 10
001513 85bb     +LDD R27 , Y + 10 + 1
001514 858c     +LDD R24 , Y + 10 + 2
001515 859d     +LDD R25 , Y + 10 + 3
                 	__GETD2S 10
001516 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x1E:
001517 81ea      	LDD  R30,Y+2
001518 81fb      	LDD  R31,Y+2+1
001519 9731      	SBIW R30,1
00151a 81a8      	LD   R26,Y
00151b 81b9      	LDD  R27,Y+1
00151c 0fae      	ADD  R26,R30
00151d 1fbf      	ADC  R27,R31
00151e 91ec      	LD   R30,X
00151f 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:12 WORDS
                 SUBOPT_0x1F:
001520 93ea      	ST   -Y,R30
                +
001521 e0a0     +LDI R26 , LOW ( 0x0 )
001522 e0b0     +LDI R27 , HIGH ( 0x0 )
001523 e080     +LDI R24 , BYTE3 ( 0x0 )
001524 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
001525 940c 0626 	JMP  _send_cmd_G002
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x20:
001527 940e 0614 	CALL _xmit_spi
                +
001529 81aa     +LDD R26 , Y + 2
00152a 81bb     +LDD R27 , Y + 2 + 1
00152b 818c     +LDD R24 , Y + 2 + 2
00152c 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
00152d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 10 TIMES, CODE SIZE REDUCTION:15 WORDS
                 SUBOPT_0x21:
                +
00152e 81ea     +LDD R30 , Y + 2
00152f 81fb     +LDD R31 , Y + 2 + 1
001530 816c     +LDD R22 , Y + 2 + 2
001531 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
001532 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x22:
001533 2fe1      	MOV  R30,R17
001534 e0f0      	LDI  R31,0
001535 01de      	MOVW R26,R28
001536 9616      	ADIW R26,6
001537 0fea      	ADD  R30,R26
001538 1ffb      	ADC  R31,R27
001539 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x23:
                +
00153a e0a0     +LDI R26 , LOW ( 0x0 )
00153b e0b0     +LDI R27 , HIGH ( 0x0 )
00153c e080     +LDI R24 , BYTE3 ( 0x0 )
00153d e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
00153e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x24:
                +
00153f e0a0     +LDI R26 , LOW ( 0x200 )
001540 e0b2     +LDI R27 , HIGH ( 0x200 )
001541 e080     +LDI R24 , BYTE3 ( 0x200 )
001542 e090     +LDI R25 , BYTE4 ( 0x200 )
                 	__GETD2N 0x200
001543 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x25:
001544 93ba      	ST   -Y,R27
001545 93aa      	ST   -Y,R26
001546 940e 18f1 	CALL __SAVELOCR4
001548 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x26:
001549 dff5      	RCALL SUBOPT_0x24
00154a 940e 1802 	CALL __MULD12U
00154c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x27:
                +
00154d 85a9     +LDD R26 , Y + 9
00154e 85ba     +LDD R27 , Y + 9 + 1
00154f 858b     +LDD R24 , Y + 9 + 2
001550 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
001551 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x28:
001552 93ba      	ST   -Y,R27
001553 93aa      	ST   -Y,R26
001554 940e 18ef 	CALL __SAVELOCR6
001556 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x29:
001557 91e0 0b11 	LDS  R30,_FatFs_G003
001559 91f0 0b12 	LDS  R31,_FatFs_G003+1
00155b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x2A:
                +
00155c 85ac     +LDD R26 , Y + 12
00155d 85bd     +LDD R27 , Y + 12 + 1
00155e 858e     +LDD R24 , Y + 12 + 2
00155f 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
001560 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:17 WORDS
                 SUBOPT_0x2B:
                +
001561 30a2     +CPI R26 , LOW ( 0x2 )
001562 e0e0     +LDI R30 , HIGH ( 0x2 )
001563 07be     +CPC R27 , R30
001564 e0e0     +LDI R30 , BYTE3 ( 0x2 )
001565 078e     +CPC R24 , R30
001566 e0e0     +LDI R30 , BYTE4 ( 0x2 )
001567 079e     +CPC R25 , R30
                 	__CPD2N 0x2
001568 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:8 WORDS
                 SUBOPT_0x2C:
001569 01fe      	MOVW R30,R28
00156a 9638      	ADIW R30,8
00156b 93fa      	ST   -Y,R31
00156c 93ea      	ST   -Y,R30
00156d 85e8      	LDD  R30,Y+8
00156e 85f9      	LDD  R31,Y+8+1
                +
00156f 85a4     +LDD R26 , Z + 12
001570 85b5     +LDD R27 , Z + 12 + 1
001571 8586     +LDD R24 , Z + 12 + 2
001572 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
001573 01f9      	MOVW R30,R18
001574 cf93      	RJMP SUBOPT_0x1B
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x2D:
001575 e0a2      	LDI  R26,LOW(2)
001576 e0b0      	LDI  R27,0
001577 940e 0701 	CALL _disk_readp
001579 30e0      	CPI  R30,0
00157a 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x2E:
00157b e0b0      	LDI  R27,0
00157c 940e 0701 	CALL _disk_readp
00157e 30e0      	CPI  R30,0
00157f 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x2F:
001580 93fa      	ST   -Y,R31
001581 93ea      	ST   -Y,R30
001582 85e8      	LDD  R30,Y+8
001583 85f9      	LDD  R31,Y+8+1
                +
001584 85a4     +LDD R26 , Z + 12
001585 85b5     +LDD R27 , Z + 12 + 1
001586 8586     +LDD R24 , Z + 12 + 2
001587 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
001588 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x30:
                +
001589 5fef     +SUBI R30 , LOW ( - 1 )
00158a 4fff     +SBCI R31 , HIGH ( - 1 )
00158b 4f6f     +SBCI R22 , BYTE3 ( - 1 )
00158c 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__ADDD1N 1
00158d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x31:
                +
00158e 85ae     +LDD R26 , Y + 14
00158f 85bf     +LDD R27 , Y + 14 + 1
001590 8988     +LDD R24 , Y + 14 + 2
001591 8999     +LDD R25 , Y + 14 + 3
                 	__GETD2S 14
001592 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x32:
001593 940e 17a9 	CALL __ADDD12
001595 940e 1893 	CALL __PUTPARD1
001597 89ea      	LDD  R30,Y+18
001598 89fb      	LDD  R31,Y+18+1
001599 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x33:
00159a 93fa      	ST   -Y,R31
00159b 93ea      	ST   -Y,R30
00159c cfd8      	RJMP SUBOPT_0x2D
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x34:
00159d 931a      	ST   -Y,R17
00159e 930a      	ST   -Y,R16
                +
00159f 9100 0b11+LDS R16 , 0 + ( _FatFs_G003 )
0015a1 9110 0b12+LDS R17 , 0 + ( _FatFs_G003 ) + 1
                 	__GETWRMN 16,17,0,_FatFs_G003
0015a3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x35:
                +
0015a4 83ea     +STD Y + 2 , R30
0015a5 83fb     +STD Y + 2 + 1 , R31
0015a6 836c     +STD Y + 2 + 2 , R22
0015a7 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
0015a8 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x36:
                +
0015a9 81aa     +LDD R26 , Y + 2
0015aa 81bb     +LDD R27 , Y + 2 + 1
0015ab 818c     +LDD R24 , Y + 2 + 2
0015ac 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
0015ad 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x37:
                +
0015ae e0e0     +LDI R30 , LOW ( 0x0 )
0015af e0f0     +LDI R31 , HIGH ( 0x0 )
0015b0 e060     +LDI R22 , BYTE3 ( 0x0 )
0015b1 e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
0015b2 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x38:
0015b3 e0e0      	LDI  R30,LOW(0)
0015b4 e0f0      	LDI  R31,HIGH(0)
0015b5 93ed      	ST   X+,R30
0015b6 93fc      	ST   X,R31
0015b7 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x39:
0015b8 940e 1862 	CALL __GETD1P
0015ba cfe9      	RJMP SUBOPT_0x35
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x3A:
0015bb 940e 18f1 	CALL __SAVELOCR4
                +
0015bd 9120 0b11+LDS R18 , 0 + ( _FatFs_G003 )
0015bf 9130 0b12+LDS R19 , 0 + ( _FatFs_G003 ) + 1
                 	__GETWRMN 18,19,0,_FatFs_G003
0015c1 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x3B:
0015c2 85a8      	LDD  R26,Y+8
0015c3 85b9      	LDD  R27,Y+8+1
0015c4 961c      	ADIW R26,12
0015c5 940e 1862 	CALL __GETD1P
0015c7 940e 18d7 	CALL __CPD10
0015c9 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x3C:
                +
0015ca 81ac     +LDD R26 , Y + 4
0015cb 81bd     +LDD R27 , Y + 4 + 1
0015cc 818e     +LDD R24 , Y + 4 + 2
0015cd 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
0015ce 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x3D:
0015cf 91a0 0b11 	LDS  R26,_FatFs_G003
0015d1 91b0 0b12 	LDS  R27,_FatFs_G003+1
0015d3 9616      	ADIW R26,6
0015d4 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x3E:
                +
0015d5 85a4     +LDD R26 , Z + 12
0015d6 85b5     +LDD R27 , Z + 12 + 1
0015d7 8586     +LDD R24 , Z + 12 + 2
0015d8 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
0015d9 940e 1898 	CALL __PUTPARD2
0015db 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x3F:
0015dc 940e 185e 	CALL __GETW1P
0015de 70ef      	ANDI R30,LOW(0xF)
0015df 70f0      	ANDI R31,HIGH(0xF)
0015e0 0fee      	LSL  R30
0015e1 940e 17d7 	CALL __LSLW4
0015e3 93fa      	ST   -Y,R31
0015e4 93ea      	ST   -Y,R30
0015e5 e2a0      	LDI  R26,LOW(32)
0015e6 cf94      	RJMP SUBOPT_0x2E
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x40:
0015e7 961c      	ADIW R26,12
0015e8 dfc5      	RCALL SUBOPT_0x37
0015e9 940e 186d 	CALL __PUTDP1
0015eb 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x41:
0015ec 2fe2      	MOV  R30,R18
0015ed 5f2f      	SUBI R18,-1
0015ee 81ae      	LDD  R26,Y+6
0015ef 81bf      	LDD  R27,Y+6+1
0015f0 e0f0      	LDI  R31,0
0015f1 0fae      	ADD  R26,R30
0015f2 1fbf      	ADC  R27,R31
0015f3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x42:
0015f4 2fe5      	MOV  R30,R21
0015f5 5f5f      	SUBI R21,-1
0015f6 85a8      	LDD  R26,Y+8
0015f7 85b9      	LDD  R27,Y+8+1
0015f8 e0f0      	LDI  R31,0
0015f9 0fea      	ADD  R30,R26
0015fa 1ffb      	ADC  R31,R27
0015fb 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x43:
0015fc 01d9      	MOVW R26,R18
0015fd 27ee      	CLR  R30
0015fe 0fa1      	ADD  R26,R17
0015ff 1fbe      	ADC  R27,R30
001600 910c      	LD   R16,X
001601 3200      	CPI  R16,32
001602 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x44:
001603 dfaa      	RCALL SUBOPT_0x37
001604 940e 186d 	CALL __PUTDP1
001606 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x45:
001607 81ae      	LDD  R26,Y+6
001608 81bf      	LDD  R27,Y+6+1
001609 9612      	ADIW R26,2
00160a 940e 185e 	CALL __GETW1P
00160c 85e3      	LDD  R30,Z+11
00160d 30e0      	CPI  R30,0
00160e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x46:
00160f 940e 185e 	CALL __GETW1P
001611 2766      	CLR  R22
001612 2777      	CLR  R23
001613 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x47:
001614 2766      	CLR  R22
001615 2777      	CLR  R23
001616 940e 17c2 	CALL __ORD12
001618 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x48:
001619 81ec      	LDD  R30,Y+4
00161a 81fd      	LDD  R31,Y+4+1
00161b 93fa      	ST   -Y,R31
00161c 93ea      	ST   -Y,R30
00161d df10      	RCALL SUBOPT_0x21
00161e 940e 1893 	CALL __PUTPARD1
001620 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x49:
001621 81ac      	LDD  R26,Y+4
001622 81bd      	LDD  R27,Y+4+1
001623 940e 185e 	CALL __GETW1P
001625 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x4A:
001626 01fe      	MOVW R30,R28
001627 9671      	ADIW R30,17
001628 93fa      	ST   -Y,R31
001629 93ea      	ST   -Y,R30
00162a 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x4B:
                +
00162b 85af     +LDD R26 , Y + 15
00162c 89b8     +LDD R27 , Y + 15 + 1
00162d 8989     +LDD R24 , Y + 15 + 2
00162e 899a     +LDD R25 , Y + 15 + 3
                 	__GETD2S 15
00162f 940e 0bb0 	CALL _check_fs_G003
001631 2f1e      	MOV  R17,R30
001632 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x4C:
                +
001633 85ef     +LDD R30 , Y + 15
001634 89f8     +LDD R31 , Y + 15 + 1
001635 8969     +LDD R22 , Y + 15 + 2
001636 897a     +LDD R23 , Y + 15 + 3
                 	__GETD1S 15
001637 940e 1893 	CALL __PUTPARD1
001639 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x4D:
                +
00163a 87e9     +STD Y + 9 , R30
00163b 87fa     +STD Y + 9 + 1 , R31
00163c 876b     +STD Y + 9 + 2 , R22
00163d 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
00163e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x4E:
                +
00163f 85e9     +LDD R30 , Y + 9
001640 85fa     +LDD R31 , Y + 9 + 1
001641 856b     +LDD R22 , Y + 9 + 2
001642 857c     +LDD R23 , Y + 9 + 3
                 	__GETD1S 9
001643 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x4F:
001644 01fe      	MOVW R30,R28
001645 967f      	ADIW R30,31
001646 973d      	SBIW R30,13
001647 01df      	MOVW R26,R30
001648 940e 185e 	CALL __GETW1P
00164a 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x50:
00164b a9ed      	LDD  R30,Y+53
00164c a9fe      	LDD  R31,Y+53+1
00164d 81a4      	LDD  R26,Z+4
00164e 81b5      	LDD  R27,Z+5
00164f 01fd      	MOVW R30,R26
001650 940e 17e0 	CALL __LSRW4
001652 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x51:
001653 81e1      	LDD  R30,Z+1
001654 e0f0      	LDI  R31,0
001655 940e 17f8 	CALL __CWD1
001657 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x52:
001658 a9ed      	LDD  R30,Y+53
001659 a9fe      	LDD  R31,Y+53+1
                +
00165a 85a4     +LDD R26 , Z + 12
00165b 85b5     +LDD R27 , Z + 12 + 1
00165c 8586     +LDD R24 , Z + 12 + 2
00165d 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
00165e dfe0      	RCALL SUBOPT_0x4E
00165f 940e 17a9 	CALL __ADDD12
001661 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x53:
001662 01fe      	MOVW R30,R28
001663 9634      	ADIW R30,4
                +
001664 01d9     +MOVW R26 , R18
001665 9616     +ADIW R26 , 6
001666 93ed     +ST X + , R30
001667 93fc     +ST X , R31
                 	__PUTW1RNS 18,6
001668 01fe      	MOVW R30,R28
001669 96b4      	ADIW R30,36
00166a 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x54:
00166b 8de8      	LDD  R30,Y+24
00166c 8df9      	LDD  R31,Y+24+1
00166d 2766      	CLR  R22
00166e 2777      	CLR  R23
00166f 940e 17f3 	CALL __LSLD16
001671 01df      	MOVW R26,R30
001672 01cb      	MOVW R24,R22
001673 8dee      	LDD  R30,Y+30
001674 8dff      	LDD  R31,Y+30+1
001675 cf9e      	RJMP SUBOPT_0x47
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:17 WORDS
                 SUBOPT_0x55:
001676 81ee      	LDD  R30,Y+6
001677 81ff      	LDD  R31,Y+6+1
                +
001678 8da0     +LDD R26 , Z + 24
001679 8db1     +LDD R27 , Z + 24 + 1
00167a 8d82     +LDD R24 , Z + 24 + 2
00167b 8d93     +LDD R25 , Z + 24 + 3
                 	__GETD2Z 24
00167c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x56:
                +
00167d e0e0     +LDI R30 , LOW ( 0x200 )
00167e e0f2     +LDI R31 , HIGH ( 0x200 )
00167f e060     +LDI R22 , BYTE3 ( 0x200 )
001680 e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
001681 940e 1835 	CALL __DIVD21U
001683 01df      	MOVW R26,R30
001684 01cb      	MOVW R24,R22
001685 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x57:
001686 81ee      	LDD  R30,Y+6
001687 81ff      	LDD  R31,Y+6+1
                +
001688 a1a4     +LDD R26 , Z + 36
001689 a1b5     +LDD R27 , Z + 36 + 1
00168a a186     +LDD R24 , Z + 36 + 2
00168b a197     +LDD R25 , Z + 36 + 3
                 	__GETD2Z 36
00168c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x58:
00168d 9613      	ADIW R26,3
00168e 91ec      	LD   R30,X
00168f 5fef      	SUBI R30,-LOW(1)
001690 93ec      	ST   X,R30
001691 50e1      	SUBI R30,LOW(1)
001692 e0f0      	LDI  R31,0
001693 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x59:
001694 940e 17f8 	CALL __CWD1
001696 940e 17a9 	CALL __ADDD12
001698 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x5A:
001699 8da0      	LDD  R26,Z+24
00169a 8db1      	LDD  R27,Z+25
00169b 01fd      	MOVW R30,R26
00169c 70f1      	ANDI R31,HIGH(0x1FF)
00169d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x5B:
00169e 9678      	ADIW R30,24
00169f 010f      	MOVW R0,R30
0016a0 01df      	MOVW R26,R30
0016a1 940e 1862 	CALL __GETD1P
0016a3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x5C:
0016a4 9612      	ADIW R26,2
0016a5 e0e0      	LDI  R30,LOW(0)
0016a6 93ec      	ST   X,R30
0016a7 e0e1      	LDI  R30,LOW(1)
0016a8 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x5D:
0016a9 01fa      	MOVW R30,R20
                +
0016aa 8da0     +LDD R26 , Z + 24
0016ab 8db1     +LDD R27 , Z + 24 + 1
0016ac 8d82     +LDD R24 , Z + 24 + 2
0016ad 8d93     +LDD R25 , Z + 24 + 3
                 	__GETD2Z 24
0016ae 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x5E:
                +
0016af 87ee     +STD Y + 14 , R30
0016b0 87ff     +STD Y + 14 + 1 , R31
0016b1 8b68     +STD Y + 14 + 2 , R22
0016b2 8b79     +STD Y + 14 + 3 , R23
                 	__PUTD1S 14
0016b3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x5F:
                +
0016b4 85ee     +LDD R30 , Y + 14
0016b5 85ff     +LDD R31 , Y + 14 + 1
0016b6 8968     +LDD R22 , Y + 14 + 2
0016b7 8979     +LDD R23 , Y + 14 + 3
                 	__GETD1S 14
0016b8 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x60:
                +
0016b9 01fe     +MOVW R30 , R28
0016ba 5fe4     +SUBI R30 , LOW ( - 524 )
0016bb 4ffd     +SBCI R31 , HIGH ( - 524 )
0016bc 9001     +LD R0 , Z +
0016bd 81f0     +LD R31 , Z
0016be 2de0     +MOV R30 , R0
                 	__GETW1SX 524
0016bf 70f1      	ANDI R31,HIGH(0x1FF)
0016c0 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x61:
                +
0016c1 01de     +MOVW R26 , R28
0016c2 5fa6     +SUBI R26 , LOW ( - 522 )
0016c3 4fbd     +SBCI R27 , HIGH ( - 522 )
0016c4 900d     +LD R0 , X +
0016c5 91bc     +LD R27 , X
0016c6 2da0     +MOV R26 , R0
                 	__GETW2SX 522
0016c7 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x62:
                +
0016c8 01de     +MOVW R26 , R28
0016c9 5fa4     +SUBI R26 , LOW ( - 524 )
0016ca 4fbd     +SBCI R27 , HIGH ( - 524 )
0016cb 900d     +LD R0 , X +
0016cc 91bc     +LD R27 , X
0016cd 2da0     +MOV R26 , R0
                 	__GETW2SX 524
0016ce 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:21 WORDS
                 SUBOPT_0x63:
0016cf 01fe      	MOVW R30,R28
0016d0 9638      	ADIW R30,8
0016d1 93fa      	ST   -Y,R31
0016d2 93ea      	ST   -Y,R30
0016d3 e0e0      	LDI  R30,LOW(512)
0016d4 e0f2      	LDI  R31,HIGH(512)
0016d5 93fa      	ST   -Y,R31
0016d6 93ea      	ST   -Y,R30
0016d7 cff0      	RJMP SUBOPT_0x62
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x64:
0016d8 01f9      	MOVW R30,R18
0016d9 01de      	MOVW R26,R28
0016da 9618      	ADIW R26,8
0016db 0fea      	ADD  R30,R26
0016dc 1ffb      	ADC  R31,R27
0016dd 01bf      	MOVW R22,R30
0016de 01fa      	MOVW R30,R20
                +
0016df 01de     +MOVW R26 , R28
0016e0 5fa2     +SUBI R26 , LOW ( - 526 )
0016e1 4fbd     +SBCI R27 , HIGH ( - 526 )
0016e2 900d     +LD R0 , X +
0016e3 91bc     +LD R27 , X
0016e4 2da0     +MOV R26 , R0
                 	__GETW2SX 526
0016e5 0fae      	ADD  R26,R30
0016e6 1fbf      	ADC  R27,R31
0016e7 91ec      	LD   R30,X
0016e8 01db      	MOVW R26,R22
0016e9 93ec      	ST   X,R30
0016ea 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x65:
                +
0016eb 50a0     +SUBI R26 , LOW ( 512 )
0016ec 40b2     +SBCI R27 , HIGH ( 512 )
0016ed 4080     +SBCI R24 , BYTE3 ( 512 )
0016ee 4090     +SBCI R25 , BYTE4 ( 512 )
                 	__SUBD2N 512
0016ef 940e 0fc6 	CALL _pf_lseek
0016f1 2f1e      	MOV  R17,R30
0016f2 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x66:
0016f3 940e 1862 	CALL __GETD1P
                +
0016f5 89aa     +LDD R26 , Y + 18
0016f6 89bb     +LDD R27 , Y + 18 + 1
0016f7 898c     +LDD R24 , Y + 18 + 2
0016f8 899d     +LDD R25 , Y + 18 + 3
                 	__GETD2S 18
0016f9 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x67:
                +
0016fa 89aa     +LDD R26 , Y + 18
0016fb 89bb     +LDD R27 , Y + 18 + 1
0016fc 898c     +LDD R24 , Y + 18 + 2
0016fd 899d     +LDD R25 , Y + 18 + 3
                 	__GETD2S 18
0016fe 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x68:
                +
0016ff 89ea     +LDD R30 , Y + 18
001700 89fb     +LDD R31 , Y + 18 + 1
001701 896c     +LDD R22 , Y + 18 + 2
001702 897d     +LDD R23 , Y + 18 + 3
                 	__GETD1S 18
001703 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x69:
                +
001704 50e1     +SUBI R30 , LOW ( 1 )
001705 40f0     +SBCI R31 , HIGH ( 1 )
001706 4060     +SBCI R22 , BYTE3 ( 1 )
001707 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
001708 01df      	MOVW R26,R30
001709 01cb      	MOVW R24,R22
00170a de02      	RCALL SUBOPT_0x1C
00170b 940e 1835 	CALL __DIVD21U
00170d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x6A:
                +
00170e 50e1     +SUBI R30 , LOW ( 1 )
00170f 40f0     +SBCI R31 , HIGH ( 1 )
001710 4060     +SBCI R22 , BYTE3 ( 1 )
001711 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
001712 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x6B:
001713 dfa0      	RCALL SUBOPT_0x5F
                +
001714 01d8     +MOVW R26 , R16
001715 9694     +ADIW R26 , 36
001716 940e 186d+CALL __PUTDP1
                 	__PUTD1RNS 16,36
001718 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x6C:
001719 a9ea      	LDD  R30,Y+50
00171a a9fb      	LDD  R31,Y+50+1
00171b 93fa      	ST   -Y,R31
00171c 93ea      	ST   -Y,R30
00171d a9aa      	LDD  R26,Y+50
00171e a9bb      	LDD  R27,Y+50+1
00171f 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x6D:
001720 01fe      	MOVW R30,R28
001721 5fea      	SUBI R30,LOW(-(518))
001722 4ffd      	SBCI R31,HIGH(-(518))
001723 93fa      	ST   -Y,R31
001724 93ea      	ST   -Y,R30
001725 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x6E:
                +
001726 01de     +MOVW R26 , R28
001727 5cae     +SUBI R26 , LOW ( - 562 )
001728 4fbd     +SBCI R27 , HIGH ( - 562 )
001729 900d     +LD R0 , X +
00172a 91bc     +LD R27 , X
00172b 2da0     +MOV R26 , R0
                 	__GETW2SX 562
00172c 940e 10ab 	CALL _pf_opendir
00172e 2f1e      	MOV  R17,R30
00172f 3010      	CPI  R17,0
001730 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x6F:
                +
001731 01de     +MOVW R26 , R28
001732 5da2     +SUBI R26 , LOW ( - 558 )
001733 4fbd     +SBCI R27 , HIGH ( - 558 )
001734 900d     +LD R0 , X +
001735 91bc     +LD R27 , X
001736 2da0     +MOV R26 , R0
                 	__GETW2SX 558
001737 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x70:
001738 01de      	MOVW R26,R28
001739 5ea8      	SUBI R26,LOW(-(536))
00173a 4fbd      	SBCI R27,HIGH(-(536))
00173b 940e 10db 	CALL _pf_readdir
00173d 2f1e      	MOV  R17,R30
00173e 3010      	CPI  R17,0
00173f 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x71:
001740 01fe      	MOVW R30,R28
001741 5eea      	SUBI R30,LOW(-(534))
001742 4ffd      	SBCI R31,HIGH(-(534))
001743 9639      	ADIW R30,9
001744 0fe4      	ADD  R30,R20
001745 1ff5      	ADC  R31,R21
001746 8010      	LD   R1,Z
001747 01fa      	MOVW R30,R20
001748 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x72:
001749 01fe      	MOVW R30,R28
00174a 5fe8      	SUBI R30,LOW(-(520))
00174b 4ffd      	SBCI R31,HIGH(-(520))
00174c 963c      	ADIW R30,12
00174d 01df      	MOVW R26,R30
00174e 940e 1862 	CALL __GETD1P
001750 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x73:
                +
001751 01de     +MOVW R26 , R28
001752 5da4     +SUBI R26 , LOW ( - 556 )
001753 4fbd     +SBCI R27 , HIGH ( - 556 )
001754 900d     +LD R0 , X +
001755 91bc     +LD R27 , X
001756 2da0     +MOV R26 , R0
                 	__GETW2SX 556
001757 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:11 WORDS
                 SUBOPT_0x74:
                +
001758 01fe     +MOVW R30 , R28
001759 5fea     +SUBI R30 , LOW ( - 518 )
00175a 4ffd     +SBCI R31 , HIGH ( - 518 )
00175b 9001     +LD R0 , Z +
00175c 81f0     +LD R31 , Z
00175d 2de0     +MOV R30 , R0
                 	__GETW1SX 518
00175e 9731      	SBIW R30,1
00175f 0fee      	LSL  R30
001760 1fff      	ROL  R31
001761 940e 17d7 	CALL __LSLW4
001763 70f1      	ANDI R31,HIGH(0x1FF)
001764 0fe4      	ADD  R30,R20
001765 1ff5      	ADC  R31,R21
001766 01de      	MOVW R26,R28
001767 9616      	ADIW R26,6
001768 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x75:
001769 940e 0764 	CALL _disk_writep
00176b 2f1e      	MOV  R17,R30
00176c 3010      	CPI  R17,0
00176d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x76:
00176e 940e 1868 	CALL __GETD1P_INC
001770 de18      	RCALL SUBOPT_0x30
001771 940e 1872 	CALL __PUTDP1_DEC
001773 cf9a      	RJMP SUBOPT_0x6A
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x77:
001774 932a      	ST   -Y,R18
001775 85af      	LDD  R26,Y+15
001776 89b8      	LDD  R27,Y+15+1
001777 89e9      	LDD  R30,Y+17
001778 89fa      	LDD  R31,Y+17+1
001779 9509      	ICALL
00177a 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x78:
00177b 89ea      	LDD  R30,Y+18
00177c 89fb      	LDD  R31,Y+18+1
00177d 9734      	SBIW R30,4
00177e 8bea      	STD  Y+18,R30
00177f 8bfb      	STD  Y+18+1,R31
001780 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x79:
001781 85af      	LDD  R26,Y+15
001782 89b8      	LDD  R27,Y+15+1
001783 89e9      	LDD  R30,Y+17
001784 89fa      	LDD  R31,Y+17+1
001785 9509      	ICALL
001786 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x7A:
001787 89aa      	LDD  R26,Y+18
001788 89bb      	LDD  R27,Y+18+1
001789 9614      	ADIW R26,4
00178a 940e 185e 	CALL __GETW1P
00178c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x7B:
00178d 940e 13b6 	CALL __lcd_write_data
00178f e0a3      	LDI  R26,LOW(3)
001790 e0b0      	LDI  R27,0
001791 940c 179b 	JMP  _delay_ms
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x7C:
001793 e3a0      	LDI  R26,LOW(48)
001794 940e 13a2 	CALL __lcd_write_nibble_G103
                +
001796 ef8a     +LDI R24 , LOW ( 250 )
001797 e090     +LDI R25 , HIGH ( 250 )
                +__DELAY_USW_LOOP :
001798 9701     +SBIW R24 , 1
001799 f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 250
00179a 9508      	RET
                 
                 
                 	.CSEG
                 _delay_ms:
00179b 9610      	adiw r26,0
00179c f039      	breq __delay_ms1
                 __delay_ms0:
                +
00179d ec84     +LDI R24 , LOW ( 0x9C4 )
00179e e099     +LDI R25 , HIGH ( 0x9C4 )
                +__DELAY_USW_LOOP :
00179f 9701     +SBIW R24 , 1
0017a0 f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 0x9C4
0017a1 95a8      	wdr
0017a2 9711      	sbiw r26,1
0017a3 f7c9      	brne __delay_ms0
                 __delay_ms1:
0017a4 9508      	ret
                 
                 __ADDW2R15:
0017a5 2400      	CLR  R0
0017a6 0daf      	ADD  R26,R15
0017a7 1db0      	ADC  R27,R0
0017a8 9508      	RET
                 
                 __ADDD12:
0017a9 0fea      	ADD  R30,R26
0017aa 1ffb      	ADC  R31,R27
0017ab 1f68      	ADC  R22,R24
0017ac 1f79      	ADC  R23,R25
0017ad 9508      	RET
                 
                 __ADDD21:
0017ae 0fae      	ADD  R26,R30
0017af 1fbf      	ADC  R27,R31
0017b0 1f86      	ADC  R24,R22
0017b1 1f97      	ADC  R25,R23
0017b2 9508      	RET
                 
                 __SUBD12:
0017b3 1bea      	SUB  R30,R26
0017b4 0bfb      	SBC  R31,R27
0017b5 0b68      	SBC  R22,R24
0017b6 0b79      	SBC  R23,R25
0017b7 9508      	RET
                 
                 __SUBD21:
0017b8 1bae      	SUB  R26,R30
0017b9 0bbf      	SBC  R27,R31
0017ba 0b86      	SBC  R24,R22
0017bb 0b97      	SBC  R25,R23
0017bc 9508      	RET
                 
                 __ANDD12:
0017bd 23ea      	AND  R30,R26
0017be 23fb      	AND  R31,R27
0017bf 2368      	AND  R22,R24
0017c0 2379      	AND  R23,R25
0017c1 9508      	RET
                 
                 __ORD12:
0017c2 2bea      	OR   R30,R26
0017c3 2bfb      	OR   R31,R27
0017c4 2b68      	OR   R22,R24
0017c5 2b79      	OR   R23,R25
0017c6 9508      	RET
                 
                 __ANEGW1:
0017c7 95f1      	NEG  R31
0017c8 95e1      	NEG  R30
0017c9 40f0      	SBCI R31,0
0017ca 9508      	RET
                 
                 __LSRD12:
0017cb 23ee      	TST  R30
0017cc 2e0e      	MOV  R0,R30
0017cd 01fd      	MOVW R30,R26
0017ce 01bc      	MOVW R22,R24
0017cf f031      	BREQ __LSRD12R
                 __LSRD12L:
0017d0 9576      	LSR  R23
0017d1 9567      	ROR  R22
0017d2 95f7      	ROR  R31
0017d3 95e7      	ROR  R30
0017d4 940a      	DEC  R0
0017d5 f7d1      	BRNE __LSRD12L
                 __LSRD12R:
0017d6 9508      	RET
                 
                 __LSLW4:
0017d7 0fee      	LSL  R30
0017d8 1fff      	ROL  R31
                 __LSLW3:
0017d9 0fee      	LSL  R30
0017da 1fff      	ROL  R31
                 __LSLW2:
0017db 0fee      	LSL  R30
0017dc 1fff      	ROL  R31
0017dd 0fee      	LSL  R30
0017de 1fff      	ROL  R31
0017df 9508      	RET
                 
                 __LSRW4:
0017e0 95f6      	LSR  R31
0017e1 95e7      	ROR  R30
                 __LSRW3:
0017e2 95f6      	LSR  R31
0017e3 95e7      	ROR  R30
                 __LSRW2:
0017e4 95f6      	LSR  R31
0017e5 95e7      	ROR  R30
0017e6 95f6      	LSR  R31
0017e7 95e7      	ROR  R30
0017e8 9508      	RET
                 
                 __LSLD1:
0017e9 0fee      	LSL  R30
0017ea 1fff      	ROL  R31
0017eb 1f66      	ROL  R22
0017ec 1f77      	ROL  R23
0017ed 9508      	RET
                 
                 __LSRD16:
0017ee 2fe6      	MOV  R30,R22
0017ef 2ff7      	MOV  R31,R23
0017f0 e060      	LDI  R22,0
0017f1 e070      	LDI  R23,0
0017f2 9508      	RET
                 
                 __LSLD16:
0017f3 2f6e      	MOV  R22,R30
0017f4 2f7f      	MOV  R23,R31
0017f5 e0e0      	LDI  R30,0
0017f6 e0f0      	LDI  R31,0
0017f7 9508      	RET
                 
                 __CWD1:
0017f8 2f6f      	MOV  R22,R31
0017f9 0f66      	ADD  R22,R22
0017fa 0b66      	SBC  R22,R22
0017fb 2f76      	MOV  R23,R22
0017fc 9508      	RET
                 
                 __COMD1:
0017fd 95e0      	COM  R30
0017fe 95f0      	COM  R31
0017ff 9560      	COM  R22
001800 9570      	COM  R23
001801 9508      	RET
                 
                 __MULD12U:
001802 9f7a      	MUL  R23,R26
001803 2d70      	MOV  R23,R0
001804 9f6b      	MUL  R22,R27
001805 0d70      	ADD  R23,R0
001806 9ff8      	MUL  R31,R24
001807 0d70      	ADD  R23,R0
001808 9fe9      	MUL  R30,R25
001809 0d70      	ADD  R23,R0
00180a 9f6a      	MUL  R22,R26
00180b 2d60      	MOV  R22,R0
00180c 0d71      	ADD  R23,R1
00180d 9ffb      	MUL  R31,R27
00180e 0d60      	ADD  R22,R0
00180f 1d71      	ADC  R23,R1
001810 9fe8      	MUL  R30,R24
001811 0d60      	ADD  R22,R0
001812 1d71      	ADC  R23,R1
001813 2788      	CLR  R24
001814 9ffa      	MUL  R31,R26
001815 2df0      	MOV  R31,R0
001816 0d61      	ADD  R22,R1
001817 1f78      	ADC  R23,R24
001818 9feb      	MUL  R30,R27
001819 0df0      	ADD  R31,R0
00181a 1d61      	ADC  R22,R1
00181b 1f78      	ADC  R23,R24
00181c 9fea      	MUL  R30,R26
00181d 2de0      	MOV  R30,R0
00181e 0df1      	ADD  R31,R1
00181f 1f68      	ADC  R22,R24
001820 1f78      	ADC  R23,R24
001821 9508      	RET
                 
                 __DIVW21U:
001822 2400      	CLR  R0
001823 2411      	CLR  R1
001824 e190      	LDI  R25,16
                 __DIVW21U1:
001825 0faa      	LSL  R26
001826 1fbb      	ROL  R27
001827 1c00      	ROL  R0
001828 1c11      	ROL  R1
001829 1a0e      	SUB  R0,R30
00182a 0a1f      	SBC  R1,R31
00182b f418      	BRCC __DIVW21U2
00182c 0e0e      	ADD  R0,R30
00182d 1e1f      	ADC  R1,R31
00182e c001      	RJMP __DIVW21U3
                 __DIVW21U2:
00182f 60a1      	SBR  R26,1
                 __DIVW21U3:
001830 959a      	DEC  R25
001831 f799      	BRNE __DIVW21U1
001832 01fd      	MOVW R30,R26
001833 01d0      	MOVW R26,R0
001834 9508      	RET
                 
                 __DIVD21U:
001835 933f      	PUSH R19
001836 934f      	PUSH R20
001837 935f      	PUSH R21
001838 2400      	CLR  R0
001839 2411      	CLR  R1
00183a 2744      	CLR  R20
00183b 2755      	CLR  R21
00183c e230      	LDI  R19,32
                 __DIVD21U1:
00183d 0faa      	LSL  R26
00183e 1fbb      	ROL  R27
00183f 1f88      	ROL  R24
001840 1f99      	ROL  R25
001841 1c00      	ROL  R0
001842 1c11      	ROL  R1
001843 1f44      	ROL  R20
001844 1f55      	ROL  R21
001845 1a0e      	SUB  R0,R30
001846 0a1f      	SBC  R1,R31
001847 0b46      	SBC  R20,R22
001848 0b57      	SBC  R21,R23
001849 f428      	BRCC __DIVD21U2
00184a 0e0e      	ADD  R0,R30
00184b 1e1f      	ADC  R1,R31
00184c 1f46      	ADC  R20,R22
00184d 1f57      	ADC  R21,R23
00184e c001      	RJMP __DIVD21U3
                 __DIVD21U2:
00184f 60a1      	SBR  R26,1
                 __DIVD21U3:
001850 953a      	DEC  R19
001851 f759      	BRNE __DIVD21U1
001852 01fd      	MOVW R30,R26
001853 01bc      	MOVW R22,R24
001854 01d0      	MOVW R26,R0
001855 01ca      	MOVW R24,R20
001856 915f      	POP  R21
001857 914f      	POP  R20
001858 913f      	POP  R19
001859 9508      	RET
                 
                 __MODD21U:
00185a dfda      	RCALL __DIVD21U
00185b 01fd      	MOVW R30,R26
00185c 01bc      	MOVW R22,R24
00185d 9508      	RET
                 
                 __GETW1P:
00185e 91ed      	LD   R30,X+
00185f 91fc      	LD   R31,X
001860 9711      	SBIW R26,1
001861 9508      	RET
                 
                 __GETD1P:
001862 91ed      	LD   R30,X+
001863 91fd      	LD   R31,X+
001864 916d      	LD   R22,X+
001865 917c      	LD   R23,X
001866 9713      	SBIW R26,3
001867 9508      	RET
                 
                 __GETD1P_INC:
001868 91ed      	LD   R30,X+
001869 91fd      	LD   R31,X+
00186a 916d      	LD   R22,X+
00186b 917d      	LD   R23,X+
00186c 9508      	RET
                 
                 __PUTDP1:
00186d 93ed      	ST   X+,R30
00186e 93fd      	ST   X+,R31
00186f 936d      	ST   X+,R22
001870 937c      	ST   X,R23
001871 9508      	RET
                 
                 __PUTDP1_DEC:
001872 937e      	ST   -X,R23
001873 936e      	ST   -X,R22
001874 93fe      	ST   -X,R31
001875 93ee      	ST   -X,R30
001876 9508      	RET
                 
                 __GETW1PF:
001877 bf6b      	OUT  RAMPZ,R22
001878 9007      	ELPM R0,Z+
001879 91f6      	ELPM R31,Z
00187a 2de0      	MOV  R30,R0
00187b 9508      	RET
                 
                 __GETD1PF:
00187c bf6b      	OUT  RAMPZ,R22
00187d 9007      	ELPM R0,Z+
00187e 9017      	ELPM R1,Z+
00187f 9167      	ELPM R22,Z+
001880 9176      	ELPM R23,Z
001881 01f0      	MOVW R30,R0
001882 9508      	RET
                 
                 __GETD2PF:
001883 bf6b      	OUT  RAMPZ,R22
001884 91a7      	ELPM R26,Z+
001885 91b7      	ELPM R27,Z+
001886 9187      	ELPM R24,Z+
001887 9196      	ELPM R25,Z
001888 9508      	RET
                 
                 __GETD1S0:
001889 81e8      	LD   R30,Y
00188a 81f9      	LDD  R31,Y+1
00188b 816a      	LDD  R22,Y+2
00188c 817b      	LDD  R23,Y+3
00188d 9508      	RET
                 
                 __GETD2S0:
00188e 81a8      	LD   R26,Y
00188f 81b9      	LDD  R27,Y+1
001890 818a      	LDD  R24,Y+2
001891 819b      	LDD  R25,Y+3
001892 9508      	RET
                 
                 __PUTPARD1:
001893 937a      	ST   -Y,R23
001894 936a      	ST   -Y,R22
001895 93fa      	ST   -Y,R31
001896 93ea      	ST   -Y,R30
001897 9508      	RET
                 
                 __PUTPARD2:
001898 939a      	ST   -Y,R25
001899 938a      	ST   -Y,R24
00189a 93ba      	ST   -Y,R27
00189b 93aa      	ST   -Y,R26
00189c 9508      	RET
                 
                 __SWAPD12:
00189d 2e18      	MOV  R1,R24
00189e 2f86      	MOV  R24,R22
00189f 2d61      	MOV  R22,R1
0018a0 2e19      	MOV  R1,R25
0018a1 2f97      	MOV  R25,R23
0018a2 2d71      	MOV  R23,R1
                 
                 __SWAPW12:
0018a3 2e1b      	MOV  R1,R27
0018a4 2fbf      	MOV  R27,R31
0018a5 2df1      	MOV  R31,R1
                 
                 __SWAPB12:
0018a6 2e1a      	MOV  R1,R26
0018a7 2fae      	MOV  R26,R30
0018a8 2de1      	MOV  R30,R1
0018a9 9508      	RET
                 
                 __EEPROMRDB:
0018aa 99e1      	SBIC EECR,EEWE
0018ab cffe      	RJMP __EEPROMRDB
0018ac 93ff      	PUSH R31
0018ad b7ff      	IN   R31,SREG
0018ae 94f8      	CLI
0018af bbae      	OUT  EEARL,R26
0018b0 bbbf      	OUT  EEARH,R27
0018b1 9ae0      	SBI  EECR,EERE
0018b2 b3ed      	IN   R30,EEDR
0018b3 bfff      	OUT  SREG,R31
0018b4 91ff      	POP  R31
0018b5 9508      	RET
                 
                 __EEPROMWRD:
0018b6 d007      	RCALL __EEPROMWRW
0018b7 9612      	ADIW R26,2
0018b8 010f      	MOVW R0,R30
0018b9 01fb      	MOVW R30,R22
0018ba d003      	RCALL __EEPROMWRW
0018bb 01f0      	MOVW R30,R0
0018bc 9712      	SBIW R26,2
0018bd 9508      	RET
                 
                 __EEPROMWRW:
0018be d007      	RCALL __EEPROMWRB
0018bf 9611      	ADIW R26,1
0018c0 93ef      	PUSH R30
0018c1 2fef      	MOV  R30,R31
0018c2 d003      	RCALL __EEPROMWRB
0018c3 91ef      	POP  R30
0018c4 9711      	SBIW R26,1
0018c5 9508      	RET
                 
                 __EEPROMWRB:
0018c6 9be1      	SBIS EECR,EEWE
0018c7 c002      	RJMP __EEPROMWRB1
0018c8 95a8      	WDR
0018c9 cffc      	RJMP __EEPROMWRB
                 __EEPROMWRB1:
0018ca b79f      	IN   R25,SREG
0018cb 94f8      	CLI
0018cc bbae      	OUT  EEARL,R26
0018cd bbbf      	OUT  EEARH,R27
0018ce 9ae0      	SBI  EECR,EERE
0018cf b38d      	IN   R24,EEDR
0018d0 17e8      	CP   R30,R24
0018d1 f019      	BREQ __EEPROMWRB0
0018d2 bbed      	OUT  EEDR,R30
0018d3 9ae2      	SBI  EECR,EEMWE
0018d4 9ae1      	SBI  EECR,EEWE
                 __EEPROMWRB0:
0018d5 bf9f      	OUT  SREG,R25
0018d6 9508      	RET
                 
                 __CPD10:
0018d7 9730      	SBIW R30,0
0018d8 4060      	SBCI R22,0
0018d9 4070      	SBCI R23,0
0018da 9508      	RET
                 
                 __CPW02:
0018db 2400      	CLR  R0
0018dc 160a      	CP   R0,R26
0018dd 060b      	CPC  R0,R27
0018de 9508      	RET
                 
                 __CPD02:
0018df 2400      	CLR  R0
0018e0 160a      	CP   R0,R26
0018e1 060b      	CPC  R0,R27
0018e2 0608      	CPC  R0,R24
0018e3 0609      	CPC  R0,R25
0018e4 9508      	RET
                 
                 __CPD12:
0018e5 17ea      	CP   R30,R26
0018e6 07fb      	CPC  R31,R27
0018e7 0768      	CPC  R22,R24
0018e8 0779      	CPC  R23,R25
0018e9 9508      	RET
                 
                 __CPD21:
0018ea 17ae      	CP   R26,R30
0018eb 07bf      	CPC  R27,R31
0018ec 0786      	CPC  R24,R22
0018ed 0797      	CPC  R25,R23
0018ee 9508      	RET
                 
                 __SAVELOCR6:
0018ef 935a      	ST   -Y,R21
                 __SAVELOCR5:
0018f0 934a      	ST   -Y,R20
                 __SAVELOCR4:
0018f1 933a      	ST   -Y,R19
                 __SAVELOCR3:
0018f2 932a      	ST   -Y,R18
                 __SAVELOCR2:
0018f3 931a      	ST   -Y,R17
0018f4 930a      	ST   -Y,R16
0018f5 9508      	RET
                 
                 __LOADLOCR6:
0018f6 815d      	LDD  R21,Y+5
                 __LOADLOCR5:
0018f7 814c      	LDD  R20,Y+4
                 __LOADLOCR4:
0018f8 813b      	LDD  R19,Y+3
                 __LOADLOCR3:
0018f9 812a      	LDD  R18,Y+2
                 __LOADLOCR2:
0018fa 8119      	LDD  R17,Y+1
0018fb 8108      	LD   R16,Y
0018fc 9508      	RET
                 
                 __INITLOCB:
                 __INITLOCW:
0018fd 0fac      	ADD  R26,R28
0018fe 1fbd      	ADC  R27,R29
0018ff bf6b      	OUT  RAMPZ,R22
                 __INITLOC0:
001900 9007      	ELPM R0,Z+
001901 920d      	ST   X+,R0
001902 958a      	DEC  R24
001903 f7e1      	BRNE __INITLOC0
001904 9508      	RET
                 
                 ;END OF CODE MARKER
                 __END_OF_CODE:


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

ATmega128 register use summary:
r0 : 118 r1 :  31 r2 :   0 r3 :   0 r4 :   0 r5 :   0 r6 :   4 r7 :  19 
r8 :   3 r9 :   0 r10:   1 r11:   0 r12:   1 r13:   0 r14:   0 r15:   4 
r16: 141 r17: 206 r18: 119 r19:  71 r20:  96 r21:  72 r22: 180 r23: 130 
r24: 143 r25:  98 r26: 685 r27: 327 r28: 117 r29:  13 r30:1113 r31: 442 
x  : 161 y  : 911 z  : 136 
Registers used: 27 out of 35 (77.1%)

ATmega128 instruction use summary:
.lds  :   0 .lds.l:   0 .sts  :   0 .sts.l:   0 adc   :  50 add   :  49 
adiw  : 160 and   :   6 andi  :  52 asr   :   0 bclr  :   0 bld   :   0 
brbc  :   0 brbs  :   0 brcc  :   2 brcs  :   0 break :   0 breq  : 107 
brge  :   6 brhc  :   0 brhs  :   0 brid  :   0 brie  :   0 brlo  :  32 
brlt  :   0 brmi  :   0 brne  : 153 brpl  :   2 brsh  :  30 brtc  :   0 
brts  :   1 brvc  :   0 brvs  :   0 bset  :   0 bst   :   0 call  : 687 
cbi   :  17 cbr   :   0 clc   :   0 clh   :   0 cli   :   4 cln   :   0 
clr   :  70 cls   :   0 clt   :   1 clv   :   0 clz   :   0 com   :   6 
cp    :  28 cpc   :  56 cpi   : 164 cpse  :   0 dec   :   9 des   :   0 
elpm  :  26 eor   :   0 fmul  :   0 fmuls :   0 fmulsu:   0 icall :   5 
ijmp  :   0 in    :  13 inc   :   2 jmp   :  51 ld    : 131 ldd   : 618 
ldi   : 594 lds   :  24 lpm   :   0 lsl   :  11 lsr   :   6 mov   : 138 
movw  : 260 mul   :  11 muls  :   0 mulsu :   0 neg   :   2 nop   :   0 
or    :  19 ori   :  10 out   :  39 pop   :  59 push  :  59 rcall : 112 
ret   : 191 reti  :   0 rjmp  : 274 rol   :  20 ror   :   8 sbc   :  22 
sbci  :  92 sbi   :  15 sbic  :   2 sbis  :   4 sbiw  :  77 sbr   :   2 
sbrc  :   2 sbrs  :  12 sec   :   0 seh   :   0 sei   :   1 sen   :   0 
ser   :   0 ses   :   0 set   :   1 sev   :   0 sez   :   0 sleep :   0 
spm   :   0 st    : 288 std   : 145 sts   :  14 sub   :  15 subi  : 102 
swap  :   1 tst   :   8 wdr   :   2 
Instructions used: 67 out of 117 (57.3%)

ATmega128 memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x00320a  11912    898  12810  131072   9.8%
[.dseg] 0x000100 0x000b1d      0    509    509    4096  12.4%
[.eseg] 0x000000 0x000111      0    263    263    4096   6.4%

Assembly complete, 0 errors, 13 warnings
